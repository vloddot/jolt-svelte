import{s as P,c as k,n as g}from"./scheduler.9b2bc230.js";import{S as T,i as q,g as U,r as w,s as z,m as B,h as j,j as N,u as C,c as F,n as H,f as p,k as d,a as y,x as S,v as D,o as J,d as m,t as _,w as I,e as b,p as L,b as R}from"./index.6c81ac7e.js";import{a as O,h as A,u as Q,g as V,b as E}from"./util.591b1810.js";import{g as v,a as W,b as X,c as Y}from"./context.3f5e8c52.js";import{U as Z}from"./UserProfilePicture.4245f318.js";import{a as $,s as x}from"./context.fa34f1f8.js";import{$ as ee}from"./runtime.esm.a3f7b725.js";function ne(s){let n,t,e,a,r,o,h,i;return e=new Z({props:{src:s[0],name:s[2],width:s[3],height:s[4]}}),{c(){n=U("div"),t=U("a"),w(e.$$.fragment),a=z(),r=B(s[1]),this.h()},l(l){n=j(l,"DIV",{role:!0,class:!0});var f=N(n);t=j(f,"A",{class:!0,href:!0});var c=N(t);C(e.$$.fragment,c),a=F(c),r=H(c,s[1]),c.forEach(p),f.forEach(p),this.h()},h(){d(t,"class","p-2 block"),d(t,"href",o=s[7]==null?`/channels/${s[5]}`:`/servers/${s[7]}/channels/${s[5]}`),d(n,"role","listitem"),d(n,"class",h=s[6]==s[5]?"bg-gray-400":"hover:bg-gray-600")},m(l,f){y(l,n,f),S(n,t),D(e,t,null),S(t,a),S(t,r),i=!0},p(l,[f]){const c={};f&1&&(c.src=l[0]),f&4&&(c.name=l[2]),f&8&&(c.width=l[3]),f&16&&(c.height=l[4]),e.$set(c),(!i||f&2)&&J(r,l[1]),(!i||f&160&&o!==(o=l[7]==null?`/channels/${l[5]}`:`/servers/${l[7]}/channels/${l[5]}`))&&d(t,"href",o),(!i||f&96&&h!==(h=l[6]==l[5]?"bg-gray-400":"hover:bg-gray-600"))&&d(n,"class",h)},i(l){i||(m(e.$$.fragment,l),i=!0)},o(l){_(e.$$.fragment,l),i=!1},d(l){l&&p(n),I(e)}}}function te(s,n,t){let e,a,{src:r}=n,{name:o}=n,{alt:h=o}=n,{width:i}=n,{height:l}=n,{id:f}=n;const c=v($);k(s,c,u=>t(7,a=u));const M=v(x);return k(s,M,u=>t(6,e=u)),s.$$set=u=>{"src"in u&&t(0,r=u.src),"name"in u&&t(1,o=u.name),"alt"in u&&t(2,h=u.alt),"width"in u&&t(3,i=u.width),"height"in u&&t(4,l=u.height),"id"in u&&t(5,f=u.id)},[r,o,h,i,l,f,e,a,c,M]}class K extends T{constructor(n){super(),q(this,n,te,ne,P,{src:0,name:1,alt:2,width:3,height:4,id:5})}}function ae(s){let n,t;return n=new K({props:{src:s[7](s[0]),name:s[0].channel_type=="SavedMessages"?s[3]("channel.notes"):s[0].name,width:24,height:24,id:s[0]._id}}),{c(){w(n.$$.fragment)},l(e){C(n.$$.fragment,e)},m(e,a){D(n,e,a),t=!0},p(e,a){const r={};a&1&&(r.src=e[7](e[0])),a&9&&(r.name=e[0].channel_type=="SavedMessages"?e[3]("channel.notes"):e[0].name),a&1&&(r.id=e[0]._id),n.$set(r)},i(e){t||(m(n.$$.fragment,e),t=!0)},o(e){_(n.$$.fragment,e),t=!1},d(e){I(n,e)}}}function se(s){let n,t,e=s[0].active&&G(s);return{c(){e&&e.c(),n=b()},l(a){e&&e.l(a),n=b()},m(a,r){e&&e.m(a,r),y(a,n,r),t=!0},p(a,r){a[0].active?e?(e.p(a,r),r&1&&m(e,1)):(e=G(a),e.c(),m(e,1),e.m(n.parentNode,n)):e&&(L(),_(e,1,1,()=>{e=null}),R())},i(a){t||(m(e),t=!0)},o(a){_(e),t=!1},d(a){a&&p(n),e&&e.d(a)}}}function G(s){let n,t,e,a={ctx:s,current:null,token:null,hasCatch:!0,pending:le,then:ie,catch:re,value:8,blocks:[,,,]};return A(t=s[6].api.fetchUser(s[0].recipients[0]==s[2].user_id?s[0].recipients[1]:s[0].recipients[0]),a),{c(){n=b(),a.block.c()},l(r){n=b(),a.block.l(r)},m(r,o){y(r,n,o),a.block.m(r,a.anchor=o),a.mount=()=>n.parentNode,a.anchor=n,e=!0},p(r,o){s=r,a.ctx=s,o&5&&t!==(t=s[6].api.fetchUser(s[0].recipients[0]==s[2].user_id?s[0].recipients[1]:s[0].recipients[0]))&&A(t,a)||Q(a,s,o)},i(r){e||(m(a.block),e=!0)},o(r){for(let o=0;o<3;o+=1){const h=a.blocks[o];_(h)}e=!1},d(r){r&&p(n),a.block.d(r),a.token=null,a=null}}}function re(s){let n,t;return n=new K({props:{src:"/user.svg",name:"<"+s[3]("user.unknown")+">",alt:s[3]("user.unknown"),width:32,height:32,id:s[0]._id}}),{c(){w(n.$$.fragment)},l(e){C(n.$$.fragment,e)},m(e,a){D(n,e,a),t=!0},p(e,a){const r={};a&8&&(r.name="<"+e[3]("user.unknown")+">"),a&8&&(r.alt=e[3]("user.unknown")),a&1&&(r.id=e[0]._id),n.$set(r)},i(e){t||(m(n.$$.fragment,e),t=!0)},o(e){_(n.$$.fragment,e),t=!1},d(e){I(n,e)}}}function ie(s){let n,t;return n=new K({props:{src:s[1]["jolt:low-data-mode"]?"/user.svg":V(s[8]),name:E(s[8]),width:32,height:32,id:s[0]._id}}),{c(){w(n.$$.fragment)},l(e){C(n.$$.fragment,e)},m(e,a){D(n,e,a),t=!0},p(e,a){const r={};a&7&&(r.src=e[1]["jolt:low-data-mode"]?"/user.svg":V(e[8])),a&5&&(r.name=E(e[8])),a&1&&(r.id=e[0]._id),n.$set(r)},i(e){t||(m(n.$$.fragment,e),t=!0)},o(e){_(n.$$.fragment,e),t=!1},d(e){I(n,e)}}}function le(s){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function oe(s){let n,t,e,a;const r=[se,ae],o=[];function h(i,l){return i[0].channel_type=="DirectMessage"?0:i[0].channel_type=="TextChannel"||i[0].channel_type=="VoiceChannel"||i[0].channel_type=="Group"||i[0].channel_type=="SavedMessages"?1:-1}return~(n=h(s))&&(t=o[n]=r[n](s)),{c(){t&&t.c(),e=b()},l(i){t&&t.l(i),e=b()},m(i,l){~n&&o[n].m(i,l),y(i,e,l),a=!0},p(i,[l]){let f=n;n=h(i),n===f?~n&&o[n].p(i,l):(t&&(L(),_(o[f],1,1,()=>{o[f]=null}),R()),~n?(t=o[n],t?t.p(i,l):(t=o[n]=r[n](i),t.c()),m(t,1),t.m(e.parentNode,e)):t=null)},i(i){a||(m(t),a=!0)},o(i){_(t),a=!1},d(i){i&&p(e),~n&&o[n].d(i)}}}function ce(s,n,t){let e,a,r;k(s,ee,c=>t(3,r=c));const o=v(W);k(s,o,c=>t(1,e=c));const h=v(X);k(s,h,c=>t(2,a=c));const i=v(Y);function l(c){if(c.channel_type=="SavedMessages")return"/note.svg";if(c.icon!=null&&!e["jolt:low-data-mode"])return O(c.icon);switch(c.channel_type){case"Group":return"/group.svg";case"TextChannel":return"/hash.svg";case"VoiceChannel":return"/volume.svg"}}let{channel:f}=n;return s.$$set=c=>{"channel"in c&&t(0,f=c.channel)},[f,e,a,r,o,h,i,l]}class pe extends T{constructor(n){super(),q(this,n,ce,oe,P,{channel:0})}}export{pe as C};
