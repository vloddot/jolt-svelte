import{s as ve,c as ee,n as m,d as Fe,u as Ke,g as Ge,e as He,r as Se,h as At,b as Ie,i as St,f as ae,j as De,k as jt,o as Pt,l as Vt,t as Ot}from"./scheduler.236f7e20.js";import{S as $e,i as we,g as C,h as N,j as L,f as _,k as $,a as b,d as y,p as le,t as D,b as ne,e as W,s as V,c as O,m as E,n as I,x as d,o as K,r as oe,u as se,v as fe,w as ce,z as ue,C as Bt,D as Lt,A as Me,l as Ae,y as ye,E as ze}from"./index.bae008e4.js";import{h as ie,u as ge}from"./await_block.16e956eb.js";import{e as _e}from"./each.e59479a4.js";import{b as de}from"./paths.1834ca32.js";import{g as te,c as je,a as Ce,b as Rt}from"./context.0e1cc50f.js";import{g as be,b as he,a as Ft}from"./util.28502bf1.js";import{U as Ee}from"./UserProfilePicture.d1bcb4d0.js";import{X as Ne,e as Kt,Y as Gt}from"./runtime.esm.6158813e.js";import{w as Ue}from"./index.96f01ed2.js";import{a as Nt,s as Tt}from"./context.fa34f1f8.js";import{d as Ht}from"./index.esm.4b6e8736.js";async function Ve(r,e,n){if(n=="0".repeat(26))return;let l;return Array.isArray(e)?l=e.find(t=>t._id==n):l=e.get(n),l??await r.fetchUser(n)}const Oe=Symbol(),Dt=Symbol(),Be=Symbol(),Ut=Symbol();function qe(r){const e=he(r[14]);r[15]=e}function Xe(r){var o;let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:Jt,then:qt,catch:zt,value:13,blocks:[,,,]};return ie(n=((o=r[3])==null?void 0:o.find(r[12]))??r[6].api.fetchMessage(r[2],r[0]),t),{c(){e=W(),t.block.c()},l(i){e=W(),t.block.l(i)},m(i,f){b(i,e,f),t.block.m(i,t.anchor=f),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(i,f){var s;r=i,t.ctx=r,f&13&&n!==(n=((s=r[3])==null?void 0:s.find(r[12]))??r[6].api.fetchMessage(r[2],r[0]))&&ie(n,t)||ge(t,r,f)},i(i){l||(y(t.block),l=!0)},o(i){for(let f=0;f<3;f+=1){const s=t.blocks[f];D(s)}l=!1},d(i){i&&_(e),t.block.d(i),t.token=null,t=null}}}function zt(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function qt(r){let e,n,l,t=!r[4]["jolt:low-data-mode"]&&We(r),o=r[13].content!=null&&Ye(r);return{c(){t&&t.c(),e=V(),o&&o.c(),n=W()},l(i){t&&t.l(i),e=O(i),o&&o.l(i),n=W()},m(i,f){t&&t.m(i,f),b(i,e,f),o&&o.m(i,f),b(i,n,f),l=!0},p(i,f){i[4]["jolt:low-data-mode"]?t&&(le(),D(t,1,1,()=>{t=null}),ne()):t?(t.p(i,f),f&16&&y(t,1)):(t=We(i),t.c(),y(t,1),t.m(e.parentNode,e)),i[13].content!=null?o?o.p(i,f):(o=Ye(i),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i(i){l||(y(t),l=!0)},o(i){D(t),l=!1},d(i){i&&(_(e),_(n)),t&&t.d(i),o&&o.d(i)}}}function We(r){let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:Yt,then:Wt,catch:Xt,value:14,blocks:[,,,]};return ie(e=Ve(r[6].api,r[5]??r[6].api.cache.users,r[13].author),t),{c(){t.block.c(),n=E(":")},l(o){t.block.l(o),n=I(o,":")},m(o,i){t.block.m(o,t.anchor=i),t.mount=()=>n.parentNode,t.anchor=n,b(o,n,i),l=!0},p(o,i){r=o,t.ctx=r,i&45&&e!==(e=Ve(r[6].api,r[5]??r[6].api.cache.users,r[13].author))&&ie(e,t)||ge(t,r,i)},i(o){l||(y(t.block),l=!0)},o(o){for(let i=0;i<3;i+=1){const f=t.blocks[i];D(f)}l=!1},d(o){o&&_(n),t.block.d(o),t.token=null,t=null}}}function Xt(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Wt(r){qe(r);let e,n,l=r[15]+"",t,o,i;return e=new Ee({props:{src:be(r[14]),name:r[15],width:24,height:24}}),{c(){oe(e.$$.fragment),n=V(),t=E(l),o=V()},l(f){se(e.$$.fragment,f),n=O(f),t=I(f,l),o=O(f)},m(f,s){fe(e,f,s),b(f,n,s),b(f,t,s),b(f,o,s),i=!0},p(f,s){qe(f);const u={};s&45&&(u.src=be(f[14])),s&45&&(u.name=f[15]),e.$set(u),(!i||s&45)&&l!==(l=f[15]+"")&&K(t,l)},i(f){i||(y(e.$$.fragment,f),i=!0)},o(f){D(e.$$.fragment,f),i=!1},d(f){f&&(_(n),_(t),_(o)),ce(e,f)}}}function Yt(r){let e;return{c(){e=E(`<Unknown User>
				`)},l(n){e=I(n,`<Unknown User>
				`)},m(n,l){b(n,e,l)},p:m,i:m,o:m,d(n){n&&_(e)}}}function Ye(r){let e,n=r[13].content+"",l;return{c(){e=C("span"),l=E(n),this.h()},l(t){e=N(t,"SPAN",{class:!0});var o=L(e);l=I(o,n),o.forEach(_),this.h()},h(){$(e,"class","text-gray-600")},m(t,o){b(t,e,o),d(e,l)},p(t,o){o&13&&n!==(n=t[13].content+"")&&K(l,n)},d(t){t&&_(e)}}}function Jt(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Qt(r){let e,n,l,t=r[2]!=null&&Xe(r);return{c(){e=C("a"),t&&t.c(),this.h()},l(o){e=N(o,"A",{href:!0});var i=L(e);t&&t.l(i),i.forEach(_),this.h()},h(){$(e,"href",n=de+"/"+(r[1]==null?`channels/${r[2]}#${r[0]}`:`servers/${r[1]}/channels/${r[2]}#${r[0]}`))},m(o,i){b(o,e,i),t&&t.m(e,null),l=!0},p(o,[i]){o[2]!=null?t?(t.p(o,i),i&4&&y(t,1)):(t=Xe(o),t.c(),y(t,1),t.m(e,null)):t&&(le(),D(t,1,1,()=>{t=null}),ne()),(!l||i&7&&n!==(n=de+"/"+(o[1]==null?`channels/${o[2]}#${o[0]}`:`servers/${o[1]}/channels/${o[2]}#${o[0]}`)))&&$(e,"href",n)},i(o){l||(y(t),l=!0)},o(o){D(t),l=!1},d(o){o&&_(e),t&&t.d()}}}function Zt(r,e,n){let l,t,o,i,f;const s=te(je),u=te(Ce);ee(r,u,T=>n(4,i=T));const a=te(Nt);ee(r,a,T=>n(1,l=T));const c=te(Tt);ee(r,c,T=>n(2,t=T));const p=te(Oe);ee(r,p,T=>n(3,o=T));const R=te(Be);ee(r,R,T=>n(5,f=T));let{id:j}=e;const P=({_id:T})=>j==T;return r.$$set=T=>{"id"in T&&n(0,j=T.id)},[j,l,t,o,i,f,s,u,a,c,p,R,P]}class xt extends $e{constructor(e){super(),we(this,e,Zt,Qt,ve,{id:0})}}const el=r=>({}),Je=r=>({});function tl(r){let e,n,l,t,o,i,f,s,u,a,c=r[2]("confirm")+"",p,R,j,P=r[2]("cancel")+"",T,H,q,X;const x=r[4].header,Y=Fe(x,r,r[3],Je),F=r[4].default,Q=Fe(F,r,r[3],null);return{c(){e=C("dialog"),n=C("div"),Y&&Y.c(),l=V(),t=C("hr"),o=V(),Q&&Q.c(),i=V(),f=C("hr"),s=V(),u=C("form"),a=C("button"),p=E(c),R=V(),j=C("button"),T=E(P),this.h()},l(U){e=N(U,"DIALOG",{});var B=L(e);n=N(B,"DIV",{});var M=L(n);Y&&Y.l(M),l=O(M),t=N(M,"HR",{}),o=O(M),Q&&Q.l(M),i=O(M),f=N(M,"HR",{}),s=O(M),u=N(M,"FORM",{method:!0});var J=L(u);a=N(J,"BUTTON",{type:!0});var Z=L(a);p=I(Z,c),Z.forEach(_),R=O(J),j=N(J,"BUTTON",{type:!0});var S=L(j);T=I(S,P),S.forEach(_),J.forEach(_),M.forEach(_),B.forEach(_),this.h()},h(){$(a,"type","submit"),$(j,"type","reset"),$(u,"method","dialog")},m(U,B){b(U,e,B),d(e,n),Y&&Y.m(n,null),d(n,l),d(n,t),d(n,o),Q&&Q.m(n,null),d(n,i),d(n,f),d(n,s),d(n,u),d(u,a),d(a,p),d(u,R),d(u,j),d(j,T),r[7](e),H=!0,q||(X=[ue(j,"click",r[6]),ue(u,"submit",r[5]),ue(e,"close",r[8])],q=!0)},p(U,[B]){Y&&Y.p&&(!H||B&8)&&Ke(Y,x,U,U[3],H?He(x,U[3],B,el):Ge(U[3]),Je),Q&&Q.p&&(!H||B&8)&&Ke(Q,F,U,U[3],H?He(F,U[3],B,null):Ge(U[3]),null),(!H||B&4)&&c!==(c=U[2]("confirm")+"")&&K(p,c),(!H||B&4)&&P!==(P=U[2]("cancel")+"")&&K(T,P)},i(U){H||(y(Y,U),y(Q,U),H=!0)},o(U){D(Y,U),D(Q,U),H=!1},d(U){U&&_(e),Y&&Y.d(U),Q&&Q.d(U),r[7](null),q=!1,Se(X)}}}function ll(r,e,n){let l;ee(r,Ne,p=>n(2,l=p));let{$$slots:t={},$$scope:o}=e,{showModal:i}=e,f;function s(p){At.call(this,r,p)}const u=()=>n(0,i=!1);function a(p){Ie[p?"unshift":"push"](()=>{f=p,n(1,f)})}const c=()=>n(0,i=!1);return r.$$set=p=>{"showModal"in p&&n(0,i=p.showModal),"$$scope"in p&&n(3,o=p.$$scope)},r.$$.update=()=>{r.$$.dirty&3&&(i?f==null||f.showModal():f==null||f.close())},[i,f,l,o,t,s,u,a,c]}class nl extends $e{constructor(e){super(),we(this,e,ll,tl,ve,{showModal:0})}}function rl(r){let e,n="Are you sure you want to go to this link? External links can be dangerous.";return{c(){e=C("p"),e.textContent=n},l(l){e=N(l,"P",{"data-svelte-h":!0}),Me(e)!=="svelte-os1rtp"&&(e.textContent=n)},m(l,t){b(l,e,t)},p:m,d(l){l&&_(e)}}}function il(r){let e,n="External Link";return{c(){e=C("h1"),e.textContent=n,this.h()},l(l){e=N(l,"H1",{class:!0,slot:!0,"data-svelte-h":!0}),Me(e)!=="svelte-3ozcvb"&&(e.textContent=n),this.h()},h(){$(e,"class","text-3xl"),$(e,"slot","header")},m(l,t){b(l,e,t)},p:m,d(l){l&&_(e)}}}function ol(r){let e,n,l,t,o,i,f,s;function u(c){r[2](c)}let a={$$slots:{header:[il],default:[rl]},$$scope:{ctx:r}};return r[1]!==void 0&&(a.showModal=r[1]),e=new nl({props:a}),Ie.push(()=>Bt(e,"showModal",u)),e.$on("submit",r[3]),{c(){oe(e.$$.fragment),l=V(),t=C("a"),o=E(r[0]),this.h()},l(c){se(e.$$.fragment,c),l=O(c),t=N(c,"A",{href:!0,target:!0,rel:!0});var p=L(t);o=I(p,r[0]),p.forEach(_),this.h()},h(){$(t,"href",r[0]),$(t,"target","_blank"),$(t,"rel","noreferrer")},m(c,p){fe(e,c,p),b(c,l,p),b(c,t,p),d(t,o),i=!0,f||(s=ue(t,"click",Lt(r[4])),f=!0)},p(c,[p]){const R={};p&32&&(R.$$scope={dirty:p,ctx:c}),!n&&p&2&&(n=!0,R.showModal=c[1],St(()=>n=!1)),e.$set(R),(!i||p&1)&&K(o,c[0]),(!i||p&1)&&$(t,"href",c[0])},i(c){i||(y(e.$$.fragment,c),i=!0)},o(c){D(e.$$.fragment,c),i=!1},d(c){c&&(_(l),_(t)),ce(e,c),f=!1,s()}}}function sl(r,e,n){let{href:l}=e,t=!1;function o(s){t=s,n(1,t)}const i=()=>window.open(l),f=()=>n(1,t=!0);return r.$$set=s=>{"href"in s&&n(0,l=s.href)},[l,t,o,i,f]}class Te extends $e{constructor(e){super(),we(this,e,sl,ol,ve,{href:0})}}function fl(r){let e,n,l,t;const o=[ml,hl],i=[];function f(s,u){return s[2]["jolt:low-data-mode"]?0:1}return e=f(r),n=i[e]=o[e](r),{c(){n.c(),l=W()},l(s){n.l(s),l=W()},m(s,u){i[e].m(s,u),b(s,l,u),t=!0},p(s,u){let a=e;e=f(s),e===a?i[e].p(s,u):(le(),D(i[a],1,1,()=>{i[a]=null}),ne(),n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),y(n,1),n.m(l.parentNode,l))},i(s){t||(y(n),t=!0)},o(s){D(n),t=!1},d(s){s&&_(l),i[e].d(s)}}}function cl(r){let e,n,l=r[0].filename+"",t,o,i,f;return i=new Te({props:{href:r[1]}}),{c(){e=C("span"),n=E("[File "),t=E(l),o=E(`]
			`),oe(i.$$.fragment),this.h()},l(s){e=N(s,"SPAN",{class:!0});var u=L(e);n=I(u,"[File "),t=I(u,l),o=I(u,`]
			`),se(i.$$.fragment,u),u.forEach(_),this.h()},h(){$(e,"class","text-gray-500")},m(s,u){b(s,e,u),d(e,n),d(e,t),d(e,o),fe(i,e,null),f=!0},p(s,u){(!f||u&1)&&l!==(l=s[0].filename+"")&&K(t,l);const a={};u&2&&(a.href=s[1]),i.$set(a)},i(s){f||(y(i.$$.fragment,s),f=!0)},o(s){D(i.$$.fragment,s),f=!1},d(s){s&&_(e),ce(i)}}}function ul(r){let e,n,l;return{c(){e=C("audio"),n=C("source"),this.h()},l(t){e=N(t,"AUDIO",{});var o=L(e);n=N(o,"SOURCE",{src:!0}),o.forEach(_),this.h()},h(){ae(n.src,l=r[1])||$(n,"src",l),e.controls=!0},m(t,o){b(t,e,o),d(e,n)},p(t,o){o&2&&!ae(n.src,l=t[1])&&$(n,"src",l)},i:m,o:m,d(t){t&&_(e)}}}function al(r){let e,n,l;return{c(){e=C("video"),n=C("source"),this.h()},l(t){e=N(t,"VIDEO",{});var o=L(e);n=N(o,"SOURCE",{src:!0}),o.forEach(_),this.h()},h(){ae(n.src,l=r[1])||$(n,"src",l),e.controls=!0},m(t,o){b(t,e,o),d(e,n)},p(t,o){o&2&&!ae(n.src,l=t[1])&&$(n,"src",l)},i:m,o:m,d(t){t&&_(e)}}}function _l(r){let e,n,l,t;const o=[wl,$l],i=[];function f(s,u){return s[2]["jolt:low-data-mode"]?0:1}return e=f(r),n=i[e]=o[e](r),{c(){n.c(),l=W()},l(s){n.l(s),l=W()},m(s,u){i[e].m(s,u),b(s,l,u),t=!0},p(s,u){let a=e;e=f(s),e===a?i[e].p(s,u):(le(),D(i[a],1,1,()=>{i[a]=null}),ne(),n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),y(n,1),n.m(l.parentNode,l))},i(s){t||(y(n),t=!0)},o(s){D(n),t=!1},d(s){s&&_(l),i[e].d(s)}}}function hl(r){let e,n,l={ctx:r,current:null,token:null,hasCatch:!0,pending:vl,then:dl,catch:pl,value:5,error:7};return ie(n=fetch(r[1]),l),{c(){e=W(),l.block.c()},l(t){e=W(),l.block.l(t)},m(t,o){b(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(t,o){r=t,l.ctx=r,o&2&&n!==(n=fetch(r[1]))&&ie(n,l)||ge(l,r,o)},i:m,o:m,d(t){t&&_(e),l.block.d(t),l.token=null,l=null}}}function ml(r){let e,n,l,t,o;return l=new Te({props:{href:r[1]}}),{c(){e=C("span"),n=E("[Text "),oe(l.$$.fragment),t=E("]"),this.h()},l(i){e=N(i,"SPAN",{class:!0});var f=L(e);n=I(f,"[Text "),se(l.$$.fragment,f),t=I(f,"]"),f.forEach(_),this.h()},h(){$(e,"class","text-gray-500")},m(i,f){b(i,e,f),d(e,n),fe(l,e,null),d(e,t),o=!0},p(i,f){const s={};f&2&&(s.href=i[1]),l.$set(s)},i(i){o||(y(l.$$.fragment,i),o=!0)},o(i){D(l.$$.fragment,i),o=!1},d(i){i&&_(e),ce(l)}}}function pl(r){let e,n=r[3]("file.download.error")+"",l,t,o=r[0].filename+"",i,f,s=r[7]+"",u;return{c(){e=C("p"),l=E(n),t=V(),i=E(o),f=E(": "),u=E(s)},l(a){e=N(a,"P",{});var c=L(e);l=I(c,n),t=O(c),i=I(c,o),f=I(c,": "),u=I(c,s),c.forEach(_)},m(a,c){b(a,e,c),d(e,l),d(e,t),d(e,i),d(e,f),d(e,u)},p(a,c){c&8&&n!==(n=a[3]("file.download.error")+"")&&K(l,n),c&1&&o!==(o=a[0].filename+"")&&K(i,o),c&2&&s!==(s=a[7]+"")&&K(u,s)},d(a){a&&_(e)}}}function dl(r){let e,n,l={ctx:r,current:null,token:null,hasCatch:!1,pending:gl,then:kl,catch:bl,value:6};return ie(n=r[5].text(),l),{c(){e=W(),l.block.c()},l(t){e=W(),l.block.l(t)},m(t,o){b(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(t,o){r=t,l.ctx=r,o&2&&n!==(n=r[5].text())&&ie(n,l)||ge(l,r,o)},d(t){t&&_(e),l.block.d(t),l.token=null,l=null}}}function bl(r){return{c:m,l:m,m,p:m,d:m}}function kl(r){let e,n=r[6]+"",l;return{c(){e=C("p"),l=E(n)},l(t){e=N(t,"P",{});var o=L(e);l=I(o,n),o.forEach(_)},m(t,o){b(t,e,o),d(e,l)},p(t,o){o&2&&n!==(n=t[6]+"")&&K(l,n)},d(t){t&&_(e)}}}function gl(r){return{c:m,l:m,m,p:m,d:m}}function vl(r){return{c:m,l:m,m,p:m,d:m}}function $l(r){let e,n,l;return{c(){e=C("img"),this.h()},l(t){e=N(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ae(e.src,n=r[1])||$(e,"src",n),$(e,"alt",l=r[0].filename),$(e,"class","max-w-xl max-h-xl")},m(t,o){b(t,e,o)},p(t,o){o&2&&!ae(e.src,n=t[1])&&$(e,"src",n),o&1&&l!==(l=t[0].filename)&&$(e,"alt",l)},i:m,o:m,d(t){t&&_(e)}}}function wl(r){let e,n,l,t,o;return l=new Te({props:{href:r[1]}}),{c(){e=C("span"),n=E("[Image "),oe(l.$$.fragment),t=E("]"),this.h()},l(i){e=N(i,"SPAN",{class:!0});var f=L(e);n=I(f,"[Image "),se(l.$$.fragment,f),t=I(f,"]"),f.forEach(_),this.h()},h(){$(e,"class","text-gray-500")},m(i,f){b(i,e,f),d(e,n),fe(l,e,null),d(e,t),o=!0},p(i,f){const s={};f&2&&(s.href=i[1]),l.$set(s)},i(i){o||(y(l.$$.fragment,i),o=!0)},o(i){D(l.$$.fragment,i),o=!1},d(i){i&&_(e),ce(l)}}}function yl(r){let e,n,l,t;const o=[_l,al,ul,cl,fl],i=[];function f(s,u){return s[0].metadata.type=="Image"?0:s[0].metadata.type=="Video"?1:s[0].metadata.type=="Audio"?2:s[0].metadata.type=="File"?3:s[0].metadata.type=="Text"?4:-1}return~(n=f(r))&&(l=i[n]=o[n](r)),{c(){e=C("div"),l&&l.c()},l(s){e=N(s,"DIV",{});var u=L(e);l&&l.l(u),u.forEach(_)},m(s,u){b(s,e,u),~n&&i[n].m(e,null),t=!0},p(s,[u]){let a=n;n=f(s),n===a?~n&&i[n].p(s,u):(l&&(le(),D(i[a],1,1,()=>{i[a]=null}),ne()),~n?(l=i[n],l?l.p(s,u):(l=i[n]=o[n](s),l.c()),y(l,1),l.m(e,null)):l=null)},i(s){t||(y(l),t=!0)},o(s){D(l),t=!1},d(s){s&&_(e),~n&&i[n].d()}}}function El(r,e,n){let l,t,o;ee(r,Ne,s=>n(3,o=s));const i=te(Ce);ee(r,i,s=>n(2,t=s));let{attachment:f}=e;return r.$$set=s=>{"attachment"in s&&n(0,f=s.attachment)},r.$$.update=()=>{r.$$.dirty&1&&n(1,l=Ft(f))},[f,l,t,o,i]}class Il extends $e{constructor(e){super(),we(this,e,El,yl,ve,{attachment:0})}}function Ml(r){let e,n="oop website embed, can't handle that :(";return{c(){e=C("span"),e.textContent=n,this.h()},l(l){e=N(l,"SPAN",{class:!0,"data-svelte-h":!0}),Me(e)!=="svelte-1exisih"&&(e.textContent=n),this.h()},h(){$(e,"class","text-gray-600")},m(l,t){b(l,e,t)},p:m,i:m,o:m,d(l){l&&_(e)}}}function Cl(r){let e,n,l,t=r[0].icon_url&&!r[1]["jolt:low-data-mode"]&&Qe(r),o=r[0].title&&Ze(r),i=r[0].description&&xe(r);return{c(){e=C("div"),t&&t.c(),n=V(),o&&o.c(),l=V(),i&&i.c(),this.h()},l(f){e=N(f,"DIV",{style:!0});var s=L(e);t&&t.l(s),n=O(s),o&&o.l(s),l=O(s),i&&i.l(s),s.forEach(_),this.h()},h(){Ae(e,"background-color",r[0].colour)},m(f,s){b(f,e,s),t&&t.m(e,null),d(e,n),o&&o.m(e,null),d(e,l),i&&i.m(e,null)},p(f,s){f[0].icon_url&&!f[1]["jolt:low-data-mode"]?t?t.p(f,s):(t=Qe(f),t.c(),t.m(e,n)):t&&(t.d(1),t=null),f[0].title?o?o.p(f,s):(o=Ze(f),o.c(),o.m(e,l)):o&&(o.d(1),o=null),f[0].description?i?i.p(f,s):(i=xe(f),i.c(),i.m(e,null)):i&&(i.d(1),i=null),s&1&&Ae(e,"background-color",f[0].colour)},i:m,o:m,d(f){f&&_(e),t&&t.d(),o&&o.d(),i&&i.d()}}}function Nl(r){let e,n,l,t;const o=[Ul,Dl],i=[];function f(s,u){return s[1]["jolt:low-data-mode"]?0:1}return e=f(r),n=i[e]=o[e](r),{c(){n.c(),l=W()},l(s){n.l(s),l=W()},m(s,u){i[e].m(s,u),b(s,l,u),t=!0},p(s,u){let a=e;e=f(s),e===a?i[e].p(s,u):(le(),D(i[a],1,1,()=>{i[a]=null}),ne(),n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),y(n,1),n.m(l.parentNode,l))},i(s){t||(y(n),t=!0)},o(s){D(n),t=!1},d(s){s&&_(l),i[e].d(s)}}}function Tl(r){let e,n,l,t;const o=[Sl,Al],i=[];function f(s,u){return s[1]["jolt:low-data-mode"]?0:1}return e=f(r),n=i[e]=o[e](r),{c(){n.c(),l=W()},l(s){n.l(s),l=W()},m(s,u){i[e].m(s,u),b(s,l,u),t=!0},p(s,u){let a=e;e=f(s),e===a?i[e].p(s,u):(le(),D(i[a],1,1,()=>{i[a]=null}),ne(),n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),y(n,1),n.m(l.parentNode,l))},i(s){t||(y(n),t=!0)},o(s){D(n),t=!1},d(s){s&&_(l),i[e].d(s)}}}function Qe(r){let e,n,l;return{c(){e=C("img"),this.h()},l(t){e=N(t,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),this.h()},h(){ae(e.src,n=r[0].icon_url)||$(e,"src",n),$(e,"alt",l=r[0].title),$(e,"width","24"),$(e,"height","24"),$(e,"class","inline rounded-3xl")},m(t,o){b(t,e,o)},p(t,o){o&1&&!ae(e.src,n=t[0].icon_url)&&$(e,"src",n),o&1&&l!==(l=t[0].title)&&$(e,"alt",l)},d(t){t&&_(e)}}}function Ze(r){let e,n=r[0].title+"",l;return{c(){e=C("h1"),l=E(n),this.h()},l(t){e=N(t,"H1",{class:!0});var o=L(e);l=I(o,n),o.forEach(_),this.h()},h(){$(e,"class","text-gray-600")},m(t,o){b(t,e,o),d(e,l)},p(t,o){o&1&&n!==(n=t[0].title+"")&&K(l,n)},d(t){t&&_(e)}}}function xe(r){let e,n=r[0].description+"",l;return{c(){e=C("p"),l=E(n)},l(t){e=N(t,"P",{});var o=L(e);l=I(o,n),o.forEach(_)},m(t,o){b(t,e,o),d(e,l)},p(t,o){o&1&&n!==(n=t[0].description+"")&&K(l,n)},d(t){t&&_(e)}}}function Dl(r){let e,n,l,t,o;return{c(){e=C("video"),n=C("source"),this.h()},l(i){e=N(i,"VIDEO",{});var f=L(e);n=N(f,"SOURCE",{src:!0,width:!0,height:!0}),f.forEach(_),this.h()},h(){ae(n.src,l=r[0].url)||$(n,"src",l),$(n,"width",t=r[0].width),$(n,"height",o=r[0].height),e.controls=!0},m(i,f){b(i,e,f),d(e,n)},p(i,f){f&1&&!ae(n.src,l=i[0].url)&&$(n,"src",l),f&1&&t!==(t=i[0].width)&&$(n,"width",t),f&1&&o!==(o=i[0].height)&&$(n,"height",o)},i:m,o:m,d(i){i&&_(e)}}}function Ul(r){let e,n;return e=new Te({props:{href:r[0].url}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t&1&&(o.href=l[0].url),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function Al(r){let e,n,l,t;return{c(){e=C("img"),this.h()},l(o){e=N(o,"IMG",{src:!0,width:!0,height:!0}),this.h()},h(){ae(e.src,n=r[0].url)||$(e,"src",n),$(e,"width",l=r[0].width),$(e,"height",t=r[0].height)},m(o,i){b(o,e,i)},p(o,i){i&1&&!ae(e.src,n=o[0].url)&&$(e,"src",n),i&1&&l!==(l=o[0].width)&&$(e,"width",l),i&1&&t!==(t=o[0].height)&&$(e,"height",t)},i:m,o:m,d(o){o&&_(e)}}}function Sl(r){let e,n;return e=new Te({props:{href:r[0].url}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t&1&&(o.href=l[0].url),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function jl(r){let e,n,l,t;const o=[Tl,Nl,Cl,Ml],i=[];function f(s,u){return s[0].type=="Image"?0:s[0].type=="Video"?1:s[0].type=="Text"?2:s[0].type=="Website"?3:-1}return~(e=f(r))&&(n=i[e]=o[e](r)),{c(){n&&n.c(),l=W()},l(s){n&&n.l(s),l=W()},m(s,u){~e&&i[e].m(s,u),b(s,l,u),t=!0},p(s,[u]){let a=e;e=f(s),e===a?~e&&i[e].p(s,u):(n&&(le(),D(i[a],1,1,()=>{i[a]=null}),ne()),~e?(n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),y(n,1),n.m(l.parentNode,l)):n=null)},i(s){t||(y(n),t=!0)},o(s){D(n),t=!1},d(s){s&&_(l),~e&&i[e].d(s)}}}function Pl(r,e,n){let l,{embed:t}=e;const o=te(Ce);return ee(r,o,i=>n(1,l=i)),r.$$set=i=>{"embed"in i&&n(0,t=i.embed)},[t,l,o]}class Vl extends $e{constructor(e){super(),we(this,e,Pl,jl,ve,{embed:0})}}function et(r){const e=he(r[4]);r[5]=e}function tt(r){r[6]=r[8][0],r[7]=r[8][1]}function lt(r){const e=he(r[4]);r[5]=e}function Ol(r){let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:Xl,then:Kl,catch:Fl,value:4,blocks:[,,,]};return ie(n=r[2].api.fetchUser(r[0].id),t),{c(){e=W(),t.block.c()},l(o){e=W(),t.block.l(o)},m(o,i){b(o,e,i),t.block.m(o,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(o,i){r=o,t.ctx=r,i&1&&n!==(n=r[2].api.fetchUser(r[0].id))&&ie(n,t)||ge(t,r,i)},i(o){l||(y(t.block),l=!0)},o(o){for(let i=0;i<3;i+=1){const f=t.blocks[i];D(f)}l=!1},d(o){o&&_(e),t.block.d(o),t.token=null,t=null}}}function Bl(r){let e,n,l={ctx:r,current:null,token:null,hasCatch:!1,pending:Jl,then:Yl,catch:Wl,value:8};return ie(n=Promise.all([r[0].from,r[0].to].map(r[3])),l),{c(){e=W(),l.block.c()},l(t){e=W(),l.block.l(t)},m(t,o){b(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(t,o){r=t,l.ctx=r,o&1&&n!==(n=Promise.all([r[0].from,r[0].to].map(r[3])))&&ie(n,l)||ge(l,r,o)},i:m,o:m,d(t){t&&_(e),l.block.d(t),l.token=null,l=null}}}function Ll(r){let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:cn,then:Zl,catch:Ql,value:4,blocks:[,,,]};return ie(n=r[2].api.fetchUser(r[0].by),t),{c(){e=W(),t.block.c()},l(o){e=W(),t.block.l(o)},m(o,i){b(o,e,i),t.block.m(o,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(o,i){r=o,t.ctx=r,i&1&&n!==(n=r[2].api.fetchUser(r[0].by))&&ie(n,t)||ge(t,r,i)},i(o){l||(y(t.block),l=!0)},o(o){for(let i=0;i<3;i+=1){const f=t.blocks[i];D(f)}l=!1},d(o){o&&_(e),t.block.d(o),t.token=null,t=null}}}function Rl(r){let e=r[0].content+"",n;return{c(){n=E(e)},l(l){n=I(l,e)},m(l,t){b(l,n,t)},p(l,t){t&1&&e!==(e=l[0].content+"")&&K(n,e)},i:m,o:m,d(l){l&&_(n)}}}function Fl(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Kl(r){et(r);let e,n,l=r[5]+"",t,o,i,f;e=new Ee({props:{src:be(r[4]),width:24,height:24,name:r[5]}});function s(c,p){if(c[0].type=="user_banned")return ql;if(c[0].type=="user_joined")return zl;if(c[0].type=="user_kicked")return Hl;if(c[0].type=="user_left")return Gl}let u=s(r),a=u&&u(r);return{c(){oe(e.$$.fragment),n=V(),t=E(l),o=V(),a&&a.c(),i=W()},l(c){se(e.$$.fragment,c),n=O(c),t=I(c,l),o=O(c),a&&a.l(c),i=W()},m(c,p){fe(e,c,p),b(c,n,p),b(c,t,p),b(c,o,p),a&&a.m(c,p),b(c,i,p),f=!0},p(c,p){et(c);const R={};p&1&&(R.src=be(c[4])),p&1&&(R.name=c[5]),e.$set(R),(!f||p&1)&&l!==(l=c[5]+"")&&K(t,l),u===(u=s(c))&&a?a.p(c,p):(a&&a.d(1),a=u&&u(c),a&&(a.c(),a.m(i.parentNode,i)))},i(c){f||(y(e.$$.fragment,c),f=!0)},o(c){D(e.$$.fragment,c),f=!1},d(c){c&&(_(n),_(t),_(o),_(i)),ce(e,c),a&&a.d(c)}}}function Gl(r){let e=r[1]("user.chat.left")+"",n,l;return{c(){n=E(e),l=E(".")},l(t){n=I(t,e),l=I(t,".")},m(t,o){b(t,n,o),b(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("user.chat.left")+"")&&K(n,e)},d(t){t&&(_(n),_(l))}}}function Hl(r){let e=r[1]("user.was-kicked")+"",n,l;return{c(){n=E(e),l=E(".")},l(t){n=I(t,e),l=I(t,".")},m(t,o){b(t,n,o),b(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("user.was-kicked")+"")&&K(n,e)},d(t){t&&(_(n),_(l))}}}function zl(r){let e=r[1]("user.chat.joined")+"",n,l;return{c(){n=E(e),l=E(".")},l(t){n=I(t,e),l=I(t,".")},m(t,o){b(t,n,o),b(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("user.chat.joined")+"")&&K(n,e)},d(t){t&&(_(n),_(l))}}}function ql(r){let e=r[1]("user.was-banned")+"",n,l;return{c(){n=E(e),l=E(".")},l(t){n=I(t,e),l=I(t,".")},m(t,o){b(t,n,o),b(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("user.was-banned")+"")&&K(n,e)},d(t){t&&(_(n),_(l))}}}function Xl(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Wl(r){return{c:m,l:m,m,p:m,d:m}}function Yl(r){tt(r);let e=r[1]("channel.ownership.changed-from")+"",n,l,t=he(r[6])+"",o,i,f=he(r[7])+"",s,u;return{c(){n=E(e),l=V(),o=E(t),i=E(" to "),s=E(f),u=E(".")},l(a){n=I(a,e),l=O(a),o=I(a,t),i=I(a," to "),s=I(a,f),u=I(a,".")},m(a,c){b(a,n,c),b(a,l,c),b(a,o,c),b(a,i,c),b(a,s,c),b(a,u,c)},p(a,c){tt(a),c&2&&e!==(e=a[1]("channel.ownership.changed-from")+"")&&K(n,e),c&1&&t!==(t=he(a[6])+"")&&K(o,t),c&1&&f!==(f=he(a[7])+"")&&K(s,f)},d(a){a&&(_(n),_(l),_(o),_(i),_(s),_(u))}}}function Jl(r){return{c:m,l:m,m,p:m,d:m}}function Ql(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Zl(r){lt(r);let e,n,l=r[5]+"",t,o,i,f;e=new Ee({props:{src:be(r[4]),width:24,height:24,name:r[5]}});function s(c,p){if(c[0].type=="channel_description_changed")return ln;if(c[0].type=="channel_icon_changed")return tn;if(c[0].type=="channel_renamed")return en;if(c[0].type=="user_added"||c[0].type=="user_remove")return xl}let u=s(r),a=u&&u(r);return{c(){oe(e.$$.fragment),n=V(),t=E(l),o=V(),a&&a.c(),i=W()},l(c){se(e.$$.fragment,c),n=O(c),t=I(c,l),o=O(c),a&&a.l(c),i=W()},m(c,p){fe(e,c,p),b(c,n,p),b(c,t,p),b(c,o,p),a&&a.m(c,p),b(c,i,p),f=!0},p(c,p){lt(c);const R={};p&1&&(R.src=be(c[4])),p&1&&(R.name=c[5]),e.$set(R),(!f||p&1)&&l!==(l=c[5]+"")&&K(t,l),u===(u=s(c))&&a?a.p(c,p):(a&&a.d(1),a=u&&u(c),a&&(a.c(),a.m(i.parentNode,i)))},i(c){f||(y(e.$$.fragment,c),f=!0)},o(c){D(e.$$.fragment,c),f=!1},d(c){c&&(_(n),_(t),_(o),_(i)),ce(e,c),a&&a.d(c)}}}function xl(r){let e,n,l={ctx:r,current:null,token:null,hasCatch:!1,pending:fn,then:rn,catch:nn,value:4};return ie(n=r[2].api.fetchUser(r[0].id),l),{c(){e=W(),l.block.c()},l(t){e=W(),l.block.l(t)},m(t,o){b(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(t,o){r=t,l.ctx=r,o&1&&n!==(n=r[2].api.fetchUser(r[0].id))&&ie(n,l)||ge(l,r,o)},d(t){t&&_(e),l.block.d(t),l.token=null,l=null}}}function en(r){let e=r[1]("channel.rename-to")+"",n,l,t=r[0].name+"",o,i;return{c(){n=E(e),l=V(),o=E(t),i=E(".")},l(f){n=I(f,e),l=O(f),o=I(f,t),i=I(f,".")},m(f,s){b(f,n,s),b(f,l,s),b(f,o,s),b(f,i,s)},p(f,s){s&2&&e!==(e=f[1]("channel.rename-to")+"")&&K(n,e),s&1&&t!==(t=f[0].name+"")&&K(o,t)},d(f){f&&(_(n),_(l),_(o),_(i))}}}function tn(r){let e=r[1]("channel.icon.change")+"",n,l;return{c(){n=E(e),l=E(".")},l(t){n=I(t,e),l=I(t,".")},m(t,o){b(t,n,o),b(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("channel.icon.change")+"")&&K(n,e)},d(t){t&&(_(n),_(l))}}}function ln(r){let e=r[1]("channel.description.change")+"",n,l;return{c(){n=E(e),l=E(".")},l(t){n=I(t,e),l=I(t,".")},m(t,o){b(t,n,o),b(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("channel.description.change")+"")&&K(n,e)},d(t){t&&(_(n),_(l))}}}function nn(r){return{c:m,l:m,m,p:m,d:m}}function rn(r){let e,n=he(r[4])+"",l,t;function o(s,u){if(s[0].type=="user_added")return sn;if(s[0].type=="user_remove")return on}let i=o(r),f=i&&i(r);return{c(){f&&f.c(),e=V(),l=E(n),t=E(".")},l(s){f&&f.l(s),e=O(s),l=I(s,n),t=I(s,".")},m(s,u){f&&f.m(s,u),b(s,e,u),b(s,l,u),b(s,t,u)},p(s,u){i===(i=o(s))&&f?f.p(s,u):(f&&f.d(1),f=i&&i(s),f&&(f.c(),f.m(e.parentNode,e))),u&1&&n!==(n=he(s[4])+"")&&K(l,n)},d(s){s&&(_(e),_(l),_(t)),f&&f.d(s)}}}function on(r){let e=r[1]("removed")+"",n;return{c(){n=E(e)},l(l){n=I(l,e)},m(l,t){b(l,n,t)},p(l,t){t&2&&e!==(e=l[1]("removed")+"")&&K(n,e)},d(l){l&&_(n)}}}function sn(r){let e=r[1]("added")+"",n;return{c(){n=E(e)},l(l){n=I(l,e)},m(l,t){b(l,n,t)},p(l,t){t&2&&e!==(e=l[1]("added")+"")&&K(n,e)},d(l){l&&_(n)}}}function fn(r){return{c:m,l:m,m,p:m,d:m}}function cn(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function un(r){let e,n,l,t;const o=[Rl,Ll,Bl,Ol],i=[];function f(s,u){return s[0].type=="text"?0:s[0].type=="channel_description_changed"||s[0].type=="channel_icon_changed"||s[0].type=="channel_renamed"||s[0].type=="user_added"||s[0].type=="user_remove"?1:s[0].type=="channel_ownership_changed"?2:s[0].type=="user_banned"||s[0].type=="user_joined"||s[0].type=="user_kicked"||s[0].type=="user_left"?3:-1}return~(e=f(r))&&(n=i[e]=o[e](r)),{c(){n&&n.c(),l=W()},l(s){n&&n.l(s),l=W()},m(s,u){~e&&i[e].m(s,u),b(s,l,u),t=!0},p(s,[u]){let a=e;e=f(s),e===a?~e&&i[e].p(s,u):(n&&(le(),D(i[a],1,1,()=>{i[a]=null}),ne()),~e?(n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),y(n,1),n.m(l.parentNode,l)):n=null)},i(s){t||(y(n),t=!0)},o(s){D(n),t=!1},d(s){s&&_(l),~e&&i[e].d(s)}}}function an(r,e,n){let l;ee(r,Ne,f=>n(1,l=f));const t=te(je);let{system:o}=e;const i=f=>t.api.fetchUser(f);return r.$$set=f=>{"system"in f&&n(0,o=f.system)},[o,l,t,i]}class _n extends $e{constructor(e){super(),we(this,e,an,un,ve,{system:0})}}function nt(r,e,n){const l=r.slice();return l[30]=e[n],l}function rt(r,e,n){const l=r.slice();return l[33]=e[n],l}function it(r,e,n){const l=r.slice();return l[36]=e[n].src,l[37]=e[n].alt,l[38]=e[n].onclick,l[39]=e[n].showIf,l}function Pe(r){const e=r.slice(),n=new Date(e[0].edited);return e[8]=n,e}function ot(r,e,n){const l=r.slice();return l[42]=e[n],l}function st(r){let e,n,l=_e(r[0].replies),t=[];for(let i=0;i<l.length;i+=1)t[i]=ft(ot(r,l,i));const o=i=>D(t[i],1,1,()=>{t[i]=null});return{c(){e=C("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=N(i,"DIV",{class:!0});var f=L(e);for(let s=0;s<t.length;s+=1)t[s].l(f);f.forEach(_),this.h()},h(){$(e,"class","flex flex-col")},m(i,f){b(i,e,f);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);n=!0},p(i,f){if(f[0]&1){l=_e(i[0].replies);let s;for(s=0;s<l.length;s+=1){const u=ot(i,l,s);t[s]?(t[s].p(u,f),y(t[s],1)):(t[s]=ft(u),t[s].c(),y(t[s],1),t[s].m(e,null))}for(le(),s=l.length;s<t.length;s+=1)o(s);ne()}},i(i){if(!n){for(let f=0;f<l.length;f+=1)y(t[f]);n=!0}},o(i){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)D(t[f]);n=!1},d(i){i&&_(e),ye(t,i)}}}function ft(r){let e,n;return e=new xt({props:{id:r[42]}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.id=l[42]),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function ct(r){let e,n;return e=new Ee({props:{name:r[4],src:r[3],width:40,height:40}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t[0]&16&&(o.name=l[4]),t[0]&8&&(o.src=l[3]),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function ut(r){let e,n=r[5]("message.edited")+"",l,t,o=r[6](r[8])+"",i,f,s=r[7](r[8])+"",u,a;return{c(){e=E("["),l=E(n),t=V(),i=E(o),f=V(),u=E(s),a=E("]")},l(c){e=I(c,"["),l=I(c,n),t=O(c),i=I(c,o),f=O(c),u=I(c,s),a=I(c,"]")},m(c,p){b(c,e,p),b(c,l,p),b(c,t,p),b(c,i,p),b(c,f,p),b(c,u,p),b(c,a,p)},p(c,p){p[0]&32&&n!==(n=c[5]("message.edited")+"")&&K(l,n),p[0]&65&&o!==(o=c[6](c[8])+"")&&K(i,o),p[0]&129&&s!==(s=c[7](c[8])+"")&&K(u,s)},d(c){c&&(_(e),_(l),_(t),_(i),_(f),_(u),_(a))}}}function at(r){let e,n,l,t,o,i;function f(){return r[20](r[38])}return{c(){e=C("button"),n=C("img"),t=V(),this.h()},l(s){e=N(s,"BUTTON",{class:!0,"aria-label":!0});var u=L(e);n=N(u,"IMG",{width:!0,height:!0,src:!0,alt:!0}),t=O(u),u.forEach(_),this.h()},h(){$(n,"width","16"),$(n,"height","16"),ae(n.src,l=r[36])||$(n,"src",l),$(n,"alt",r[37]),$(e,"class","ml-2"),$(e,"aria-label",r[37])},m(s,u){b(s,e,u),d(e,n),d(e,t),o||(i=ue(e,"click",f),o=!0)},p(s,u){r=s},d(s){s&&_(e),o=!1,i()}}}function _t(r){var t;let e=((t=r[39])==null?void 0:t.call(r,r[0]))??!0,n,l=e&&at(r);return{c(){l&&l.c(),n=W()},l(o){l&&l.l(o),n=W()},m(o,i){l&&l.m(o,i),b(o,n,i)},p(o,i){var f;i[0]&1&&(e=((f=o[39])==null?void 0:f.call(o,o[0]))??!0),e?l?l.p(o,i):(l=at(o),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(o){o&&_(n),l&&l.d(o)}}}function hn(r){let e,n=r[0].content+"",l;return{c(){e=C("span"),l=E(n),this.h()},l(t){e=N(t,"SPAN",{style:!0,class:!0});var o=L(e);l=I(o,n),o.forEach(_),this.h()},h(){Ae(e,"overflow-wrap","break-word"),$(e,"class","whitespace-pre-wrap")},m(t,o){b(t,e,o),d(e,l)},p(t,o){o[0]&1&&n!==(n=t[0].content+"")&&K(l,n)},d(t){t&&_(e)}}}function mn(r){let e,n,l,t;return{c(){e=C("form"),n=C("textarea"),this.h()},l(o){e=N(o,"FORM",{class:!0});var i=L(e);n=N(i,"TEXTAREA",{class:!0,placeholder:!0}),L(n).forEach(_),i.forEach(_),this.h()},h(){$(n,"class","outline-none resize-none bg-inherit w-full"),$(n,"placeholder","Edit this message"),$(e,"class","bg-gray-500 rounded-xl px-2 pt-2")},m(o,i){b(o,e,i),d(e,n),ze(n,r[2]),l||(t=[ue(n,"keydown",r[21]),ue(n,"input",r[22]),ue(e,"submit",r[15])],l=!0)},p(o,i){i[0]&4&&ze(n,o[2])},d(o){o&&_(e),l=!1,Se(t)}}}function ht(r){let e,n;return e=new _n({props:{system:r[0].system}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.system=l[0].system),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function mt(r){let e,n,l=_e(r[0].attachments),t=[];for(let i=0;i<l.length;i+=1)t[i]=pt(rt(r,l,i));const o=i=>D(t[i],1,1,()=>{t[i]=null});return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=W()},l(i){for(let f=0;f<t.length;f+=1)t[f].l(i);e=W()},m(i,f){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(i,f);b(i,e,f),n=!0},p(i,f){if(f[0]&1){l=_e(i[0].attachments);let s;for(s=0;s<l.length;s+=1){const u=rt(i,l,s);t[s]?(t[s].p(u,f),y(t[s],1)):(t[s]=pt(u),t[s].c(),y(t[s],1),t[s].m(e.parentNode,e))}for(le(),s=l.length;s<t.length;s+=1)o(s);ne()}},i(i){if(!n){for(let f=0;f<l.length;f+=1)y(t[f]);n=!0}},o(i){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)D(t[f]);n=!1},d(i){i&&_(e),ye(t,i)}}}function pt(r){let e,n;return e=new Il({props:{attachment:r[33]}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.attachment=l[33]),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function dt(r){let e,n,l=_e(r[0].embeds),t=[];for(let i=0;i<l.length;i+=1)t[i]=bt(nt(r,l,i));const o=i=>D(t[i],1,1,()=>{t[i]=null});return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=W()},l(i){for(let f=0;f<t.length;f+=1)t[f].l(i);e=W()},m(i,f){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(i,f);b(i,e,f),n=!0},p(i,f){if(f[0]&1){l=_e(i[0].embeds);let s;for(s=0;s<l.length;s+=1){const u=nt(i,l,s);t[s]?(t[s].p(u,f),y(t[s],1)):(t[s]=bt(u),t[s].c(),y(t[s],1),t[s].m(e.parentNode,e))}for(le(),s=l.length;s<t.length;s+=1)o(s);ne()}},i(i){if(!n){for(let f=0;f<l.length;f+=1)y(t[f]);n=!0}},o(i){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)D(t[f]);n=!1},d(i){i&&_(e),ye(t,i)}}}function bt(r){let e,n;return e=new Vl({props:{embed:r[30]}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.embed=l[30]),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function pn(r){let e,n,l,t,o,i,f,s,u=r[6](r[8])+"",a,c,p=r[7](r[8])+"",R,j,P,T,H,q,X,x,Y,F,Q,U,B=r[0].replies!=null&&r[0].replies.length!=0&&st(r),M=!r[1]["jolt:compact-mode"]&&ct(r),J=r[0].edited!=null&&ut(Pe(r)),Z=_e(r[14]),S=[];for(let k=0;k<Z.length;k+=1)S[k]=_t(it(r,Z,k));function me(k,A){if(k[2]!=null)return mn;if(k[0].content!=null)return hn}let h=me(r),w=h&&h(r),v=r[0].system!=null&&ht(r),z=r[0].attachments!=null&&mt(r),g=r[0].embeds!=null&&dt(r);return{c(){e=C("div"),B&&B.c(),n=V(),l=C("div"),M&&M.c(),t=V(),o=E(r[4]),i=V(),f=C("p"),s=E("["),a=E(u),c=V(),R=E(p),j=E(`]

			`),J&&J.c(),P=V(),T=C("div"),H=V(),q=C("div");for(let k=0;k<S.length;k+=1)S[k].c();X=V(),w&&w.c(),x=V(),v&&v.c(),Y=V(),z&&z.c(),F=V(),g&&g.c(),this.h()},l(k){e=N(k,"DIV",{id:!0,class:!0});var A=L(e);B&&B.l(A),n=O(A),l=N(A,"DIV",{class:!0});var G=L(l);M&&M.l(G),t=O(G),o=I(G,r[4]),i=O(G),f=N(G,"P",{class:!0});var re=L(f);s=I(re,"["),a=I(re,u),c=O(re),R=I(re,p),j=I(re,`]

			`),J&&J.l(re),re.forEach(_),P=O(G),T=N(G,"DIV",{class:!0}),L(T).forEach(_),H=O(G),q=N(G,"DIV",{class:!0});var pe=L(q);for(let ke=0;ke<S.length;ke+=1)S[ke].l(pe);pe.forEach(_),G.forEach(_),X=O(A),w&&w.l(A),x=O(A),v&&v.l(A),Y=O(A),z&&z.l(A),F=O(A),g&&g.l(A),A.forEach(_),this.h()},h(){$(f,"class","text-gray-500"),$(T,"class","flex-1"),$(q,"class","hidden group-hover:flex"),$(l,"class","flex"),$(e,"id",Q=r[0]._id),$(e,"class","flex flex-col hover:bg-gray-800 group p-4")},m(k,A){b(k,e,A),B&&B.m(e,null),d(e,n),d(e,l),M&&M.m(l,null),d(l,t),d(l,o),d(l,i),d(l,f),d(f,s),d(f,a),d(f,c),d(f,R),d(f,j),J&&J.m(f,null),d(l,P),d(l,T),d(l,H),d(l,q);for(let G=0;G<S.length;G+=1)S[G]&&S[G].m(q,null);d(e,X),w&&w.m(e,null),d(e,x),v&&v.m(e,null),d(e,Y),z&&z.m(e,null),d(e,F),g&&g.m(e,null),U=!0},p(k,A){if(k[0].replies!=null&&k[0].replies.length!=0?B?(B.p(k,A),A[0]&1&&y(B,1)):(B=st(k),B.c(),y(B,1),B.m(e,n)):B&&(le(),D(B,1,1,()=>{B=null}),ne()),k[1]["jolt:compact-mode"]?M&&(le(),D(M,1,1,()=>{M=null}),ne()):M?(M.p(k,A),A[0]&2&&y(M,1)):(M=ct(k),M.c(),y(M,1),M.m(l,t)),(!U||A[0]&16)&&K(o,k[4]),(!U||A[0]&320)&&u!==(u=k[6](k[8])+"")&&K(a,u),(!U||A[0]&384)&&p!==(p=k[7](k[8])+"")&&K(R,p),k[0].edited!=null?J?J.p(Pe(k),A):(J=ut(Pe(k)),J.c(),J.m(f,null)):J&&(J.d(1),J=null),A[0]&16385){Z=_e(k[14]);let G;for(G=0;G<Z.length;G+=1){const re=it(k,Z,G);S[G]?S[G].p(re,A):(S[G]=_t(re),S[G].c(),S[G].m(q,null))}for(;G<S.length;G+=1)S[G].d(1);S.length=Z.length}h===(h=me(k))&&w?w.p(k,A):(w&&w.d(1),w=h&&h(k),w&&(w.c(),w.m(e,x))),k[0].system!=null?v?(v.p(k,A),A[0]&1&&y(v,1)):(v=ht(k),v.c(),y(v,1),v.m(e,Y)):v&&(le(),D(v,1,1,()=>{v=null}),ne()),k[0].attachments!=null?z?(z.p(k,A),A[0]&1&&y(z,1)):(z=mt(k),z.c(),y(z,1),z.m(e,F)):z&&(le(),D(z,1,1,()=>{z=null}),ne()),k[0].embeds!=null?g?(g.p(k,A),A[0]&1&&y(g,1)):(g=dt(k),g.c(),y(g,1),g.m(e,null)):g&&(le(),D(g,1,1,()=>{g=null}),ne()),(!U||A[0]&1&&Q!==(Q=k[0]._id))&&$(e,"id",Q)},i(k){U||(y(B),y(M),y(v),y(z),y(g),U=!0)},o(k){D(B),D(M),D(v),D(z),D(g),U=!1},d(k){k&&_(e),B&&B.d(),M&&M.d(),J&&J.d(),ye(S,k),w&&w.d(),v&&v.d(),z&&z.d(),g&&g.d()}}}function dn(r,e,n){let l,t,o,i,f,s,u,a,c,p,R;ee(r,Ne,h=>n(5,a=h)),ee(r,Kt,h=>n(6,p=h)),ee(r,Gt,h=>n(7,R=h));let{message:j}=e,P,T,H;te(Rt);const q=te(Ce);ee(r,q,h=>n(1,i=h));const X=te(je),x=te(Nt);ee(r,x,h=>n(18,f=h)),te(Tt);const Y=te(Oe),F=te(Be);ee(r,F,h=>n(19,s=h));const Q=te(Dt);ee(r,Q,h=>n(23,u=h));const U=te(Ut);ee(r,U,h=>n(24,c=h));const B=[{src:`${de}/reply.svg`,alt:a("message.reply"),onclick(){c!=null&&c.some(h=>h.message._id==j._id)||U==null||U.update(h=>(h.push({message:j,mention:!0}),h))}},{src:`${de}/note.svg`,alt:a("message.edit"),showIf:h=>{var w;return h.author==((w=X.user)==null?void 0:w._id)},onclick:h=>n(2,P=P==null?h.content??"":void 0)},{src:`${de}/trash.svg`,alt:a("message.delete"),showIf:h=>{var w;return h.author==((w=X.user)==null?void 0:w._id)},onclick:h=>X.api.deleteMessage(h.channel,h._id)}];async function M(h,w){n(17,H=u==null?void 0:u.find(v=>v._id.server==h&&v._id.user==w))}async function J(){const h=await X.api.editMessage(j.channel,j._id,{content:P});Y==null||Y.update(w=>(w[w.findIndex(v=>v._id==j._id)]=h,w))}const Z=h=>h(j),S=h=>{if(!h.defaultPrevented){if(h.key=="Escape"){h.preventDefault(),n(2,P=void 0);return}h.shiftKey||h.key!="Enter"||(h.preventDefault(),J(),n(2,P=void 0))}};function me(){P=this.value,n(2,P)}return r.$$set=h=>{"message"in h&&n(0,j=h.message)},r.$$.update=()=>{r.$$.dirty[0]&524289&&Ve(X.api,s??X.api.cache.users,j.author).then(h=>n(16,T=h)),r.$$.dirty[0]&262145&&(f==null||M(f,j.author)),r.$$.dirty[0]&196609&&n(4,l=he(T,H,j)),r.$$.dirty[0]&196611&&n(3,t=i["jolt:low-data-mode"]?`${de}/user.svg`:be(T,H,j)),r.$$.dirty[0]&1&&n(8,o=Ht(j._id))},[j,i,P,t,l,a,p,R,o,q,x,F,Q,U,B,J,T,H,f,s,Z,S,me]}class bn extends $e{constructor(e){super(),we(this,e,dn,pn,ve,{message:0},null,[-1,-1])}}function kt(r,e,n){const l=r.slice();l[30]=e[n],l[32]=e,l[33]=n;const t=l[12].api.fetchUser(l[30].message.author);return l[31]=t,l}function gt(r){const e=`<${r[8]("user.unknown")}>`;r[34]=e}function vt(r){const e=he(r[31]);r[34]=e}function $t(r,e,n){const l=r.slice();l[31]=e[n];const t=he(l[31]);return l[34]=t,l}function wt(r,e,n){const l=r.slice();return l[37]=e[n],l}function yt(r){let e,n;return e=new bn({props:{message:r[37]}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t[0]&1024&&(o.message=l[37]),e.$set(o)},i(l){n||(y(e.$$.fragment,l),n=!0)},o(l){D(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function Et(r){let e,n,l,t=Array.from(r[6]).map(Ct).join(", ")+"",o,i,f,s,u,a,c,p,R;return{c(){e=C("div"),n=C("p"),l=E(`Uploading
				`),o=E(t),i=V(),f=C("div"),s=V(),u=C("button"),a=C("img"),this.h()},l(j){e=N(j,"DIV",{class:!0});var P=L(e);n=N(P,"P",{});var T=L(n);l=I(T,`Uploading
				`),o=I(T,t),T.forEach(_),i=O(P),f=N(P,"DIV",{class:!0}),L(f).forEach(_),s=O(P),u=N(P,"BUTTON",{class:!0});var H=L(u);a=N(H,"IMG",{src:!0,alt:!0}),H.forEach(_),P.forEach(_),this.h()},h(){$(f,"class","flex-1"),ae(a.src,c=de+"/circle-x.svg")||$(a,"src",c),$(a,"alt","Cancel Upload"),$(u,"class","pr-2"),$(e,"class","flex")},m(j,P){b(j,e,P),d(e,n),d(n,l),d(n,o),d(e,i),d(e,f),d(e,s),d(e,u),d(u,a),p||(R=ue(u,"click",r[19]),p=!0)},p(j,P){P[0]&64&&t!==(t=Array.from(j[6]).map(Ct).join(", ")+"")&&K(o,t)},d(j){j&&_(e),p=!1,R()}}}function It(r){let e,n,l,t=r[34]+"",o,i,f=r[8]("user.is-typing")+"",s,u,a;return n=new Ee({props:{src:r[1]["jolt:low-data-mode"]?`${de}/user.svg`:be(r[31]),width:16,height:16,name:r[34]}}),{c(){e=C("div"),oe(n.$$.fragment),l=V(),o=E(t),i=V(),s=E(f),u=E("...")},l(c){e=N(c,"DIV",{});var p=L(e);se(n.$$.fragment,p),l=O(p),o=I(p,t),i=O(p),s=I(p,f),u=I(p,"..."),p.forEach(_)},m(c,p){b(c,e,p),fe(n,e,null),d(e,l),d(e,o),d(e,i),d(e,s),d(e,u),a=!0},p(c,p){const R={};p[0]&18&&(R.src=c[1]["jolt:low-data-mode"]?`${de}/user.svg`:be(c[31])),p[0]&16&&(R.name=c[34]),n.$set(R),(!a||p[0]&16)&&t!==(t=c[34]+"")&&K(o,t),(!a||p[0]&256)&&f!==(f=c[8]("user.is-typing")+"")&&K(s,f)},i(c){a||(y(n.$$.fragment,c),a=!0)},o(c){D(n.$$.fragment,c),a=!1},d(c){c&&_(e),ce(n)}}}function kn(r){gt(r);let e,n,l=r[34]+"",t,o;return e=new Ee({props:{src:de+"/user.svg",name:r[34]}}),{c(){oe(e.$$.fragment),n=V(),t=E(l)},l(i){se(e.$$.fragment,i),n=O(i),t=I(i,l)},m(i,f){fe(e,i,f),b(i,n,f),b(i,t,f),o=!0},p(i,f){gt(i);const s={};f[0]&256&&(s.name=i[34]),e.$set(s),(!o||f[0]&256)&&l!==(l=i[34]+"")&&K(t,l)},i(i){o||(y(e.$$.fragment,i),o=!0)},o(i){D(e.$$.fragment,i),o=!1},d(i){i&&(_(n),_(t)),ce(e,i)}}}function gn(r){vt(r);let e,n,l=r[34]+"",t,o;return e=new Ee({props:{src:be(r[31]),name:r[34]}}),{c(){oe(e.$$.fragment),n=V(),t=E(l)},l(i){se(e.$$.fragment,i),n=O(i),t=I(i,l)},m(i,f){fe(e,i,f),b(i,n,f),b(i,t,f),o=!0},p(i,f){vt(i);const s={};f[0]&512&&(s.src=be(i[31])),f[0]&512&&(s.name=i[34]),e.$set(s),(!o||f[0]&512)&&l!==(l=i[34]+"")&&K(t,l)},i(i){o||(y(e.$$.fragment,i),o=!0)},o(i){D(e.$$.fragment,i),o=!1},d(i){i&&(_(n),_(t)),ce(e,i)}}}function vn(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Mt(r){let e,n,l=r[8]("message.replying-to")+"",t,o,i,f,s,u,a=r[30].message.content+"",c,p,R,j,P,T,H,q,X,x,Y,F=r[30].mention?"ON":"OFF",Q,U,B,M,J,Z,S,me,h,w={ctx:r,current:null,token:null,hasCatch:!0,pending:vn,then:gn,catch:kn,value:31,blocks:[,,,]};ie(f=r[31],w);function v(){r[20].call(T,r[32],r[33])}function z(){return r[21](r[30])}return{c(){e=C("div"),n=C("p"),t=E(l),o=V(),i=C("strong"),w.block.c(),s=V(),u=C("p"),c=E(a),p=V(),R=C("div"),j=V(),P=C("div"),T=C("input"),H=V(),q=C("label"),X=C("img"),Y=V(),Q=E(F),U=V(),B=C("div"),M=C("button"),J=C("img"),this.h()},l(g){e=N(g,"DIV",{class:!0});var k=L(e);n=N(k,"P",{});var A=L(n);t=I(A,l),o=O(A),i=N(A,"STRONG",{});var G=L(i);w.block.l(G),G.forEach(_),A.forEach(_),s=O(k),u=N(k,"P",{class:!0});var re=L(u);c=I(re,a),re.forEach(_),p=O(k),R=N(k,"DIV",{class:!0}),L(R).forEach(_),j=O(k),P=N(k,"DIV",{class:!0});var pe=L(P);T=N(pe,"INPUT",{id:!0,style:!0,type:!0}),H=O(pe),q=N(pe,"LABEL",{class:!0,for:!0});var ke=L(q);X=N(ke,"IMG",{src:!0,class:!0,alt:!0}),Y=O(ke),Q=I(ke,F),ke.forEach(_),pe.forEach(_),U=O(k),B=N(k,"DIV",{class:!0});var Le=L(B);M=N(Le,"BUTTON",{});var Re=L(M);J=N(Re,"IMG",{src:!0,alt:!0}),Re.forEach(_),Le.forEach(_),k.forEach(_),this.h()},h(){$(u,"class","pl-1 text-gray-600 overflow-ellipsis"),$(R,"class","flex-1"),$(T,"id","mention"),Ae(T,"display","none"),$(T,"type","checkbox"),ae(X.src,x=de+"/at.svg")||$(X,"src",x),$(X,"class","inline"),$(X,"alt","mention"),$(q,"class","cursor-pointer"),$(q,"for","mention"),$(P,"class","pr-2"),ae(J.src,Z=de+"/circle-x.svg")||$(J,"src",Z),$(J,"alt","Cancel mention"),$(B,"class","pr-2"),$(e,"class","flex")},m(g,k){b(g,e,k),d(e,n),d(n,t),d(n,o),d(n,i),w.block.m(i,w.anchor=null),w.mount=()=>i,w.anchor=null,d(e,s),d(e,u),d(u,c),d(e,p),d(e,R),d(e,j),d(e,P),d(P,T),T.checked=r[30].mention,d(P,H),d(P,q),d(q,X),d(q,Y),d(q,Q),d(e,U),d(e,B),d(B,M),d(M,J),S=!0,me||(h=[ue(T,"change",v),ue(M,"click",z)],me=!0)},p(g,k){r=g,(!S||k[0]&256)&&l!==(l=r[8]("message.replying-to")+"")&&K(t,l),w.ctx=r,k[0]&512&&f!==(f=r[31])&&ie(f,w)||ge(w,r,k),(!S||k[0]&512)&&a!==(a=r[30].message.content+"")&&K(c,a),k[0]&512&&(T.checked=r[30].mention),(!S||k[0]&512)&&F!==(F=r[30].mention?"ON":"OFF")&&K(Q,F)},i(g){S||(y(w.block),S=!0)},o(g){for(let k=0;k<3;k+=1){const A=w.blocks[k];D(A)}S=!1},d(g){g&&_(e),w.block.d(),w.token=null,w=null,me=!1,Se(h)}}}function $n(r){let e,n,l,t="so um hi this is the start, i should make this text box much further down i think",o,i,f,s,u,a,c,p='<img src="/plus.svg" alt="Upload File"/>',R,j,P,T,H,q,X,x,Y=_e(r[10]),F=[];for(let h=0;h<Y.length;h+=1)F[h]=yt(wt(r,Y,h));const Q=h=>D(F[h],1,1,()=>{F[h]=null});let U=r[6]!=null&&r[6].length!=0&&Et(r),B=_e(r[4]),M=[];for(let h=0;h<B.length;h+=1)M[h]=It($t(r,B,h));const J=h=>D(M[h],1,1,()=>{M[h]=null});let Z=_e(r[9]),S=[];for(let h=0;h<Z.length;h+=1)S[h]=Mt(kt(r,Z,h));const me=h=>D(S[h],1,1,()=>{S[h]=null});return{c(){e=C("main"),n=C("div"),l=C("p"),l.textContent=t,o=V();for(let h=0;h<F.length;h+=1)F[h].c();i=V(),U&&U.c(),f=V();for(let h=0;h<M.length;h+=1)M[h].c();s=V();for(let h=0;h<S.length;h+=1)S[h].c();u=V(),a=C("form"),c=C("label"),c.innerHTML=p,R=V(),j=C("input"),P=V(),T=C("textarea"),this.h()},l(h){e=N(h,"MAIN",{class:!0});var w=L(e);n=N(w,"DIV",{id:!0,class:!0});var v=L(n);l=N(v,"P",{"data-svelte-h":!0}),Me(l)!=="svelte-1kz18j0"&&(l.textContent=t),o=O(v);for(let g=0;g<F.length;g+=1)F[g].l(v);v.forEach(_),i=O(w),U&&U.l(w),f=O(w);for(let g=0;g<M.length;g+=1)M[g].l(w);s=O(w);for(let g=0;g<S.length;g+=1)S[g].l(w);u=O(w),a=N(w,"FORM",{class:!0});var z=L(a);c=N(z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Me(c)!=="svelte-yy357v"&&(c.innerHTML=p),R=O(z),j=N(z,"INPUT",{id:!0,class:!0,type:!0,max:!0}),P=O(z),T=N(z,"TEXTAREA",{maxlength:!0,class:!0,placeholder:!0}),L(T).forEach(_),z.forEach(_),w.forEach(_),this.h()},h(){$(n,"id","messages-list"),$(n,"class","flex flex-col h-full overflow-x-hidden overflow-y-scroll"),$(c,"for","file-upload"),$(c,"class","cursor-pointer"),$(j,"id","file-upload"),$(j,"class","opacity-0 w-0 p-1"),$(j,"type","file"),j.multiple=!0,$(j,"max",5),$(T,"maxlength","2000"),$(T,"class","outline-none resize-none bg-inherit w-full h-12"),$(T,"placeholder",H=r[8]("send-message-in")+" "+r[7]),$(a,"class","flex bg-gray-500 rounded-xl px-2 pt-2 m-4"),$(e,"class","main-content-container flex flex-col")},m(h,w){b(h,e,w),d(e,n),d(n,l),d(n,o);for(let v=0;v<F.length;v+=1)F[v]&&F[v].m(n,null);r[18](n),d(e,i),U&&U.m(e,null),d(e,f);for(let v=0;v<M.length;v+=1)M[v]&&M[v].m(e,null);d(e,s);for(let v=0;v<S.length;v+=1)S[v]&&S[v].m(e,null);d(e,u),d(e,a),d(a,c),d(a,R),d(a,j),r[22](j),d(a,P),d(a,T),r[25](T),q=!0,X||(x=[ue(j,"change",r[23]),ue(T,"blur",r[15]),ue(T,"input",r[16]),ue(T,"keydown",r[24]),ue(a,"submit",r[14])],X=!0)},p(h,w){if(w[0]&1024){Y=_e(h[10]);let v;for(v=0;v<Y.length;v+=1){const z=wt(h,Y,v);F[v]?(F[v].p(z,w),y(F[v],1)):(F[v]=yt(z),F[v].c(),y(F[v],1),F[v].m(n,null))}for(le(),v=Y.length;v<F.length;v+=1)Q(v);ne()}if(h[6]!=null&&h[6].length!=0?U?U.p(h,w):(U=Et(h),U.c(),U.m(e,f)):U&&(U.d(1),U=null),w[0]&274){B=_e(h[4]);let v;for(v=0;v<B.length;v+=1){const z=$t(h,B,v);M[v]?(M[v].p(z,w),y(M[v],1)):(M[v]=It(z),M[v].c(),y(M[v],1),M[v].m(e,s))}for(le(),v=B.length;v<M.length;v+=1)J(v);ne()}if(w[0]&4865){Z=_e(h[9]);let v;for(v=0;v<Z.length;v+=1){const z=kt(h,Z,v);S[v]?(S[v].p(z,w),y(S[v],1)):(S[v]=Mt(z),S[v].c(),y(S[v],1),S[v].m(e,u))}for(le(),v=Z.length;v<S.length;v+=1)me(v);ne()}(!q||w[0]&384&&H!==(H=h[8]("send-message-in")+" "+h[7]))&&$(T,"placeholder",H)},i(h){if(!q){for(let w=0;w<Y.length;w+=1)y(F[w]);for(let w=0;w<B.length;w+=1)y(M[w]);for(let w=0;w<Z.length;w+=1)y(S[w]);q=!0}},o(h){F=F.filter(Boolean);for(let w=0;w<F.length;w+=1)D(F[w]);M=M.filter(Boolean);for(let w=0;w<M.length;w+=1)D(M[w]);S=S.filter(Boolean);for(let w=0;w<S.length;w+=1)D(S[w]);q=!1},d(h){h&&_(e),ye(F,h),r[18](null),U&&U.d(),ye(M,h),ye(S,h),r[22](null),r[25](null),X=!1,Se(x)}}}const Ct=r=>r.name;function wn(r,e,n){let l,t,o,i=m,f=()=>(i(),i=Vt(P,g=>n(9,o=g)),P),s;ee(r,Ne,g=>n(8,t=g)),r.$$.on_destroy.push(()=>i());let{channel:u}=e;const a=te(Ce);ee(r,a,g=>n(1,l=g));const c=te(je);let p=Ue([]);ee(r,p,g=>n(10,s=g));let R=Ue([]),j=Ue([]);const P=Ue([]);f(),De(Oe,p),De(Dt,R),De(Be,j),De(Ut,P);let T,H,q=[],X,x;jt(()=>{H&&H.offsetHeight+H.scrollTop>H.scrollHeight-20&&Ot().then(()=>{H.scrollTo(0,H.scrollHeight)})});async function Y(g){if(!g){c.removeAllListeners("ChannelStartTyping"),c.removeAllListeners("ChannelStopTyping");return}c.on("ChannelStartTyping",async({id:k,user:A})=>{var G;if(!(A==((G=c.user)==null?void 0:G._id)||k!=u._id)){for(const{_id:re}of q)if(A==re)return;n(4,q[q.length]=await c.api.fetchUser(A),q)}}),c.on("ChannelStopTyping",({id:k,user:A})=>{k==u._id&&n(4,q=q.filter(G=>G._id!=A))})}Pt(()=>{c.on("Message",g=>{g.channel==u._id&&(c.api.ackMessage(u._id,g._id),p.update(k=>(k.push(g),k)))}),c.on("MessageDelete",({id:g,channel:k})=>{k==u._id&&p.update(A=>A.filter(G=>G._id!=g))}),c.on("MessageUpdate",({id:g,channel:k,data:A})=>{k==u._id&&p.update(G=>{const re=G.findIndex(ke=>ke._id==g),pe=G[re];return A.content!=null&&(pe.content=A.content),A.embeds!=null&&(pe.embeds=A.embeds),pe.edited=A.edited,G[re]=pe,G})})});async function F(){let g=[];(X==null?void 0:X.files)!=null&&(g=await Promise.all(Array.from(X.files).map(k=>c.autumn.uploadFile(k))),n(5,X.value="",X),n(6,x=null)),await c.api.sendMessage(u._id,{content:T.value.trim(),replies:o.map(({message:{_id:k},mention:A})=>({id:k,mention:A})),attachments:g}),P.set([]),n(2,T.value="",T)}let Q;async function U(g){var k;if(g.channel_type=="TextChannel"||g.channel_type=="VoiceChannel"||g.channel_type=="Group"){n(7,Q=`#${g.name}`);return}if(g.channel_type=="SavedMessages"){n(7,Q=t("channel.notes"));return}n(7,Q=`@${he(await c.api.fetchUser(g.recipients[0]==((k=c.user)==null?void 0:k._id)?g.recipients[1]:g.recipients[0]))}`)}function B(){l["jolt:send-typing-indicators"]&&c.websocket.send({type:"EndTyping",channel:u._id})}function M(){if(l["jolt:send-typing-indicators"]){if(T.value==""){c.websocket.send({type:"EndTyping",channel:u._id});return}c.websocket.send({type:"BeginTyping",channel:u._id})}}function J(g){Ie[g?"unshift":"push"](()=>{H=g,n(3,H)})}const Z=()=>{X!=null&&(n(5,X.value="",X),n(6,x=null))};function S(g,k){g[k].mention=this.checked,P.set(o)}const me=g=>P.update(k=>(k=k.filter(A=>A.message._id!=g.message._id),k));function h(g){Ie[g?"unshift":"push"](()=>{X=g,n(5,X)})}function w(){x=this.files,n(6,x)}const v=g=>{g.shiftKey||g.key!="Enter"||(g.preventDefault(),F())};function z(g){Ie[g?"unshift":"push"](()=>{T=g,n(2,T)})}return r.$$set=g=>{"channel"in g&&n(17,u=g.channel)},r.$$.update=()=>{r.$$.dirty[0]&131072&&(c.api.queryMessages(u._id,{sort:"Latest",include_users:!0}).then(g=>{Array.isArray(g)?p.set(g.reverse()):(p.set(g.messages.reverse()),j.set(g.users),R.set(g.members??[]))}),P.set([]),n(4,q=[])),r.$$.dirty[0]&2&&Y(l["jolt:receive-typing-indicators"]),r.$$.dirty[0]&131072&&U(u)},[P,l,T,H,q,X,x,Q,t,o,s,a,c,p,F,B,M,u,J,Z,S,me,h,w,v,z]}class Pn extends $e{constructor(e){super(),we(this,e,wn,$n,ve,{channel:17},null,[-1,-1])}}export{Pn as C};
