import{s as be,c as se,n as h,d as It,u as Ct,g as Ut,e as Mt,r as De,h as Nt,b as Ee,i as Tt,f as ie,j as Ue,k as Dt,o as At,l as St,t as jt}from"./scheduler.bc65eea2.js";import{S as ge,i as ke,g as I,h as C,j as P,f as c,k as p,a as g,d as E,p as ne,t as D,b as re,e as X,s as R,c as L,m as M,n as N,x as b,o as Z,r as fe,u as ce,v as ue,w as _e,z as Ie,A as ae,C as Pt,D as Ot,l as Ne,y as we,E as Re}from"./index.cf715be0.js";import{h as te,u as pe}from"./await_block.b32c7e6c.js";import{e as he}from"./each.e59479a4.js";import{g as ee,c as Ae,a as Ce}from"./context.90bee080.js";import{g as me,b as de,a as Vt,U as Te}from"./util.892acc65.js";import{R as ye}from"./RoundedImage.78a8751c.js";import{w as Me}from"./index.27f04a12.js";import{P as Rt}from"./plus.4a89c26f.js";import{b as Le}from"./paths.e5c957f4.js";import{a as wt,s as Lt}from"./context.fa34f1f8.js";import{e as Bt,Y as Ft}from"./runtime.esm.d1697a53.js";import{d as Gt}from"./index.esm.4b6e8736.js";import{P as Kt}from"./pencil-square.199bcb9f.js";async function je(r,e,l){if(l=="0".repeat(26))return;let n;return Array.isArray(e)?n=e.find(t=>t._id==l):n=e.get(l),n??await r.fetchUser(l)}const Pe=Symbol(),yt=Symbol(),Oe=Symbol(),$t=Symbol(),Et=""+new URL("../assets/x-circle.53948da8.svg",import.meta.url).href,Ht=""+new URL("../assets/at-symbol.e2a365c3.svg",import.meta.url).href;function Be(r){const e=de(r[14]);r[15]=e}function Fe(r){var o;let e,l,n,t={ctx:r,current:null,token:null,hasCatch:!1,pending:Jt,then:zt,catch:qt,value:13,blocks:[,,,]};return te(l=((o=r[3])==null?void 0:o.find(r[12]))??r[6].api.fetchMessage(r[2],r[0]),t),{c(){e=X(),t.block.c()},l(i){e=X(),t.block.l(i)},m(i,a){g(i,e,a),t.block.m(i,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(i,a){var s;r=i,t.ctx=r,a&13&&l!==(l=((s=r[3])==null?void 0:s.find(r[12]))??r[6].api.fetchMessage(r[2],r[0]))&&te(l,t)||pe(t,r,a)},i(i){n||(E(t.block),n=!0)},o(i){for(let a=0;a<3;a+=1){const s=t.blocks[a];D(s)}n=!1},d(i){i&&c(e),t.block.d(i),t.token=null,t=null}}}function qt(r){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function zt(r){let e,l,n,t=!r[4]["jolt:low-data-mode"]&&Ge(r),o=r[13].content!=null&&Ke(r);return{c(){t&&t.c(),e=R(),o&&o.c(),l=X()},l(i){t&&t.l(i),e=L(i),o&&o.l(i),l=X()},m(i,a){t&&t.m(i,a),g(i,e,a),o&&o.m(i,a),g(i,l,a),n=!0},p(i,a){i[4]["jolt:low-data-mode"]?t&&(ne(),D(t,1,1,()=>{t=null}),re()):t?(t.p(i,a),a&16&&E(t,1)):(t=Ge(i),t.c(),E(t,1),t.m(e.parentNode,e)),i[13].content!=null?o?o.p(i,a):(o=Ke(i),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},i(i){n||(E(t),n=!0)},o(i){D(t),n=!1},d(i){i&&(c(e),c(l)),t&&t.d(i),o&&o.d(i)}}}function Ge(r){let e,l,n,t={ctx:r,current:null,token:null,hasCatch:!1,pending:Yt,then:Wt,catch:Xt,value:14,blocks:[,,,]};return te(e=je(r[6].api,r[5]??r[6].api.cache.users,r[13].author),t),{c(){t.block.c(),l=M(":")},l(o){t.block.l(o),l=N(o,":")},m(o,i){t.block.m(o,t.anchor=i),t.mount=()=>l.parentNode,t.anchor=l,g(o,l,i),n=!0},p(o,i){r=o,t.ctx=r,i&45&&e!==(e=je(r[6].api,r[5]??r[6].api.cache.users,r[13].author))&&te(e,t)||pe(t,r,i)},i(o){n||(E(t.block),n=!0)},o(o){for(let i=0;i<3;i+=1){const a=t.blocks[i];D(a)}n=!1},d(o){o&&c(l),t.block.d(o),t.token=null,t=null}}}function Xt(r){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Wt(r){Be(r);let e,l,n=r[15]+"",t,o,i;return e=new ye({props:{src:me(r[14]),name:r[15],width:24,height:24}}),{c(){fe(e.$$.fragment),l=R(),t=M(n),o=R()},l(a){ce(e.$$.fragment,a),l=L(a),t=N(a,n),o=L(a)},m(a,s){ue(e,a,s),g(a,l,s),g(a,t,s),g(a,o,s),i=!0},p(a,s){Be(a);const f={};s&45&&(f.src=me(a[14])),s&45&&(f.name=a[15]),e.$set(f),(!i||s&45)&&n!==(n=a[15]+"")&&Z(t,n)},i(a){i||(E(e.$$.fragment,a),i=!0)},o(a){D(e.$$.fragment,a),i=!1},d(a){a&&(c(l),c(t),c(o)),_e(e,a)}}}function Yt(r){let e;return{c(){e=M(`<Unknown User>
				`)},l(l){e=N(l,`<Unknown User>
				`)},m(l,n){g(l,e,n)},p:h,i:h,o:h,d(l){l&&c(e)}}}function Ke(r){let e,l=r[13].content+"",n;return{c(){e=I("span"),n=M(l),this.h()},l(t){e=C(t,"SPAN",{class:!0});var o=P(e);n=N(o,l),o.forEach(c),this.h()},h(){p(e,"class","text-gray-600")},m(t,o){g(t,e,o),b(e,n)},p(t,o){o&13&&l!==(l=t[13].content+"")&&Z(n,l)},d(t){t&&c(e)}}}function Jt(r){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Qt(r){let e,l,n,t=r[2]!=null&&Fe(r);return{c(){e=I("a"),t&&t.c(),this.h()},l(o){e=C(o,"A",{href:!0});var i=P(e);t&&t.l(i),i.forEach(c),this.h()},h(){p(e,"href",l=Le+"/"+(r[1]==null?`channels/${r[2]}#${r[0]}`:`servers/${r[1]}/channels/${r[2]}#${r[0]}`))},m(o,i){g(o,e,i),t&&t.m(e,null),n=!0},p(o,[i]){o[2]!=null?t?(t.p(o,i),i&4&&E(t,1)):(t=Fe(o),t.c(),E(t,1),t.m(e,null)):t&&(ne(),D(t,1,1,()=>{t=null}),re()),(!n||i&7&&l!==(l=Le+"/"+(o[1]==null?`channels/${o[2]}#${o[0]}`:`servers/${o[1]}/channels/${o[2]}#${o[0]}`)))&&p(e,"href",l)},i(o){n||(E(t),n=!0)},o(o){D(t),n=!1},d(o){o&&c(e),t&&t.d()}}}function Zt(r,e,l){let n,t,o,i,a;const s=ee(Ae),f=ee(Ce);se(r,f,$=>l(4,i=$));const _=ee(wt);se(r,_,$=>l(1,n=$));const u=ee(Lt);se(r,u,$=>l(2,t=$));const w=ee(Pe);se(r,w,$=>l(3,o=$));const T=ee(Oe);se(r,T,$=>l(5,a=$));let{id:U}=e;const F=({_id:$})=>U==$;return r.$$set=$=>{"id"in $&&l(0,U=$.id)},[U,n,t,o,i,a,s,f,_,u,w,T,F]}class xt extends ge{constructor(e){super(),ke(this,e,Zt,Qt,be,{id:0})}}function el(r){let e,l,n,t,o,i,a,s="Ok",f,_,u="Cancel",w,T,U;const F=r[3].default,$=It(F,r,r[2],null);return{c(){e=I("dialog"),l=I("div"),$&&$.c(),n=R(),t=I("hr"),o=R(),i=I("form"),a=I("button"),a.textContent=s,f=R(),_=I("button"),_.textContent=u,this.h()},l(O){e=C(O,"DIALOG",{});var G=P(e);l=C(G,"DIV",{});var J=P(l);$&&$.l(J),n=L(J),t=C(J,"HR",{}),o=L(J),i=C(J,"FORM",{id:!0,method:!0});var V=P(i);a=C(V,"BUTTON",{type:!0,"data-svelte-h":!0}),Ie(a)!=="svelte-fdbbw9"&&(a.textContent=s),f=L(V),_=C(V,"BUTTON",{type:!0,"data-svelte-h":!0}),Ie(_)!=="svelte-1gqjcfl"&&(_.textContent=u),V.forEach(c),J.forEach(c),G.forEach(c),this.h()},h(){p(a,"type","submit"),p(_,"type","reset"),p(i,"id","modal-form"),p(i,"method","dialog")},m(O,G){g(O,e,G),b(e,l),$&&$.m(l,null),b(l,n),b(l,t),b(l,o),b(l,i),b(i,a),b(i,f),b(i,_),r[6](e),w=!0,T||(U=[ae(_,"click",r[5]),ae(i,"submit",r[4]),ae(e,"close",r[7])],T=!0)},p(O,[G]){$&&$.p&&(!w||G&4)&&Ct($,F,O,O[2],w?Mt(F,O[2],G,null):Ut(O[2]),null)},i(O){w||(E($,O),w=!0)},o(O){D($,O),w=!1},d(O){O&&c(e),$&&$.d(O),r[6](null),T=!1,De(U)}}}function tl(r,e,l){let{$$slots:n={},$$scope:t}=e,{showModal:o}=e,i;function a(u){Nt.call(this,r,u)}const s=()=>l(0,o=!1);function f(u){Ee[u?"unshift":"push"](()=>{i=u,l(1,i)})}const _=()=>l(0,o=!1);return r.$$set=u=>{"showModal"in u&&l(0,o=u.showModal),"$$scope"in u&&l(2,t=u.$$scope)},r.$$.update=()=>{r.$$.dirty&3&&(o?i==null||i.showModal():i==null||i.close())},[o,i,t,n,a,s,f,_]}class ll extends ge{constructor(e){super(),ke(this,e,tl,el,be,{showModal:0})}}function nl(r){let e,l="External Link",n,t,o,i,a="Are you sure you want to go to this link? External links can be dangerous.";return{c(){e=I("h1"),e.textContent=l,n=R(),t=I("hr"),o=R(),i=I("p"),i.textContent=a,this.h()},l(s){e=C(s,"H1",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-qkxu7n"&&(e.textContent=l),n=L(s),t=C(s,"HR",{}),o=L(s),i=C(s,"P",{"data-svelte-h":!0}),Ie(i)!=="svelte-os1rtp"&&(i.textContent=a),this.h()},h(){p(e,"class","text-3xl")},m(s,f){g(s,e,f),g(s,n,f),g(s,t,f),g(s,o,f),g(s,i,f)},p:h,d(s){s&&(c(e),c(n),c(t),c(o),c(i))}}}function rl(r){let e,l,n,t,o,i,a,s;function f(u){r[2](u)}let _={$$slots:{default:[nl]},$$scope:{ctx:r}};return r[1]!==void 0&&(_.showModal=r[1]),e=new ll({props:_}),Ee.push(()=>Pt(e,"showModal",f)),e.$on("submit",r[3]),{c(){fe(e.$$.fragment),n=R(),t=I("a"),o=M(r[0]),this.h()},l(u){ce(e.$$.fragment,u),n=L(u),t=C(u,"A",{href:!0,target:!0,rel:!0});var w=P(t);o=N(w,r[0]),w.forEach(c),this.h()},h(){p(t,"href",r[0]),p(t,"target","_blank"),p(t,"rel","noreferrer")},m(u,w){ue(e,u,w),g(u,n,w),g(u,t,w),b(t,o),i=!0,a||(s=ae(t,"click",Ot(r[4])),a=!0)},p(u,[w]){const T={};w&32&&(T.$$scope={dirty:w,ctx:u}),!l&&w&2&&(l=!0,T.showModal=u[1],Tt(()=>l=!1)),e.$set(T),(!i||w&1)&&Z(o,u[0]),(!i||w&1)&&p(t,"href",u[0])},i(u){i||(E(e.$$.fragment,u),i=!0)},o(u){D(e.$$.fragment,u),i=!1},d(u){u&&(c(n),c(t)),_e(e,u),a=!1,s()}}}function il(r,e,l){let{href:n}=e,t=!1;function o(s){t=s,l(1,t)}const i=()=>window.open(n),a=()=>l(1,t=!0);return r.$$set=s=>{"href"in s&&l(0,n=s.href)},[n,t,o,i,a]}class Ve extends ge{constructor(e){super(),ke(this,e,il,rl,be,{href:0})}}function ol(r){let e,l,n,t;const o=[_l,ul],i=[];function a(s,f){return s[2]["jolt:low-data-mode"]?0:1}return e=a(r),l=i[e]=o[e](r),{c(){l.c(),n=X()},l(s){l.l(s),n=X()},m(s,f){i[e].m(s,f),g(s,n,f),t=!0},p(s,f){let _=e;e=a(s),e===_?i[e].p(s,f):(ne(),D(i[_],1,1,()=>{i[_]=null}),re(),l=i[e],l?l.p(s,f):(l=i[e]=o[e](s),l.c()),E(l,1),l.m(n.parentNode,n))},i(s){t||(E(l),t=!0)},o(s){D(l),t=!1},d(s){s&&c(n),i[e].d(s)}}}function sl(r){let e,l,n=r[0].filename+"",t,o,i,a;return i=new Ve({props:{href:r[1]}}),{c(){e=I("span"),l=M("[File "),t=M(n),o=M(`]
			`),fe(i.$$.fragment),this.h()},l(s){e=C(s,"SPAN",{class:!0});var f=P(e);l=N(f,"[File "),t=N(f,n),o=N(f,`]
			`),ce(i.$$.fragment,f),f.forEach(c),this.h()},h(){p(e,"class","text-gray-500")},m(s,f){g(s,e,f),b(e,l),b(e,t),b(e,o),ue(i,e,null),a=!0},p(s,f){(!a||f&1)&&n!==(n=s[0].filename+"")&&Z(t,n);const _={};f&2&&(_.href=s[1]),i.$set(_)},i(s){a||(E(i.$$.fragment,s),a=!0)},o(s){D(i.$$.fragment,s),a=!1},d(s){s&&c(e),_e(i)}}}function al(r){let e,l,n;return{c(){e=I("audio"),l=I("source"),this.h()},l(t){e=C(t,"AUDIO",{});var o=P(e);l=C(o,"SOURCE",{src:!0}),o.forEach(c),this.h()},h(){ie(l.src,n=r[1])||p(l,"src",n),e.controls=!0},m(t,o){g(t,e,o),b(e,l)},p(t,o){o&2&&!ie(l.src,n=t[1])&&p(l,"src",n)},i:h,o:h,d(t){t&&c(e)}}}function fl(r){let e,l,n;return{c(){e=I("video"),l=I("source"),this.h()},l(t){e=C(t,"VIDEO",{});var o=P(e);l=C(o,"SOURCE",{src:!0}),o.forEach(c),this.h()},h(){ie(l.src,n=r[1])||p(l,"src",n),e.controls=!0},m(t,o){g(t,e,o),b(e,l)},p(t,o){o&2&&!ie(l.src,n=t[1])&&p(l,"src",n)},i:h,o:h,d(t){t&&c(e)}}}function cl(r){let e,l,n,t;const o=[vl,kl],i=[];function a(s,f){return s[2]["jolt:low-data-mode"]?0:1}return e=a(r),l=i[e]=o[e](r),{c(){l.c(),n=X()},l(s){l.l(s),n=X()},m(s,f){i[e].m(s,f),g(s,n,f),t=!0},p(s,f){let _=e;e=a(s),e===_?i[e].p(s,f):(ne(),D(i[_],1,1,()=>{i[_]=null}),re(),l=i[e],l?l.p(s,f):(l=i[e]=o[e](s),l.c()),E(l,1),l.m(n.parentNode,n))},i(s){t||(E(l),t=!0)},o(s){D(l),t=!1},d(s){s&&c(n),i[e].d(s)}}}function ul(r){let e,l,n={ctx:r,current:null,token:null,hasCatch:!0,pending:gl,then:dl,catch:hl,value:4,error:6};return te(l=fetch(r[1]),n),{c(){e=X(),n.block.c()},l(t){e=X(),n.block.l(t)},m(t,o){g(t,e,o),n.block.m(t,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e},p(t,o){r=t,n.ctx=r,o&2&&l!==(l=fetch(r[1]))&&te(l,n)||pe(n,r,o)},i:h,o:h,d(t){t&&c(e),n.block.d(t),n.token=null,n=null}}}function _l(r){let e,l,n,t,o;return n=new Ve({props:{href:r[1]}}),{c(){e=I("span"),l=M("[Text "),fe(n.$$.fragment),t=M("]"),this.h()},l(i){e=C(i,"SPAN",{class:!0});var a=P(e);l=N(a,"[Text "),ce(n.$$.fragment,a),t=N(a,"]"),a.forEach(c),this.h()},h(){p(e,"class","text-gray-500")},m(i,a){g(i,e,a),b(e,l),ue(n,e,null),b(e,t),o=!0},p(i,a){const s={};a&2&&(s.href=i[1]),n.$set(s)},i(i){o||(E(n.$$.fragment,i),o=!0)},o(i){D(n.$$.fragment,i),o=!1},d(i){i&&c(e),_e(n)}}}function hl(r){let e,l,n=r[0].filename+"",t,o,i=r[6]+"",a;return{c(){e=I("p"),l=M("Unable to download "),t=M(n),o=M(": "),a=M(i)},l(s){e=C(s,"P",{});var f=P(e);l=N(f,"Unable to download "),t=N(f,n),o=N(f,": "),a=N(f,i),f.forEach(c)},m(s,f){g(s,e,f),b(e,l),b(e,t),b(e,o),b(e,a)},p(s,f){f&1&&n!==(n=s[0].filename+"")&&Z(t,n),f&2&&i!==(i=s[6]+"")&&Z(a,i)},d(s){s&&c(e)}}}function dl(r){let e,l,n={ctx:r,current:null,token:null,hasCatch:!1,pending:bl,then:pl,catch:ml,value:5};return te(l=r[4].text(),n),{c(){e=X(),n.block.c()},l(t){e=X(),n.block.l(t)},m(t,o){g(t,e,o),n.block.m(t,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e},p(t,o){r=t,n.ctx=r,o&2&&l!==(l=r[4].text())&&te(l,n)||pe(n,r,o)},d(t){t&&c(e),n.block.d(t),n.token=null,n=null}}}function ml(r){return{c:h,l:h,m:h,p:h,d:h}}function pl(r){let e,l=r[5]+"",n;return{c(){e=I("p"),n=M(l)},l(t){e=C(t,"P",{});var o=P(e);n=N(o,l),o.forEach(c)},m(t,o){g(t,e,o),b(e,n)},p(t,o){o&2&&l!==(l=t[5]+"")&&Z(n,l)},d(t){t&&c(e)}}}function bl(r){return{c:h,l:h,m:h,p:h,d:h}}function gl(r){return{c:h,l:h,m:h,p:h,d:h}}function kl(r){let e,l,n;return{c(){e=I("img"),this.h()},l(t){e=C(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ie(e.src,l=r[1])||p(e,"src",l),p(e,"alt",n=r[0].filename),p(e,"class","max-w-xl max-h-xl")},m(t,o){g(t,e,o)},p(t,o){o&2&&!ie(e.src,l=t[1])&&p(e,"src",l),o&1&&n!==(n=t[0].filename)&&p(e,"alt",n)},i:h,o:h,d(t){t&&c(e)}}}function vl(r){let e,l,n,t,o;return n=new Ve({props:{href:r[1]}}),{c(){e=I("span"),l=M("[Image "),fe(n.$$.fragment),t=M("]"),this.h()},l(i){e=C(i,"SPAN",{class:!0});var a=P(e);l=N(a,"[Image "),ce(n.$$.fragment,a),t=N(a,"]"),a.forEach(c),this.h()},h(){p(e,"class","text-gray-500")},m(i,a){g(i,e,a),b(e,l),ue(n,e,null),b(e,t),o=!0},p(i,a){const s={};a&2&&(s.href=i[1]),n.$set(s)},i(i){o||(E(n.$$.fragment,i),o=!0)},o(i){D(n.$$.fragment,i),o=!1},d(i){i&&c(e),_e(n)}}}function wl(r){let e,l,n,t;const o=[cl,fl,al,sl,ol],i=[];function a(s,f){return s[0].metadata.type=="Image"?0:s[0].metadata.type=="Video"?1:s[0].metadata.type=="Audio"?2:s[0].metadata.type=="File"?3:s[0].metadata.type=="Text"?4:-1}return~(l=a(r))&&(n=i[l]=o[l](r)),{c(){e=I("div"),n&&n.c()},l(s){e=C(s,"DIV",{});var f=P(e);n&&n.l(f),f.forEach(c)},m(s,f){g(s,e,f),~l&&i[l].m(e,null),t=!0},p(s,[f]){let _=l;l=a(s),l===_?~l&&i[l].p(s,f):(n&&(ne(),D(i[_],1,1,()=>{i[_]=null}),re()),~l?(n=i[l],n?n.p(s,f):(n=i[l]=o[l](s),n.c()),E(n,1),n.m(e,null)):n=null)},i(s){t||(E(n),t=!0)},o(s){D(n),t=!1},d(s){s&&c(e),~l&&i[l].d()}}}function yl(r,e,l){let n,t;const o=ee(Ce);se(r,o,a=>l(2,t=a));let{attachment:i}=e;return r.$$set=a=>{"attachment"in a&&l(0,i=a.attachment)},r.$$.update=()=>{r.$$.dirty&1&&l(1,n=Vt(i))},[i,n,t,o]}class $l extends ge{constructor(e){super(),ke(this,e,yl,wl,be,{attachment:0})}}function El(r){let e,l="oop website embed, can't handle that :(";return{c(){e=I("span"),e.textContent=l,this.h()},l(n){e=C(n,"SPAN",{class:!0,"data-svelte-h":!0}),Ie(e)!=="svelte-1exisih"&&(e.textContent=l),this.h()},h(){p(e,"class","text-gray-600")},m(n,t){g(n,e,t)},p:h,d(n){n&&c(e)}}}function Il(r){let e,l,n,t=r[0].icon_url&&!r[1]["jolt:low-data-mode"]&&He(r),o=r[0].title&&qe(r),i=r[0].description&&ze(r);return{c(){e=I("div"),t&&t.c(),l=R(),o&&o.c(),n=R(),i&&i.c(),this.h()},l(a){e=C(a,"DIV",{style:!0});var s=P(e);t&&t.l(s),l=L(s),o&&o.l(s),n=L(s),i&&i.l(s),s.forEach(c),this.h()},h(){Ne(e,"background-color",r[0].colour)},m(a,s){g(a,e,s),t&&t.m(e,null),b(e,l),o&&o.m(e,null),b(e,n),i&&i.m(e,null)},p(a,s){a[0].icon_url&&!a[1]["jolt:low-data-mode"]?t?t.p(a,s):(t=He(a),t.c(),t.m(e,l)):t&&(t.d(1),t=null),a[0].title?o?o.p(a,s):(o=qe(a),o.c(),o.m(e,n)):o&&(o.d(1),o=null),a[0].description?i?i.p(a,s):(i=ze(a),i.c(),i.m(e,null)):i&&(i.d(1),i=null),s&1&&Ne(e,"background-color",a[0].colour)},d(a){a&&c(e),t&&t.d(),o&&o.d(),i&&i.d()}}}function Cl(r){let e,l,n,t,o;return{c(){e=I("video"),l=I("source"),this.h()},l(i){e=C(i,"VIDEO",{});var a=P(e);l=C(a,"SOURCE",{src:!0,width:!0,height:!0}),a.forEach(c),this.h()},h(){ie(l.src,n=r[0].url)||p(l,"src",n),p(l,"width",t=r[0].width),p(l,"height",o=r[0].height),e.controls=!0},m(i,a){g(i,e,a),b(e,l)},p(i,a){a&1&&!ie(l.src,n=i[0].url)&&p(l,"src",n),a&1&&t!==(t=i[0].width)&&p(l,"width",t),a&1&&o!==(o=i[0].height)&&p(l,"height",o)},d(i){i&&c(e)}}}function Ul(r){let e,l,n,t;return{c(){e=I("img"),this.h()},l(o){e=C(o,"IMG",{src:!0,width:!0,height:!0}),this.h()},h(){ie(e.src,l=r[0].url)||p(e,"src",l),p(e,"width",n=r[0].width),p(e,"height",t=r[0].height)},m(o,i){g(o,e,i)},p(o,i){i&1&&!ie(e.src,l=o[0].url)&&p(e,"src",l),i&1&&n!==(n=o[0].width)&&p(e,"width",n),i&1&&t!==(t=o[0].height)&&p(e,"height",t)},d(o){o&&c(e)}}}function He(r){let e,l,n;return{c(){e=I("img"),this.h()},l(t){e=C(t,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),this.h()},h(){ie(e.src,l=r[0].icon_url)||p(e,"src",l),p(e,"alt",n=r[0].title),p(e,"width","24"),p(e,"height","24"),p(e,"class","inline rounded-3xl")},m(t,o){g(t,e,o)},p(t,o){o&1&&!ie(e.src,l=t[0].icon_url)&&p(e,"src",l),o&1&&n!==(n=t[0].title)&&p(e,"alt",n)},d(t){t&&c(e)}}}function qe(r){let e,l=r[0].title+"",n;return{c(){e=I("h1"),n=M(l),this.h()},l(t){e=C(t,"H1",{class:!0});var o=P(e);n=N(o,l),o.forEach(c),this.h()},h(){p(e,"class","text-gray-600")},m(t,o){g(t,e,o),b(e,n)},p(t,o){o&1&&l!==(l=t[0].title+"")&&Z(n,l)},d(t){t&&c(e)}}}function ze(r){let e,l=r[0].description+"",n;return{c(){e=I("p"),n=M(l)},l(t){e=C(t,"P",{});var o=P(e);n=N(o,l),o.forEach(c)},m(t,o){g(t,e,o),b(e,n)},p(t,o){o&1&&l!==(l=t[0].description+"")&&Z(n,l)},d(t){t&&c(e)}}}function Ml(r){let e;function l(o,i){if(o[0].type=="Image"&&!o[1]["jolt:low-data-mode"])return Ul;if(o[0].type=="Video"&&!o[1]["jolt:low-data-mode"])return Cl;if(o[0].type=="Text")return Il;if(o[0].type=="Website")return El}let n=l(r),t=n&&n(r);return{c(){t&&t.c(),e=X()},l(o){t&&t.l(o),e=X()},m(o,i){t&&t.m(o,i),g(o,e,i)},p(o,[i]){n===(n=l(o))&&t?t.p(o,i):(t&&t.d(1),t=n&&n(o),t&&(t.c(),t.m(e.parentNode,e)))},i:h,o:h,d(o){o&&c(e),t&&t.d(o)}}}function Nl(r,e,l){let n,{embed:t}=e;const o=ee(Ce);return se(r,o,i=>l(1,n=i)),r.$$set=i=>{"embed"in i&&l(0,t=i.embed)},[t,n,o]}class Tl extends ge{constructor(e){super(),ke(this,e,Nl,Ml,be,{embed:0})}}function Xe(r){const e=de(r[3]);r[4]=e}function We(r){r[5]=r[7][0],r[6]=r[7][1]}function Ye(r){const e=de(r[3]);r[4]=e}function Dl(r){let e,l,n,t={ctx:r,current:null,token:null,hasCatch:!1,pending:Fl,then:Ol,catch:Pl,value:3,blocks:[,,,]};return te(l=r[1].api.fetchUser(r[0].id),t),{c(){e=X(),t.block.c()},l(o){e=X(),t.block.l(o)},m(o,i){g(o,e,i),t.block.m(o,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(o,i){r=o,t.ctx=r,i&1&&l!==(l=r[1].api.fetchUser(r[0].id))&&te(l,t)||pe(t,r,i)},i(o){n||(E(t.block),n=!0)},o(o){for(let i=0;i<3;i+=1){const a=t.blocks[i];D(a)}n=!1},d(o){o&&c(e),t.block.d(o),t.token=null,t=null}}}function Al(r){let e,l,n={ctx:r,current:null,token:null,hasCatch:!1,pending:Hl,then:Kl,catch:Gl,value:7};return te(l=Promise.all([r[0].from,r[0].to].map(r[2])),n),{c(){e=X(),n.block.c()},l(t){e=X(),n.block.l(t)},m(t,o){g(t,e,o),n.block.m(t,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e},p(t,o){r=t,n.ctx=r,o&1&&l!==(l=Promise.all([r[0].from,r[0].to].map(r[2])))&&te(l,n)||pe(n,r,o)},i:h,o:h,d(t){t&&c(e),n.block.d(t),n.token=null,n=null}}}function Sl(r){let e,l,n,t={ctx:r,current:null,token:null,hasCatch:!1,pending:ln,then:zl,catch:ql,value:3,blocks:[,,,]};return te(l=r[1].api.fetchUser(r[0].by),t),{c(){e=X(),t.block.c()},l(o){e=X(),t.block.l(o)},m(o,i){g(o,e,i),t.block.m(o,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(o,i){r=o,t.ctx=r,i&1&&l!==(l=r[1].api.fetchUser(r[0].by))&&te(l,t)||pe(t,r,i)},i(o){n||(E(t.block),n=!0)},o(o){for(let i=0;i<3;i+=1){const a=t.blocks[i];D(a)}n=!1},d(o){o&&c(e),t.block.d(o),t.token=null,t=null}}}function jl(r){let e=r[0].content+"",l;return{c(){l=M(e)},l(n){l=N(n,e)},m(n,t){g(n,l,t)},p(n,t){t&1&&e!==(e=n[0].content+"")&&Z(l,e)},i:h,o:h,d(n){n&&c(l)}}}function Pl(r){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Ol(r){Xe(r);let e,l,n=r[4]+"",t,o,i,a;e=new ye({props:{src:me(r[3]),width:24,height:24,name:r[4]}});function s(u,w){if(u[0].type=="user_banned")return Bl;if(u[0].type=="user_joined")return Ll;if(u[0].type=="user_kicked")return Rl;if(u[0].type=="user_left")return Vl}let f=s(r),_=f&&f(r);return{c(){fe(e.$$.fragment),l=R(),t=M(n),o=R(),_&&_.c(),i=X()},l(u){ce(e.$$.fragment,u),l=L(u),t=N(u,n),o=L(u),_&&_.l(u),i=X()},m(u,w){ue(e,u,w),g(u,l,w),g(u,t,w),g(u,o,w),_&&_.m(u,w),g(u,i,w),a=!0},p(u,w){Xe(u);const T={};w&1&&(T.src=me(u[3])),w&1&&(T.name=u[4]),e.$set(T),(!a||w&1)&&n!==(n=u[4]+"")&&Z(t,n),f!==(f=s(u))&&(_&&_.d(1),_=f&&f(u),_&&(_.c(),_.m(i.parentNode,i)))},i(u){a||(E(e.$$.fragment,u),a=!0)},o(u){D(e.$$.fragment,u),a=!1},d(u){u&&(c(l),c(t),c(o),c(i)),_e(e,u),_&&_.d(u)}}}function Vl(r){let e;return{c(){e=M("left the chat.")},l(l){e=N(l,"left the chat.")},m(l,n){g(l,e,n)},d(l){l&&c(e)}}}function Rl(r){let e;return{c(){e=M("was kicked.")},l(l){e=N(l,"was kicked.")},m(l,n){g(l,e,n)},d(l){l&&c(e)}}}function Ll(r){let e;return{c(){e=M("has joined the chat.")},l(l){e=N(l,"has joined the chat.")},m(l,n){g(l,e,n)},d(l){l&&c(e)}}}function Bl(r){let e;return{c(){e=M("was banned.")},l(l){e=N(l,"was banned.")},m(l,n){g(l,e,n)},d(l){l&&c(e)}}}function Fl(r){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Gl(r){return{c:h,l:h,m:h,p:h,d:h}}function Kl(r){We(r);let e,l=de(r[5])+"",n,t,o=de(r[6])+"",i,a;return{c(){e=M("Channel ownership changed from "),n=M(l),t=M(" to "),i=M(o),a=M(".")},l(s){e=N(s,"Channel ownership changed from "),n=N(s,l),t=N(s," to "),i=N(s,o),a=N(s,".")},m(s,f){g(s,e,f),g(s,n,f),g(s,t,f),g(s,i,f),g(s,a,f)},p(s,f){We(s),f&1&&l!==(l=de(s[5])+"")&&Z(n,l),f&1&&o!==(o=de(s[6])+"")&&Z(i,o)},d(s){s&&(c(e),c(n),c(t),c(i),c(a))}}}function Hl(r){return{c:h,l:h,m:h,p:h,d:h}}function ql(r){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function zl(r){Ye(r);let e,l,n=r[4]+"",t,o,i,a;e=new ye({props:{src:me(r[3]),width:24,height:24,name:r[4]}});function s(u,w){if(u[0].type=="channel_description_changed")return Jl;if(u[0].type=="channel_icon_changed")return Yl;if(u[0].type=="channel_renamed")return Wl;if(u[0].type=="user_added"||u[0].type=="user_remove")return Xl}let f=s(r),_=f&&f(r);return{c(){fe(e.$$.fragment),l=R(),t=M(n),o=R(),_&&_.c(),i=X()},l(u){ce(e.$$.fragment,u),l=L(u),t=N(u,n),o=L(u),_&&_.l(u),i=X()},m(u,w){ue(e,u,w),g(u,l,w),g(u,t,w),g(u,o,w),_&&_.m(u,w),g(u,i,w),a=!0},p(u,w){Ye(u);const T={};w&1&&(T.src=me(u[3])),w&1&&(T.name=u[4]),e.$set(T),(!a||w&1)&&n!==(n=u[4]+"")&&Z(t,n),f===(f=s(u))&&_?_.p(u,w):(_&&_.d(1),_=f&&f(u),_&&(_.c(),_.m(i.parentNode,i)))},i(u){a||(E(e.$$.fragment,u),a=!0)},o(u){D(e.$$.fragment,u),a=!1},d(u){u&&(c(l),c(t),c(o),c(i)),_e(e,u),_&&_.d(u)}}}function Xl(r){let e,l,n={ctx:r,current:null,token:null,hasCatch:!1,pending:tn,then:Zl,catch:Ql,value:3};return te(l=r[1].api.fetchUser(r[0].id),n),{c(){e=X(),n.block.c()},l(t){e=X(),n.block.l(t)},m(t,o){g(t,e,o),n.block.m(t,n.anchor=o),n.mount=()=>e.parentNode,n.anchor=e},p(t,o){r=t,n.ctx=r,o&1&&l!==(l=r[1].api.fetchUser(r[0].id))&&te(l,n)||pe(n,r,o)},d(t){t&&c(e),n.block.d(t),n.token=null,n=null}}}function Wl(r){let e,l=r[0].name+"",n,t;return{c(){e=M("renamed this channel to "),n=M(l),t=M(".")},l(o){e=N(o,"renamed this channel to "),n=N(o,l),t=N(o,".")},m(o,i){g(o,e,i),g(o,n,i),g(o,t,i)},p(o,i){i&1&&l!==(l=o[0].name+"")&&Z(n,l)},d(o){o&&(c(e),c(n),c(t))}}}function Yl(r){let e;return{c(){e=M("changes this channel icon.")},l(l){e=N(l,"changes this channel icon.")},m(l,n){g(l,e,n)},p:h,d(l){l&&c(e)}}}function Jl(r){let e;return{c(){e=M("changed this channel's description.")},l(l){e=N(l,"changed this channel's description.")},m(l,n){g(l,e,n)},p:h,d(l){l&&c(e)}}}function Ql(r){return{c:h,l:h,m:h,p:h,d:h}}function Zl(r){let e,l=de(r[3])+"",n,t;function o(s,f){if(s[0].type=="user_added")return en;if(s[0].type=="user_remove")return xl}let i=o(r),a=i&&i(r);return{c(){a&&a.c(),e=R(),n=M(l),t=M(".")},l(s){a&&a.l(s),e=L(s),n=N(s,l),t=N(s,".")},m(s,f){a&&a.m(s,f),g(s,e,f),g(s,n,f),g(s,t,f)},p(s,f){i!==(i=o(s))&&(a&&a.d(1),a=i&&i(s),a&&(a.c(),a.m(e.parentNode,e))),f&1&&l!==(l=de(s[3])+"")&&Z(n,l)},d(s){s&&(c(e),c(n),c(t)),a&&a.d(s)}}}function xl(r){let e;return{c(){e=M("removed")},l(l){e=N(l,"removed")},m(l,n){g(l,e,n)},d(l){l&&c(e)}}}function en(r){let e;return{c(){e=M("added")},l(l){e=N(l,"added")},m(l,n){g(l,e,n)},d(l){l&&c(e)}}}function tn(r){return{c:h,l:h,m:h,p:h,d:h}}function ln(r){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function nn(r){let e,l,n,t;const o=[jl,Sl,Al,Dl],i=[];function a(s,f){return s[0].type=="text"?0:s[0].type=="channel_description_changed"||s[0].type=="channel_icon_changed"||s[0].type=="channel_renamed"||s[0].type=="user_added"||s[0].type=="user_remove"?1:s[0].type=="channel_ownership_changed"?2:s[0].type=="user_banned"||s[0].type=="user_joined"||s[0].type=="user_kicked"||s[0].type=="user_left"?3:-1}return~(e=a(r))&&(l=i[e]=o[e](r)),{c(){l&&l.c(),n=X()},l(s){l&&l.l(s),n=X()},m(s,f){~e&&i[e].m(s,f),g(s,n,f),t=!0},p(s,[f]){let _=e;e=a(s),e===_?~e&&i[e].p(s,f):(l&&(ne(),D(i[_],1,1,()=>{i[_]=null}),re()),~e?(l=i[e],l?l.p(s,f):(l=i[e]=o[e](s),l.c()),E(l,1),l.m(n.parentNode,n)):l=null)},i(s){t||(E(l),t=!0)},o(s){D(l),t=!1},d(s){s&&c(n),~e&&i[e].d(s)}}}function rn(r,e,l){const n=ee(Ae);let{system:t}=e;const o=i=>n.api.fetchUser(i);return r.$$set=i=>{"system"in i&&l(0,t=i.system)},[t,n,o]}class on extends ge{constructor(e){super(),ke(this,e,rn,nn,be,{system:0})}}const sn=""+new URL("../assets/arrow-uturn-left.339e42ca.svg",import.meta.url).href,an=""+new URL("../assets/trash.a7b7378c.svg",import.meta.url).href;function Je(r,e,l){const n=r.slice();return n[27]=e[l],n}function Qe(r,e,l){const n=r.slice();return n[30]=e[l],n}function Ze(r,e,l){const n=r.slice();return n[33]=e[l].src,n[34]=e[l].alt,n[35]=e[l].onclick,n[36]=e[l].showIf,n}function Se(r){const e=r.slice(),l=new Date(e[0].edited);return e[7]=l,e}function xe(r,e,l){const n=r.slice();return n[39]=e[l],n}function et(r){let e,l,n=he(r[0].replies),t=[];for(let i=0;i<n.length;i+=1)t[i]=tt(xe(r,n,i));const o=i=>D(t[i],1,1,()=>{t[i]=null});return{c(){e=I("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=C(i,"DIV",{class:!0});var a=P(e);for(let s=0;s<t.length;s+=1)t[s].l(a);a.forEach(c),this.h()},h(){p(e,"class","flex flex-col")},m(i,a){g(i,e,a);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);l=!0},p(i,a){if(a[0]&1){n=he(i[0].replies);let s;for(s=0;s<n.length;s+=1){const f=xe(i,n,s);t[s]?(t[s].p(f,a),E(t[s],1)):(t[s]=tt(f),t[s].c(),E(t[s],1),t[s].m(e,null))}for(ne(),s=n.length;s<t.length;s+=1)o(s);re()}},i(i){if(!l){for(let a=0;a<n.length;a+=1)E(t[a]);l=!0}},o(i){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)D(t[a]);l=!1},d(i){i&&c(e),we(t,i)}}}function tt(r){let e,l;return e=new xt({props:{id:r[39]}}),{c(){fe(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,t){ue(e,n,t),l=!0},p(n,t){const o={};t[0]&1&&(o.id=n[39]),e.$set(o)},i(n){l||(E(e.$$.fragment,n),l=!0)},o(n){D(e.$$.fragment,n),l=!1},d(n){_e(e,n)}}}function lt(r){let e,l;return e=new ye({props:{name:r[4],src:r[3],width:40,height:40}}),{c(){fe(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,t){ue(e,n,t),l=!0},p(n,t){const o={};t[0]&16&&(o.name=n[4]),t[0]&8&&(o.src=n[3]),e.$set(o)},i(n){l||(E(e.$$.fragment,n),l=!0)},o(n){D(e.$$.fragment,n),l=!1},d(n){_e(e,n)}}}function nt(r){let e,l=r[5](r[7])+"",n,t,o=r[6](r[7])+"",i,a;return{c(){e=M(`[edited
				`),n=M(l),t=R(),i=M(o),a=M("]")},l(s){e=N(s,`[edited
				`),n=N(s,l),t=L(s),i=N(s,o),a=N(s,"]")},m(s,f){g(s,e,f),g(s,n,f),g(s,t,f),g(s,i,f),g(s,a,f)},p(s,f){f[0]&33&&l!==(l=s[5](s[7])+"")&&Z(n,l),f[0]&65&&o!==(o=s[6](s[7])+"")&&Z(i,o)},d(s){s&&(c(e),c(n),c(t),c(i),c(a))}}}function rt(r){let e,l,n,t,o,i;function a(){return r[19](r[35])}return{c(){e=I("button"),l=I("img"),t=R(),this.h()},l(s){e=C(s,"BUTTON",{class:!0,"aria-label":!0});var f=P(e);l=C(f,"IMG",{width:!0,height:!0,src:!0,alt:!0}),t=L(f),f.forEach(c),this.h()},h(){p(l,"width","16"),p(l,"height","16"),ie(l.src,n=r[33])||p(l,"src",n),p(l,"alt",r[34]),p(e,"class","ml-2"),p(e,"aria-label",r[34])},m(s,f){g(s,e,f),b(e,l),b(e,t),o||(i=ae(e,"click",a),o=!0)},p(s,f){r=s},d(s){s&&c(e),o=!1,i()}}}function it(r){var t;let e=((t=r[36])==null?void 0:t.call(r,r[0]))??!0,l,n=e&&rt(r);return{c(){n&&n.c(),l=X()},l(o){n&&n.l(o),l=X()},m(o,i){n&&n.m(o,i),g(o,l,i)},p(o,i){var a;i[0]&1&&(e=((a=o[36])==null?void 0:a.call(o,o[0]))??!0),e?n?n.p(o,i):(n=rt(o),n.c(),n.m(l.parentNode,l)):n&&(n.d(1),n=null)},d(o){o&&c(l),n&&n.d(o)}}}function fn(r){let e,l=r[0].content+"",n;return{c(){e=I("span"),n=M(l),this.h()},l(t){e=C(t,"SPAN",{style:!0,class:!0});var o=P(e);n=N(o,l),o.forEach(c),this.h()},h(){Ne(e,"overflow-wrap","break-word"),p(e,"class","whitespace-pre-wrap")},m(t,o){g(t,e,o),b(e,n)},p(t,o){o[0]&1&&l!==(l=t[0].content+"")&&Z(n,l)},d(t){t&&c(e)}}}function cn(r){let e,l,n,t;return{c(){e=I("form"),l=I("textarea"),this.h()},l(o){e=C(o,"FORM",{id:!0,class:!0});var i=P(e);l=C(i,"TEXTAREA",{class:!0,placeholder:!0}),P(l).forEach(c),i.forEach(c),this.h()},h(){p(l,"class","outline-none resize-none bg-inherit w-full"),p(l,"placeholder","Edit this message"),p(e,"id","message-edit-form"),p(e,"class","bg-gray-500 rounded-xl px-2 pt-2")},m(o,i){g(o,e,i),b(e,l),Re(l,r[2]),n||(t=[ae(l,"keydown",r[20]),ae(l,"input",r[21]),ae(e,"submit",r[14])],n=!0)},p(o,i){i[0]&4&&Re(l,o[2])},d(o){o&&c(e),n=!1,De(t)}}}function ot(r){let e,l;return e=new on({props:{system:r[0].system}}),{c(){fe(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,t){ue(e,n,t),l=!0},p(n,t){const o={};t[0]&1&&(o.system=n[0].system),e.$set(o)},i(n){l||(E(e.$$.fragment,n),l=!0)},o(n){D(e.$$.fragment,n),l=!1},d(n){_e(e,n)}}}function st(r){let e,l,n=he(r[0].attachments),t=[];for(let i=0;i<n.length;i+=1)t[i]=at(Qe(r,n,i));const o=i=>D(t[i],1,1,()=>{t[i]=null});return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=X()},l(i){for(let a=0;a<t.length;a+=1)t[a].l(i);e=X()},m(i,a){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(i,a);g(i,e,a),l=!0},p(i,a){if(a[0]&1){n=he(i[0].attachments);let s;for(s=0;s<n.length;s+=1){const f=Qe(i,n,s);t[s]?(t[s].p(f,a),E(t[s],1)):(t[s]=at(f),t[s].c(),E(t[s],1),t[s].m(e.parentNode,e))}for(ne(),s=n.length;s<t.length;s+=1)o(s);re()}},i(i){if(!l){for(let a=0;a<n.length;a+=1)E(t[a]);l=!0}},o(i){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)D(t[a]);l=!1},d(i){i&&c(e),we(t,i)}}}function at(r){let e,l;return e=new $l({props:{attachment:r[30]}}),{c(){fe(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,t){ue(e,n,t),l=!0},p(n,t){const o={};t[0]&1&&(o.attachment=n[30]),e.$set(o)},i(n){l||(E(e.$$.fragment,n),l=!0)},o(n){D(e.$$.fragment,n),l=!1},d(n){_e(e,n)}}}function ft(r){let e,l,n=he(r[0].embeds),t=[];for(let i=0;i<n.length;i+=1)t[i]=ct(Je(r,n,i));const o=i=>D(t[i],1,1,()=>{t[i]=null});return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=X()},l(i){for(let a=0;a<t.length;a+=1)t[a].l(i);e=X()},m(i,a){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(i,a);g(i,e,a),l=!0},p(i,a){if(a[0]&1){n=he(i[0].embeds);let s;for(s=0;s<n.length;s+=1){const f=Je(i,n,s);t[s]?(t[s].p(f,a),E(t[s],1)):(t[s]=ct(f),t[s].c(),E(t[s],1),t[s].m(e.parentNode,e))}for(ne(),s=n.length;s<t.length;s+=1)o(s);re()}},i(i){if(!l){for(let a=0;a<n.length;a+=1)E(t[a]);l=!0}},o(i){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)D(t[a]);l=!1},d(i){i&&c(e),we(t,i)}}}function ct(r){let e,l;return e=new Tl({props:{embed:r[27]}}),{c(){fe(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,t){ue(e,n,t),l=!0},p(n,t){const o={};t[0]&1&&(o.embed=n[27]),e.$set(o)},i(n){l||(E(e.$$.fragment,n),l=!0)},o(n){D(e.$$.fragment,n),l=!1},d(n){_e(e,n)}}}function un(r){let e,l,n,t,o,i,a,s,f=r[5](r[7])+"",_,u,w=r[6](r[7])+"",T,U,F,$,O,G,J,V,le,W,Q,B,Y=r[0].replies!=null&&r[0].replies.length!=0&&et(r),q=!r[1]["jolt:compact-mode"]&&lt(r),A=r[0].edited!=null&&nt(Se(r)),oe=he(r[13]),v=[];for(let y=0;y<oe.length;y+=1)v[y]=it(Ze(r,oe,y));function d(y,j){if(y[2]!=null)return cn;if(y[0].content!=null)return fn}let k=d(r),K=k&&k(r),z=r[0].system!=null&&ot(r),m=r[0].attachments!=null&&st(r),S=r[0].embeds!=null&&ft(r);return{c(){e=I("div"),Y&&Y.c(),l=R(),n=I("div"),q&&q.c(),t=R(),o=M(r[4]),i=R(),a=I("p"),s=M("["),_=M(f),u=R(),T=M(w),U=M(`]

			`),A&&A.c(),F=R(),$=I("div"),O=R(),G=I("div");for(let y=0;y<v.length;y+=1)v[y].c();J=R(),K&&K.c(),V=R(),z&&z.c(),le=R(),m&&m.c(),W=R(),S&&S.c(),this.h()},l(y){e=C(y,"DIV",{id:!0,class:!0});var j=P(e);Y&&Y.l(j),l=L(j),n=C(j,"DIV",{class:!0});var H=P(n);q&&q.l(H),t=L(H),o=N(H,r[4]),i=L(H),a=C(H,"P",{class:!0});var x=P(a);s=N(x,"["),_=N(x,f),u=L(x),T=N(x,w),U=N(x,`]

			`),A&&A.l(x),x.forEach(c),F=L(H),$=C(H,"DIV",{class:!0}),P($).forEach(c),O=L(H),G=C(H,"DIV",{class:!0});var ve=P(G);for(let $e=0;$e<v.length;$e+=1)v[$e].l(ve);ve.forEach(c),H.forEach(c),J=L(j),K&&K.l(j),V=L(j),z&&z.l(j),le=L(j),m&&m.l(j),W=L(j),S&&S.l(j),j.forEach(c),this.h()},h(){p(a,"class","text-gray-500"),p($,"class","flex-1"),p(G,"class","hidden group-hover:flex"),p(n,"class","flex"),p(e,"id",Q=r[0]._id),p(e,"class","flex flex-col hover:bg-gray-800 group p-4")},m(y,j){g(y,e,j),Y&&Y.m(e,null),b(e,l),b(e,n),q&&q.m(n,null),b(n,t),b(n,o),b(n,i),b(n,a),b(a,s),b(a,_),b(a,u),b(a,T),b(a,U),A&&A.m(a,null),b(n,F),b(n,$),b(n,O),b(n,G);for(let H=0;H<v.length;H+=1)v[H]&&v[H].m(G,null);b(e,J),K&&K.m(e,null),b(e,V),z&&z.m(e,null),b(e,le),m&&m.m(e,null),b(e,W),S&&S.m(e,null),B=!0},p(y,j){if(y[0].replies!=null&&y[0].replies.length!=0?Y?(Y.p(y,j),j[0]&1&&E(Y,1)):(Y=et(y),Y.c(),E(Y,1),Y.m(e,l)):Y&&(ne(),D(Y,1,1,()=>{Y=null}),re()),y[1]["jolt:compact-mode"]?q&&(ne(),D(q,1,1,()=>{q=null}),re()):q?(q.p(y,j),j[0]&2&&E(q,1)):(q=lt(y),q.c(),E(q,1),q.m(n,t)),(!B||j[0]&16)&&Z(o,y[4]),(!B||j[0]&160)&&f!==(f=y[5](y[7])+"")&&Z(_,f),(!B||j[0]&192)&&w!==(w=y[6](y[7])+"")&&Z(T,w),y[0].edited!=null?A?A.p(Se(y),j):(A=nt(Se(y)),A.c(),A.m(a,null)):A&&(A.d(1),A=null),j[0]&8193){oe=he(y[13]);let H;for(H=0;H<oe.length;H+=1){const x=Ze(y,oe,H);v[H]?v[H].p(x,j):(v[H]=it(x),v[H].c(),v[H].m(G,null))}for(;H<v.length;H+=1)v[H].d(1);v.length=oe.length}k===(k=d(y))&&K?K.p(y,j):(K&&K.d(1),K=k&&k(y),K&&(K.c(),K.m(e,V))),y[0].system!=null?z?(z.p(y,j),j[0]&1&&E(z,1)):(z=ot(y),z.c(),E(z,1),z.m(e,le)):z&&(ne(),D(z,1,1,()=>{z=null}),re()),y[0].attachments!=null?m?(m.p(y,j),j[0]&1&&E(m,1)):(m=st(y),m.c(),E(m,1),m.m(e,W)):m&&(ne(),D(m,1,1,()=>{m=null}),re()),y[0].embeds!=null?S?(S.p(y,j),j[0]&1&&E(S,1)):(S=ft(y),S.c(),E(S,1),S.m(e,null)):S&&(ne(),D(S,1,1,()=>{S=null}),re()),(!B||j[0]&1&&Q!==(Q=y[0]._id))&&p(e,"id",Q)},i(y){B||(E(Y),E(q),E(z),E(m),E(S),B=!0)},o(y){D(Y),D(q),D(z),D(m),D(S),B=!1},d(y){y&&c(e),Y&&Y.d(),q&&q.d(),A&&A.d(),we(v,y),K&&K.d(),z&&z.d(),m&&m.d(),S&&S.d()}}}function _n(r,e,l){let n,t,o,i,a,s,f,_,u,w;se(r,Bt,d=>l(5,u=d)),se(r,Ft,d=>l(6,w=d));let{message:T}=e,U,F,$;const O=ee(Ce);se(r,O,d=>l(1,i=d));const G=ee(Ae),J=ee(wt);se(r,J,d=>l(17,a=d));const V=ee(Pe),le=ee(Oe);se(r,le,d=>l(18,s=d));const W=ee(yt);se(r,W,d=>l(22,f=d));const Q=ee($t);se(r,Q,d=>l(23,_=d));const B=[{src:sn,alt:"Reply",onclick(){_!=null&&_.some(d=>d.message._id==T._id)||Q==null||Q.update(d=>(d.push({message:T,mention:!0}),d))}},{src:Kt,alt:"Edit",showIf:d=>{var k;return d.author==((k=G.user)==null?void 0:k._id)},onclick:d=>l(2,U=U==null?d.content??"":void 0)},{src:an,alt:"Delete",showIf:d=>{var k;return d.author==((k=G.user)==null?void 0:k._id)},onclick:d=>G.api.deleteMessage(d.channel,d._id)}];async function Y(d,k){l(16,$=f==null?void 0:f.find(K=>K._id.server==d&&K._id.user==k))}async function q(){const d=await G.api.editMessage(T.channel,T._id,{content:U});V==null||V.update(k=>(k[k.findIndex(K=>K._id==T._id)]=d,k))}const A=d=>d(T),oe=d=>{if(!d.defaultPrevented){if(d.key=="Escape"){d.preventDefault(),l(2,U=void 0);return}d.shiftKey||d.key!="Enter"||(d.preventDefault(),q(),l(2,U=void 0))}};function v(){U=this.value,l(2,U)}return r.$$set=d=>{"message"in d&&l(0,T=d.message)},r.$$.update=()=>{r.$$.dirty[0]&262145&&je(G.api,s??G.api.cache.users,T.author).then(d=>l(15,F=d)),r.$$.dirty[0]&131073&&(a==null||Y(a,T.author)),r.$$.dirty[0]&98305&&l(4,n=de(F,$,T)),r.$$.dirty[0]&98307&&l(3,t=i["jolt:low-data-mode"]?Te:me(F,$,T)),r.$$.dirty[0]&1&&l(7,o=Gt(T._id))},[T,i,U,t,n,u,w,o,O,J,le,W,Q,B,q,F,$,a,s,A,oe,v]}class hn extends ge{constructor(e){super(),ke(this,e,_n,un,be,{message:0},null,[-1,-1])}}function ut(r,e,l){const n=r.slice();n[29]=e[l],n[31]=e,n[32]=l;const t=n[11].api.fetchUser(n[29].message.author);return n[30]=t,n}function _t(r){const e="<Unknown User>";r[33]=e}function ht(r){const e=de(r[30]);r[33]=e}function dt(r,e,l){const n=r.slice();n[30]=e[l];const t=de(n[30]);return n[33]=t,n}function mt(r,e,l){const n=r.slice();return n[36]=e[l],n}function pt(r){let e,l;return e=new hn({props:{message:r[36]}}),{c(){fe(e.$$.fragment)},l(n){ce(e.$$.fragment,n)},m(n,t){ue(e,n,t),l=!0},p(n,t){const o={};t[0]&512&&(o.message=n[36]),e.$set(o)},i(n){l||(E(e.$$.fragment,n),l=!0)},o(n){D(e.$$.fragment,n),l=!1},d(n){_e(e,n)}}}function bt(r){let e,l,n,t=Array.from(r[6]).map(vt).join(", ")+"",o,i,a,s,f,_,u,w,T;return{c(){e=I("div"),l=I("p"),n=M(`Uploading
				`),o=M(t),i=R(),a=I("div"),s=R(),f=I("button"),_=I("img"),this.h()},l(U){e=C(U,"DIV",{class:!0});var F=P(e);l=C(F,"P",{});var $=P(l);n=N($,`Uploading
				`),o=N($,t),$.forEach(c),i=L(F),a=C(F,"DIV",{class:!0}),P(a).forEach(c),s=L(F),f=C(F,"BUTTON",{class:!0});var O=P(f);_=C(O,"IMG",{src:!0,alt:!0}),O.forEach(c),F.forEach(c),this.h()},h(){p(a,"class","flex-1"),ie(_.src,u=Et)||p(_,"src",u),p(_,"alt","Cancel Upload"),p(f,"class","pr-2"),p(e,"class","flex")},m(U,F){g(U,e,F),b(e,l),b(l,n),b(l,o),b(e,i),b(e,a),b(e,s),b(e,f),b(f,_),w||(T=ae(f,"click",r[18]),w=!0)},p(U,F){F[0]&64&&t!==(t=Array.from(U[6]).map(vt).join(", ")+"")&&Z(o,t)},d(U){U&&c(e),w=!1,T()}}}function gt(r){let e,l,n,t=r[33]+"",o,i,a;return l=new ye({props:{src:r[1]["jolt:low-data-mode"]?Te:me(r[30]),width:16,height:16,name:r[33]}}),{c(){e=I("div"),fe(l.$$.fragment),n=R(),o=M(t),i=M(" is typing...")},l(s){e=C(s,"DIV",{});var f=P(e);ce(l.$$.fragment,f),n=L(f),o=N(f,t),i=N(f," is typing..."),f.forEach(c)},m(s,f){g(s,e,f),ue(l,e,null),b(e,n),b(e,o),b(e,i),a=!0},p(s,f){const _={};f[0]&18&&(_.src=s[1]["jolt:low-data-mode"]?Te:me(s[30])),f[0]&16&&(_.name=s[33]),l.$set(_),(!a||f[0]&16)&&t!==(t=s[33]+"")&&Z(o,t)},i(s){a||(E(l.$$.fragment,s),a=!0)},o(s){D(l.$$.fragment,s),a=!1},d(s){s&&c(e),_e(l)}}}function dn(r){_t(r);let e,l,n,t;return e=new ye({props:{src:Te,name:r[33]}}),{c(){fe(e.$$.fragment),l=R(),n=M(r[33])},l(o){ce(e.$$.fragment,o),l=L(o),n=N(o,r[33])},m(o,i){ue(e,o,i),g(o,l,i),g(o,n,i),t=!0},p(o,i){_t(o)},i(o){t||(E(e.$$.fragment,o),t=!0)},o(o){D(e.$$.fragment,o),t=!1},d(o){o&&(c(l),c(n)),_e(e,o)}}}function mn(r){ht(r);let e,l,n=r[33]+"",t,o;return e=new ye({props:{src:me(r[30]),name:r[33]}}),{c(){fe(e.$$.fragment),l=R(),t=M(n)},l(i){ce(e.$$.fragment,i),l=L(i),t=N(i,n)},m(i,a){ue(e,i,a),g(i,l,a),g(i,t,a),o=!0},p(i,a){ht(i);const s={};a[0]&256&&(s.src=me(i[30])),a[0]&256&&(s.name=i[33]),e.$set(s),(!o||a[0]&256)&&n!==(n=i[33]+"")&&Z(t,n)},i(i){o||(E(e.$$.fragment,i),o=!0)},o(i){D(e.$$.fragment,i),o=!1},d(i){i&&(c(l),c(t)),_e(e,i)}}}function pn(r){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function kt(r){let e,l,n,t,o,i,a,s=r[29].message.content+"",f,_,u,w,T,U,F,$,O,G,J,V=r[29].mention?"ON":"OFF",le,W,Q,B,Y,q,A,oe,v,d={ctx:r,current:null,token:null,hasCatch:!0,pending:pn,then:mn,catch:dn,value:30,blocks:[,,,]};te(o=r[30],d);function k(){r[19].call(U,r[31],r[32])}function K(){return r[20](r[29])}return{c(){e=I("div"),l=I("p"),n=M(`replying to

				`),t=I("strong"),d.block.c(),i=R(),a=I("p"),f=M(s),_=R(),u=I("div"),w=R(),T=I("div"),U=I("input"),F=R(),$=I("label"),O=I("img"),J=R(),le=M(V),W=R(),Q=I("div"),B=I("button"),Y=I("img"),this.h()},l(z){e=C(z,"DIV",{class:!0});var m=P(e);l=C(m,"P",{});var S=P(l);n=N(S,`replying to

				`),t=C(S,"STRONG",{});var y=P(t);d.block.l(y),y.forEach(c),S.forEach(c),i=L(m),a=C(m,"P",{class:!0});var j=P(a);f=N(j,s),j.forEach(c),_=L(m),u=C(m,"DIV",{class:!0}),P(u).forEach(c),w=L(m),T=C(m,"DIV",{class:!0});var H=P(T);U=C(H,"INPUT",{id:!0,style:!0,type:!0}),F=L(H),$=C(H,"LABEL",{class:!0,for:!0});var x=P($);O=C(x,"IMG",{src:!0,class:!0,alt:!0}),J=L(x),le=N(x,V),x.forEach(c),H.forEach(c),W=L(m),Q=C(m,"DIV",{class:!0});var ve=P(Q);B=C(ve,"BUTTON",{});var $e=P(B);Y=C($e,"IMG",{src:!0,alt:!0}),$e.forEach(c),ve.forEach(c),m.forEach(c),this.h()},h(){p(a,"class","pl-1 text-gray-600 overflow-ellipsis"),p(u,"class","flex-1"),p(U,"id","mention"),Ne(U,"display","none"),p(U,"type","checkbox"),ie(O.src,G=Ht)||p(O,"src",G),p(O,"class","inline"),p(O,"alt","mention"),p($,"class","cursor-pointer"),p($,"for","mention"),p(T,"class","pr-2"),ie(Y.src,q=Et)||p(Y,"src",q),p(Y,"alt","Cancel mention"),p(Q,"class","pr-2"),p(e,"class","flex")},m(z,m){g(z,e,m),b(e,l),b(l,n),b(l,t),d.block.m(t,d.anchor=null),d.mount=()=>t,d.anchor=null,b(e,i),b(e,a),b(a,f),b(e,_),b(e,u),b(e,w),b(e,T),b(T,U),U.checked=r[29].mention,b(T,F),b(T,$),b($,O),b($,J),b($,le),b(e,W),b(e,Q),b(Q,B),b(B,Y),A=!0,oe||(v=[ae(U,"change",k),ae(B,"click",K)],oe=!0)},p(z,m){r=z,d.ctx=r,m[0]&256&&o!==(o=r[30])&&te(o,d)||pe(d,r,m),(!A||m[0]&256)&&s!==(s=r[29].message.content+"")&&Z(f,s),m[0]&256&&(U.checked=r[29].mention),(!A||m[0]&256)&&V!==(V=r[29].mention?"ON":"OFF")&&Z(le,V)},i(z){A||(E(d.block),A=!0)},o(z){for(let m=0;m<3;m+=1){const S=d.blocks[m];D(S)}A=!1},d(z){z&&c(e),d.block.d(),d.token=null,d=null,oe=!1,De(v)}}}function bn(r){let e,l,n,t,o,i,a,s,f,_,u,w,T,U,F,$,O,G,J=he(r[9]),V=[];for(let v=0;v<J.length;v+=1)V[v]=pt(mt(r,J,v));const le=v=>D(V[v],1,1,()=>{V[v]=null});let W=r[6]!=null&&r[6].length!=0&&bt(r),Q=he(r[4]),B=[];for(let v=0;v<Q.length;v+=1)B[v]=gt(dt(r,Q,v));const Y=v=>D(B[v],1,1,()=>{B[v]=null});let q=he(r[8]),A=[];for(let v=0;v<q.length;v+=1)A[v]=kt(ut(r,q,v));const oe=v=>D(A[v],1,1,()=>{A[v]=null});return{c(){e=I("main"),l=I("div");for(let v=0;v<V.length;v+=1)V[v].c();n=R(),W&&W.c(),t=R();for(let v=0;v<B.length;v+=1)B[v].c();o=R();for(let v=0;v<A.length;v+=1)A[v].c();i=R(),a=I("form"),s=I("label"),f=I("img"),u=R(),w=I("input"),T=R(),U=I("textarea"),this.h()},l(v){e=C(v,"MAIN",{class:!0});var d=P(e);l=C(d,"DIV",{id:!0,class:!0});var k=P(l);for(let m=0;m<V.length;m+=1)V[m].l(k);k.forEach(c),n=L(d),W&&W.l(d),t=L(d);for(let m=0;m<B.length;m+=1)B[m].l(d);o=L(d);for(let m=0;m<A.length;m+=1)A[m].l(d);i=L(d),a=C(d,"FORM",{id:!0,class:!0});var K=P(a);s=C(K,"LABEL",{for:!0,class:!0});var z=P(s);f=C(z,"IMG",{src:!0,alt:!0}),z.forEach(c),u=L(K),w=C(K,"INPUT",{id:!0,class:!0,type:!0,max:!0}),T=L(K),U=C(K,"TEXTAREA",{maxlength:!0,class:!0,placeholder:!0}),P(U).forEach(c),K.forEach(c),d.forEach(c),this.h()},h(){p(l,"id","messages-list"),p(l,"class","flex flex-col justify-end h-full overflow-x-hidden overflow-y-scroll"),ie(f.src,_=Rt)||p(f,"src",_),p(f,"alt","Upload File"),p(s,"for","file-upload"),p(s,"class","cursor-pointer"),p(w,"id","file-upload"),p(w,"class","opacity-0 w-0 p-1"),p(w,"type","file"),w.multiple=!0,p(w,"max",5),p(U,"maxlength","2000"),p(U,"class","outline-none resize-none bg-inherit w-full h-12"),p(U,"placeholder",F="Send message in "+r[7]),p(a,"id","message-send-form"),p(a,"class","flex bg-gray-500 rounded-xl px-2 pt-2 m-4"),p(e,"class","main-content-container flex flex-col")},m(v,d){g(v,e,d),b(e,l);for(let k=0;k<V.length;k+=1)V[k]&&V[k].m(l,null);r[17](l),b(e,n),W&&W.m(e,null),b(e,t);for(let k=0;k<B.length;k+=1)B[k]&&B[k].m(e,null);b(e,o);for(let k=0;k<A.length;k+=1)A[k]&&A[k].m(e,null);b(e,i),b(e,a),b(a,s),b(s,f),b(a,u),b(a,w),r[21](w),b(a,T),b(a,U),r[24](U),$=!0,O||(G=[ae(w,"change",r[22]),ae(U,"blur",r[14]),ae(U,"input",r[15]),ae(U,"keydown",r[23]),ae(a,"submit",r[13])],O=!0)},p(v,d){if(d[0]&512){J=he(v[9]);let k;for(k=0;k<J.length;k+=1){const K=mt(v,J,k);V[k]?(V[k].p(K,d),E(V[k],1)):(V[k]=pt(K),V[k].c(),E(V[k],1),V[k].m(l,null))}for(ne(),k=J.length;k<V.length;k+=1)le(k);re()}if(v[6]!=null&&v[6].length!=0?W?W.p(v,d):(W=bt(v),W.c(),W.m(e,t)):W&&(W.d(1),W=null),d[0]&18){Q=he(v[4]);let k;for(k=0;k<Q.length;k+=1){const K=dt(v,Q,k);B[k]?(B[k].p(K,d),E(B[k],1)):(B[k]=gt(K),B[k].c(),E(B[k],1),B[k].m(e,o))}for(ne(),k=Q.length;k<B.length;k+=1)Y(k);re()}if(d[0]&2305){q=he(v[8]);let k;for(k=0;k<q.length;k+=1){const K=ut(v,q,k);A[k]?(A[k].p(K,d),E(A[k],1)):(A[k]=kt(K),A[k].c(),E(A[k],1),A[k].m(e,i))}for(ne(),k=q.length;k<A.length;k+=1)oe(k);re()}(!$||d[0]&128&&F!==(F="Send message in "+v[7]))&&p(U,"placeholder",F)},i(v){if(!$){for(let d=0;d<J.length;d+=1)E(V[d]);for(let d=0;d<Q.length;d+=1)E(B[d]);for(let d=0;d<q.length;d+=1)E(A[d]);$=!0}},o(v){V=V.filter(Boolean);for(let d=0;d<V.length;d+=1)D(V[d]);B=B.filter(Boolean);for(let d=0;d<B.length;d+=1)D(B[d]);A=A.filter(Boolean);for(let d=0;d<A.length;d+=1)D(A[d]);$=!1},d(v){v&&c(e),we(V,v),r[17](null),W&&W.d(),we(B,v),we(A,v),r[21](null),r[24](null),O=!1,De(G)}}}const vt=r=>r.name;function gn(r,e,l){let n,t,o=h,i=()=>(o(),o=St(U,m=>l(8,t=m)),U),a;r.$$.on_destroy.push(()=>o());let{channel:s}=e;const f=ee(Ce);se(r,f,m=>l(1,n=m));const _=ee(Ae);let u=Me([]);se(r,u,m=>l(9,a=m));let w=Me([]),T=Me([]);const U=Me([]);i(),Ue(Pe,u),Ue(yt,w),Ue(Oe,T),Ue($t,U);let F,$,O=[],G,J;Dt(()=>{$&&$.offsetHeight+$.scrollTop>$.scrollHeight-20&&jt().then(()=>{$.scrollTo(0,$.scrollHeight)})});async function V(m){if(!m){_.removeAllListeners("ChannelStartTyping"),_.removeAllListeners("ChannelStopTyping");return}_.on("ChannelStartTyping",async({id:S,user:y})=>{var j;if(!(y==((j=_.user)==null?void 0:j._id)||S!=s._id)){for(const{_id:H}of O)if(y==H)return;l(4,O[O.length]=await _.api.fetchUser(y),O)}}),_.on("ChannelStopTyping",({id:S,user:y})=>{S==s._id&&l(4,O=O.filter(j=>j._id!=y))})}At(()=>{_.on("Message",m=>{m.channel==s._id&&(_.api.ackMessage(s._id,m._id),u.update(S=>(S.push(m),S)))}),_.on("MessageDelete",({id:m,channel:S})=>{S==s._id&&u.update(y=>y.filter(j=>j._id!=m))}),_.on("MessageUpdate",({id:m,channel:S,data:y})=>{S==s._id&&u.update(j=>{const H=j.findIndex(ve=>ve._id==m),x=j[H];return y.content!=null&&(x.content=y.content),y.embeds!=null&&(x.embeds=y.embeds),x.edited=y.edited,j[H]=x,j})})});async function le(){let m=[];(G==null?void 0:G.files)!=null&&(m=await Promise.all(Array.from(G.files).map(S=>_.autumn.uploadFile(S))),l(5,G.value="",G),l(6,J=null)),await _.api.sendMessage(s._id,{content:F.value.trim(),replies:t.map(({message:{_id:S},mention:y})=>({id:S,mention:y})),attachments:m}),U.set([]),l(2,F.value="",F)}let W;async function Q(m){var S;if(m.channel_type=="TextChannel"||m.channel_type=="VoiceChannel"||m.channel_type=="Group"){l(7,W=`#${m.name}`);return}if(m.channel_type=="SavedMessages"){l(7,W="Saved Notes");return}l(7,W=`@${de(await _.api.fetchUser(m.recipients[0]==((S=_.user)==null?void 0:S._id)?m.recipients[1]:m.recipients[0]))}`)}function B(){n["jolt:send-typing-indicators"]&&_.websocket.send({type:"EndTyping",channel:s._id})}function Y(){if(n["jolt:send-typing-indicators"]){if(F.value==""){_.websocket.send({type:"EndTyping",channel:s._id});return}_.websocket.send({type:"BeginTyping",channel:s._id})}}function q(m){Ee[m?"unshift":"push"](()=>{$=m,l(3,$)})}const A=()=>{G!=null&&(l(5,G.value="",G),l(6,J=null))};function oe(m,S){m[S].mention=this.checked,U.set(t)}const v=m=>U.update(S=>(S=S.filter(y=>y.message._id!=m.message._id),S));function d(m){Ee[m?"unshift":"push"](()=>{G=m,l(5,G)})}function k(){J=this.files,l(6,J)}const K=m=>{m.shiftKey||m.key!="Enter"||(m.preventDefault(),le())};function z(m){Ee[m?"unshift":"push"](()=>{F=m,l(2,F)})}return r.$$set=m=>{"channel"in m&&l(16,s=m.channel)},r.$$.update=()=>{r.$$.dirty[0]&65536&&(_.api.queryMessages(s._id,{sort:"Latest",include_users:!0}).then(m=>{Array.isArray(m)?u.set(m.reverse()):(u.set(m.messages.reverse()),T.set(m.users),w.set(m.members??[]))}),U.set([]),l(4,O=[])),r.$$.dirty[0]&2&&V(n["jolt:receive-typing-indicators"]),r.$$.dirty[0]&65536&&Q(s)},[U,n,F,$,O,G,J,W,t,a,f,_,u,le,B,Y,s,q,A,oe,v,d,k,K,z]}class Sn extends ge{constructor(e){super(),ke(this,e,gn,bn,be,{channel:16},null,[-1,-1])}}export{Sn as T};
