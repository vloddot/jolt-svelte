import{s as ge,c as x,n as m,d as Ge,u as Le,g as ze,e as He,r as Se,h as Ut,b as Ve,i as St,f as ue,j as De,o as At,k as jt}from"./scheduler.1c041516.js";import{S as ve,i as $e,g as D,h as T,j as V,f as h,k as g,a as b,d as $,p as te,t as I,b as le,e as z,s as A,c as j,m as y,n as E,x as k,o as R,r as ie,u as oe,v as se,w as fe,B as me,C as Pt,D as Ot,z as Ae,l as Ue,y as we,E as qe}from"./index.c08cc536.js";import{h as re,u as be}from"./await_block.23519391.js";import{e as ae}from"./each.e59479a4.js";import{b as pe}from"./paths.b41cce60.js";import{g as ee,c as je,a as Ie,b as Vt}from"./context.03d0c4ff.js";import{g as de,b as he,a as Bt}from"./util.c5f1d722.js";import{U as ye}from"./UserProfilePicture.21b8a6db.js";import{X as Ce,e as Rt,Y as Ft}from"./runtime.esm.4c488b56.js";import{w as Te}from"./index.cd290ac5.js";import{a as Nt,s as Mt}from"./context.fa34f1f8.js";import{d as Kt}from"./index.esm.4b6e8736.js";async function Oe(r,e,n){if(n=="0".repeat(26))return;const l=e.find(t=>t._id==n);return l??await r.fetchUser(n)}const Be=Symbol(),Dt=Symbol(),Re=Symbol(),Tt=Symbol();function Xe(r){const e=he(r[14]);r[15]=e}function We(r){var o;let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:Xt,then:Lt,catch:Gt,value:13,blocks:[,,,]};return re(n=((o=r[3])==null?void 0:o.find(r[12]))??r[6].api.fetchMessage(r[2],r[0]),t),{c(){e=z(),t.block.c()},l(i){e=z(),t.block.l(i)},m(i,f){b(i,e,f),t.block.m(i,t.anchor=f),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(i,f){var s;r=i,t.ctx=r,f&13&&n!==(n=((s=r[3])==null?void 0:s.find(r[12]))??r[6].api.fetchMessage(r[2],r[0]))&&re(n,t)||be(t,r,f)},i(i){l||($(t.block),l=!0)},o(i){for(let f=0;f<3;f+=1){const s=t.blocks[f];I(s)}l=!1},d(i){i&&h(e),t.block.d(i),t.token=null,t=null}}}function Gt(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Lt(r){let e,n,l,t=!r[4]["jolt:low-data-mode"]&&Ye(r),o=r[13].content!=null&&Je(r);return{c(){t&&t.c(),e=A(),o&&o.c(),n=z()},l(i){t&&t.l(i),e=j(i),o&&o.l(i),n=z()},m(i,f){t&&t.m(i,f),b(i,e,f),o&&o.m(i,f),b(i,n,f),l=!0},p(i,f){i[4]["jolt:low-data-mode"]?t&&(te(),I(t,1,1,()=>{t=null}),le()):t?(t.p(i,f),f&16&&$(t,1)):(t=Ye(i),t.c(),$(t,1),t.m(e.parentNode,e)),i[13].content!=null?o?o.p(i,f):(o=Je(i),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i(i){l||($(t),l=!0)},o(i){I(t),l=!1},d(i){i&&(h(e),h(n)),t&&t.d(i),o&&o.d(i)}}}function Ye(r){let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:qt,then:Ht,catch:zt,value:14,blocks:[,,,]};return re(e=Oe(r[6].api,r[5]??r[6].api.cache.users,r[13].author),t),{c(){t.block.c(),n=y(":")},l(o){t.block.l(o),n=E(o,":")},m(o,i){t.block.m(o,t.anchor=i),t.mount=()=>n.parentNode,t.anchor=n,b(o,n,i),l=!0},p(o,i){r=o,t.ctx=r,i&45&&e!==(e=Oe(r[6].api,r[5]??r[6].api.cache.users,r[13].author))&&re(e,t)||be(t,r,i)},i(o){l||($(t.block),l=!0)},o(o){for(let i=0;i<3;i+=1){const f=t.blocks[i];I(f)}l=!1},d(o){o&&h(n),t.block.d(o),t.token=null,t=null}}}function zt(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Ht(r){Xe(r);let e,n,l=r[15]+"",t,o,i;return e=new ye({props:{src:de(r[14]),name:r[15],width:24,height:24}}),{c(){ie(e.$$.fragment),n=A(),t=y(l),o=A()},l(f){oe(e.$$.fragment,f),n=j(f),t=E(f,l),o=j(f)},m(f,s){se(e,f,s),b(f,n,s),b(f,t,s),b(f,o,s),i=!0},p(f,s){Xe(f);const u={};s&45&&(u.src=de(f[14])),s&45&&(u.name=f[15]),e.$set(u),(!i||s&45)&&l!==(l=f[15]+"")&&R(t,l)},i(f){i||($(e.$$.fragment,f),i=!0)},o(f){I(e.$$.fragment,f),i=!1},d(f){f&&(h(n),h(t),h(o)),fe(e,f)}}}function qt(r){let e;return{c(){e=y(`<Unknown User>
				`)},l(n){e=E(n,`<Unknown User>
				`)},m(n,l){b(n,e,l)},p:m,i:m,o:m,d(n){n&&h(e)}}}function Je(r){let e,n=r[13].content+"",l;return{c(){e=D("span"),l=y(n),this.h()},l(t){e=T(t,"SPAN",{class:!0});var o=V(e);l=E(o,n),o.forEach(h),this.h()},h(){g(e,"class","text-gray-600")},m(t,o){b(t,e,o),k(e,l)},p(t,o){o&13&&n!==(n=t[13].content+"")&&R(l,n)},d(t){t&&h(e)}}}function Xt(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Wt(r){let e,n,l,t=r[2]!=null&&We(r);return{c(){e=D("a"),t&&t.c(),this.h()},l(o){e=T(o,"A",{href:!0});var i=V(e);t&&t.l(i),i.forEach(h),this.h()},h(){g(e,"href",n=pe+"/"+(r[1]==null?`channels/${r[2]}#${r[0]}`:`servers/${r[1]}/channels/${r[2]}#${r[0]}`))},m(o,i){b(o,e,i),t&&t.m(e,null),l=!0},p(o,[i]){o[2]!=null?t?(t.p(o,i),i&4&&$(t,1)):(t=We(o),t.c(),$(t,1),t.m(e,null)):t&&(te(),I(t,1,1,()=>{t=null}),le()),(!l||i&7&&n!==(n=pe+"/"+(o[1]==null?`channels/${o[2]}#${o[0]}`:`servers/${o[1]}/channels/${o[2]}#${o[0]}`)))&&g(e,"href",n)},i(o){l||($(t),l=!0)},o(o){I(t),l=!1},d(o){o&&h(e),t&&t.d()}}}function Yt(r,e,n){let l,t,o,i,f;const s=ee(je),u=ee(Ie);x(r,u,w=>n(4,i=w));const _=ee(Nt);x(r,_,w=>n(1,l=w));const c=ee(Mt);x(r,c,w=>n(2,t=w));const p=ee(Be);x(r,p,w=>n(3,o=w));const B=ee(Re);x(r,B,w=>n(5,f=w));let{id:G}=e;const P=({_id:w})=>G==w;return r.$$set=w=>{"id"in w&&n(0,G=w.id)},[G,l,t,o,i,f,s,u,_,c,p,B,P]}class Jt extends ve{constructor(e){super(),$e(this,e,Yt,Wt,ge,{id:0})}}const Qt=r=>({}),Qe=r=>({});function Zt(r){let e,n,l,t,o,i,f,s,u,_,c=r[2]("confirm")+"",p,B,G,P=r[2]("cancel")+"",w,X,W,S;const ne=r[4].header,H=Ge(ne,r,r[3],Qe),O=r[4].default,J=Ge(O,r,r[3],null);return{c(){e=D("dialog"),n=D("div"),H&&H.c(),l=A(),t=D("hr"),o=A(),J&&J.c(),i=A(),f=D("hr"),s=A(),u=D("form"),_=D("button"),p=y(c),B=A(),G=D("button"),w=y(P),this.h()},l(d){e=T(d,"DIALOG",{});var v=V(e);n=T(v,"DIV",{});var a=V(n);H&&H.l(a),l=j(a),t=T(a,"HR",{}),o=j(a),J&&J.l(a),i=j(a),f=T(a,"HR",{}),s=j(a),u=T(a,"FORM",{method:!0});var C=V(u);_=T(C,"BUTTON",{type:!0});var F=V(_);p=E(F,c),F.forEach(h),B=j(C),G=T(C,"BUTTON",{type:!0});var L=V(G);w=E(L,P),L.forEach(h),C.forEach(h),a.forEach(h),v.forEach(h),this.h()},h(){g(_,"type","submit"),g(G,"type","reset"),g(u,"method","dialog")},m(d,v){b(d,e,v),k(e,n),H&&H.m(n,null),k(n,l),k(n,t),k(n,o),J&&J.m(n,null),k(n,i),k(n,f),k(n,s),k(n,u),k(u,_),k(_,p),k(u,B),k(u,G),k(G,w),r[7](e),X=!0,W||(S=[me(G,"click",r[6]),me(u,"submit",r[5]),me(e,"close",r[8])],W=!0)},p(d,[v]){H&&H.p&&(!X||v&8)&&Le(H,ne,d,d[3],X?He(ne,d[3],v,Qt):ze(d[3]),Qe),J&&J.p&&(!X||v&8)&&Le(J,O,d,d[3],X?He(O,d[3],v,null):ze(d[3]),null),(!X||v&4)&&c!==(c=d[2]("confirm")+"")&&R(p,c),(!X||v&4)&&P!==(P=d[2]("cancel")+"")&&R(w,P)},i(d){X||($(H,d),$(J,d),X=!0)},o(d){I(H,d),I(J,d),X=!1},d(d){d&&h(e),H&&H.d(d),J&&J.d(d),r[7](null),W=!1,Se(S)}}}function xt(r,e,n){let l;x(r,Ce,p=>n(2,l=p));let{$$slots:t={},$$scope:o}=e,{showModal:i}=e,f;function s(p){Ut.call(this,r,p)}const u=()=>n(0,i=!1);function _(p){Ve[p?"unshift":"push"](()=>{f=p,n(1,f)})}const c=()=>n(0,i=!1);return r.$$set=p=>{"showModal"in p&&n(0,i=p.showModal),"$$scope"in p&&n(3,o=p.$$scope)},r.$$.update=()=>{r.$$.dirty&3&&(i?f==null||f.showModal():f==null||f.close())},[i,f,l,o,t,s,u,_,c]}class el extends ve{constructor(e){super(),$e(this,e,xt,Zt,ge,{showModal:0})}}function tl(r){let e,n="Are you sure you want to go to this link? External links can be dangerous.";return{c(){e=D("p"),e.textContent=n},l(l){e=T(l,"P",{"data-svelte-h":!0}),Ae(e)!=="svelte-os1rtp"&&(e.textContent=n)},m(l,t){b(l,e,t)},p:m,d(l){l&&h(e)}}}function ll(r){let e,n="External Link";return{c(){e=D("h1"),e.textContent=n,this.h()},l(l){e=T(l,"H1",{class:!0,slot:!0,"data-svelte-h":!0}),Ae(e)!=="svelte-3ozcvb"&&(e.textContent=n),this.h()},h(){g(e,"class","text-3xl"),g(e,"slot","header")},m(l,t){b(l,e,t)},p:m,d(l){l&&h(e)}}}function nl(r){let e,n,l,t,o,i,f,s;function u(c){r[2](c)}let _={$$slots:{header:[ll],default:[tl]},$$scope:{ctx:r}};return r[1]!==void 0&&(_.showModal=r[1]),e=new el({props:_}),Ve.push(()=>Pt(e,"showModal",u)),e.$on("submit",r[3]),{c(){ie(e.$$.fragment),l=A(),t=D("a"),o=y(r[0]),this.h()},l(c){oe(e.$$.fragment,c),l=j(c),t=T(c,"A",{href:!0,target:!0,rel:!0});var p=V(t);o=E(p,r[0]),p.forEach(h),this.h()},h(){g(t,"href",r[0]),g(t,"target","_blank"),g(t,"rel","noreferrer")},m(c,p){se(e,c,p),b(c,l,p),b(c,t,p),k(t,o),i=!0,f||(s=me(t,"click",Ot(r[4])),f=!0)},p(c,[p]){const B={};p&32&&(B.$$scope={dirty:p,ctx:c}),!n&&p&2&&(n=!0,B.showModal=c[1],St(()=>n=!1)),e.$set(B),(!i||p&1)&&R(o,c[0]),(!i||p&1)&&g(t,"href",c[0])},i(c){i||($(e.$$.fragment,c),i=!0)},o(c){I(e.$$.fragment,c),i=!1},d(c){c&&(h(l),h(t)),fe(e,c),f=!1,s()}}}function rl(r,e,n){let{href:l}=e,t=!1;function o(s){t=s,n(1,t)}const i=()=>window.open(l),f=()=>n(1,t=!0);return r.$$set=s=>{"href"in s&&n(0,l=s.href)},[l,t,o,i,f]}class Ne extends ve{constructor(e){super(),$e(this,e,rl,nl,ge,{href:0})}}function il(r){let e,n,l,t;const o=[al,ul],i=[];function f(s,u){return s[2]["jolt:low-data-mode"]?0:1}return e=f(r),n=i[e]=o[e](r),{c(){n.c(),l=z()},l(s){n.l(s),l=z()},m(s,u){i[e].m(s,u),b(s,l,u),t=!0},p(s,u){let _=e;e=f(s),e===_?i[e].p(s,u):(te(),I(i[_],1,1,()=>{i[_]=null}),le(),n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),$(n,1),n.m(l.parentNode,l))},i(s){t||($(n),t=!0)},o(s){I(n),t=!1},d(s){s&&h(l),i[e].d(s)}}}function ol(r){let e,n,l=r[0].filename+"",t,o,i,f;return i=new Ne({props:{href:r[1]}}),{c(){e=D("span"),n=y("[File "),t=y(l),o=y(`]
			`),ie(i.$$.fragment),this.h()},l(s){e=T(s,"SPAN",{class:!0});var u=V(e);n=E(u,"[File "),t=E(u,l),o=E(u,`]
			`),oe(i.$$.fragment,u),u.forEach(h),this.h()},h(){g(e,"class","text-gray-500")},m(s,u){b(s,e,u),k(e,n),k(e,t),k(e,o),se(i,e,null),f=!0},p(s,u){(!f||u&1)&&l!==(l=s[0].filename+"")&&R(t,l);const _={};u&2&&(_.href=s[1]),i.$set(_)},i(s){f||($(i.$$.fragment,s),f=!0)},o(s){I(i.$$.fragment,s),f=!1},d(s){s&&h(e),fe(i)}}}function sl(r){let e,n,l;return{c(){e=D("audio"),n=D("source"),this.h()},l(t){e=T(t,"AUDIO",{});var o=V(e);n=T(o,"SOURCE",{src:!0}),o.forEach(h),this.h()},h(){ue(n.src,l=r[1])||g(n,"src",l),e.controls=!0},m(t,o){b(t,e,o),k(e,n)},p(t,o){o&2&&!ue(n.src,l=t[1])&&g(n,"src",l)},i:m,o:m,d(t){t&&h(e)}}}function fl(r){let e,n,l;return{c(){e=D("video"),n=D("source"),this.h()},l(t){e=T(t,"VIDEO",{});var o=V(e);n=T(o,"SOURCE",{src:!0}),o.forEach(h),this.h()},h(){ue(n.src,l=r[1])||g(n,"src",l),e.controls=!0},m(t,o){b(t,e,o),k(e,n)},p(t,o){o&2&&!ue(n.src,l=t[1])&&g(n,"src",l)},i:m,o:m,d(t){t&&h(e)}}}function cl(r){let e,n,l,t;const o=[gl,kl],i=[];function f(s,u){return s[2]["jolt:low-data-mode"]?0:1}return e=f(r),n=i[e]=o[e](r),{c(){n.c(),l=z()},l(s){n.l(s),l=z()},m(s,u){i[e].m(s,u),b(s,l,u),t=!0},p(s,u){let _=e;e=f(s),e===_?i[e].p(s,u):(te(),I(i[_],1,1,()=>{i[_]=null}),le(),n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),$(n,1),n.m(l.parentNode,l))},i(s){t||($(n),t=!0)},o(s){I(n),t=!1},d(s){s&&h(l),i[e].d(s)}}}function ul(r){let e,n,l={ctx:r,current:null,token:null,hasCatch:!0,pending:bl,then:hl,catch:_l,value:5,error:7};return re(n=fetch(r[1]),l),{c(){e=z(),l.block.c()},l(t){e=z(),l.block.l(t)},m(t,o){b(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(t,o){r=t,l.ctx=r,o&2&&n!==(n=fetch(r[1]))&&re(n,l)||be(l,r,o)},i:m,o:m,d(t){t&&h(e),l.block.d(t),l.token=null,l=null}}}function al(r){let e,n,l,t,o;return l=new Ne({props:{href:r[1]}}),{c(){e=D("span"),n=y("[Text "),ie(l.$$.fragment),t=y("]"),this.h()},l(i){e=T(i,"SPAN",{class:!0});var f=V(e);n=E(f,"[Text "),oe(l.$$.fragment,f),t=E(f,"]"),f.forEach(h),this.h()},h(){g(e,"class","text-gray-500")},m(i,f){b(i,e,f),k(e,n),se(l,e,null),k(e,t),o=!0},p(i,f){const s={};f&2&&(s.href=i[1]),l.$set(s)},i(i){o||($(l.$$.fragment,i),o=!0)},o(i){I(l.$$.fragment,i),o=!1},d(i){i&&h(e),fe(l)}}}function _l(r){let e,n=r[3]("file.download.error")+"",l,t,o=r[0].filename+"",i,f,s=r[7]+"",u;return{c(){e=D("p"),l=y(n),t=A(),i=y(o),f=y(": "),u=y(s)},l(_){e=T(_,"P",{});var c=V(e);l=E(c,n),t=j(c),i=E(c,o),f=E(c,": "),u=E(c,s),c.forEach(h)},m(_,c){b(_,e,c),k(e,l),k(e,t),k(e,i),k(e,f),k(e,u)},p(_,c){c&8&&n!==(n=_[3]("file.download.error")+"")&&R(l,n),c&1&&o!==(o=_[0].filename+"")&&R(i,o),c&2&&s!==(s=_[7]+"")&&R(u,s)},d(_){_&&h(e)}}}function hl(r){let e,n,l={ctx:r,current:null,token:null,hasCatch:!1,pending:dl,then:pl,catch:ml,value:6};return re(n=r[5].text(),l),{c(){e=z(),l.block.c()},l(t){e=z(),l.block.l(t)},m(t,o){b(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(t,o){r=t,l.ctx=r,o&2&&n!==(n=r[5].text())&&re(n,l)||be(l,r,o)},d(t){t&&h(e),l.block.d(t),l.token=null,l=null}}}function ml(r){return{c:m,l:m,m,p:m,d:m}}function pl(r){let e,n=r[6]+"",l;return{c(){e=D("p"),l=y(n)},l(t){e=T(t,"P",{});var o=V(e);l=E(o,n),o.forEach(h)},m(t,o){b(t,e,o),k(e,l)},p(t,o){o&2&&n!==(n=t[6]+"")&&R(l,n)},d(t){t&&h(e)}}}function dl(r){return{c:m,l:m,m,p:m,d:m}}function bl(r){return{c:m,l:m,m,p:m,d:m}}function kl(r){let e,n,l;return{c(){e=D("img"),this.h()},l(t){e=T(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ue(e.src,n=r[1])||g(e,"src",n),g(e,"alt",l=r[0].filename),g(e,"class","max-w-xl max-h-xl")},m(t,o){b(t,e,o)},p(t,o){o&2&&!ue(e.src,n=t[1])&&g(e,"src",n),o&1&&l!==(l=t[0].filename)&&g(e,"alt",l)},i:m,o:m,d(t){t&&h(e)}}}function gl(r){let e,n,l,t,o;return l=new Ne({props:{href:r[1]}}),{c(){e=D("span"),n=y("[Image "),ie(l.$$.fragment),t=y("]"),this.h()},l(i){e=T(i,"SPAN",{class:!0});var f=V(e);n=E(f,"[Image "),oe(l.$$.fragment,f),t=E(f,"]"),f.forEach(h),this.h()},h(){g(e,"class","text-gray-500")},m(i,f){b(i,e,f),k(e,n),se(l,e,null),k(e,t),o=!0},p(i,f){const s={};f&2&&(s.href=i[1]),l.$set(s)},i(i){o||($(l.$$.fragment,i),o=!0)},o(i){I(l.$$.fragment,i),o=!1},d(i){i&&h(e),fe(l)}}}function vl(r){let e,n,l,t;const o=[cl,fl,sl,ol,il],i=[];function f(s,u){return s[0].metadata.type=="Image"?0:s[0].metadata.type=="Video"?1:s[0].metadata.type=="Audio"?2:s[0].metadata.type=="File"?3:s[0].metadata.type=="Text"?4:-1}return~(n=f(r))&&(l=i[n]=o[n](r)),{c(){e=D("div"),l&&l.c()},l(s){e=T(s,"DIV",{});var u=V(e);l&&l.l(u),u.forEach(h)},m(s,u){b(s,e,u),~n&&i[n].m(e,null),t=!0},p(s,[u]){let _=n;n=f(s),n===_?~n&&i[n].p(s,u):(l&&(te(),I(i[_],1,1,()=>{i[_]=null}),le()),~n?(l=i[n],l?l.p(s,u):(l=i[n]=o[n](s),l.c()),$(l,1),l.m(e,null)):l=null)},i(s){t||($(l),t=!0)},o(s){I(l),t=!1},d(s){s&&h(e),~n&&i[n].d()}}}function $l(r,e,n){let l,t,o;x(r,Ce,s=>n(3,o=s));const i=ee(Ie);x(r,i,s=>n(2,t=s));let{attachment:f}=e;return r.$$set=s=>{"attachment"in s&&n(0,f=s.attachment)},r.$$.update=()=>{r.$$.dirty&1&&n(1,l=Bt(f))},[f,l,t,o,i]}class wl extends ve{constructor(e){super(),$e(this,e,$l,vl,ge,{attachment:0})}}function yl(r){let e,n="oop website embed, can't handle that :(";return{c(){e=D("span"),e.textContent=n,this.h()},l(l){e=T(l,"SPAN",{class:!0,"data-svelte-h":!0}),Ae(e)!=="svelte-1exisih"&&(e.textContent=n),this.h()},h(){g(e,"class","text-gray-600")},m(l,t){b(l,e,t)},p:m,i:m,o:m,d(l){l&&h(e)}}}function El(r){let e,n,l,t=r[0].icon_url&&!r[1]["jolt:low-data-mode"]&&Ze(r),o=r[0].title&&xe(r),i=r[0].description&&et(r);return{c(){e=D("div"),t&&t.c(),n=A(),o&&o.c(),l=A(),i&&i.c(),this.h()},l(f){e=T(f,"DIV",{style:!0});var s=V(e);t&&t.l(s),n=j(s),o&&o.l(s),l=j(s),i&&i.l(s),s.forEach(h),this.h()},h(){Ue(e,"background-color",r[0].colour)},m(f,s){b(f,e,s),t&&t.m(e,null),k(e,n),o&&o.m(e,null),k(e,l),i&&i.m(e,null)},p(f,s){f[0].icon_url&&!f[1]["jolt:low-data-mode"]?t?t.p(f,s):(t=Ze(f),t.c(),t.m(e,n)):t&&(t.d(1),t=null),f[0].title?o?o.p(f,s):(o=xe(f),o.c(),o.m(e,l)):o&&(o.d(1),o=null),f[0].description?i?i.p(f,s):(i=et(f),i.c(),i.m(e,null)):i&&(i.d(1),i=null),s&1&&Ue(e,"background-color",f[0].colour)},i:m,o:m,d(f){f&&h(e),t&&t.d(),o&&o.d(),i&&i.d()}}}function Il(r){let e,n,l,t;const o=[Ml,Nl],i=[];function f(s,u){return s[1]["jolt:low-data-mode"]?0:1}return e=f(r),n=i[e]=o[e](r),{c(){n.c(),l=z()},l(s){n.l(s),l=z()},m(s,u){i[e].m(s,u),b(s,l,u),t=!0},p(s,u){let _=e;e=f(s),e===_?i[e].p(s,u):(te(),I(i[_],1,1,()=>{i[_]=null}),le(),n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),$(n,1),n.m(l.parentNode,l))},i(s){t||($(n),t=!0)},o(s){I(n),t=!1},d(s){s&&h(l),i[e].d(s)}}}function Cl(r){let e,n,l,t;const o=[Tl,Dl],i=[];function f(s,u){return s[1]["jolt:low-data-mode"]?0:1}return e=f(r),n=i[e]=o[e](r),{c(){n.c(),l=z()},l(s){n.l(s),l=z()},m(s,u){i[e].m(s,u),b(s,l,u),t=!0},p(s,u){let _=e;e=f(s),e===_?i[e].p(s,u):(te(),I(i[_],1,1,()=>{i[_]=null}),le(),n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),$(n,1),n.m(l.parentNode,l))},i(s){t||($(n),t=!0)},o(s){I(n),t=!1},d(s){s&&h(l),i[e].d(s)}}}function Ze(r){let e,n,l;return{c(){e=D("img"),this.h()},l(t){e=T(t,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),this.h()},h(){ue(e.src,n=r[0].icon_url)||g(e,"src",n),g(e,"alt",l=r[0].title),g(e,"width","24"),g(e,"height","24"),g(e,"class","inline rounded-3xl")},m(t,o){b(t,e,o)},p(t,o){o&1&&!ue(e.src,n=t[0].icon_url)&&g(e,"src",n),o&1&&l!==(l=t[0].title)&&g(e,"alt",l)},d(t){t&&h(e)}}}function xe(r){let e,n=r[0].title+"",l;return{c(){e=D("h1"),l=y(n),this.h()},l(t){e=T(t,"H1",{class:!0});var o=V(e);l=E(o,n),o.forEach(h),this.h()},h(){g(e,"class","text-gray-600")},m(t,o){b(t,e,o),k(e,l)},p(t,o){o&1&&n!==(n=t[0].title+"")&&R(l,n)},d(t){t&&h(e)}}}function et(r){let e,n=r[0].description+"",l;return{c(){e=D("p"),l=y(n)},l(t){e=T(t,"P",{});var o=V(e);l=E(o,n),o.forEach(h)},m(t,o){b(t,e,o),k(e,l)},p(t,o){o&1&&n!==(n=t[0].description+"")&&R(l,n)},d(t){t&&h(e)}}}function Nl(r){let e,n,l,t,o;return{c(){e=D("video"),n=D("source"),this.h()},l(i){e=T(i,"VIDEO",{});var f=V(e);n=T(f,"SOURCE",{src:!0,width:!0,height:!0}),f.forEach(h),this.h()},h(){ue(n.src,l=r[0].url)||g(n,"src",l),g(n,"width",t=r[0].width),g(n,"height",o=r[0].height),e.controls=!0},m(i,f){b(i,e,f),k(e,n)},p(i,f){f&1&&!ue(n.src,l=i[0].url)&&g(n,"src",l),f&1&&t!==(t=i[0].width)&&g(n,"width",t),f&1&&o!==(o=i[0].height)&&g(n,"height",o)},i:m,o:m,d(i){i&&h(e)}}}function Ml(r){let e,n;return e=new Ne({props:{href:r[0].url}}),{c(){ie(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,t){se(e,l,t),n=!0},p(l,t){const o={};t&1&&(o.href=l[0].url),e.$set(o)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function Dl(r){let e,n,l,t;return{c(){e=D("img"),this.h()},l(o){e=T(o,"IMG",{src:!0,width:!0,height:!0}),this.h()},h(){ue(e.src,n=r[0].url)||g(e,"src",n),g(e,"width",l=r[0].width),g(e,"height",t=r[0].height)},m(o,i){b(o,e,i)},p(o,i){i&1&&!ue(e.src,n=o[0].url)&&g(e,"src",n),i&1&&l!==(l=o[0].width)&&g(e,"width",l),i&1&&t!==(t=o[0].height)&&g(e,"height",t)},i:m,o:m,d(o){o&&h(e)}}}function Tl(r){let e,n;return e=new Ne({props:{href:r[0].url}}),{c(){ie(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,t){se(e,l,t),n=!0},p(l,t){const o={};t&1&&(o.href=l[0].url),e.$set(o)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function Ul(r){let e,n,l,t;const o=[Cl,Il,El,yl],i=[];function f(s,u){return s[0].type=="Image"?0:s[0].type=="Video"?1:s[0].type=="Text"?2:s[0].type=="Website"?3:-1}return~(e=f(r))&&(n=i[e]=o[e](r)),{c(){n&&n.c(),l=z()},l(s){n&&n.l(s),l=z()},m(s,u){~e&&i[e].m(s,u),b(s,l,u),t=!0},p(s,[u]){let _=e;e=f(s),e===_?~e&&i[e].p(s,u):(n&&(te(),I(i[_],1,1,()=>{i[_]=null}),le()),~e?(n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),$(n,1),n.m(l.parentNode,l)):n=null)},i(s){t||($(n),t=!0)},o(s){I(n),t=!1},d(s){s&&h(l),~e&&i[e].d(s)}}}function Sl(r,e,n){let l,{embed:t}=e;const o=ee(Ie);return x(r,o,i=>n(1,l=i)),r.$$set=i=>{"embed"in i&&n(0,t=i.embed)},[t,l,o]}class Al extends ve{constructor(e){super(),$e(this,e,Sl,Ul,ge,{embed:0})}}function tt(r){const e=he(r[4]);r[5]=e}function lt(r){r[6]=r[8][0],r[7]=r[8][1]}function nt(r){const e=he(r[4]);r[5]=e}function jl(r){let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:zl,then:Rl,catch:Bl,value:4,blocks:[,,,]};return re(n=r[2].api.fetchUser(r[0].id),t),{c(){e=z(),t.block.c()},l(o){e=z(),t.block.l(o)},m(o,i){b(o,e,i),t.block.m(o,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(o,i){r=o,t.ctx=r,i&1&&n!==(n=r[2].api.fetchUser(r[0].id))&&re(n,t)||be(t,r,i)},i(o){l||($(t.block),l=!0)},o(o){for(let i=0;i<3;i+=1){const f=t.blocks[i];I(f)}l=!1},d(o){o&&h(e),t.block.d(o),t.token=null,t=null}}}function Pl(r){let e,n,l={ctx:r,current:null,token:null,hasCatch:!1,pending:Xl,then:ql,catch:Hl,value:8};return re(n=Promise.all([r[0].from,r[0].to].map(r[3])),l),{c(){e=z(),l.block.c()},l(t){e=z(),l.block.l(t)},m(t,o){b(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(t,o){r=t,l.ctx=r,o&1&&n!==(n=Promise.all([r[0].from,r[0].to].map(r[3])))&&re(n,l)||be(l,r,o)},i:m,o:m,d(t){t&&h(e),l.block.d(t),l.token=null,l=null}}}function Ol(r){let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:on,then:Yl,catch:Wl,value:4,blocks:[,,,]};return re(n=r[2].api.fetchUser(r[0].by),t),{c(){e=z(),t.block.c()},l(o){e=z(),t.block.l(o)},m(o,i){b(o,e,i),t.block.m(o,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(o,i){r=o,t.ctx=r,i&1&&n!==(n=r[2].api.fetchUser(r[0].by))&&re(n,t)||be(t,r,i)},i(o){l||($(t.block),l=!0)},o(o){for(let i=0;i<3;i+=1){const f=t.blocks[i];I(f)}l=!1},d(o){o&&h(e),t.block.d(o),t.token=null,t=null}}}function Vl(r){let e=r[0].content+"",n;return{c(){n=y(e)},l(l){n=E(l,e)},m(l,t){b(l,n,t)},p(l,t){t&1&&e!==(e=l[0].content+"")&&R(n,e)},i:m,o:m,d(l){l&&h(n)}}}function Bl(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Rl(r){tt(r);let e,n,l=r[5]+"",t,o,i,f;e=new ye({props:{src:de(r[4]),width:24,height:24,name:r[5]}});function s(c,p){if(c[0].type=="user_banned")return Ll;if(c[0].type=="user_joined")return Gl;if(c[0].type=="user_kicked")return Kl;if(c[0].type=="user_left")return Fl}let u=s(r),_=u&&u(r);return{c(){ie(e.$$.fragment),n=A(),t=y(l),o=A(),_&&_.c(),i=z()},l(c){oe(e.$$.fragment,c),n=j(c),t=E(c,l),o=j(c),_&&_.l(c),i=z()},m(c,p){se(e,c,p),b(c,n,p),b(c,t,p),b(c,o,p),_&&_.m(c,p),b(c,i,p),f=!0},p(c,p){tt(c);const B={};p&1&&(B.src=de(c[4])),p&1&&(B.name=c[5]),e.$set(B),(!f||p&1)&&l!==(l=c[5]+"")&&R(t,l),u===(u=s(c))&&_?_.p(c,p):(_&&_.d(1),_=u&&u(c),_&&(_.c(),_.m(i.parentNode,i)))},i(c){f||($(e.$$.fragment,c),f=!0)},o(c){I(e.$$.fragment,c),f=!1},d(c){c&&(h(n),h(t),h(o),h(i)),fe(e,c),_&&_.d(c)}}}function Fl(r){let e=r[1]("user.chat.left")+"",n,l;return{c(){n=y(e),l=y(".")},l(t){n=E(t,e),l=E(t,".")},m(t,o){b(t,n,o),b(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("user.chat.left")+"")&&R(n,e)},d(t){t&&(h(n),h(l))}}}function Kl(r){let e=r[1]("user.was-kicked")+"",n,l;return{c(){n=y(e),l=y(".")},l(t){n=E(t,e),l=E(t,".")},m(t,o){b(t,n,o),b(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("user.was-kicked")+"")&&R(n,e)},d(t){t&&(h(n),h(l))}}}function Gl(r){let e=r[1]("user.chat.joined")+"",n,l;return{c(){n=y(e),l=y(".")},l(t){n=E(t,e),l=E(t,".")},m(t,o){b(t,n,o),b(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("user.chat.joined")+"")&&R(n,e)},d(t){t&&(h(n),h(l))}}}function Ll(r){let e=r[1]("user.was-banned")+"",n,l;return{c(){n=y(e),l=y(".")},l(t){n=E(t,e),l=E(t,".")},m(t,o){b(t,n,o),b(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("user.was-banned")+"")&&R(n,e)},d(t){t&&(h(n),h(l))}}}function zl(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Hl(r){return{c:m,l:m,m,p:m,d:m}}function ql(r){lt(r);let e=r[1]("channel.ownership.changed-from")+"",n,l,t=he(r[6])+"",o,i,f=he(r[7])+"",s,u;return{c(){n=y(e),l=A(),o=y(t),i=y(" to "),s=y(f),u=y(".")},l(_){n=E(_,e),l=j(_),o=E(_,t),i=E(_," to "),s=E(_,f),u=E(_,".")},m(_,c){b(_,n,c),b(_,l,c),b(_,o,c),b(_,i,c),b(_,s,c),b(_,u,c)},p(_,c){lt(_),c&2&&e!==(e=_[1]("channel.ownership.changed-from")+"")&&R(n,e),c&1&&t!==(t=he(_[6])+"")&&R(o,t),c&1&&f!==(f=he(_[7])+"")&&R(s,f)},d(_){_&&(h(n),h(l),h(o),h(i),h(s),h(u))}}}function Xl(r){return{c:m,l:m,m,p:m,d:m}}function Wl(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Yl(r){nt(r);let e,n,l=r[5]+"",t,o,i,f;e=new ye({props:{src:de(r[4]),width:24,height:24,name:r[5]}});function s(c,p){if(c[0].type=="channel_description_changed")return xl;if(c[0].type=="channel_icon_changed")return Zl;if(c[0].type=="channel_renamed")return Ql;if(c[0].type=="user_added"||c[0].type=="user_remove")return Jl}let u=s(r),_=u&&u(r);return{c(){ie(e.$$.fragment),n=A(),t=y(l),o=A(),_&&_.c(),i=z()},l(c){oe(e.$$.fragment,c),n=j(c),t=E(c,l),o=j(c),_&&_.l(c),i=z()},m(c,p){se(e,c,p),b(c,n,p),b(c,t,p),b(c,o,p),_&&_.m(c,p),b(c,i,p),f=!0},p(c,p){nt(c);const B={};p&1&&(B.src=de(c[4])),p&1&&(B.name=c[5]),e.$set(B),(!f||p&1)&&l!==(l=c[5]+"")&&R(t,l),u===(u=s(c))&&_?_.p(c,p):(_&&_.d(1),_=u&&u(c),_&&(_.c(),_.m(i.parentNode,i)))},i(c){f||($(e.$$.fragment,c),f=!0)},o(c){I(e.$$.fragment,c),f=!1},d(c){c&&(h(n),h(t),h(o),h(i)),fe(e,c),_&&_.d(c)}}}function Jl(r){let e,n,l={ctx:r,current:null,token:null,hasCatch:!1,pending:rn,then:tn,catch:en,value:4};return re(n=r[2].api.fetchUser(r[0].id),l),{c(){e=z(),l.block.c()},l(t){e=z(),l.block.l(t)},m(t,o){b(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(t,o){r=t,l.ctx=r,o&1&&n!==(n=r[2].api.fetchUser(r[0].id))&&re(n,l)||be(l,r,o)},d(t){t&&h(e),l.block.d(t),l.token=null,l=null}}}function Ql(r){let e=r[1]("channel.rename-to")+"",n,l,t=r[0].name+"",o,i;return{c(){n=y(e),l=A(),o=y(t),i=y(".")},l(f){n=E(f,e),l=j(f),o=E(f,t),i=E(f,".")},m(f,s){b(f,n,s),b(f,l,s),b(f,o,s),b(f,i,s)},p(f,s){s&2&&e!==(e=f[1]("channel.rename-to")+"")&&R(n,e),s&1&&t!==(t=f[0].name+"")&&R(o,t)},d(f){f&&(h(n),h(l),h(o),h(i))}}}function Zl(r){let e=r[1]("channel.icon.change")+"",n,l;return{c(){n=y(e),l=y(".")},l(t){n=E(t,e),l=E(t,".")},m(t,o){b(t,n,o),b(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("channel.icon.change")+"")&&R(n,e)},d(t){t&&(h(n),h(l))}}}function xl(r){let e=r[1]("channel.description.change")+"",n,l;return{c(){n=y(e),l=y(".")},l(t){n=E(t,e),l=E(t,".")},m(t,o){b(t,n,o),b(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("channel.description.change")+"")&&R(n,e)},d(t){t&&(h(n),h(l))}}}function en(r){return{c:m,l:m,m,p:m,d:m}}function tn(r){let e,n=he(r[4])+"",l,t;function o(s,u){if(s[0].type=="user_added")return nn;if(s[0].type=="user_remove")return ln}let i=o(r),f=i&&i(r);return{c(){f&&f.c(),e=A(),l=y(n),t=y(".")},l(s){f&&f.l(s),e=j(s),l=E(s,n),t=E(s,".")},m(s,u){f&&f.m(s,u),b(s,e,u),b(s,l,u),b(s,t,u)},p(s,u){i===(i=o(s))&&f?f.p(s,u):(f&&f.d(1),f=i&&i(s),f&&(f.c(),f.m(e.parentNode,e))),u&1&&n!==(n=he(s[4])+"")&&R(l,n)},d(s){s&&(h(e),h(l),h(t)),f&&f.d(s)}}}function ln(r){let e=r[1]("removed")+"",n;return{c(){n=y(e)},l(l){n=E(l,e)},m(l,t){b(l,n,t)},p(l,t){t&2&&e!==(e=l[1]("removed")+"")&&R(n,e)},d(l){l&&h(n)}}}function nn(r){let e=r[1]("added")+"",n;return{c(){n=y(e)},l(l){n=E(l,e)},m(l,t){b(l,n,t)},p(l,t){t&2&&e!==(e=l[1]("added")+"")&&R(n,e)},d(l){l&&h(n)}}}function rn(r){return{c:m,l:m,m,p:m,d:m}}function on(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function sn(r){let e,n,l,t;const o=[Vl,Ol,Pl,jl],i=[];function f(s,u){return s[0].type=="text"?0:s[0].type=="channel_description_changed"||s[0].type=="channel_icon_changed"||s[0].type=="channel_renamed"||s[0].type=="user_added"||s[0].type=="user_remove"?1:s[0].type=="channel_ownership_changed"?2:s[0].type=="user_banned"||s[0].type=="user_joined"||s[0].type=="user_kicked"||s[0].type=="user_left"?3:-1}return~(e=f(r))&&(n=i[e]=o[e](r)),{c(){n&&n.c(),l=z()},l(s){n&&n.l(s),l=z()},m(s,u){~e&&i[e].m(s,u),b(s,l,u),t=!0},p(s,[u]){let _=e;e=f(s),e===_?~e&&i[e].p(s,u):(n&&(te(),I(i[_],1,1,()=>{i[_]=null}),le()),~e?(n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),$(n,1),n.m(l.parentNode,l)):n=null)},i(s){t||($(n),t=!0)},o(s){I(n),t=!1},d(s){s&&h(l),~e&&i[e].d(s)}}}function fn(r,e,n){let l;x(r,Ce,f=>n(1,l=f));const t=ee(je);let{system:o}=e;const i=f=>t.api.fetchUser(f);return r.$$set=f=>{"system"in f&&n(0,o=f.system)},[o,l,t,i]}class cn extends ve{constructor(e){super(),$e(this,e,fn,sn,ge,{system:0})}}function rt(r,e,n){const l=r.slice();return l[30]=e[n],l}function it(r,e,n){const l=r.slice();return l[33]=e[n],l}function ot(r,e,n){const l=r.slice();return l[36]=e[n].src,l[37]=e[n].alt,l[38]=e[n].onclick,l[39]=e[n].showIf,l}function Pe(r){const e=r.slice(),n=new Date(e[0].edited);return e[8]=n,e}function st(r,e,n){const l=r.slice();return l[42]=e[n],l}function ft(r){let e,n,l=ae(r[0].replies),t=[];for(let i=0;i<l.length;i+=1)t[i]=ct(st(r,l,i));const o=i=>I(t[i],1,1,()=>{t[i]=null});return{c(){e=D("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=T(i,"DIV",{class:!0});var f=V(e);for(let s=0;s<t.length;s+=1)t[s].l(f);f.forEach(h),this.h()},h(){g(e,"class","flex flex-col")},m(i,f){b(i,e,f);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);n=!0},p(i,f){if(f[0]&1){l=ae(i[0].replies);let s;for(s=0;s<l.length;s+=1){const u=st(i,l,s);t[s]?(t[s].p(u,f),$(t[s],1)):(t[s]=ct(u),t[s].c(),$(t[s],1),t[s].m(e,null))}for(te(),s=l.length;s<t.length;s+=1)o(s);le()}},i(i){if(!n){for(let f=0;f<l.length;f+=1)$(t[f]);n=!0}},o(i){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)I(t[f]);n=!1},d(i){i&&h(e),we(t,i)}}}function ct(r){let e,n;return e=new Jt({props:{id:r[42]}}),{c(){ie(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,t){se(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.id=l[42]),e.$set(o)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function ut(r){let e,n;return e=new ye({props:{name:r[4],src:r[3],width:40,height:40}}),{c(){ie(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,t){se(e,l,t),n=!0},p(l,t){const o={};t[0]&16&&(o.name=l[4]),t[0]&8&&(o.src=l[3]),e.$set(o)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function at(r){let e,n=r[5]("message.edited")+"",l,t,o=r[6](r[8])+"",i,f,s=r[7](r[8])+"",u,_;return{c(){e=y("["),l=y(n),t=A(),i=y(o),f=A(),u=y(s),_=y("]")},l(c){e=E(c,"["),l=E(c,n),t=j(c),i=E(c,o),f=j(c),u=E(c,s),_=E(c,"]")},m(c,p){b(c,e,p),b(c,l,p),b(c,t,p),b(c,i,p),b(c,f,p),b(c,u,p),b(c,_,p)},p(c,p){p[0]&32&&n!==(n=c[5]("message.edited")+"")&&R(l,n),p[0]&65&&o!==(o=c[6](c[8])+"")&&R(i,o),p[0]&129&&s!==(s=c[7](c[8])+"")&&R(u,s)},d(c){c&&(h(e),h(l),h(t),h(i),h(f),h(u),h(_))}}}function _t(r){let e,n,l,t,o,i;function f(){return r[20](r[38])}return{c(){e=D("button"),n=D("img"),t=A(),this.h()},l(s){e=T(s,"BUTTON",{class:!0,"aria-label":!0});var u=V(e);n=T(u,"IMG",{width:!0,height:!0,src:!0,alt:!0}),t=j(u),u.forEach(h),this.h()},h(){g(n,"width","16"),g(n,"height","16"),ue(n.src,l=r[36])||g(n,"src",l),g(n,"alt",r[37]),g(e,"class","ml-2"),g(e,"aria-label",r[37])},m(s,u){b(s,e,u),k(e,n),k(e,t),o||(i=me(e,"click",f),o=!0)},p(s,u){r=s},d(s){s&&h(e),o=!1,i()}}}function ht(r){var t;let e=((t=r[39])==null?void 0:t.call(r,r[0]))??!0,n,l=e&&_t(r);return{c(){l&&l.c(),n=z()},l(o){l&&l.l(o),n=z()},m(o,i){l&&l.m(o,i),b(o,n,i)},p(o,i){var f;i[0]&1&&(e=((f=o[39])==null?void 0:f.call(o,o[0]))??!0),e?l?l.p(o,i):(l=_t(o),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(o){o&&h(n),l&&l.d(o)}}}function un(r){let e,n=r[0].content+"",l;return{c(){e=D("span"),l=y(n),this.h()},l(t){e=T(t,"SPAN",{style:!0,class:!0});var o=V(e);l=E(o,n),o.forEach(h),this.h()},h(){Ue(e,"overflow-wrap","break-word"),g(e,"class","whitespace-pre-wrap")},m(t,o){b(t,e,o),k(e,l)},p(t,o){o[0]&1&&n!==(n=t[0].content+"")&&R(l,n)},d(t){t&&h(e)}}}function an(r){let e,n,l,t;return{c(){e=D("form"),n=D("textarea"),this.h()},l(o){e=T(o,"FORM",{class:!0});var i=V(e);n=T(i,"TEXTAREA",{class:!0,placeholder:!0}),V(n).forEach(h),i.forEach(h),this.h()},h(){g(n,"class","outline-none resize-none bg-inherit w-full"),g(n,"placeholder","Edit this message"),g(e,"class","bg-gray-500 rounded-xl px-2 pt-2")},m(o,i){b(o,e,i),k(e,n),qe(n,r[2]),l||(t=[me(n,"keydown",r[21]),me(n,"input",r[22]),me(e,"submit",r[15])],l=!0)},p(o,i){i[0]&4&&qe(n,o[2])},d(o){o&&h(e),l=!1,Se(t)}}}function mt(r){let e,n;return e=new cn({props:{system:r[0].system}}),{c(){ie(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,t){se(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.system=l[0].system),e.$set(o)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function pt(r){let e,n,l=ae(r[0].attachments),t=[];for(let i=0;i<l.length;i+=1)t[i]=dt(it(r,l,i));const o=i=>I(t[i],1,1,()=>{t[i]=null});return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=z()},l(i){for(let f=0;f<t.length;f+=1)t[f].l(i);e=z()},m(i,f){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(i,f);b(i,e,f),n=!0},p(i,f){if(f[0]&1){l=ae(i[0].attachments);let s;for(s=0;s<l.length;s+=1){const u=it(i,l,s);t[s]?(t[s].p(u,f),$(t[s],1)):(t[s]=dt(u),t[s].c(),$(t[s],1),t[s].m(e.parentNode,e))}for(te(),s=l.length;s<t.length;s+=1)o(s);le()}},i(i){if(!n){for(let f=0;f<l.length;f+=1)$(t[f]);n=!0}},o(i){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)I(t[f]);n=!1},d(i){i&&h(e),we(t,i)}}}function dt(r){let e,n;return e=new wl({props:{attachment:r[33]}}),{c(){ie(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,t){se(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.attachment=l[33]),e.$set(o)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function bt(r){let e,n,l=ae(r[0].embeds),t=[];for(let i=0;i<l.length;i+=1)t[i]=kt(rt(r,l,i));const o=i=>I(t[i],1,1,()=>{t[i]=null});return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=z()},l(i){for(let f=0;f<t.length;f+=1)t[f].l(i);e=z()},m(i,f){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(i,f);b(i,e,f),n=!0},p(i,f){if(f[0]&1){l=ae(i[0].embeds);let s;for(s=0;s<l.length;s+=1){const u=rt(i,l,s);t[s]?(t[s].p(u,f),$(t[s],1)):(t[s]=kt(u),t[s].c(),$(t[s],1),t[s].m(e.parentNode,e))}for(te(),s=l.length;s<t.length;s+=1)o(s);le()}},i(i){if(!n){for(let f=0;f<l.length;f+=1)$(t[f]);n=!0}},o(i){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)I(t[f]);n=!1},d(i){i&&h(e),we(t,i)}}}function kt(r){let e,n;return e=new Al({props:{embed:r[30]}}),{c(){ie(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,t){se(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.embed=l[30]),e.$set(o)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function _n(r){let e,n,l,t,o,i,f,s,u=r[6](r[8])+"",_,c,p=r[7](r[8])+"",B,G,P,w,X,W,S,ne,H,O,J,d,v=r[0].replies!=null&&r[0].replies.length!=0&&ft(r),a=!r[1]["jolt:compact-mode"]&&ut(r),C=r[0].edited!=null&&at(Pe(r)),F=ae(r[14]),L=[];for(let M=0;M<F.length;M+=1)L[M]=ht(ot(r,F,M));function ce(M,U){if(M[2]!=null)return an;if(M[0].content!=null)return un}let N=ce(r),Y=N&&N(r),K=r[0].system!=null&&mt(r),Q=r[0].attachments!=null&&pt(r),Z=r[0].embeds!=null&&bt(r);return{c(){e=D("div"),v&&v.c(),n=A(),l=D("div"),a&&a.c(),t=A(),o=y(r[4]),i=A(),f=D("p"),s=y("["),_=y(u),c=A(),B=y(p),G=y(`]

			`),C&&C.c(),P=A(),w=D("div"),X=A(),W=D("div");for(let M=0;M<L.length;M+=1)L[M].c();S=A(),Y&&Y.c(),ne=A(),K&&K.c(),H=A(),Q&&Q.c(),O=A(),Z&&Z.c(),this.h()},l(M){e=T(M,"DIV",{id:!0,class:!0});var U=V(e);v&&v.l(U),n=j(U),l=T(U,"DIV",{class:!0});var q=V(l);a&&a.l(q),t=j(q),o=E(q,r[4]),i=j(q),f=T(q,"P",{class:!0});var _e=V(f);s=E(_e,"["),_=E(_e,u),c=j(_e),B=E(_e,p),G=E(_e,`]

			`),C&&C.l(_e),_e.forEach(h),P=j(q),w=T(q,"DIV",{class:!0}),V(w).forEach(h),X=j(q),W=T(q,"DIV",{class:!0});var Ee=V(W);for(let ke=0;ke<L.length;ke+=1)L[ke].l(Ee);Ee.forEach(h),q.forEach(h),S=j(U),Y&&Y.l(U),ne=j(U),K&&K.l(U),H=j(U),Q&&Q.l(U),O=j(U),Z&&Z.l(U),U.forEach(h),this.h()},h(){g(f,"class","text-gray-500"),g(w,"class","flex-1"),g(W,"class","hidden group-hover:flex"),g(l,"class","flex"),g(e,"id",J=r[0]._id),g(e,"class","flex flex-col hover:bg-gray-800 group p-4")},m(M,U){b(M,e,U),v&&v.m(e,null),k(e,n),k(e,l),a&&a.m(l,null),k(l,t),k(l,o),k(l,i),k(l,f),k(f,s),k(f,_),k(f,c),k(f,B),k(f,G),C&&C.m(f,null),k(l,P),k(l,w),k(l,X),k(l,W);for(let q=0;q<L.length;q+=1)L[q]&&L[q].m(W,null);k(e,S),Y&&Y.m(e,null),k(e,ne),K&&K.m(e,null),k(e,H),Q&&Q.m(e,null),k(e,O),Z&&Z.m(e,null),d=!0},p(M,U){if(M[0].replies!=null&&M[0].replies.length!=0?v?(v.p(M,U),U[0]&1&&$(v,1)):(v=ft(M),v.c(),$(v,1),v.m(e,n)):v&&(te(),I(v,1,1,()=>{v=null}),le()),M[1]["jolt:compact-mode"]?a&&(te(),I(a,1,1,()=>{a=null}),le()):a?(a.p(M,U),U[0]&2&&$(a,1)):(a=ut(M),a.c(),$(a,1),a.m(l,t)),(!d||U[0]&16)&&R(o,M[4]),(!d||U[0]&320)&&u!==(u=M[6](M[8])+"")&&R(_,u),(!d||U[0]&384)&&p!==(p=M[7](M[8])+"")&&R(B,p),M[0].edited!=null?C?C.p(Pe(M),U):(C=at(Pe(M)),C.c(),C.m(f,null)):C&&(C.d(1),C=null),U[0]&16385){F=ae(M[14]);let q;for(q=0;q<F.length;q+=1){const _e=ot(M,F,q);L[q]?L[q].p(_e,U):(L[q]=ht(_e),L[q].c(),L[q].m(W,null))}for(;q<L.length;q+=1)L[q].d(1);L.length=F.length}N===(N=ce(M))&&Y?Y.p(M,U):(Y&&Y.d(1),Y=N&&N(M),Y&&(Y.c(),Y.m(e,ne))),M[0].system!=null?K?(K.p(M,U),U[0]&1&&$(K,1)):(K=mt(M),K.c(),$(K,1),K.m(e,H)):K&&(te(),I(K,1,1,()=>{K=null}),le()),M[0].attachments!=null?Q?(Q.p(M,U),U[0]&1&&$(Q,1)):(Q=pt(M),Q.c(),$(Q,1),Q.m(e,O)):Q&&(te(),I(Q,1,1,()=>{Q=null}),le()),M[0].embeds!=null?Z?(Z.p(M,U),U[0]&1&&$(Z,1)):(Z=bt(M),Z.c(),$(Z,1),Z.m(e,null)):Z&&(te(),I(Z,1,1,()=>{Z=null}),le()),(!d||U[0]&1&&J!==(J=M[0]._id))&&g(e,"id",J)},i(M){d||($(v),$(a),$(K),$(Q),$(Z),d=!0)},o(M){I(v),I(a),I(K),I(Q),I(Z),d=!1},d(M){M&&h(e),v&&v.d(),a&&a.d(),C&&C.d(),we(L,M),Y&&Y.d(),K&&K.d(),Q&&Q.d(),Z&&Z.d()}}}function hn(r,e,n){let l,t,o,i,f,s,u,_,c,p,B;x(r,Ce,N=>n(5,_=N)),x(r,Rt,N=>n(6,p=N)),x(r,Ft,N=>n(7,B=N));let{message:G}=e,P,w,X;ee(Vt);const W=ee(Ie);x(r,W,N=>n(1,i=N));const S=ee(je),ne=ee(Nt);x(r,ne,N=>n(18,f=N)),ee(Mt);const H=ee(Be),O=ee(Re);x(r,O,N=>n(19,s=N));const J=ee(Dt);x(r,J,N=>n(23,u=N));const d=ee(Tt);x(r,d,N=>n(24,c=N));const v=[{src:`${pe}/reply.svg`,alt:_("message.reply"),onclick(){c!=null&&c.some(N=>N.message._id==G._id)||d==null||d.update(N=>(N.push({message:G,mention:!0}),N))}},{src:`${pe}/note.svg`,alt:_("message.edit"),showIf:N=>{var Y;return N.author==((Y=S.user)==null?void 0:Y._id)},onclick:N=>n(2,P=P==null?N.content??"":void 0)},{src:`${pe}/trash.svg`,alt:_("message.delete"),showIf:N=>{var Y;return N.author==((Y=S.user)==null?void 0:Y._id)},onclick:N=>S.api.deleteMessage(N.channel,N._id)}];async function a(N,Y){n(17,X=u==null?void 0:u.find(K=>K._id.server==N&&K._id.user==Y))}async function C(){const N=await S.api.editMessage(G.channel,G._id,{content:P});H==null||H.update(Y=>(Y[Y.findIndex(K=>K._id==G._id)]=N,Y))}const F=N=>N(G),L=N=>{if(!N.defaultPrevented){if(N.key=="Escape"){N.preventDefault(),n(2,P=void 0);return}N.shiftKey||N.key!="Enter"||(N.preventDefault(),C(),n(2,P=void 0))}};function ce(){P=this.value,n(2,P)}return r.$$set=N=>{"message"in N&&n(0,G=N.message)},r.$$.update=()=>{r.$$.dirty[0]&524289&&Oe(S.api,s??S.api.cache.users,G.author).then(N=>n(16,w=N)),r.$$.dirty[0]&262145&&(f==null||a(f,G.author)),r.$$.dirty[0]&196609&&n(4,l=he(w,X,G)),r.$$.dirty[0]&196611&&n(3,t=i["jolt:low-data-mode"]?`${pe}/user.svg`:de(w,X,G)),r.$$.dirty[0]&1&&n(8,o=Kt(G._id))},[G,i,P,t,l,_,p,B,o,W,ne,O,J,d,v,C,w,X,f,s,F,L,ce]}class mn extends ve{constructor(e){super(),$e(this,e,hn,_n,ge,{message:0},null,[-1,-1])}}function gt(r,e,n){const l=r.slice();l[22]=e[n],l[24]=e,l[25]=n;const t=l[9].api.fetchUser(l[22].message.author);return l[23]=t,l}function vt(r){const e=`<${r[5]("user.unknown")}>`;r[26]=e}function $t(r){const e=he(r[23]);r[26]=e}function wt(r,e,n){const l=r.slice();l[23]=e[n];const t=he(l[23]);return l[26]=t,l}function yt(r,e,n){const l=r.slice();return l[29]=e[n],l}function Et(r){let e,n;return e=new mn({props:{message:r[29]}}),{c(){ie(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,t){se(e,l,t),n=!0},p(l,t){const o={};t[0]&128&&(o.message=l[29]),e.$set(o)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){I(e.$$.fragment,l),n=!1},d(l){fe(e,l)}}}function It(r){let e,n,l,t=r[26]+"",o,i,f=r[5]("user.is-typing")+"",s,u,_;return n=new ye({props:{src:r[1]["jolt:low-data-mode"]?`${pe}/user.svg`:de(r[23]),width:16,height:16,name:r[26]}}),{c(){e=D("div"),ie(n.$$.fragment),l=A(),o=y(t),i=A(),s=y(f),u=y("...")},l(c){e=T(c,"DIV",{});var p=V(e);oe(n.$$.fragment,p),l=j(p),o=E(p,t),i=j(p),s=E(p,f),u=E(p,"..."),p.forEach(h)},m(c,p){b(c,e,p),se(n,e,null),k(e,l),k(e,o),k(e,i),k(e,s),k(e,u),_=!0},p(c,p){const B={};p[0]&10&&(B.src=c[1]["jolt:low-data-mode"]?`${pe}/user.svg`:de(c[23])),p[0]&8&&(B.name=c[26]),n.$set(B),(!_||p[0]&8)&&t!==(t=c[26]+"")&&R(o,t),(!_||p[0]&32)&&f!==(f=c[5]("user.is-typing")+"")&&R(s,f)},i(c){_||($(n.$$.fragment,c),_=!0)},o(c){I(n.$$.fragment,c),_=!1},d(c){c&&h(e),fe(n)}}}function pn(r){vt(r);let e,n,l=r[26]+"",t,o;return e=new ye({props:{src:pe+"/user.svg",name:r[26]}}),{c(){ie(e.$$.fragment),n=A(),t=y(l)},l(i){oe(e.$$.fragment,i),n=j(i),t=E(i,l)},m(i,f){se(e,i,f),b(i,n,f),b(i,t,f),o=!0},p(i,f){vt(i);const s={};f[0]&32&&(s.name=i[26]),e.$set(s),(!o||f[0]&32)&&l!==(l=i[26]+"")&&R(t,l)},i(i){o||($(e.$$.fragment,i),o=!0)},o(i){I(e.$$.fragment,i),o=!1},d(i){i&&(h(n),h(t)),fe(e,i)}}}function dn(r){$t(r);let e,n,l=r[26]+"",t,o;return e=new ye({props:{src:de(r[23]),name:r[26]}}),{c(){ie(e.$$.fragment),n=A(),t=y(l)},l(i){oe(e.$$.fragment,i),n=j(i),t=E(i,l)},m(i,f){se(e,i,f),b(i,n,f),b(i,t,f),o=!0},p(i,f){$t(i);const s={};f[0]&64&&(s.src=de(i[23])),f[0]&64&&(s.name=i[26]),e.$set(s),(!o||f[0]&64)&&l!==(l=i[26]+"")&&R(t,l)},i(i){o||($(e.$$.fragment,i),o=!0)},o(i){I(e.$$.fragment,i),o=!1},d(i){i&&(h(n),h(t)),fe(e,i)}}}function bn(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Ct(r){let e,n,l=r[5]("message.replying-to")+"",t,o,i,f,s,u,_=r[22].message.content+"",c,p,B,G,P,w,X,W,S,ne,H,O=r[22].mention?"ON":"OFF",J,d,v,a,C,F,L,ce,N,Y,K={ctx:r,current:null,token:null,hasCatch:!0,pending:bn,then:dn,catch:pn,value:23,blocks:[,,,]};re(f=r[23],K);function Q(){r[14].call(w,r[24],r[25])}function Z(){return r[15](r[22])}return{c(){e=D("div"),n=D("p"),t=y(l),o=A(),i=D("strong"),K.block.c(),s=A(),u=D("p"),c=y(_),p=A(),B=D("div"),G=A(),P=D("div"),w=D("input"),X=A(),W=D("label"),S=D("img"),H=A(),J=y(O),d=A(),v=D("div"),a=D("button"),C=D("img"),L=A(),this.h()},l(M){e=T(M,"DIV",{class:!0});var U=V(e);n=T(U,"P",{});var q=V(n);t=E(q,l),o=j(q),i=T(q,"STRONG",{});var _e=V(i);K.block.l(_e),_e.forEach(h),q.forEach(h),s=j(U),u=T(U,"P",{class:!0});var Ee=V(u);c=E(Ee,_),Ee.forEach(h),p=j(U),B=T(U,"DIV",{class:!0}),V(B).forEach(h),G=j(U),P=T(U,"DIV",{class:!0});var ke=V(P);w=T(ke,"INPUT",{id:!0,style:!0,type:!0}),X=j(ke),W=T(ke,"LABEL",{class:!0,for:!0});var Me=V(W);S=T(Me,"IMG",{src:!0,class:!0,alt:!0}),H=j(Me),J=E(Me,O),Me.forEach(h),ke.forEach(h),d=j(U),v=T(U,"DIV",{class:!0});var Fe=V(v);a=T(Fe,"BUTTON",{});var Ke=V(a);C=T(Ke,"IMG",{src:!0,alt:!0}),Ke.forEach(h),Fe.forEach(h),L=j(U),U.forEach(h),this.h()},h(){g(u,"class","pl-1 text-gray-600 overflow-ellipsis"),g(B,"class","flex-1"),g(w,"id","mention"),Ue(w,"display","none"),g(w,"type","checkbox"),ue(S.src,ne=pe+"/at.svg")||g(S,"src",ne),g(S,"class","inline"),g(S,"alt","mention"),g(W,"class","cursor-pointer"),g(W,"for","mention"),g(P,"class","pr-2"),ue(C.src,F=pe+"/circle-x.svg")||g(C,"src",F),g(C,"alt","Cancel mention"),g(v,"class","pr-2"),g(e,"class","flex")},m(M,U){b(M,e,U),k(e,n),k(n,t),k(n,o),k(n,i),K.block.m(i,K.anchor=null),K.mount=()=>i,K.anchor=null,k(e,s),k(e,u),k(u,c),k(e,p),k(e,B),k(e,G),k(e,P),k(P,w),w.checked=r[22].mention,k(P,X),k(P,W),k(W,S),k(W,H),k(W,J),k(e,d),k(e,v),k(v,a),k(a,C),k(e,L),ce=!0,N||(Y=[me(w,"change",Q),me(a,"click",Z)],N=!0)},p(M,U){r=M,(!ce||U[0]&32)&&l!==(l=r[5]("message.replying-to")+"")&&R(t,l),K.ctx=r,U[0]&64&&f!==(f=r[23])&&re(f,K)||be(K,r,U),(!ce||U[0]&64)&&_!==(_=r[22].message.content+"")&&R(c,_),U[0]&64&&(w.checked=r[22].mention),(!ce||U[0]&64)&&O!==(O=r[22].mention?"ON":"OFF")&&R(J,O)},i(M){ce||($(K.block),ce=!0)},o(M){for(let U=0;U<3;U+=1){const q=K.blocks[U];I(q)}ce=!1},d(M){M&&h(e),K.block.d(),K.token=null,K=null,N=!1,Se(Y)}}}function kn(r){let e,n,l,t="so um hi this is the start, i should make this text box much further down i think",o,i,f,s,u,_,c,p,B,G,P=ae(r[7]),w=[];for(let d=0;d<P.length;d+=1)w[d]=Et(yt(r,P,d));const X=d=>I(w[d],1,1,()=>{w[d]=null});let W=ae(r[3]),S=[];for(let d=0;d<W.length;d+=1)S[d]=It(wt(r,W,d));const ne=d=>I(S[d],1,1,()=>{S[d]=null});let H=ae(r[6]),O=[];for(let d=0;d<H.length;d+=1)O[d]=Ct(gt(r,H,d));const J=d=>I(O[d],1,1,()=>{O[d]=null});return{c(){e=D("main"),n=D("div"),l=D("p"),l.textContent=t,o=A();for(let d=0;d<w.length;d+=1)w[d].c();i=A();for(let d=0;d<S.length;d+=1)S[d].c();f=A();for(let d=0;d<O.length;d+=1)O[d].c();s=A(),u=D("form"),_=D("textarea"),this.h()},l(d){e=T(d,"MAIN",{class:!0});var v=V(e);n=T(v,"DIV",{class:!0});var a=V(n);l=T(a,"P",{"data-svelte-h":!0}),Ae(l)!=="svelte-1kz18j0"&&(l.textContent=t),o=j(a);for(let F=0;F<w.length;F+=1)w[F].l(a);i=j(a);for(let F=0;F<S.length;F+=1)S[F].l(a);f=j(a);for(let F=0;F<O.length;F+=1)O[F].l(a);a.forEach(h),s=j(v),u=T(v,"FORM",{class:!0});var C=V(u);_=T(C,"TEXTAREA",{maxlength:!0,class:!0,placeholder:!0}),V(_).forEach(h),C.forEach(h),v.forEach(h),this.h()},h(){g(n,"class","flex flex-col h-full overflow-x-hidden overflow-y-scroll"),g(_,"maxlength","2000"),g(_,"class","outline-none resize-none bg-inherit w-full h-12"),g(_,"placeholder",c=r[5]("send-message-in")+" "+r[4]),g(u,"class","bg-gray-500 rounded-xl px-2 pt-2 m-4"),g(e,"class","main-content-container flex flex-col")},m(d,v){b(d,e,v),k(e,n),k(n,l),k(n,o);for(let a=0;a<w.length;a+=1)w[a]&&w[a].m(n,null);k(n,i);for(let a=0;a<S.length;a+=1)S[a]&&S[a].m(n,null);k(n,f);for(let a=0;a<O.length;a+=1)O[a]&&O[a].m(n,null);k(e,s),k(e,u),k(u,_),r[16](_),p=!0,B||(G=[me(_,"blur",r[11]),me(_,"input",r[12])],B=!0)},p(d,v){if(v[0]&128){P=ae(d[7]);let a;for(a=0;a<P.length;a+=1){const C=yt(d,P,a);w[a]?(w[a].p(C,v),$(w[a],1)):(w[a]=Et(C),w[a].c(),$(w[a],1),w[a].m(n,i))}for(te(),a=P.length;a<w.length;a+=1)X(a);le()}if(v[0]&42){W=ae(d[3]);let a;for(a=0;a<W.length;a+=1){const C=wt(d,W,a);S[a]?(S[a].p(C,v),$(S[a],1)):(S[a]=It(C),S[a].c(),$(S[a],1),S[a].m(n,f))}for(te(),a=W.length;a<S.length;a+=1)ne(a);le()}if(v[0]&609){H=ae(d[6]);let a;for(a=0;a<H.length;a+=1){const C=gt(d,H,a);O[a]?(O[a].p(C,v),$(O[a],1)):(O[a]=Ct(C),O[a].c(),$(O[a],1),O[a].m(n,null))}for(te(),a=H.length;a<O.length;a+=1)J(a);le()}(!p||v[0]&48&&c!==(c=d[5]("send-message-in")+" "+d[4]))&&g(_,"placeholder",c)},i(d){if(!p){for(let v=0;v<P.length;v+=1)$(w[v]);for(let v=0;v<W.length;v+=1)$(S[v]);for(let v=0;v<H.length;v+=1)$(O[v]);p=!0}},o(d){w=w.filter(Boolean);for(let v=0;v<w.length;v+=1)I(w[v]);S=S.filter(Boolean);for(let v=0;v<S.length;v+=1)I(S[v]);O=O.filter(Boolean);for(let v=0;v<O.length;v+=1)I(O[v]);p=!1},d(d){d&&h(e),we(w,d),we(S,d),we(O,d),r[16](null),B=!1,Se(G)}}}function gn(r,e,n){let l,t,o,i=m,f=()=>(i(),i=jt(P,a=>n(6,o=a)),P),s;x(r,Ce,a=>n(5,t=a)),r.$$.on_destroy.push(()=>i());let{channel:u}=e;const _=ee(Ie);x(r,_,a=>n(1,l=a));const c=ee(je);let p=Te([]);x(r,p,a=>n(7,s=a));let B=Te([]),G=Te([]);const P=Te([]);f(),De(Be,p),De(Dt,B),De(Re,G),De(Tt,P);let w,X=[];async function W(a){if(!a){c.removeAllListeners("ChannelStartTyping"),c.removeAllListeners("ChannelStopTyping");return}c.on("ChannelStartTyping",async({id:C,user:F})=>{var L;if(!(F==((L=c.user)==null?void 0:L._id)||C!=u._id)){for(const{_id:ce}of X)if(F==ce)return;n(3,X[X.length]=await c.api.fetchUser(F),X)}}),c.on("ChannelStopTyping",({id:C,user:F})=>{C==u._id&&n(3,X=X.filter(L=>L._id!=F))})}At(()=>{c.on("Message",a=>{a.channel==u._id&&(c.api.ackMessage(u._id,a._id),p.update(C=>(C.push(a),C)))}),c.on("MessageDelete",({id:a,channel:C})=>{C==u._id&&p.update(F=>F.filter(L=>L._id!=a))}),c.on("MessageUpdate",({id:a,channel:C,data:F})=>{C==u._id&&p.update(L=>{const ce=L.findIndex(Y=>Y._id==a),N=L[ce];return F.content!=null&&(N.content=F.content),F.embeds!=null&&(N.embeds=F.embeds),N.edited=F.edited,L[ce]=N,L})})});let S;async function ne(a){var C;if(a.channel_type=="TextChannel"||a.channel_type=="VoiceChannel"||a.channel_type=="Group"){n(4,S=`#${a.name}`);return}if(a.channel_type=="SavedMessages"){n(4,S=t("channel.notes"));return}n(4,S=`@${he(await c.api.fetchUser(a.recipients[0]==((C=c.user)==null?void 0:C._id)?a.recipients[1]:a.recipients[0]))}`)}function H(){l["jolt:send-typing-indicators"]&&c.websocket.send({type:"EndTyping",channel:u._id})}function O(){if(l["jolt:send-typing-indicators"]){if(w.value==""){c.websocket.send({type:"EndTyping",channel:u._id});return}c.websocket.send({type:"BeginTyping",channel:u._id})}}function J(a,C){a[C].mention=this.checked,P.set(o)}const d=a=>P.update(C=>(C=C.filter(F=>F.message._id!=a.message._id),C));function v(a){Ve[a?"unshift":"push"](()=>{w=a,n(2,w)})}return r.$$set=a=>{"channel"in a&&n(13,u=a.channel)},r.$$.update=()=>{r.$$.dirty[0]&8192&&(c.api.queryMessages(u._id,{sort:"Latest",include_users:!0}).then(a=>{Array.isArray(a)?p.set(a.reverse()):(p.set(a.messages.reverse()),G.set(a.users),B.set(a.members??[]))}),P.set([]),n(3,X=[])),r.$$.dirty[0]&2&&W(l["jolt:receive-typing-indicators"]),r.$$.dirty[0]&8192&&ne(u)},[P,l,w,X,S,t,o,s,_,c,p,H,O,u,J,d,v]}class Sn extends ve{constructor(e){super(),$e(this,e,gn,kn,ge,{channel:13},null,[-1,-1])}}export{Sn as C};
