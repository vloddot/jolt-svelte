import{s as de,f as I,g as C,h as S,d as m,j as h,i as g,r as ae,e as q,u as d,a as P,c as V,l as D,m as B,z as v,n as ie,I as ee,E as we,F as ye,v as Qt,J as Se,A as fe,w as Yt,x as Zt,y as xt,D as Ae,M as el,p as De,N as tl,O as He,k as Ve,P as qe,Q as ll,G as Ce,B as Ft,C as nl,H as Pe,R as Ye,q as Ze,S as Ie,o as rl,K as il,t as xe}from"./scheduler.7420d6ca.js";import{h as ce,u as $e}from"./await_block.08f6cb26.js";import{e as me}from"./each.e59479a4.js";import{S as pe,i as ge,a as b,g as J,t as w,c as Q,b as Y,d as re,m as Z,e as x,f as ze}from"./index.637134e4.js";import{g as X}from"./context.92045884.js";import{g as Ee,b as ke,a as sl}from"./util.184f0dfd.js";import{c as Ne,s as Be}from"./context.645f4abc.js";import{w as Te}from"./index.5b89e149.js";import{m as We,u as Xe,g as Ke,c as Lt,a as Rt,b as Gt,r as Je,d as Kt,s as ol,n as cl}from"./index.123871e3.js";import{e as et}from"./singletons.8057edd0.js";import{s as Ht}from"./context.527da73b.js";import{s as al}from"./context.9abfb385.js";import{G as Fe}from"./GenericUserCircleIcon.cf1ebf73.js";import{d as Re,u as fl}from"./index.esm.4b6e8736.js";import{P as ul}from"./PencilSquareIcon.08ca8d58.js";import{t as zt,P as hl}from"./PlusIcon.a9ccaab6.js";import{d as je,c as _l}from"./calendar.5942d46b.js";import{p as ml}from"./stores.012f75bb.js";function dl(r){const e=r.slice(),l=ke(e[14]);return e[15]=l,e}function tt(r){var s;let e,l,n,t={ctx:r,current:null,token:null,hasCatch:!1,pending:$l,then:gl,catch:pl,value:13,blocks:[,,,]};return ce(l=((s=r[3])==null?void 0:s.find(r[12]))??r[6].api.fetchMessage(r[2],r[0]),t),{c(){e=q(),t.block.c()},l(i){e=q(),t.block.l(i)},m(i,c){g(i,e,c),t.block.m(i,t.anchor=c),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(i,c){var o;r=i,t.ctx=r,c&13&&l!==(l=((o=r[3])==null?void 0:o.find(r[12]))??r[6].api.fetchMessage(r[2],r[0]))&&ce(l,t)||$e(t,r,c)},i(i){n||(b(t.block),n=!0)},o(i){for(let c=0;c<3;c+=1){const o=t.blocks[c];w(o)}n=!1},d(i){i&&m(e),t.block.d(i),t.token=null,t=null}}}function pl(r){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function gl(r){let e,l,n,t=!r[4]["jolt:low-data-mode"]&&lt(r),s=r[13].content!=null&&nt(r);return{c(){t&&t.c(),e=P(),s&&s.c(),l=q()},l(i){t&&t.l(i),e=V(i),s&&s.l(i),l=q()},m(i,c){t&&t.m(i,c),g(i,e,c),s&&s.m(i,c),g(i,l,c),n=!0},p(i,c){i[4]["jolt:low-data-mode"]?t&&(J(),w(t,1,1,()=>{t=null}),Q()):t?(t.p(i,c),c&16&&b(t,1)):(t=lt(i),t.c(),b(t,1),t.m(e.parentNode,e)),i[13].content!=null?s?s.p(i,c):(s=nt(i),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null)},i(i){n||(b(t),n=!0)},o(i){w(t),n=!1},d(i){i&&(m(e),m(l)),t&&t.d(i),s&&s.d(i)}}}function lt(r){let e,l,n,t={ctx:r,current:null,token:null,hasCatch:!1,pending:yl,then:kl,catch:bl,value:14,blocks:[,,,]};return ce(l=Ke(r[6].api,r[5]??r[6].api.cache.users,r[13].author),t),{c(){e=q(),t.block.c()},l(s){e=q(),t.block.l(s)},m(s,i){g(s,e,i),t.block.m(s,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e,n=!0},p(s,i){r=s,t.ctx=r,i&45&&l!==(l=Ke(r[6].api,r[5]??r[6].api.cache.users,r[13].author))&&ce(l,t)||$e(t,r,i)},i(s){n||(b(t.block),n=!0)},o(s){for(let i=0;i<3;i+=1){const c=t.blocks[i];w(c)}n=!1},d(s){s&&m(e),t.block.d(s),t.token=null,t=null}}}function bl(r){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function kl(r){let e,l,n,t;const s=[wl,vl],i=[];function c(a,f){return a[14]!=null?0:1}function o(a,f){return f===0?dl(a):a}return e=c(r),l=i[e]=s[e](o(r,e)),{c(){l.c(),n=q()},l(a){l.l(a),n=q()},m(a,f){i[e].m(a,f),g(a,n,f),t=!0},p(a,f){let u=e;e=c(a),e===u?i[e].p(o(a,e),f):(J(),w(i[u],1,1,()=>{i[u]=null}),Q(),l=i[e],l?l.p(o(a,e),f):(l=i[e]=s[e](o(a,e)),l.c()),b(l,1),l.m(n.parentNode,n))},i(a){t||(b(l),t=!0)},o(a){w(l),t=!1},d(a){a&&m(n),i[e].d(a)}}}function vl(r){let e,l,n;return e=new Fe({}),{c(){Y(e.$$.fragment),l=D(`

						Unknown User`)},l(t){re(e.$$.fragment,t),l=B(t,`

						Unknown User`)},m(t,s){Z(e,t,s),g(t,l,s),n=!0},p:d,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){t&&m(l),x(e,t)}}}function wl(r){let e,l,n,t,s=r[15]+"",i;return{c(){e=I("img"),t=P(),i=D(s),this.h()},l(c){e=C(c,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),t=V(c),i=B(c,s),this.h()},h(){h(e,"class","cover"),ee(e.src,l=Ee(r[14]))||h(e,"src",l),h(e,"alt",n=r[15]),h(e,"width","24px"),h(e,"height","24px")},m(c,o){g(c,e,o),g(c,t,o),g(c,i,o)},p(c,o){o&45&&!ee(e.src,l=Ee(c[14]))&&h(e,"src",l),o&45&&n!==(n=c[15])&&h(e,"alt",n),o&45&&s!==(s=c[15]+"")&&ie(i,s)},i:d,o:d,d(c){c&&(m(e),m(t),m(i))}}}function yl(r){let e;return{c(){e=D("<Unknown User>")},l(l){e=B(l,"<Unknown User>")},m(l,n){g(l,e,n)},p:d,i:d,o:d,d(l){l&&m(e)}}}function nt(r){let e,l=r[13].content+"",n;return{c(){e=I("span"),n=D(l),this.h()},l(t){e=C(t,"SPAN",{class:!0});var s=S(e);n=B(s,l),s.forEach(m),this.h()},h(){h(e,"class","message-content svelte-pdgjwp")},m(t,s){g(t,e,s),v(e,n)},p(t,s){s&13&&l!==(l=t[13].content+"")&&ie(n,l)},d(t){t&&m(e)}}}function $l(r){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function El(r){let e,l,n,t=r[2]!=null&&tt(r);return{c(){e=I("a"),t&&t.c(),this.h()},l(s){e=C(s,"A",{href:!0,class:!0});var i=S(e);t&&t.l(i),i.forEach(m),this.h()},h(){h(e,"href",l=et+"/"+(r[1]==null?`channels/${r[2]}/${r[0]}`:`servers/${r[1]}/channels/${r[2]}/${r[0]}`)),h(e,"class","svelte-pdgjwp")},m(s,i){g(s,e,i),t&&t.m(e,null),n=!0},p(s,[i]){s[2]!=null?t?(t.p(s,i),i&4&&b(t,1)):(t=tt(s),t.c(),b(t,1),t.m(e,null)):t&&(J(),w(t,1,1,()=>{t=null}),Q()),(!n||i&7&&l!==(l=et+"/"+(s[1]==null?`channels/${s[2]}/${s[0]}`:`servers/${s[1]}/channels/${s[2]}/${s[0]}`)))&&h(e,"href",l)},i(s){n||(b(t),n=!0)},o(s){w(t),n=!1},d(s){s&&m(e),t&&t.d()}}}function Ml(r,e,l){let n,t,s,i,c;const o=X(Ne),a=X(Be);ae(r,a,k=>l(4,i=k));const f=X(Ht);ae(r,f,k=>l(1,n=k));const u=X(al);ae(r,u,k=>l(2,t=k));const _=X(We);ae(r,_,k=>l(3,s=k));const p=X(Xe);ae(r,p,k=>l(5,c=k));let{id:M}=e;const N=({_id:k})=>M==k;return r.$$set=k=>{"id"in k&&l(0,M=k.id)},[M,n,t,s,i,c,o,a,f,u,_,p,N]}class Il extends pe{constructor(e){super(),ge(this,e,Ml,El,de,{id:0})}}function Cl(r){let e,l;return{c(){e=we("svg"),l=we("path"),this.h()},l(n){e=ye(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var t=S(e);l=ye(t,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),S(l).forEach(m),t.forEach(m),this.h()},h(){h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"stroke-width","1.5"),h(e,"stroke","currentColor"),h(e,"width",r[0]),h(e,"height",r[1])},m(n,t){g(n,e,t),v(e,l)},p(n,[t]){t&1&&h(e,"width",n[0]),t&2&&h(e,"height",n[1])},i:d,o:d,d(n){n&&m(e)}}}function Tl(r,e,l){let{width:n="24px"}=e,{height:t="24px"}=e;return r.$$set=s=>{"width"in s&&l(0,n=s.width),"height"in s&&l(1,t=s.height)},[n,t]}class Nl extends pe{constructor(e){super(),ge(this,e,Tl,Cl,de,{width:0,height:1})}}function Ul(r){let e,l;return{c(){e=we("svg"),l=we("path"),this.h()},l(n){e=ye(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var t=S(e);l=ye(t,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),S(l).forEach(m),t.forEach(m),this.h()},h(){h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"d","M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"stroke-width","1.5"),h(e,"stroke","currentColor"),h(e,"width",r[0]),h(e,"height",r[1])},m(n,t){g(n,e,t),v(e,l)},p(n,[t]){t&1&&h(e,"width",n[0]),t&2&&h(e,"height",n[1])},i:d,o:d,d(n){n&&m(e)}}}function Sl(r,e,l){let{width:n="24px"}=e,{height:t="24px"}=e;return r.$$set=s=>{"width"in s&&l(0,n=s.width),"height"in s&&l(1,t=s.height)},[n,t]}class jl extends pe{constructor(e){super(),ge(this,e,Sl,Ul,de,{width:0,height:1})}}function rt(r){const e=ke(r[3]);r[4]=e}function it(r){r[5]=r[7][0],r[6]=r[7][1]}function st(r){const e=ke(r[3]);r[4]=e}function Al(r){let e,l,n={ctx:r,current:null,token:null,hasCatch:!1,pending:Gl,then:Vl,catch:Pl,value:3};return ce(l=r[1].api.fetchUser(r[0].id),n),{c(){e=q(),n.block.c()},l(t){e=q(),n.block.l(t)},m(t,s){g(t,e,s),n.block.m(t,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e},p(t,s){r=t,n.ctx=r,s&1&&l!==(l=r[1].api.fetchUser(r[0].id))&&ce(l,n)||$e(n,r,s)},d(t){t&&m(e),n.block.d(t),n.token=null,n=null}}}function Dl(r){let e,l,n={ctx:r,current:null,token:null,hasCatch:!1,pending:zl,then:Hl,catch:Kl,value:7};return ce(l=Promise.all([r[0].from,r[0].to].map(r[2])),n),{c(){e=q(),n.block.c()},l(t){e=q(),n.block.l(t)},m(t,s){g(t,e,s),n.block.m(t,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e},p(t,s){r=t,n.ctx=r,s&1&&l!==(l=Promise.all([r[0].from,r[0].to].map(r[2])))&&ce(l,n)||$e(n,r,s)},d(t){t&&m(e),n.block.d(t),n.token=null,n=null}}}function Bl(r){let e,l,n={ctx:r,current:null,token:null,hasCatch:!1,pending:rn,then:Xl,catch:Wl,value:3};return ce(l=r[1].api.fetchUser(r[0].by),n),{c(){e=q(),n.block.c()},l(t){e=q(),n.block.l(t)},m(t,s){g(t,e,s),n.block.m(t,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e},p(t,s){r=t,n.ctx=r,s&1&&l!==(l=r[1].api.fetchUser(r[0].by))&&ce(l,n)||$e(n,r,s)},d(t){t&&m(e),n.block.d(t),n.token=null,n=null}}}function Ol(r){let e=r[0].content+"",l;return{c(){l=D(e)},l(n){l=B(n,e)},m(n,t){g(n,l,t)},p(n,t){t&1&&e!==(e=n[0].content+"")&&ie(l,e)},d(n){n&&m(l)}}}function Pl(r){return{c:d,l:d,m:d,p:d,d}}function Vl(r){rt(r);let e,l,n,t,s=r[4]+"",i,c,o;function a(_,p){if(_[0].type=="user_banned")return Rl;if(_[0].type=="user_joined")return Ll;if(_[0].type=="user_kicked")return Fl;if(_[0].type=="user_left")return ql}let f=a(r),u=f&&f(r);return{c(){e=I("img"),t=P(),i=D(s),c=P(),u&&u.c(),o=q(),this.h()},l(_){e=C(_,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),t=V(_),i=B(_,s),c=V(_),u&&u.l(_),o=q(),this.h()},h(){h(e,"class","cover"),ee(e.src,l=Ee(r[3]))||h(e,"src",l),h(e,"width","24px"),h(e,"height","24px"),h(e,"alt",n=r[4])},m(_,p){g(_,e,p),g(_,t,p),g(_,i,p),g(_,c,p),u&&u.m(_,p),g(_,o,p)},p(_,p){rt(_),p&1&&!ee(e.src,l=Ee(_[3]))&&h(e,"src",l),p&1&&n!==(n=_[4])&&h(e,"alt",n),p&1&&s!==(s=_[4]+"")&&ie(i,s),f!==(f=a(_))&&(u&&u.d(1),u=f&&f(_),u&&(u.c(),u.m(o.parentNode,o)))},d(_){_&&(m(e),m(t),m(i),m(c),m(o)),u&&u.d(_)}}}function ql(r){let e;return{c(){e=D("left the chat.")},l(l){e=B(l,"left the chat.")},m(l,n){g(l,e,n)},d(l){l&&m(e)}}}function Fl(r){let e;return{c(){e=D("was kicked.")},l(l){e=B(l,"was kicked.")},m(l,n){g(l,e,n)},d(l){l&&m(e)}}}function Ll(r){let e;return{c(){e=D("has joined the chat.")},l(l){e=B(l,"has joined the chat.")},m(l,n){g(l,e,n)},d(l){l&&m(e)}}}function Rl(r){let e;return{c(){e=D("was banned.")},l(l){e=B(l,"was banned.")},m(l,n){g(l,e,n)},d(l){l&&m(e)}}}function Gl(r){return{c:d,l:d,m:d,p:d,d}}function Kl(r){return{c:d,l:d,m:d,p:d,d}}function Hl(r){it(r);let e,l=ke(r[5])+"",n,t,s=ke(r[6])+"",i,c;return{c(){e=D("Channel ownership changed from "),n=D(l),t=D(" to "),i=D(s),c=D(".")},l(o){e=B(o,"Channel ownership changed from "),n=B(o,l),t=B(o," to "),i=B(o,s),c=B(o,".")},m(o,a){g(o,e,a),g(o,n,a),g(o,t,a),g(o,i,a),g(o,c,a)},p(o,a){it(o),a&1&&l!==(l=ke(o[5])+"")&&ie(n,l),a&1&&s!==(s=ke(o[6])+"")&&ie(i,s)},d(o){o&&(m(e),m(n),m(t),m(i),m(c))}}}function zl(r){return{c:d,l:d,m:d,p:d,d}}function Wl(r){return{c:d,l:d,m:d,p:d,d}}function Xl(r){st(r);let e,l,n,t,s=r[4]+"",i,c,o;function a(_,p){if(_[0].type=="channel_description_changed")return Zl;if(_[0].type=="channel_icon_changed")return Yl;if(_[0].type=="channel_renamed")return Ql;if(_[0].type=="user_added"||_[0].type=="user_remove")return Jl}let f=a(r),u=f&&f(r);return{c(){e=I("img"),t=P(),i=D(s),c=P(),u&&u.c(),o=q(),this.h()},l(_){e=C(_,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),t=V(_),i=B(_,s),c=V(_),u&&u.l(_),o=q(),this.h()},h(){h(e,"class","cover"),ee(e.src,l=Ee(r[3]))||h(e,"src",l),h(e,"width","24px"),h(e,"height","24px"),h(e,"alt",n=r[4])},m(_,p){g(_,e,p),g(_,t,p),g(_,i,p),g(_,c,p),u&&u.m(_,p),g(_,o,p)},p(_,p){st(_),p&1&&!ee(e.src,l=Ee(_[3]))&&h(e,"src",l),p&1&&n!==(n=_[4])&&h(e,"alt",n),p&1&&s!==(s=_[4]+"")&&ie(i,s),f===(f=a(_))&&u?u.p(_,p):(u&&u.d(1),u=f&&f(_),u&&(u.c(),u.m(o.parentNode,o)))},d(_){_&&(m(e),m(t),m(i),m(c),m(o)),u&&u.d(_)}}}function Jl(r){let e,l,n={ctx:r,current:null,token:null,hasCatch:!1,pending:nn,then:en,catch:xl,value:3};return ce(l=r[1].api.fetchUser(r[0].id),n),{c(){e=q(),n.block.c()},l(t){e=q(),n.block.l(t)},m(t,s){g(t,e,s),n.block.m(t,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e},p(t,s){r=t,n.ctx=r,s&1&&l!==(l=r[1].api.fetchUser(r[0].id))&&ce(l,n)||$e(n,r,s)},d(t){t&&m(e),n.block.d(t),n.token=null,n=null}}}function Ql(r){let e,l=r[0].name+"",n,t;return{c(){e=D("renamed this channel to "),n=D(l),t=D(".")},l(s){e=B(s,"renamed this channel to "),n=B(s,l),t=B(s,".")},m(s,i){g(s,e,i),g(s,n,i),g(s,t,i)},p(s,i){i&1&&l!==(l=s[0].name+"")&&ie(n,l)},d(s){s&&(m(e),m(n),m(t))}}}function Yl(r){let e;return{c(){e=D("changes this channel icon.")},l(l){e=B(l,"changes this channel icon.")},m(l,n){g(l,e,n)},p:d,d(l){l&&m(e)}}}function Zl(r){let e;return{c(){e=D("changed this channel's description.")},l(l){e=B(l,"changed this channel's description.")},m(l,n){g(l,e,n)},p:d,d(l){l&&m(e)}}}function xl(r){return{c:d,l:d,m:d,p:d,d}}function en(r){let e,l=ke(r[3])+"",n,t;function s(o,a){if(o[0].type=="user_added")return ln;if(o[0].type=="user_remove")return tn}let i=s(r),c=i&&i(r);return{c(){c&&c.c(),e=P(),n=D(l),t=D(".")},l(o){c&&c.l(o),e=V(o),n=B(o,l),t=B(o,".")},m(o,a){c&&c.m(o,a),g(o,e,a),g(o,n,a),g(o,t,a)},p(o,a){i!==(i=s(o))&&(c&&c.d(1),c=i&&i(o),c&&(c.c(),c.m(e.parentNode,e))),a&1&&l!==(l=ke(o[3])+"")&&ie(n,l)},d(o){o&&(m(e),m(n),m(t)),c&&c.d(o)}}}function tn(r){let e;return{c(){e=D("removed")},l(l){e=B(l,"removed")},m(l,n){g(l,e,n)},d(l){l&&m(e)}}}function ln(r){let e;return{c(){e=D("added")},l(l){e=B(l,"added")},m(l,n){g(l,e,n)},d(l){l&&m(e)}}}function nn(r){return{c:d,l:d,m:d,p:d,d}}function rn(r){return{c:d,l:d,m:d,p:d,d}}function sn(r){let e;function l(s,i){if(s[0].type=="text")return Ol;if(s[0].type=="channel_description_changed"||s[0].type=="channel_icon_changed"||s[0].type=="channel_renamed"||s[0].type=="user_added"||s[0].type=="user_remove")return Bl;if(s[0].type=="channel_ownership_changed")return Dl;if(s[0].type=="user_banned"||s[0].type=="user_joined"||s[0].type=="user_kicked"||s[0].type=="user_left")return Al}let n=l(r),t=n&&n(r);return{c(){e=I("span"),t&&t.c(),this.h()},l(s){e=C(s,"SPAN",{class:!0});var i=S(e);t&&t.l(i),i.forEach(m),this.h()},h(){h(e,"class","container svelte-qj8q6t")},m(s,i){g(s,e,i),t&&t.m(e,null)},p(s,[i]){n===(n=l(s))&&t?t.p(s,i):(t&&t.d(1),t=n&&n(s),t&&(t.c(),t.m(e,null)))},i:d,o:d,d(s){s&&m(e),t&&t.d()}}}function on(r,e,l){const n=X(Ne);let{system:t}=e;const s=i=>n.api.fetchUser(i);return r.$$set=i=>{"system"in i&&l(0,t=i.system)},[t,n,s]}class cn extends pe{constructor(e){super(),ge(this,e,on,sn,de,{system:0})}}function an(r){let e,l,n,t,s,i,c,o="Ok",a,f,u="Cancel",_,p,M;const N=r[3].default,k=Qt(N,r,r[2],null);return{c(){e=I("dialog"),l=I("div"),k&&k.c(),n=P(),t=I("hr"),s=P(),i=I("form"),c=I("button"),c.textContent=o,a=P(),f=I("button"),f.textContent=u,this.h()},l(y){e=C(y,"DIALOG",{});var A=S(e);l=C(A,"DIV",{});var j=S(l);k&&k.l(j),n=V(j),t=C(j,"HR",{}),s=V(j),i=C(j,"FORM",{id:!0,method:!0});var F=S(i);c=C(F,"BUTTON",{type:!0,"data-svelte-h":!0}),Se(c)!=="svelte-fdbbw9"&&(c.textContent=o),a=V(F),f=C(F,"BUTTON",{type:!0,"data-svelte-h":!0}),Se(f)!=="svelte-1gqjcfl"&&(f.textContent=u),F.forEach(m),j.forEach(m),A.forEach(m),this.h()},h(){h(c,"type","submit"),h(f,"type","reset"),h(i,"id","modal-form"),h(i,"method","dialog")},m(y,A){g(y,e,A),v(e,l),k&&k.m(l,null),v(l,n),v(l,t),v(l,s),v(l,i),v(i,c),v(i,a),v(i,f),r[6](e),_=!0,p||(M=[fe(f,"click",r[5]),fe(i,"submit",r[4]),fe(e,"close",r[7])],p=!0)},p(y,[A]){k&&k.p&&(!_||A&4)&&Yt(k,N,y,y[2],_?xt(N,y[2],A,null):Zt(y[2]),null)},i(y){_||(b(k,y),_=!0)},o(y){w(k,y),_=!1},d(y){y&&m(e),k&&k.d(y),r[6](null),p=!1,Ae(M)}}}function fn(r,e,l){let{$$slots:n={},$$scope:t}=e,{showModal:s}=e,i;function c(u){el.call(this,r,u)}const o=()=>l(0,s=!1);function a(u){De[u?"unshift":"push"](()=>{i=u,l(1,i)})}const f=()=>l(0,s=!1);return r.$$set=u=>{"showModal"in u&&l(0,s=u.showModal),"$$scope"in u&&l(2,t=u.$$scope)},r.$$.update=()=>{r.$$.dirty&3&&(s?i==null||i.showModal():i==null||i.close())},[s,i,t,n,c,o,a,f]}class un extends pe{constructor(e){super(),ge(this,e,fn,an,de,{showModal:0})}}function hn(r){let e,l="External Link",n,t,s,i,c="Are you sure you want to go to this link? External links can be dangerous.";return{c(){e=I("h1"),e.textContent=l,n=P(),t=I("hr"),s=P(),i=I("p"),i.textContent=c,this.h()},l(o){e=C(o,"H1",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-qkxu7n"&&(e.textContent=l),n=V(o),t=C(o,"HR",{}),s=V(o),i=C(o,"P",{"data-svelte-h":!0}),Se(i)!=="svelte-os1rtp"&&(i.textContent=c),this.h()},h(){h(e,"class","text-3xl")},m(o,a){g(o,e,a),g(o,n,a),g(o,t,a),g(o,s,a),g(o,i,a)},p:d,d(o){o&&(m(e),m(n),m(t),m(s),m(i))}}}function _n(r){let e,l,n,t,s,i,c,o;function a(u){r[2](u)}let f={$$slots:{default:[hn]},$$scope:{ctx:r}};return r[1]!==void 0&&(f.showModal=r[1]),e=new un({props:f}),De.push(()=>ze(e,"showModal",a)),e.$on("submit",r[3]),{c(){Y(e.$$.fragment),n=P(),t=I("a"),s=D(r[0]),this.h()},l(u){re(e.$$.fragment,u),n=V(u),t=C(u,"A",{href:!0,target:!0,rel:!0});var _=S(t);s=B(_,r[0]),_.forEach(m),this.h()},h(){h(t,"href",r[0]),h(t,"target","_blank"),h(t,"rel","noreferrer")},m(u,_){Z(e,u,_),g(u,n,_),g(u,t,_),v(t,s),i=!0,c||(o=fe(t,"click",tl(r[4])),c=!0)},p(u,[_]){const p={};_&32&&(p.$$scope={dirty:_,ctx:u}),!l&&_&2&&(l=!0,p.showModal=u[1],He(()=>l=!1)),e.$set(p),(!i||_&1)&&ie(s,u[0]),(!i||_&1)&&h(t,"href",u[0])},i(u){i||(b(e.$$.fragment,u),i=!0)},o(u){w(e.$$.fragment,u),i=!1},d(u){u&&(m(n),m(t)),x(e,u),c=!1,o()}}}function mn(r,e,l){let{href:n}=e,t=!1;function s(o){t=o,l(1,t)}const i=()=>window.open(n),c=()=>l(1,t=!0);return r.$$set=o=>{"href"in o&&l(0,n=o.href)},[n,t,s,i,c]}class Qe extends pe{constructor(e){super(),ge(this,e,mn,_n,de,{href:0})}}function dn(r){let e,l,n,t;const s=[wn,vn],i=[];function c(o,a){return o[2]["jolt:low-data-mode"]?0:1}return e=c(r),l=i[e]=s[e](r),{c(){l.c(),n=q()},l(o){l.l(o),n=q()},m(o,a){i[e].m(o,a),g(o,n,a),t=!0},p(o,a){let f=e;e=c(o),e===f?i[e].p(o,a):(J(),w(i[f],1,1,()=>{i[f]=null}),Q(),l=i[e],l?l.p(o,a):(l=i[e]=s[e](o),l.c()),b(l,1),l.m(n.parentNode,n))},i(o){t||(b(l),t=!0)},o(o){w(l),t=!1},d(o){o&&m(n),i[e].d(o)}}}function pn(r){let e,l,n=r[0].filename+"",t,s,i,c;return i=new Qe({props:{href:r[1]}}),{c(){e=I("span"),l=D("[File "),t=D(n),s=D(`]
			`),Y(i.$$.fragment),this.h()},l(o){e=C(o,"SPAN",{class:!0});var a=S(e);l=B(a,"[File "),t=B(a,n),s=B(a,`]
			`),re(i.$$.fragment,a),a.forEach(m),this.h()},h(){h(e,"class","text-gray-500")},m(o,a){g(o,e,a),v(e,l),v(e,t),v(e,s),Z(i,e,null),c=!0},p(o,a){(!c||a&1)&&n!==(n=o[0].filename+"")&&ie(t,n);const f={};a&2&&(f.href=o[1]),i.$set(f)},i(o){c||(b(i.$$.fragment,o),c=!0)},o(o){w(i.$$.fragment,o),c=!1},d(o){o&&m(e),x(i)}}}function gn(r){let e,l,n;return{c(){e=I("audio"),l=I("source"),this.h()},l(t){e=C(t,"AUDIO",{});var s=S(e);l=C(s,"SOURCE",{src:!0}),s.forEach(m),this.h()},h(){ee(l.src,n=r[1])||h(l,"src",n),e.controls=!0},m(t,s){g(t,e,s),v(e,l)},p(t,s){s&2&&!ee(l.src,n=t[1])&&h(l,"src",n)},i:d,o:d,d(t){t&&m(e)}}}function bn(r){let e,l,n;return{c(){e=I("video"),l=I("source"),this.h()},l(t){e=C(t,"VIDEO",{class:!0});var s=S(e);l=C(s,"SOURCE",{src:!0}),s.forEach(m),this.h()},h(){ee(l.src,n=r[1])||h(l,"src",n),e.controls=!0,h(e,"class","svelte-m38imf")},m(t,s){g(t,e,s),v(e,l)},p(t,s){s&2&&!ee(l.src,n=t[1])&&h(l,"src",n)},i:d,o:d,d(t){t&&m(e)}}}function kn(r){let e,l,n,t;const s=[Nn,Tn],i=[];function c(o,a){return o[2]["jolt:low-data-mode"]?0:1}return e=c(r),l=i[e]=s[e](r),{c(){l.c(),n=q()},l(o){l.l(o),n=q()},m(o,a){i[e].m(o,a),g(o,n,a),t=!0},p(o,a){let f=e;e=c(o),e===f?i[e].p(o,a):(J(),w(i[f],1,1,()=>{i[f]=null}),Q(),l=i[e],l?l.p(o,a):(l=i[e]=s[e](o),l.c()),b(l,1),l.m(n.parentNode,n))},i(o){t||(b(l),t=!0)},o(o){w(l),t=!1},d(o){o&&m(n),i[e].d(o)}}}function vn(r){let e,l,n={ctx:r,current:null,token:null,hasCatch:!0,pending:Cn,then:$n,catch:yn,value:4,error:6};return ce(l=fetch(r[1]),n),{c(){e=q(),n.block.c()},l(t){e=q(),n.block.l(t)},m(t,s){g(t,e,s),n.block.m(t,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e},p(t,s){r=t,n.ctx=r,s&2&&l!==(l=fetch(r[1]))&&ce(l,n)||$e(n,r,s)},i:d,o:d,d(t){t&&m(e),n.block.d(t),n.token=null,n=null}}}function wn(r){let e,l,n,t,s;return n=new Qe({props:{href:r[1]}}),{c(){e=I("span"),l=D("[Text "),Y(n.$$.fragment),t=D("]"),this.h()},l(i){e=C(i,"SPAN",{class:!0});var c=S(e);l=B(c,"[Text "),re(n.$$.fragment,c),t=B(c,"]"),c.forEach(m),this.h()},h(){h(e,"class","text-gray-500")},m(i,c){g(i,e,c),v(e,l),Z(n,e,null),v(e,t),s=!0},p(i,c){const o={};c&2&&(o.href=i[1]),n.$set(o)},i(i){s||(b(n.$$.fragment,i),s=!0)},o(i){w(n.$$.fragment,i),s=!1},d(i){i&&m(e),x(n)}}}function yn(r){let e,l,n=r[0].filename+"",t,s,i=r[6]+"",c;return{c(){e=I("p"),l=D("Unable to download "),t=D(n),s=D(": "),c=D(i)},l(o){e=C(o,"P",{});var a=S(e);l=B(a,"Unable to download "),t=B(a,n),s=B(a,": "),c=B(a,i),a.forEach(m)},m(o,a){g(o,e,a),v(e,l),v(e,t),v(e,s),v(e,c)},p(o,a){a&1&&n!==(n=o[0].filename+"")&&ie(t,n),a&2&&i!==(i=o[6]+"")&&ie(c,i)},d(o){o&&m(e)}}}function $n(r){let e,l,n={ctx:r,current:null,token:null,hasCatch:!1,pending:In,then:Mn,catch:En,value:5};return ce(l=r[4].text(),n),{c(){e=q(),n.block.c()},l(t){e=q(),n.block.l(t)},m(t,s){g(t,e,s),n.block.m(t,n.anchor=s),n.mount=()=>e.parentNode,n.anchor=e},p(t,s){r=t,n.ctx=r,s&2&&l!==(l=r[4].text())&&ce(l,n)||$e(n,r,s)},d(t){t&&m(e),n.block.d(t),n.token=null,n=null}}}function En(r){return{c:d,l:d,m:d,p:d,d}}function Mn(r){let e,l=r[5]+"",n;return{c(){e=I("p"),n=D(l)},l(t){e=C(t,"P",{});var s=S(e);n=B(s,l),s.forEach(m)},m(t,s){g(t,e,s),v(e,n)},p(t,s){s&2&&l!==(l=t[5]+"")&&ie(n,l)},d(t){t&&m(e)}}}function In(r){return{c:d,l:d,m:d,p:d,d}}function Cn(r){return{c:d,l:d,m:d,p:d,d}}function Tn(r){let e,l,n;return{c(){e=I("img"),this.h()},l(t){e=C(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ee(e.src,l=r[1])||h(e,"src",l),h(e,"alt",n=r[0].filename),h(e,"class","max-w-xl max-h-xl svelte-m38imf")},m(t,s){g(t,e,s)},p(t,s){s&2&&!ee(e.src,l=t[1])&&h(e,"src",l),s&1&&n!==(n=t[0].filename)&&h(e,"alt",n)},i:d,o:d,d(t){t&&m(e)}}}function Nn(r){let e,l,n,t,s;return n=new Qe({props:{href:r[1]}}),{c(){e=I("span"),l=D("[Image "),Y(n.$$.fragment),t=D("]"),this.h()},l(i){e=C(i,"SPAN",{class:!0});var c=S(e);l=B(c,"[Image "),re(n.$$.fragment,c),t=B(c,"]"),c.forEach(m),this.h()},h(){h(e,"class","text-gray-500")},m(i,c){g(i,e,c),v(e,l),Z(n,e,null),v(e,t),s=!0},p(i,c){const o={};c&2&&(o.href=i[1]),n.$set(o)},i(i){s||(b(n.$$.fragment,i),s=!0)},o(i){w(n.$$.fragment,i),s=!1},d(i){i&&m(e),x(n)}}}function Un(r){let e,l,n,t;const s=[kn,bn,gn,pn,dn],i=[];function c(o,a){return o[0].metadata.type=="Image"?0:o[0].metadata.type=="Video"?1:o[0].metadata.type=="Audio"?2:o[0].metadata.type=="File"?3:o[0].metadata.type=="Text"?4:-1}return~(l=c(r))&&(n=i[l]=s[l](r)),{c(){e=I("div"),n&&n.c()},l(o){e=C(o,"DIV",{});var a=S(e);n&&n.l(a),a.forEach(m)},m(o,a){g(o,e,a),~l&&i[l].m(e,null),t=!0},p(o,[a]){let f=l;l=c(o),l===f?~l&&i[l].p(o,a):(n&&(J(),w(i[f],1,1,()=>{i[f]=null}),Q()),~l?(n=i[l],n?n.p(o,a):(n=i[l]=s[l](o),n.c()),b(n,1),n.m(e,null)):n=null)},i(o){t||(b(n),t=!0)},o(o){w(n),t=!1},d(o){o&&m(e),~l&&i[l].d()}}}function Sn(r,e,l){let n,t;const s=X(Be);ae(r,s,c=>l(2,t=c));let{attachment:i}=e;return r.$$set=c=>{"attachment"in c&&l(0,i=c.attachment)},r.$$.update=()=>{r.$$.dirty&1&&l(1,n=sl(i))},[i,n,t,s]}class jn extends pe{constructor(e){super(),ge(this,e,Sn,Un,de,{attachment:0})}}function An(r){let e,l="oop website embed, can't handle that :(";return{c(){e=I("span"),e.textContent=l,this.h()},l(n){e=C(n,"SPAN",{style:!0,"data-svelte-h":!0}),Se(e)!=="svelte-rjpnkw"&&(e.textContent=l),this.h()},h(){Ve(e,"color","var(--secondary-foreground)")},m(n,t){g(n,e,t)},p:d,d(n){n&&m(e)}}}function Dn(r){let e,l,n,t=r[0].icon_url&&!r[1]["jolt:low-data-mode"]&&ot(r),s=r[0].title&&ct(r),i=r[0].description&&at(r);return{c(){e=I("div"),t&&t.c(),l=P(),s&&s.c(),n=P(),i&&i.c(),this.h()},l(c){e=C(c,"DIV",{class:!0,style:!0});var o=S(e);t&&t.l(o),l=V(o),s&&s.l(o),n=V(o),i&&i.l(o),o.forEach(m),this.h()},h(){h(e,"class","text-embed svelte-qbtmm9"),Ve(e,"border-left","solid "+r[0].colour)},m(c,o){g(c,e,o),t&&t.m(e,null),v(e,l),s&&s.m(e,null),v(e,n),i&&i.m(e,null)},p(c,o){c[0].icon_url&&!c[1]["jolt:low-data-mode"]?t?t.p(c,o):(t=ot(c),t.c(),t.m(e,l)):t&&(t.d(1),t=null),c[0].title?s?s.p(c,o):(s=ct(c),s.c(),s.m(e,n)):s&&(s.d(1),s=null),c[0].description?i?i.p(c,o):(i=at(c),i.c(),i.m(e,null)):i&&(i.d(1),i=null),o&1&&Ve(e,"border-left","solid "+c[0].colour)},d(c){c&&m(e),t&&t.d(),s&&s.d(),i&&i.d()}}}function Bn(r){let e,l,n,t,s;return{c(){e=I("video"),l=I("source"),this.h()},l(i){e=C(i,"VIDEO",{class:!0});var c=S(e);l=C(c,"SOURCE",{src:!0,width:!0,height:!0}),c.forEach(m),this.h()},h(){ee(l.src,n=r[0].url)||h(l,"src",n),h(l,"width",t=r[0].width),h(l,"height",s=r[0].height),e.controls=!0,h(e,"class","svelte-qbtmm9")},m(i,c){g(i,e,c),v(e,l)},p(i,c){c&1&&!ee(l.src,n=i[0].url)&&h(l,"src",n),c&1&&t!==(t=i[0].width)&&h(l,"width",t),c&1&&s!==(s=i[0].height)&&h(l,"height",s)},d(i){i&&m(e)}}}function On(r){let e,l,n,t;return{c(){e=I("img"),this.h()},l(s){e=C(s,"IMG",{src:!0,width:!0,height:!0,class:!0}),this.h()},h(){ee(e.src,l=r[0].url)||h(e,"src",l),h(e,"width",n=r[0].width),h(e,"height",t=r[0].height),h(e,"class","svelte-qbtmm9")},m(s,i){g(s,e,i)},p(s,i){i&1&&!ee(e.src,l=s[0].url)&&h(e,"src",l),i&1&&n!==(n=s[0].width)&&h(e,"width",n),i&1&&t!==(t=s[0].height)&&h(e,"height",t)},d(s){s&&m(e)}}}function ot(r){let e,l,n;return{c(){e=I("img"),this.h()},l(t){e=C(t,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),this.h()},h(){ee(e.src,l=r[0].icon_url)||h(e,"src",l),h(e,"alt",n=r[0].title),h(e,"width","24"),h(e,"height","24"),h(e,"class","svelte-qbtmm9")},m(t,s){g(t,e,s)},p(t,s){s&1&&!ee(e.src,l=t[0].icon_url)&&h(e,"src",l),s&1&&n!==(n=t[0].title)&&h(e,"alt",n)},d(t){t&&m(e)}}}function ct(r){let e,l=r[0].title+"",n;return{c(){e=I("h1"),n=D(l)},l(t){e=C(t,"H1",{});var s=S(e);n=B(s,l),s.forEach(m)},m(t,s){g(t,e,s),v(e,n)},p(t,s){s&1&&l!==(l=t[0].title+"")&&ie(n,l)},d(t){t&&m(e)}}}function at(r){let e,l=r[0].description+"",n;return{c(){e=I("p"),n=D(l)},l(t){e=C(t,"P",{});var s=S(e);n=B(s,l),s.forEach(m)},m(t,s){g(t,e,s),v(e,n)},p(t,s){s&1&&l!==(l=t[0].description+"")&&ie(n,l)},d(t){t&&m(e)}}}function Pn(r){let e;function l(s,i){if(s[0].type=="Image"&&!s[1]["jolt:low-data-mode"])return On;if(s[0].type=="Video"&&!s[1]["jolt:low-data-mode"])return Bn;if(s[0].type=="Text")return Dn;if(s[0].type=="Website")return An}let n=l(r),t=n&&n(r);return{c(){t&&t.c(),e=q()},l(s){t&&t.l(s),e=q()},m(s,i){t&&t.m(s,i),g(s,e,i)},p(s,[i]){n===(n=l(s))&&t?t.p(s,i):(t&&t.d(1),t=n&&n(s),t&&(t.c(),t.m(e.parentNode,e)))},i:d,o:d,d(s){s&&m(e),t&&t.d(s)}}}function Vn(r,e,l){let n,{embed:t}=e;const s=X(Be);return ae(r,s,i=>l(1,n=i)),r.$$set=i=>{"embed"in i&&l(0,t=i.embed)},[t,n,s]}class qn extends pe{constructor(e){super(),ge(this,e,Vn,Pn,de,{embed:0})}}function Fn(r){let e,l,n;return{c(){e=I("textarea"),this.h()},l(t){e=C(t,"TEXTAREA",{maxlength:!0,placeholder:!0,class:!0}),S(e).forEach(m),this.h()},h(){h(e,"maxlength","2000"),h(e,"placeholder",r[1]),h(e,"class","svelte-kqfcqt")},m(t,s){g(t,e,s),qe(e,r[0]),l||(n=[fe(e,"blur",r[3]),fe(e,"input",r[4]),fe(e,"keydown",r[6]),fe(e,"input",r[7])],l=!0)},p(t,[s]){s&2&&h(e,"placeholder",t[1]),s&1&&qe(e,t[0])},i:d,o:d,d(t){t&&m(e),l=!1,Ae(n)}}}function Ln(r,e,l){const n=X(Ne),t=X(Lt);let{placeholder:s=void 0}=e,{value:i=""}=e,{sendTypingEvents:c}=e;const o=ll();function a(){c&&n.websocket.send({type:"EndTyping",channel:t._id})}function f(){if(c){if(i==""){n.websocket.send({type:"EndTyping",channel:t._id});return}n.websocket.send({type:"BeginTyping",channel:t._id})}}const u=p=>{var M;o("keydown",p),!(p.shiftKey||p.key!="Enter")&&(p.preventDefault(),(M=p.currentTarget.form)==null||M.requestSubmit())};function _(){i=this.value,l(0,i)}return r.$$set=p=>{"placeholder"in p&&l(1,s=p.placeholder),"value"in p&&l(0,i=p.value),"sendTypingEvents"in p&&l(5,c=p.sendTypingEvents)},[i,s,o,a,f,c,u,_]}class Wt extends pe{constructor(e){super(),ge(this,e,Ln,Fn,de,{placeholder:1,value:0,sendTypingEvents:5})}}function ft(r,e,l){const n=r.slice();return n[27]=e[l],n}function ut(r,e,l){const n=r.slice();return n[30]=e[l],n}function Ge(r){const e=r.slice(),l=new Date(e[0].edited);return e[6]=l,e}function Rn(r){const e=r.slice(),l=Ee(e[1],e[2],e[0]);return e[33]=l,e}function ht(r,e,l){const n=r.slice();return n[34]=e[l],n}function _t(r,e,l){const n=r.slice();return n[37]=e[l].name,n[38]=e[l].onclick,n[39]=e[l].src,n[40]=e[l].showIf,n}function mt(r){let e,l,n=me(r[12]),t=[];for(let i=0;i<n.length;i+=1)t[i]=pt(_t(r,n,i));const s=i=>w(t[i],1,1,()=>{t[i]=null});return{c(){e=I("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=C(i,"DIV",{class:!0});var c=S(e);for(let o=0;o<t.length;o+=1)t[o].l(c);c.forEach(m),this.h()},h(){h(e,"class","message-controls svelte-ewxr9l")},m(i,c){g(i,e,c);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);l=!0},p(i,c){if(c[0]&4097){n=me(i[12]);let o;for(o=0;o<n.length;o+=1){const a=_t(i,n,o);t[o]?(t[o].p(a,c),b(t[o],1)):(t[o]=pt(a),t[o].c(),b(t[o],1),t[o].m(e,null))}for(J(),o=n.length;o<t.length;o+=1)s(o);Q()}},i(i){if(!l){for(let c=0;c<n.length;c+=1)b(t[c]);l=!0}},o(i){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)w(t[c]);l=!1},d(i){i&&m(e),Ce(t,i)}}}function dt(r){let e,l,n,t,s,i,c;const o=[Kn,Gn],a=[];function f(_,p){return typeof _[39]=="string"?0:1}l=f(r),n=a[l]=o[l](r);function u(){return r[18](r[38])}return{c(){e=I("button"),n.c(),t=P(),this.h()},l(_){e=C(_,"BUTTON",{class:!0});var p=S(e);n.l(p),t=V(p),p.forEach(m),this.h()},h(){h(e,"class","svelte-ewxr9l")},m(_,p){g(_,e,p),a[l].m(e,null),v(e,t),s=!0,i||(c=[fe(e,"click",u),Ft(zt.call(null,e,{placement:"top",content:r[37],theme:"top-tooltip",animation:"shift-away",duration:100}))],i=!0)},p(_,p){r=_,n.p(r,p)},i(_){s||(b(n),s=!0)},o(_){w(n),s=!1},d(_){_&&m(e),a[l].d(),i=!1,Ae(c)}}}function Gn(r){let e,l,n;var t=r[39];function s(i){return{props:{width:"18px",height:"18px"}}}return t&&(e=Ze(t,s())),{c(){e&&Y(e.$$.fragment),l=q()},l(i){e&&re(e.$$.fragment,i),l=q()},m(i,c){e&&Z(e,i,c),g(i,l,c),n=!0},p(i,c){if(t!==(t=i[39])){if(e){J();const o=e;w(o.$$.fragment,1,0,()=>{x(o,1)}),Q()}t?(e=Ze(t,s()),Y(e.$$.fragment),b(e.$$.fragment,1),Z(e,l.parentNode,l)):e=null}},i(i){n||(e&&b(e.$$.fragment,i),n=!0)},o(i){e&&w(e.$$.fragment,i),n=!1},d(i){i&&m(l),e&&x(e,i)}}}function Kn(r){let e,l;return{c(){e=I("img"),this.h()},l(n){e=C(n,"IMG",{src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){ee(e.src,l=r[39])||h(e,"src",l),h(e,"alt",r[37]),h(e,"width","18px"),h(e,"height","18px")},m(n,t){g(n,e,t)},p:d,i:d,o:d,d(n){n&&m(e)}}}function pt(r){var s;let e=((s=r[40])==null?void 0:s.call(r,r[0]))??!0,l,n,t=e&&dt(r);return{c(){t&&t.c(),l=q()},l(i){t&&t.l(i),l=q()},m(i,c){t&&t.m(i,c),g(i,l,c),n=!0},p(i,c){var o;c[0]&1&&(e=((o=i[40])==null?void 0:o.call(i,i[0]))??!0),e?t?(t.p(i,c),c[0]&1&&b(t,1)):(t=dt(i),t.c(),b(t,1),t.m(l.parentNode,l)):t&&(J(),w(t,1,1,()=>{t=null}),Q())},i(i){n||(b(t),n=!0)},o(i){w(t),n=!1},d(i){i&&m(l),t&&t.d(i)}}}function gt(r){let e,l,n=me(r[0].replies),t=[];for(let i=0;i<n.length;i+=1)t[i]=bt(ht(r,n,i));const s=i=>w(t[i],1,1,()=>{t[i]=null});return{c(){e=I("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=C(i,"DIV",{class:!0});var c=S(e);for(let o=0;o<t.length;o+=1)t[o].l(c);c.forEach(m),this.h()},h(){h(e,"class","replies svelte-ewxr9l")},m(i,c){g(i,e,c);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null);l=!0},p(i,c){if(c[0]&1){n=me(i[0].replies);let o;for(o=0;o<n.length;o+=1){const a=ht(i,n,o);t[o]?(t[o].p(a,c),b(t[o],1)):(t[o]=bt(a),t[o].c(),b(t[o],1),t[o].m(e,null))}for(J(),o=n.length;o<t.length;o+=1)s(o);Q()}},i(i){if(!l){for(let c=0;c<n.length;c+=1)b(t[c]);l=!0}},o(i){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)w(t[c]);l=!1},d(i){i&&m(e),Ce(t,i)}}}function bt(r){let e,l;return e=new Il({props:{id:r[34]}}),{c(){Y(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,t){Z(e,n,t),l=!0},p(n,t){const s={};t[0]&1&&(s.id=n[34]),e.$set(s)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function kt(r){let e,l,n,t,s,i,c,o=je(r[6]).calendar()+"",a,f,u;const _=[zn,Hn],p=[];function M(y,A){return y[5]["jolt:low-data-mode"]||y[1]==null?0:1}function N(y,A){return A===1?Rn(y):y}l=M(r),n=p[l]=_[l](N(r,l));let k="edited"in r[0]&&r[0].edited!=null&&vt(Ge(r));return{c(){e=I("div"),n.c(),t=P(),s=D(r[4]),i=P(),c=I("p"),a=D(o),f=P(),k&&k.c(),this.h()},l(y){e=C(y,"DIV",{class:!0});var A=S(e);n.l(A),t=V(A),s=B(A,r[4]),i=V(A),c=C(A,"P",{class:!0});var j=S(c);a=B(j,o),f=V(j),k&&k.l(j),j.forEach(m),A.forEach(m),this.h()},h(){h(c,"class","timestamp svelte-ewxr9l"),h(e,"class","user-detail svelte-ewxr9l")},m(y,A){g(y,e,A),p[l].m(e,null),v(e,t),v(e,s),v(e,i),v(e,c),v(c,a),v(c,f),k&&k.m(c,null),u=!0},p(y,A){let j=l;l=M(y),l===j?p[l].p(N(y,l),A):(J(),w(p[j],1,1,()=>{p[j]=null}),Q(),n=p[l],n?n.p(N(y,l),A):(n=p[l]=_[l](N(y,l)),n.c()),b(n,1),n.m(e,t)),(!u||A[0]&16)&&ie(s,y[4]),(!u||A[0]&64)&&o!==(o=je(y[6]).calendar()+"")&&ie(a,o),"edited"in y[0]&&y[0].edited!=null?k?k.p(Ge(y),A):(k=vt(Ge(y)),k.c(),k.m(c,null)):k&&(k.d(1),k=null)},i(y){u||(b(n),u=!0)},o(y){w(n),u=!1},d(y){y&&m(e),p[l].d(),k&&k.d()}}}function Hn(r){let e,l,n,t;const s=[Xn,Wn],i=[];function c(o,a){return o[33]==null?0:1}return e=c(r),l=i[e]=s[e](r),{c(){l.c(),n=q()},l(o){l.l(o),n=q()},m(o,a){i[e].m(o,a),g(o,n,a),t=!0},p(o,a){let f=e;e=c(o),e===f?i[e].p(o,a):(J(),w(i[f],1,1,()=>{i[f]=null}),Q(),l=i[e],l?l.p(o,a):(l=i[e]=s[e](o),l.c()),b(l,1),l.m(n.parentNode,n))},i(o){t||(b(l),t=!0)},o(o){w(l),t=!1},d(o){o&&m(n),i[e].d(o)}}}function zn(r){let e,l;return e=new Fe({}),{c(){Y(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,t){Z(e,n,t),l=!0},p:d,i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function Wn(r){let e,l;return{c(){e=I("img"),this.h()},l(n){e=C(n,"IMG",{class:!0,alt:!0,src:!0,width:!0,height:!0}),this.h()},h(){h(e,"class","cover"),h(e,"alt",r[4]),ee(e.src,l=r[33])||h(e,"src",l),h(e,"width","40px"),h(e,"height","40px")},m(n,t){g(n,e,t)},p(n,t){t[0]&16&&h(e,"alt",n[4]),t[0]&7&&!ee(e.src,l=n[33])&&h(e,"src",l)},i:d,o:d,d(n){n&&m(e)}}}function Xn(r){let e,l;return e=new Fe({}),{c(){Y(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,t){Z(e,n,t),l=!0},p:d,i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function vt(r){let e,l="(edited)",n,t,s;return{c(){e=I("span"),e.textContent=l,this.h()},l(i){e=C(i,"SPAN",{class:!0,"data-svelte-h":!0}),Se(e)!=="svelte-dy5ue0"&&(e.textContent=l),this.h()},h(){h(e,"class","timestamp svelte-ewxr9l")},m(i,c){g(i,e,c),t||(s=Ft(n=zt.call(null,e,{placement:"top",content:je(r[6]).calendar(),theme:"top-tooltip",animation:"shift-away",duration:100})),t=!0)},p(i,c){r=i,n&&nl(n.update)&&c[0]&1&&n.update.call(null,{placement:"top",content:je(r[6]).calendar(),theme:"top-tooltip",animation:"shift-away",duration:100})},d(i){i&&m(e),t=!1,s()}}}function Jn(r){let e,l=r[0].content+"",n;return{c(){e=I("span"),n=D(l),this.h()},l(t){e=C(t,"SPAN",{class:!0});var s=S(e);n=B(s,l),s.forEach(m),this.h()},h(){h(e,"class","message-content svelte-ewxr9l"),Ye(e,"message-not-sent","promise"in r[0])},m(t,s){g(t,e,s),v(e,n)},p(t,s){s[0]&1&&l!==(l=t[0].content+"")&&ie(n,l),s[0]&1&&Ye(e,"message-not-sent","promise"in t[0])},i:d,o:d,d(t){t&&m(e)}}}function Qn(r){let e,l,n,t,s,i;function c(a){r[19](a)}let o={placeholder:"Edit this message",sendTypingEvents:!1};return r[3]!==void 0&&(o.value=r[3]),l=new Wt({props:o}),De.push(()=>ze(l,"value",c)),l.$on("keydown",r[20]),{c(){e=I("form"),Y(l.$$.fragment),this.h()},l(a){e=C(a,"FORM",{id:!0,class:!0});var f=S(e);re(l.$$.fragment,f),f.forEach(m),this.h()},h(){h(e,"id","message-edit-form"),h(e,"class","message-form svelte-ewxr9l")},m(a,f){g(a,e,f),Z(l,e,null),t=!0,s||(i=fe(e,"submit",r[13]),s=!0)},p(a,f){const u={};!n&&f[0]&8&&(n=!0,u.value=a[3],He(()=>n=!1)),l.$set(u)},i(a){t||(b(l.$$.fragment,a),t=!0)},o(a){w(l.$$.fragment,a),t=!1},d(a){a&&m(e),x(l),s=!1,i()}}}function wt(r){let e,l;return e=new cn({props:{system:r[0].system}}),{c(){Y(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,t){Z(e,n,t),l=!0},p(n,t){const s={};t[0]&1&&(s.system=n[0].system),e.$set(s)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function yt(r){let e,l,n=me(r[0].attachments),t=[];for(let i=0;i<n.length;i+=1)t[i]=$t(ut(r,n,i));const s=i=>w(t[i],1,1,()=>{t[i]=null});return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=q()},l(i){for(let c=0;c<t.length;c+=1)t[c].l(i);e=q()},m(i,c){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(i,c);g(i,e,c),l=!0},p(i,c){if(c[0]&1){n=me(i[0].attachments);let o;for(o=0;o<n.length;o+=1){const a=ut(i,n,o);t[o]?(t[o].p(a,c),b(t[o],1)):(t[o]=$t(a),t[o].c(),b(t[o],1),t[o].m(e.parentNode,e))}for(J(),o=n.length;o<t.length;o+=1)s(o);Q()}},i(i){if(!l){for(let c=0;c<n.length;c+=1)b(t[c]);l=!0}},o(i){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)w(t[c]);l=!1},d(i){i&&m(e),Ce(t,i)}}}function $t(r){let e,l;return e=new jn({props:{attachment:r[30]}}),{c(){Y(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,t){Z(e,n,t),l=!0},p(n,t){const s={};t[0]&1&&(s.attachment=n[30]),e.$set(s)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function Et(r){let e,l,n=me(r[0].embeds),t=[];for(let i=0;i<n.length;i+=1)t[i]=Mt(ft(r,n,i));const s=i=>w(t[i],1,1,()=>{t[i]=null});return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=q()},l(i){for(let c=0;c<t.length;c+=1)t[c].l(i);e=q()},m(i,c){for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(i,c);g(i,e,c),l=!0},p(i,c){if(c[0]&1){n=me(i[0].embeds);let o;for(o=0;o<n.length;o+=1){const a=ft(i,n,o);t[o]?(t[o].p(a,c),b(t[o],1)):(t[o]=Mt(a),t[o].c(),b(t[o],1),t[o].m(e.parentNode,e))}for(J(),o=n.length;o<t.length;o+=1)s(o);Q()}},i(i){if(!l){for(let c=0;c<n.length;c+=1)b(t[c]);l=!0}},o(i){t=t.filter(Boolean);for(let c=0;c<t.length;c+=1)w(t[c]);l=!1},d(i){i&&m(e),Ce(t,i)}}}function Mt(r){let e,l;return e=new qn({props:{embed:r[27]}}),{c(){Y(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,t){Z(e,n,t),l=!0},p(n,t){const s={};t[0]&1&&(s.embed=n[27]),e.$set(s)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function Yn(r){let e,l,n,t=r[14](r[0])&&!("system"in r[0]),s,i,c,o,a,f,u,_,p=!("promise"in r[0])&&mt(r),M=r[0].replies!=null&&r[0].replies.length!=0&&gt(r),N=t&&kt(r);const k=[Qn,Jn],y=[];function A($,T){return $[3]!=null?0:$[0].content!=null?1:-1}~(i=A(r))&&(c=y[i]=k[i](r));let j="system"in r[0]&&r[0].system!=null&&wt(r),F="attachments"in r[0]&&r[0].attachments!=null&&yt(r),L="embeds"in r[0]&&r[0].embeds!=null&&Et(r);return{c(){e=I("div"),p&&p.c(),l=P(),M&&M.c(),n=P(),N&&N.c(),s=P(),c&&c.c(),o=P(),j&&j.c(),a=P(),F&&F.c(),f=P(),L&&L.c(),this.h()},l($){e=C($,"DIV",{id:!0,class:!0});var T=S(e);p&&p.l(T),l=V(T),M&&M.l(T),n=V(T),N&&N.l(T),s=V(T),c&&c.l(T),o=V(T),j&&j.l(T),a=V(T),F&&F.l(T),f=V(T),L&&L.l(T),T.forEach(m),this.h()},h(){h(e,"id",u="MESSAGE-"+r[0]._id),h(e,"class","message-container svelte-ewxr9l")},m($,T){g($,e,T),p&&p.m(e,null),v(e,l),M&&M.m(e,null),v(e,n),N&&N.m(e,null),v(e,s),~i&&y[i].m(e,null),v(e,o),j&&j.m(e,null),v(e,a),F&&F.m(e,null),v(e,f),L&&L.m(e,null),_=!0},p($,T){"promise"in $[0]?p&&(J(),w(p,1,1,()=>{p=null}),Q()):p?(p.p($,T),T[0]&1&&b(p,1)):(p=mt($),p.c(),b(p,1),p.m(e,l)),$[0].replies!=null&&$[0].replies.length!=0?M?(M.p($,T),T[0]&1&&b(M,1)):(M=gt($),M.c(),b(M,1),M.m(e,n)):M&&(J(),w(M,1,1,()=>{M=null}),Q()),T[0]&1&&(t=$[14]($[0])&&!("system"in $[0])),t?N?(N.p($,T),T[0]&1&&b(N,1)):(N=kt($),N.c(),b(N,1),N.m(e,s)):N&&(J(),w(N,1,1,()=>{N=null}),Q());let z=i;i=A($),i===z?~i&&y[i].p($,T):(c&&(J(),w(y[z],1,1,()=>{y[z]=null}),Q()),~i?(c=y[i],c?c.p($,T):(c=y[i]=k[i]($),c.c()),b(c,1),c.m(e,o)):c=null),"system"in $[0]&&$[0].system!=null?j?(j.p($,T),T[0]&1&&b(j,1)):(j=wt($),j.c(),b(j,1),j.m(e,a)):j&&(J(),w(j,1,1,()=>{j=null}),Q()),"attachments"in $[0]&&$[0].attachments!=null?F?(F.p($,T),T[0]&1&&b(F,1)):(F=yt($),F.c(),b(F,1),F.m(e,f)):F&&(J(),w(F,1,1,()=>{F=null}),Q()),"embeds"in $[0]&&$[0].embeds!=null?L?(L.p($,T),T[0]&1&&b(L,1)):(L=Et($),L.c(),b(L,1),L.m(e,null)):L&&(J(),w(L,1,1,()=>{L=null}),Q()),(!_||T[0]&1&&u!==(u="MESSAGE-"+$[0]._id))&&h(e,"id",u)},i($){_||(b(p),b(M),b(N),b(c),b(j),b(F),b(L),_=!0)},o($){w(p),w(M),w(N),w(c),w(j),w(F),w(L),_=!1},d($){$&&m(e),p&&p.d(),M&&M.d(),N&&N.d(),~i&&y[i].d(),j&&j.d(),F&&F.d(),L&&L.d()}}}function Zn(r,e,l){let n,t,s,i,c,o,a;je.extend(_l);let{message:f}=e,{messageIndex:u}=e,_,p,M;const N=X(Be);ae(r,N,U=>l(5,a=U));const k=X(Ne),y=X(Ht);ae(r,y,U=>l(16,s=U));const A=X(We),j=X(Rt),F=X(Xe);ae(r,F,U=>l(17,i=U));const L=X(Gt);ae(r,L,U=>l(21,c=U));const $=X(Je);ae(r,$,U=>l(22,o=U));const T=[{src:jl,name:"Reply",onclick(U){((o==null?void 0:o.length)??0)>=5||o!=null&&o.some(O=>O.message._id==U._id)||$==null||$.update(O=>(O.push({message:U,mention:!0}),O))}},{src:ul,name:"Edit",showIf:U=>{var O;return U.author==((O=k.user)==null?void 0:O._id)},onclick:U=>l(3,_=_==null?U.content??"":void 0)},{src:Nl,name:"Delete",showIf:U=>{var O;return U.author==((O=k.user)==null?void 0:O._id)},onclick:U=>k.api.deleteMessage(U.channel,U._id)}];async function z(U,O){l(2,M=c==null?void 0:c.find(he=>he._id.server==U&&he._id.user==O))}async function K(){const U=await k.api.editMessage(f.channel,f._id,{content:_});A==null||A.update(O=>(O[O.findIndex(he=>he._id==f._id)]=U,O)),l(3,_=void 0)}function ue(U){var Ue;if(A==null)return!0;const he=Pe(A)[u-1];return he==null?!0:U.author!=he.author||("masquerade"in U?U.masquerade!=he.masquerade:!1)||Re(U._id)-Re(he._id)>=7*60*1e3||(((Ue=U.replies)==null?void 0:Ue.length)??0)!=0}const se=U=>U(f);function te(U){_=U,l(3,_)}const le=U=>{U.detail.key=="Escape"&&l(3,_=void 0)};return r.$$set=U=>{"message"in U&&l(0,f=U.message),"messageIndex"in U&&l(15,u=U.messageIndex)},r.$$.update=()=>{if(r.$$.dirty[0]&1&&"promise"in f){const U=document.querySelector(".messages-list");U!=null&&U.scrollTo(0,U.scrollHeight),f.promise.then(()=>{j==null||j.update(O=>O.filter(he=>he._id!=f._id))})}r.$$.dirty[0]&131073&&Ke(k.api,i??k.api.cache.users,f.author).then(U=>l(1,p=U)),r.$$.dirty[0]&65537&&(s==null||z(s,f.author)),r.$$.dirty[0]&7&&l(4,n=p==null?"Unknown User":ke(p,M,"masquerade"in f?f:void 0)),r.$$.dirty[0]&1&&l(6,t=Re(f._id))},[f,p,M,_,n,a,t,N,y,F,L,$,T,K,ue,u,s,i,se,te,le]}class Xt extends pe{constructor(e){super(),ge(this,e,Zn,Yn,de,{message:0,messageIndex:15},null,[-1,-1])}}function xn(r){let e,l;return{c(){e=we("svg"),l=we("path"),this.h()},l(n){e=ye(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var t=S(e);l=ye(t,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),S(l).forEach(m),t.forEach(m),this.h()},h(){h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"d","M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"stroke-width","1.5"),h(e,"stroke","currentColor"),h(e,"width","24px"),h(e,"height","24px")},m(n,t){g(n,e,t),v(e,l)},p:d,i:d,o:d,d(n){n&&m(e)}}}class Jt extends pe{constructor(e){super(),ge(this,e,null,xn,de,{})}}function er(r){let e,l;return{c(){e=we("svg"),l=we("path"),this.h()},l(n){e=ye(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var t=S(e);l=ye(t,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),S(l).forEach(m),t.forEach(m),this.h()},h(){h(l,"stroke-linecap","round"),h(l,"stroke-linejoin","round"),h(l,"d","M15.182 15.182a4.5 4.5 0 01-6.364 0M21 12a9 9 0 11-18 0 9 9 0 0118 0zM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75zm-.375 0h.008v.015h-.008V9.75zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75zm-.375 0h.008v.015h-.008V9.75z"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"stroke-width","1.5"),h(e,"stroke","currentColor"),h(e,"width","24px"),h(e,"height","24px")},m(n,t){g(n,e,t),v(e,l)},p:d,i:d,o:d,d(n){n&&m(e)}}}class tr extends pe{constructor(e){super(),ge(this,e,null,er,de,{})}}function lr(r){let e,l;return{c(){e=we("svg"),l=we("path"),this.h()},l(n){e=ye(n,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var t=S(e);l=ye(t,"path",{"stroke-linecap":!0,d:!0}),S(l).forEach(m),t.forEach(m),this.h()},h(){h(l,"stroke-linecap","round"),h(l,"d","M16.5 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 10-2.636 6.364M16.5 12V8.25"),h(e,"xmlns","http://www.w3.org/2000/svg"),h(e,"fill","none"),h(e,"viewBox","0 0 24 24"),h(e,"stroke-width","1.5"),h(e,"stroke","currentColor"),h(e,"width",r[0]),h(e,"height",r[1])},m(n,t){g(n,e,t),v(e,l)},p(n,[t]){t&1&&h(e,"width",n[0]),t&2&&h(e,"height",n[1])},i:d,o:d,d(n){n&&m(e)}}}function nr(r,e,l){let{width:n="24px"}=e,{height:t="24px"}=e;return r.$$set=s=>{"width"in s&&l(0,n=s.width),"height"in s&&l(1,t=s.height)},[n,t]}class rr extends pe{constructor(e){super(),ge(this,e,nr,lr,de,{width:0,height:1})}}function It(r){const e=ke(r[5]);r[6]=e}function ir(r){let e,l,n;return e=new Fe({}),{c(){Y(e.$$.fragment),l=D(`
		<UnknownUser>`)},l(t){re(e.$$.fragment,t),l=B(t,`
		<UnknownUser>`)},m(t,s){Z(e,t,s),g(t,l,s),n=!0},p:d,i(t){n||(b(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(t){t&&m(l),x(e,t)}}}function sr(r){It(r);let e,l,n,t,s=r[6]+"",i;return{c(){e=I("img"),t=P(),i=D(s),this.h()},l(c){e=C(c,"IMG",{class:!0,src:!0,alt:!0}),t=V(c),i=B(c,s),this.h()},h(){h(e,"class","cover svelte-1aoabln"),ee(e.src,l=Ee(r[5]))||h(e,"src",l),h(e,"alt",n=r[6])},m(c,o){g(c,e,o),g(c,t,o),g(c,i,o)},p(c,o){It(c),o&1&&!ee(e.src,l=Ee(c[5]))&&h(e,"src",l),o&1&&n!==(n=c[6])&&h(e,"alt",n),o&1&&s!==(s=c[6]+"")&&ie(i,s)},i:d,o:d,d(c){c&&(m(e),m(t),m(i))}}}function or(r){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function Ct(r){let e,l=r[0].message.content+"",n;return{c(){e=I("p"),n=D(l),this.h()},l(t){e=C(t,"P",{class:!0});var s=S(e);n=B(s,l),s.forEach(m),this.h()},h(){h(e,"class","message-content svelte-1aoabln")},m(t,s){g(t,e,s),v(e,n)},p(t,s){s&1&&l!==(l=t[0].message.content+"")&&ie(n,l)},d(t){t&&m(e)}}}function cr(r){let e,l,n,t,s,i,c,o,a,f,u,_,p=r[0].mention?"ON":"OFF",M,N,k,y,A,j,F,L,$={ctx:r,current:null,token:null,hasCatch:!0,pending:or,then:sr,catch:ir,value:5,blocks:[,,,]};ce(n=r[2].api.fetchUser(r[0].message.author),$);let T=r[0].message.content&&Ct(r);return u=new rr({props:{width:"15",height:"15"}}),A=new Jt({}),{c(){e=I("div"),l=D(`Replying to
	`),$.block.c(),t=P(),T&&T.c(),s=P(),i=I("div"),c=P(),o=I("label"),a=I("input"),f=P(),Y(u.$$.fragment),_=P(),M=D(p),k=P(),y=I("button"),Y(A.$$.fragment),this.h()},l(z){e=C(z,"DIV",{class:!0});var K=S(e);l=B(K,`Replying to
	`),$.block.l(K),t=V(K),T&&T.l(K),s=V(K),i=C(K,"DIV",{class:!0}),S(i).forEach(m),c=V(K),o=C(K,"LABEL",{class:!0,"aria-label":!0});var ue=S(o);a=C(ue,"INPUT",{id:!0,style:!0,type:!0}),f=V(ue),re(u.$$.fragment,ue),_=V(ue),M=B(ue,p),ue.forEach(m),k=V(K),y=C(K,"BUTTON",{class:!0});var se=S(y);re(A.$$.fragment,se),se.forEach(m),K.forEach(m),this.h()},h(){h(i,"class","flex-divider"),h(a,"id","mention"),Ve(a,"display","none"),h(a,"type","checkbox"),h(o,"class","reply-button svelte-1aoabln"),h(o,"aria-label",N="Mention author "+(r[0].mention?"ON":"OFF")),h(y,"class","reply-button default-button svelte-1aoabln"),h(e,"class","container svelte-1aoabln")},m(z,K){g(z,e,K),v(e,l),$.block.m(e,$.anchor=null),$.mount=()=>e,$.anchor=t,v(e,t),T&&T.m(e,null),v(e,s),v(e,i),v(e,c),v(e,o),v(o,a),a.checked=r[0].mention,v(o,f),Z(u,o,null),v(o,_),v(o,M),v(e,k),v(e,y),Z(A,y,null),j=!0,F||(L=[fe(a,"change",r[3]),fe(y,"click",r[4])],F=!0)},p(z,[K]){r=z,$.ctx=r,K&1&&n!==(n=r[2].api.fetchUser(r[0].message.author))&&ce(n,$)||$e($,r,K),r[0].message.content?T?T.p(r,K):(T=Ct(r),T.c(),T.m(e,s)):T&&(T.d(1),T=null),K&1&&(a.checked=r[0].mention),(!j||K&1)&&p!==(p=r[0].mention?"ON":"OFF")&&ie(M,p),(!j||K&1&&N!==(N="Mention author "+(r[0].mention?"ON":"OFF")))&&h(o,"aria-label",N)},i(z){j||(b($.block),b(u.$$.fragment,z),b(A.$$.fragment,z),j=!0)},o(z){for(let K=0;K<3;K+=1){const ue=$.blocks[K];w(ue)}w(u.$$.fragment,z),w(A.$$.fragment,z),j=!1},d(z){z&&m(e),$.block.d(),$.token=null,$=null,T&&T.d(),x(u),x(A),F=!1,Ae(L)}}}function ar(r,e,l){let{reply:n}=e;const t=X(Ne),s=X(Je);function i(){n.mention=this.checked,l(0,n)}const c=()=>s.update(o=>(o=o.filter(a=>a.message._id!=n.message._id),o));return r.$$set=o=>{"reply"in o&&l(0,n=o.reply)},[n,s,t,i,c]}class fr extends pe{constructor(e){super(),ge(this,e,ar,cr,de,{reply:0})}}function Tt(r,e,l){const n=r.slice();return n[8]=e[l],n}function Nt(r){let e,l,n,t,s,i,c;function o(){return r[4](r[8])}return{c(){e=I("button"),l=I("img"),s=P(),this.h()},l(a){e=C(a,"BUTTON",{class:!0});var f=S(e);l=C(f,"IMG",{width:!0,height:!0,src:!0,alt:!0}),s=V(f),f.forEach(m),this.h()},h(){h(l,"width","28px"),h(l,"height","28px"),ee(l.src,n="https://autumn.revolt.chat/emojis/"+r[8]._id)||h(l,"src",n),h(l,"alt",t=r[8].name),h(e,"class","svelte-uptso2")},m(a,f){g(a,e,f),v(e,l),v(e,s),i||(c=fe(e,"click",o),i=!0)},p(a,f){r=a,f&2&&!ee(l.src,n="https://autumn.revolt.chat/emojis/"+r[8]._id)&&h(l,"src",n),f&2&&t!==(t=r[8].name)&&h(l,"alt",t)},d(a){a&&m(e),i=!1,c()}}}function ur(r){let e,l,n,t,s,i,c=me(r[1]),o=[];for(let a=0;a<c.length;a+=1)o[a]=Nt(Tt(r,c,a));return{c(){e=I("div"),l=I("input"),n=P(),t=I("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=C(a,"DIV",{class:!0});var f=S(e);l=C(f,"INPUT",{type:!0,placeholder:!0,class:!0}),n=V(f),t=C(f,"DIV",{});var u=S(t);for(let _=0;_<o.length;_+=1)o[_].l(u);u.forEach(m),f.forEach(m),this.h()},h(){h(l,"type","text"),h(l,"placeholder","Search for emojis"),h(l,"class","svelte-uptso2"),h(e,"class","emoji-container svelte-uptso2")},m(a,f){g(a,e,f),v(e,l),qe(l,r[0]),v(e,n),v(e,t);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null);s||(i=fe(l,"input",r[3]),s=!0)},p(a,[f]){if(f&1&&l.value!==a[0]&&qe(l,a[0]),f&6){c=me(a[1]);let u;for(u=0;u<c.length;u+=1){const _=Tt(a,c,u);o[u]?o[u].p(_,f):(o[u]=Nt(_),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=c.length}},i:d,o:d,d(a){a&&m(e),Ce(o,a),s=!1,i()}}}function Ut(r){const e={};for(const l of r){const n=l.toUpperCase();if(n in e){e[n]++;continue}e[n]=1}return e}function hr(r,e,l){let n;const t=X(Ne),s=X(Kt);let i="",c=Array.from(t.api.cache.emojis.values());function o(u){if(i.length==0)return u.length;const _=Ut(u);let p=0;for(const[M,N]of Object.entries(_)){const k=n[M];if(k!=null){if(k>N){p=0;continue}p+=Math.min(k,N)}}return p/u.length}function a(){i=this.value,l(0,i)}const f=u=>s.update(_=>_+`:${u._id}:`);return r.$$.update=()=>{r.$$.dirty&1&&(n=Ut(i)),r.$$.dirty&1&&(i.length==0?l(1,c=Array.from(t.api.cache.emojis.values())):l(1,c=Array.from(t.api.cache.emojis.values()).flatMap(u=>{const _=o(u.name);return _==0?[]:[[_,u]]}).sort(([u],[_])=>u-_).map(([,u])=>u).reverse()))},[i,c,s,a,f]}class _r extends pe{constructor(e){super(),ge(this,e,hr,ur,de,{})}}function St(r,e,l){const n=r.slice();return n[37]=e[l],n}function jt(r,e,l){const n=r.slice();return n[40]=e[l],n[42]=l,n}function At(r,e,l){const n=r.slice();return n[40]=e[l],n[42]=l,n}function mr(r){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function dr(r){let e,l,n,t=me(r[6]),s=[];for(let f=0;f<t.length;f+=1)s[f]=Dt(At(r,t,f));const i=f=>w(s[f],1,1,()=>{s[f]=null});let c=me(r[7]),o=[];for(let f=0;f<c.length;f+=1)o[f]=Bt(jt(r,c,f));const a=f=>w(o[f],1,1,()=>{o[f]=null});return{c(){for(let f=0;f<s.length;f+=1)s[f].c();e=P();for(let f=0;f<o.length;f+=1)o[f].c();l=q()},l(f){for(let u=0;u<s.length;u+=1)s[u].l(f);e=V(f);for(let u=0;u<o.length;u+=1)o[u].l(f);l=q()},m(f,u){for(let _=0;_<s.length;_+=1)s[_]&&s[_].m(f,u);g(f,e,u);for(let _=0;_<o.length;_+=1)o[_]&&o[_].m(f,u);g(f,l,u),n=!0},p(f,u){if(u[0]&64){t=me(f[6]);let _;for(_=0;_<t.length;_+=1){const p=At(f,t,_);s[_]?(s[_].p(p,u),b(s[_],1)):(s[_]=Dt(p),s[_].c(),b(s[_],1),s[_].m(e.parentNode,e))}for(J(),_=t.length;_<s.length;_+=1)i(_);Q()}if(u[0]&128){c=me(f[7]);let _;for(_=0;_<c.length;_+=1){const p=jt(f,c,_);o[_]?(o[_].p(p,u),b(o[_],1)):(o[_]=Bt(p),o[_].c(),b(o[_],1),o[_].m(l.parentNode,l))}for(J(),_=c.length;_<o.length;_+=1)a(_);Q()}},i(f){if(!n){for(let u=0;u<t.length;u+=1)b(s[u]);for(let u=0;u<c.length;u+=1)b(o[u]);n=!0}},o(f){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)w(s[u]);o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)w(o[u]);n=!1},d(f){f&&(m(e),m(l)),Ce(s,f),Ce(o,f)}}}function Dt(r){let e,l;return e=new Xt({props:{message:r[40],messageIndex:r[42]}}),{c(){Y(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,t){Z(e,n,t),l=!0},p(n,t){const s={};t[0]&64&&(s.message=n[40]),e.$set(s)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function Bt(r){let e,l;return e=new Xt({props:{message:r[40],messageIndex:r[42]}}),{c(){Y(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,t){Z(e,n,t),l=!0},p(n,t){const s={};t[0]&128&&(s.message=n[40]),e.$set(s)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function pr(r){let e;return{c(){e=D("Loading...")},l(l){e=B(l,"Loading...")},m(l,n){g(l,e,n)},p:d,i:d,o:d,d(l){l&&m(e)}}}function Ot(r){let e,l,n,t=Array.from(r[0]).map(qt).join(", ")+"",s,i,c,o,a,f,u,_,p;return f=new Jt({}),{c(){e=I("div"),l=I("p"),n=D(`Uploading
				`),s=D(t),i=P(),c=I("div"),o=P(),a=I("button"),Y(f.$$.fragment),this.h()},l(M){e=C(M,"DIV",{class:!0});var N=S(e);l=C(N,"P",{});var k=S(l);n=B(k,`Uploading
				`),s=B(k,t),k.forEach(m),i=V(N),c=C(N,"DIV",{class:!0}),S(c).forEach(m),o=V(N),a=C(N,"BUTTON",{});var y=S(a);re(f.$$.fragment,y),y.forEach(m),N.forEach(m),this.h()},h(){h(c,"class","flex-divider"),h(e,"class","flex-container")},m(M,N){g(M,e,N),v(e,l),v(l,n),v(l,s),v(e,i),v(e,c),v(e,o),v(e,a),Z(f,a,null),u=!0,_||(p=fe(a,"click",r[25]),_=!0)},p(M,N){(!u||N[0]&1)&&t!==(t=Array.from(M[0]).map(qt).join(", ")+"")&&ie(s,t)},i(M){u||(b(f.$$.fragment,M),u=!0)},o(M){w(f.$$.fragment,M),u=!1},d(M){M&&m(e),x(f),_=!1,p()}}}function Pt(r){let e,l,n;return l=new _r({}),{c(){e=I("div"),Y(l.$$.fragment),this.h()},l(t){e=C(t,"DIV",{class:!0});var s=S(e);re(l.$$.fragment,s),s.forEach(m),this.h()},h(){h(e,"class","emoji-menu svelte-19gsrll")},m(t,s){g(t,e,s),Z(l,e,null),n=!0},i(t){n||(b(l.$$.fragment,t),n=!0)},o(t){w(l.$$.fragment,t),n=!1},d(t){t&&m(e),x(l)}}}function Vt(r){let e,l;return e=new fr({props:{reply:r[37]}}),{c(){Y(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,t){Z(e,n,t),l=!0},p(n,t){const s={};t[0]&512&&(s.reply=n[37]),e.$set(s)},i(n){l||(b(e.$$.fragment,n),l=!0)},o(n){w(e.$$.fragment,n),l=!1},d(n){x(e,n)}}}function gr(r){let e,l,n,t,s,i,c,o,a,f,u,_,p,M,N,k,y,A,j,F,L,$=r[19](r[4])+"",T,z,K,ue,se={ctx:r,current:null,token:null,hasCatch:!1,pending:pr,then:dr,catch:mr,blocks:[,,,]};ce(n=r[2],se);let te=r[0]!=null&&r[0].length!=0&&Ot(r),le=r[8]&&Pt(),U=me(r[9]),O=[];for(let W=0;W<U.length;W+=1)O[W]=Vt(St(r,U,W));const he=W=>w(O[W],1,1,()=>{O[W]=null});u=new hl({});function Ue(W){r[26](W)}let Oe={sendTypingEvents:r[3]["jolt:send-typing-indicators"],placeholder:"Send message in "+r[5]};return r[10]!==void 0&&(Oe.value=r[10]),p=new Wt({props:Oe}),De.push(()=>ze(p,"value",Ue)),j=new tr({}),{c(){e=I("main"),l=I("div"),se.block.c(),t=P(),te&&te.c(),s=P(),le&&le.c(),i=P(),c=I("div");for(let W=0;W<O.length;W+=1)O[W].c();o=P(),a=I("form"),f=I("button"),Y(u.$$.fragment),_=P(),Y(p.$$.fragment),N=P(),k=I("div"),y=P(),A=I("button"),Y(j.$$.fragment),F=P(),L=I("span"),T=D($),this.h()},l(W){e=C(W,"MAIN",{class:!0});var H=S(e);l=C(H,"DIV",{class:!0});var _e=S(l);se.block.l(_e),_e.forEach(m),t=V(H),te&&te.l(H),s=V(H),le&&le.l(H),i=V(H),c=C(H,"DIV",{class:!0});var ne=S(c);for(let oe=0;oe<O.length;oe+=1)O[oe].l(ne);o=V(ne),a=C(ne,"FORM",{class:!0,id:!0});var be=S(a);f=C(be,"BUTTON",{class:!0});var E=S(f);re(u.$$.fragment,E),E.forEach(m),_=V(be),re(p.$$.fragment,be),N=V(be),k=C(be,"DIV",{class:!0}),S(k).forEach(m),y=V(be),A=C(be,"BUTTON",{type:!0,class:!0});var R=S(A);re(j.$$.fragment,R),R.forEach(m),be.forEach(m),F=V(ne),L=C(ne,"SPAN",{class:!0});var G=S(L);T=B(G,$),G.forEach(m),ne.forEach(m),H.forEach(m),this.h()},h(){h(l,"class","messages-list svelte-19gsrll"),h(f,"class","default-button"),h(k,"class","flex-divider"),h(A,"type","button"),h(A,"class","default-button"),h(a,"class","message-form"),h(a,"id","send-message-form"),h(L,"class","typing-indicator svelte-19gsrll"),h(c,"class","message-form-box"),h(e,"class","main-content-container svelte-19gsrll")},m(W,H){g(W,e,H),v(e,l),se.block.m(l,se.anchor=null),se.mount=()=>l,se.anchor=null,r[24](l),v(e,t),te&&te.m(e,null),v(e,s),le&&le.m(e,null),v(e,i),v(e,c);for(let _e=0;_e<O.length;_e+=1)O[_e]&&O[_e].m(c,null);v(c,o),v(c,a),v(a,f),Z(u,f,null),v(a,_),Z(p,a,null),v(a,N),v(a,k),v(a,y),v(a,A),Z(j,A,null),v(c,F),v(c,L),v(L,T),z=!0,K||(ue=[fe(f,"click",r[18]),fe(A,"click",r[27]),fe(a,"submit",r[17])],K=!0)},p(W,H){if(r=W,se.ctx=r,H[0]&4&&n!==(n=r[2])&&ce(n,se)||$e(se,r,H),r[0]!=null&&r[0].length!=0?te?(te.p(r,H),H[0]&1&&b(te,1)):(te=Ot(r),te.c(),b(te,1),te.m(e,s)):te&&(J(),w(te,1,1,()=>{te=null}),Q()),r[8]?le?H[0]&256&&b(le,1):(le=Pt(),le.c(),b(le,1),le.m(e,i)):le&&(J(),w(le,1,1,()=>{le=null}),Q()),H[0]&512){U=me(r[9]);let ne;for(ne=0;ne<U.length;ne+=1){const be=St(r,U,ne);O[ne]?(O[ne].p(be,H),b(O[ne],1)):(O[ne]=Vt(be),O[ne].c(),b(O[ne],1),O[ne].m(c,o))}for(J(),ne=U.length;ne<O.length;ne+=1)he(ne);Q()}const _e={};H[0]&8&&(_e.sendTypingEvents=r[3]["jolt:send-typing-indicators"]),H[0]&32&&(_e.placeholder="Send message in "+r[5]),!M&&H[0]&1024&&(M=!0,_e.value=r[10],He(()=>M=!1)),p.$set(_e),(!z||H[0]&16)&&$!==($=r[19](r[4])+"")&&ie(T,$)},i(W){if(!z){b(se.block),b(te),b(le);for(let H=0;H<U.length;H+=1)b(O[H]);b(u.$$.fragment,W),b(p.$$.fragment,W),b(j.$$.fragment,W),z=!0}},o(W){for(let H=0;H<3;H+=1){const _e=se.blocks[H];w(_e)}w(te),w(le),O=O.filter(Boolean);for(let H=0;H<O.length;H+=1)w(O[H]);w(u.$$.fragment,W),w(p.$$.fragment,W),w(j.$$.fragment,W),z=!1},d(W){W&&m(e),se.block.d(),se.token=null,se=null,r[24](null),te&&te.d(),le&&le.d(),Ce(O,W),x(u),x(p),x(j),K=!1,Ae(ue)}}}const qt=r=>r.name;function br(r,e,l){let n,t,s,i,c,o,a;ae(r,ml,E=>l(23,n=E));let{channel:f}=e,{replies:u=[]}=e,{messageInput:_=""}=e;const p=Te(_);ae(r,p,E=>l(10,a=E)),Ie(Kt,p);let{files:M=[]}=e;const N=X(Be);ae(r,N,E=>l(3,t=E));const k=X(Ne),y=Te(new Array);ae(r,y,E=>l(6,s=E));const A=Te(new Array),j=Te(new Array),F=Te(!1);ae(r,F,E=>l(8,c=E));const L=Te(u);ae(r,L,E=>l(9,o=E));const $=Te(new Array);ae(r,$,E=>l(7,i=E)),Ie(We,y),Ie(Gt,A),Ie(Xe,j),Ie(Je,L),Ie(ol,F),Ie(Rt,$),Ie(Lt,f);let T,z=new Array,K="Unknown Channel",ue=Promise.resolve();async function se(E){if(!E){k.removeAllListeners("ChannelStartTyping"),k.removeAllListeners("ChannelStopTyping");return}k.on("ChannelStartTyping",async({id:R,user:G})=>{var oe;if(!(G==((oe=k.user)==null?void 0:oe._id)||R!=f._id)){for(const{_id:ve}of z)if(G==ve)return;l(4,z[z.length]=await k.api.fetchUser(G),z)}}),k.on("ChannelStopTyping",({id:R,user:G})=>{R==f._id&&l(4,z=z.filter(oe=>oe._id!=G))})}async function te(){const E=Pe(p).trim();p.set(""),$.update(R=>(R.push({_id:fl(),content:E,replies:Pe(L).map(({message:{_id:G}})=>G),channel:f._id,author:k.user._id,promise:new Promise((G,oe)=>{Promise.all(M.map(ve=>k.autumn.uploadFile(ve))).then(ve=>{l(0,M=[]),k.api.sendMessage(f._id,{content:E,replies:Pe(L).map(({message:{_id:Me},mention:Le})=>({id:Me,mention:Le})),attachments:ve}).then(Me=>{L.set([]),G(Me)}).catch(oe)}).catch(oe)})}),R))}function le(E){if(E.channel!=f._id)return;const R=T.offsetHeight+T.scrollTop>T.scrollHeight-20;document.hasFocus()&&R&&k.api.ackMessage(f._id,E._id),y.update(G=>(G.push(E),G)),R&&xe().then(()=>T.scrollTo(0,T.scrollHeight))}function U({id:E,channel:R}){R==f._id&&y.update(G=>G.filter(oe=>oe._id!=E))}function O({id:E,channel:R,data:G}){R==f._id&&y.update(oe=>{const ve=oe.findIndex(Le=>Le._id==E),Me=oe[ve];return G.content!=null&&(Me.content=G.content),G.embeds!=null&&(Me.embeds=G.embeds),Me.edited=G.edited,oe[ve]=Me,oe})}function he(E){var R;if(((R=E.clipboardData)==null?void 0:R.files)!=null&&E.clipboardData.files.length!=0){E.preventDefault();const G=Array.from(E.clipboardData.files);l(0,M=(M==null?void 0:M.concat(G))??G)}}function Ue(){const E=document.createElement("input");E.type="file",E.onchange=R=>{const G=R;G.target.files!=null&&l(0,M=M.concat(Array.from(G.target.files)))},E.click()}rl(()=>{k.on("Message",le),k.on("MessageDelete",U),k.on("MessageUpdate",O),document.addEventListener("paste",he)}),il(()=>{k.removeListener("Message",le),k.removeListener("MessageDelete",U),k.removeListener("MessageUpdate",O),document.removeEventListener("paste",he)});async function Oe(E){var R;if(E.channel_type=="TextChannel"||E.channel_type=="Group"){l(5,K=`#${E.name}`);return}if(E.channel_type=="SavedMessages"){l(5,K="Saved Notes");return}try{l(5,K=`@${ke(await k.api.fetchUser(E.recipients[0]==((R=k.user)==null?void 0:R._id)?E.recipients[1]:E.recipients[0]))}`)}catch{l(5,K="Unknown Channel")}}function W(E){if(E.length==0)return"";const R=E.map(G=>ke(G));return R.length==1?`${R[0]} is typing...`:R.length>=5?"Several users are typing...":`${R.slice(0,R.length-1).join(", ")} and ${R[R.length-1]} are typing...`}function H(E){De[E?"unshift":"push"](()=>{T=E,l(1,T)})}const _e=()=>l(0,M=[]);function ne(E){a=E,p.set(a)}const be=()=>F.update(E=>!E);return r.$$set=E=>{"channel"in E&&l(20,f=E.channel),"replies"in E&&l(21,u=E.replies),"messageInput"in E&&l(22,_=E.messageInput),"files"in E&&l(0,M=E.files)},r.$$.update=()=>{if(r.$$.dirty[0]&1048582){const E=X(cl);l(2,ue=k.api.queryMessages(f._id,{sort:"Latest",include_users:!0,limit:100,nearby:E}).then(R=>{if(Array.isArray(R)){let G;E==null?G=R.reverse():G=R.sort((oe,ve)=>oe._id.localeCompare(ve._id)),y.set(G)}else{let G;E==null?G=R.messages.reverse():G=R.messages.sort((oe,ve)=>oe._id.localeCompare(ve._id)),y.set(G),j.set(R.users),A.set(R.members??[])}})),L.set([]),l(4,z=[]),ue.then(()=>{xe().then(()=>T.scrollTo(0,T.scrollHeight))})}if(r.$$.dirty[0]&8&&se(t["jolt:receive-typing-indicators"]),r.$$.dirty[0]&1048576&&Oe(f),r.$$.dirty[0]&8388608){const E=document.getElementById(`MESSAGE-${n.url.hash.slice(1)}`);E==null||E.animate([{backgroundColor:"var(--mention)"},{backgroundColor:"var(--mention)",offset:.6},{backgroundColor:"transparent"}],{duration:3e3,iterations:1})}},[M,T,ue,t,z,K,s,i,c,o,a,p,N,y,F,L,$,te,Ue,W,f,u,_,n,H,_e,ne,be]}class Pr extends pe{constructor(e){super(),ge(this,e,br,gr,de,{channel:20,replies:21,messageInput:22,files:0},null,[-1,-1])}}export{Pr as T};
