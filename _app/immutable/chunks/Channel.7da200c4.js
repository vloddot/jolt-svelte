import{s as P,c as k,n as g}from"./scheduler.236f7e20.js";import{S as T,i as q,g as j,r as w,s as z,m as B,h as K,j as N,u as C,c as F,n as J,f as p,k as d,a as D,x as S,v as y,o as O,d as h,t as m,w as I,e as b,p as H,b as L}from"./index.bae008e4.js";import{h as A,u as Q}from"./await_block.16e956eb.js";import{b as _}from"./paths.280ab84c.js";import{g as v,a as W,c as Y}from"./context.0e1cc50f.js";import{a as Z,g as V,b as E}from"./util.7d991f80.js";import{s as $,a as x}from"./context.fa34f1f8.js";import{X as ee}from"./runtime.esm.6158813e.js";import{U as ne}from"./UserProfilePicture.77f0b063.js";function te(s){let n,t,e,r,l,o,f;return e=new ne({props:{src:s[0],name:s[1],width:s[2],height:s[3]}}),{c(){n=j("div"),t=j("a"),w(e.$$.fragment),r=z(),l=B(s[1]),this.h()},l(a){n=K(a,"DIV",{role:!0,class:!0});var i=N(n);t=K(i,"A",{href:!0,class:!0});var u=N(t);C(e.$$.fragment,u),r=F(u),l=J(u,s[1]),u.forEach(p),i.forEach(p),this.h()},h(){d(t,"href",s[4]),d(t,"class","p-2 block"),d(n,"role","listitem"),d(n,"class",o=s[5]?"bg-gray-400":"hover:bg-gray-600")},m(a,i){D(a,n,i),S(n,t),y(e,t,null),S(t,r),S(t,l),f=!0},p(a,[i]){const u={};i&1&&(u.src=a[0]),i&2&&(u.name=a[1]),i&4&&(u.width=a[2]),i&8&&(u.height=a[3]),e.$set(u),(!f||i&2)&&O(l,a[1]),(!f||i&16)&&d(t,"href",a[4]),(!f||i&32&&o!==(o=a[5]?"bg-gray-400":"hover:bg-gray-600"))&&d(n,"class",o)},i(a){f||(h(e.$$.fragment,a),f=!0)},o(a){m(e.$$.fragment,a),f=!1},d(a){a&&p(n),I(e)}}}function re(s,n,t){let{src:e}=n,{name:r}=n,{width:l}=n,{height:o}=n,{href:f}=n,{selected:a}=n;return s.$$set=i=>{"src"in i&&t(0,e=i.src),"name"in i&&t(1,r=i.name),"width"in i&&t(2,l=i.width),"height"in i&&t(3,o=i.height),"href"in i&&t(4,f=i.href),"selected"in i&&t(5,a=i.selected)},[e,r,l,o,f,a]}class M extends T{constructor(n){super(),q(this,n,re,te,P,{src:0,name:1,width:2,height:3,href:4,selected:5})}}function se(s){let n,t;return n=new M({props:{src:s[8](s[0]),name:s[0].channel_type=="SavedMessages"?s[3]("channel.notes"):s[0].name,width:24,height:24,href:s[9](s[0]._id),selected:s[2]==s[0]._id}}),{c(){w(n.$$.fragment)},l(e){C(n.$$.fragment,e)},m(e,r){y(n,e,r),t=!0},p(e,r){const l={};r&1&&(l.src=e[8](e[0])),r&9&&(l.name=e[0].channel_type=="SavedMessages"?e[3]("channel.notes"):e[0].name),r&1&&(l.href=e[9](e[0]._id)),r&5&&(l.selected=e[2]==e[0]._id),n.$set(l)},i(e){t||(h(n.$$.fragment,e),t=!0)},o(e){m(n.$$.fragment,e),t=!1},d(e){I(n,e)}}}function ae(s){let n,t,e=s[0].active&&G(s);return{c(){e&&e.c(),n=b()},l(r){e&&e.l(r),n=b()},m(r,l){e&&e.m(r,l),D(r,n,l),t=!0},p(r,l){r[0].active?e?(e.p(r,l),l&1&&h(e,1)):(e=G(r),e.c(),h(e,1),e.m(n.parentNode,n)):e&&(H(),m(e,1,1,()=>{e=null}),L())},i(r){t||(h(e),t=!0)},o(r){m(e),t=!1},d(r){r&&p(n),e&&e.d(r)}}}function G(s){var l;let n,t,e,r={ctx:s,current:null,token:null,hasCatch:!0,pending:oe,then:ie,catch:le,value:11,blocks:[,,,]};return A(t=s[5].api.fetchUser(s[0].recipients[0]==((l=s[5].user)==null?void 0:l._id)?s[0].recipients[1]:s[0].recipients[0]),r),{c(){n=b(),r.block.c()},l(o){n=b(),r.block.l(o)},m(o,f){D(o,n,f),r.block.m(o,r.anchor=f),r.mount=()=>n.parentNode,r.anchor=n,e=!0},p(o,f){var a;s=o,r.ctx=s,f&1&&t!==(t=s[5].api.fetchUser(s[0].recipients[0]==((a=s[5].user)==null?void 0:a._id)?s[0].recipients[1]:s[0].recipients[0]))&&A(t,r)||Q(r,s,f)},i(o){e||(h(r.block),e=!0)},o(o){for(let f=0;f<3;f+=1){const a=r.blocks[f];m(a)}e=!1},d(o){o&&p(n),r.block.d(o),r.token=null,r=null}}}function le(s){let n,t;return n=new M({props:{src:_+"/user.svg",name:"<"+s[3]("user.unknown")+">",width:32,height:32,href:s[9](s[0]._id),selected:s[2]==s[0]._id}}),{c(){w(n.$$.fragment)},l(e){C(n.$$.fragment,e)},m(e,r){y(n,e,r),t=!0},p(e,r){const l={};r&8&&(l.name="<"+e[3]("user.unknown")+">"),r&1&&(l.href=e[9](e[0]._id)),r&5&&(l.selected=e[2]==e[0]._id),n.$set(l)},i(e){t||(h(n.$$.fragment,e),t=!0)},o(e){m(n.$$.fragment,e),t=!1},d(e){I(n,e)}}}function ie(s){let n,t;return n=new M({props:{src:s[1]["jolt:low-data-mode"]?`${_}/user.svg`:V(s[11]),name:E(s[11]),width:32,height:32,href:s[9](s[0]._id),selected:s[2]==s[0]._id}}),{c(){w(n.$$.fragment)},l(e){C(n.$$.fragment,e)},m(e,r){y(n,e,r),t=!0},p(e,r){const l={};r&3&&(l.src=e[1]["jolt:low-data-mode"]?`${_}/user.svg`:V(e[11])),r&1&&(l.name=E(e[11])),r&1&&(l.href=e[9](e[0]._id)),r&5&&(l.selected=e[2]==e[0]._id),n.$set(l)},i(e){t||(h(n.$$.fragment,e),t=!0)},o(e){m(n.$$.fragment,e),t=!1},d(e){I(n,e)}}}function oe(s){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function fe(s){let n,t,e,r;const l=[ae,se],o=[];function f(a,i){return a[0].channel_type=="DirectMessage"?0:a[0].channel_type=="TextChannel"||a[0].channel_type=="VoiceChannel"||a[0].channel_type=="Group"||a[0].channel_type=="SavedMessages"?1:-1}return~(n=f(s))&&(t=o[n]=l[n](s)),{c(){t&&t.c(),e=b()},l(a){t&&t.l(a),e=b()},m(a,i){~n&&o[n].m(a,i),D(a,e,i),r=!0},p(a,[i]){let u=n;n=f(a),n===u?~n&&o[n].p(a,i):(t&&(H(),m(o[u],1,1,()=>{o[u]=null}),L()),~n?(t=o[n],t?t.p(a,i):(t=o[n]=l[n](a),t.c()),h(t,1),t.m(e.parentNode,e)):t=null)},i(a){r||(h(t),r=!0)},o(a){m(t),r=!1},d(a){a&&p(e),~n&&o[n].d(a)}}}function ce(s,n,t){let e,r,l,o;k(s,ee,c=>t(3,o=c));const f=v(W);k(s,f,c=>t(1,r=c));const a=v(Y),i=v($);k(s,i,c=>t(2,l=c));const u=v(x);k(s,u,c=>t(10,e=c));function R(c){if(c.channel_type=="SavedMessages")return`${_}/note.svg`;if(c.icon!=null&&!r["jolt:low-data-mode"])return`${Z(c.icon,{max_side:"256"})}`;switch(c.channel_type){case"Group":return`${_}/group.svg`;case"TextChannel":return`${_}/hash.svg`;case"VoiceChannel":return`${_}/volume.svg`}}let{channel:U}=n;function X(c){return`${_}/${e==null?`channels/${c}`:`servers/${e}/channels/${c}`}`}return s.$$set=c=>{"channel"in c&&t(0,U=c.channel)},[U,r,l,o,f,a,i,u,R,X]}class ve extends T{constructor(n){super(),q(this,n,ce,fe,P,{channel:0})}}export{M as C,ve as a};
