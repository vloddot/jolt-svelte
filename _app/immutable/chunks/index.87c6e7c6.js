import{s as ve,c as ee,n as m,d as Nt,u as Ct,g as Tt,e as Dt,r as Se,h as Ut,b as Ie,i as At,f as ue,j as Te,k as St,o as jt,l as Pt,t as Vt}from"./scheduler.236f7e20.js";import{S as $e,i as we,g as N,h as C,j as B,f as _,k as v,a as d,d as w,p as le,t as T,b as ne,e as X,s as P,c as V,m as I,n as M,x as b,o as K,r as oe,u as se,v as fe,w as ce,z as ae,C as Ot,D as Bt,A as Ue,l as Ae,y as ye,E as Le}from"./index.bae008e4.js";import{h as ie,u as ge}from"./await_block.16e956eb.js";import{e as he}from"./each.e59479a4.js";import{b as me}from"./paths.280ab84c.js";import{g as te,c as je,a as Me,b as Rt}from"./context.0e1cc50f.js";import{g as be,b as pe,a as Ft}from"./util.7d991f80.js";import{U as Ee}from"./UserProfilePicture.77f0b063.js";import{X as Ne,e as Lt,Y as Gt}from"./runtime.esm.6158813e.js";import{w as De}from"./index.96f01ed2.js";import{a as yt,s as Et}from"./context.fa34f1f8.js";import{d as Kt}from"./index.esm.4b6e8736.js";async function Ve(r,e,n){if(n=="0".repeat(26))return;let l;return Array.isArray(e)?l=e.find(t=>t._id==n):l=e.get(n),l??await r.fetchUser(n)}const Oe=Symbol(),It=Symbol(),Be=Symbol(),Mt=Symbol();function Ge(r){const e=pe(r[14]);r[15]=e}function Ke(r){var o;let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:Yt,then:qt,catch:Ht,value:13,blocks:[,,,]};return ie(n=((o=r[3])==null?void 0:o.find(r[12]))??r[6].api.fetchMessage(r[2],r[0]),t),{c(){e=X(),t.block.c()},l(i){e=X(),t.block.l(i)},m(i,f){d(i,e,f),t.block.m(i,t.anchor=f),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(i,f){var s;r=i,t.ctx=r,f&13&&n!==(n=((s=r[3])==null?void 0:s.find(r[12]))??r[6].api.fetchMessage(r[2],r[0]))&&ie(n,t)||ge(t,r,f)},i(i){l||(w(t.block),l=!0)},o(i){for(let f=0;f<3;f+=1){const s=t.blocks[f];T(s)}l=!1},d(i){i&&_(e),t.block.d(i),t.token=null,t=null}}}function Ht(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function qt(r){let e,n,l,t=!r[4]["jolt:low-data-mode"]&&He(r),o=r[13].content!=null&&qe(r);return{c(){t&&t.c(),e=P(),o&&o.c(),n=X()},l(i){t&&t.l(i),e=V(i),o&&o.l(i),n=X()},m(i,f){t&&t.m(i,f),d(i,e,f),o&&o.m(i,f),d(i,n,f),l=!0},p(i,f){i[4]["jolt:low-data-mode"]?t&&(le(),T(t,1,1,()=>{t=null}),ne()):t?(t.p(i,f),f&16&&w(t,1)):(t=He(i),t.c(),w(t,1),t.m(e.parentNode,e)),i[13].content!=null?o?o.p(i,f):(o=qe(i),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i(i){l||(w(t),l=!0)},o(i){T(t),l=!1},d(i){i&&(_(e),_(n)),t&&t.d(i),o&&o.d(i)}}}function He(r){let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:Wt,then:Xt,catch:zt,value:14,blocks:[,,,]};return ie(e=Ve(r[6].api,r[5]??r[6].api.cache.users,r[13].author),t),{c(){t.block.c(),n=I(":")},l(o){t.block.l(o),n=M(o,":")},m(o,i){t.block.m(o,t.anchor=i),t.mount=()=>n.parentNode,t.anchor=n,d(o,n,i),l=!0},p(o,i){r=o,t.ctx=r,i&45&&e!==(e=Ve(r[6].api,r[5]??r[6].api.cache.users,r[13].author))&&ie(e,t)||ge(t,r,i)},i(o){l||(w(t.block),l=!0)},o(o){for(let i=0;i<3;i+=1){const f=t.blocks[i];T(f)}l=!1},d(o){o&&_(n),t.block.d(o),t.token=null,t=null}}}function zt(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Xt(r){Ge(r);let e,n,l=r[15]+"",t,o,i;return e=new Ee({props:{src:be(r[14]),name:r[15],width:24,height:24}}),{c(){oe(e.$$.fragment),n=P(),t=I(l),o=P()},l(f){se(e.$$.fragment,f),n=V(f),t=M(f,l),o=V(f)},m(f,s){fe(e,f,s),d(f,n,s),d(f,t,s),d(f,o,s),i=!0},p(f,s){Ge(f);const u={};s&45&&(u.src=be(f[14])),s&45&&(u.name=f[15]),e.$set(u),(!i||s&45)&&l!==(l=f[15]+"")&&K(t,l)},i(f){i||(w(e.$$.fragment,f),i=!0)},o(f){T(e.$$.fragment,f),i=!1},d(f){f&&(_(n),_(t),_(o)),ce(e,f)}}}function Wt(r){let e;return{c(){e=I(`<Unknown User>
				`)},l(n){e=M(n,`<Unknown User>
				`)},m(n,l){d(n,e,l)},p:m,i:m,o:m,d(n){n&&_(e)}}}function qe(r){let e,n=r[13].content+"",l;return{c(){e=N("span"),l=I(n),this.h()},l(t){e=C(t,"SPAN",{class:!0});var o=B(e);l=M(o,n),o.forEach(_),this.h()},h(){v(e,"class","text-gray-600")},m(t,o){d(t,e,o),b(e,l)},p(t,o){o&13&&n!==(n=t[13].content+"")&&K(l,n)},d(t){t&&_(e)}}}function Yt(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Jt(r){let e,n,l,t=r[2]!=null&&Ke(r);return{c(){e=N("a"),t&&t.c(),this.h()},l(o){e=C(o,"A",{href:!0});var i=B(e);t&&t.l(i),i.forEach(_),this.h()},h(){v(e,"href",n=me+"/"+(r[1]==null?`channels/${r[2]}#${r[0]}`:`servers/${r[1]}/channels/${r[2]}#${r[0]}`))},m(o,i){d(o,e,i),t&&t.m(e,null),l=!0},p(o,[i]){o[2]!=null?t?(t.p(o,i),i&4&&w(t,1)):(t=Ke(o),t.c(),w(t,1),t.m(e,null)):t&&(le(),T(t,1,1,()=>{t=null}),ne()),(!l||i&7&&n!==(n=me+"/"+(o[1]==null?`channels/${o[2]}#${o[0]}`:`servers/${o[1]}/channels/${o[2]}#${o[0]}`)))&&v(e,"href",n)},i(o){l||(w(t),l=!0)},o(o){T(t),l=!1},d(o){o&&_(e),t&&t.d()}}}function Qt(r,e,n){let l,t,o,i,f;const s=te(je),u=te(Me);ee(r,u,A=>n(4,i=A));const a=te(yt);ee(r,a,A=>n(1,l=A));const c=te(Et);ee(r,c,A=>n(2,t=A));const h=te(Oe);ee(r,h,A=>n(3,o=A));const L=te(Be);ee(r,L,A=>n(5,f=A));let{id:O}=e;const U=({_id:A})=>O==A;return r.$$set=A=>{"id"in A&&n(0,O=A.id)},[O,l,t,o,i,f,s,u,a,c,h,L,U]}class Zt extends $e{constructor(e){super(),we(this,e,Qt,Jt,ve,{id:0})}}function xt(r){let e,n,l,t,o,i,f,s=r[2]("confirm")+"",u,a,c,h=r[2]("cancel")+"",L,O,U,A;const q=r[4].default,R=Nt(q,r,r[3],null);return{c(){e=N("dialog"),n=N("div"),R&&R.c(),l=P(),t=N("hr"),o=P(),i=N("form"),f=N("button"),u=I(s),a=P(),c=N("button"),L=I(h),this.h()},l(S){e=C(S,"DIALOG",{});var J=B(e);n=C(J,"DIV",{});var x=B(n);R&&R.l(x),l=V(x),t=C(x,"HR",{}),o=V(x),i=C(x,"FORM",{id:!0,method:!0});var Q=B(i);f=C(Q,"BUTTON",{type:!0});var G=B(f);u=M(G,s),G.forEach(_),a=V(Q),c=C(Q,"BUTTON",{type:!0});var Z=B(c);L=M(Z,h),Z.forEach(_),Q.forEach(_),x.forEach(_),J.forEach(_),this.h()},h(){v(f,"type","submit"),v(c,"type","reset"),v(i,"id","modal-form"),v(i,"method","dialog")},m(S,J){d(S,e,J),b(e,n),R&&R.m(n,null),b(n,l),b(n,t),b(n,o),b(n,i),b(i,f),b(f,u),b(i,a),b(i,c),b(c,L),r[7](e),O=!0,U||(A=[ae(c,"click",r[6]),ae(i,"submit",r[5]),ae(e,"close",r[8])],U=!0)},p(S,[J]){R&&R.p&&(!O||J&8)&&Ct(R,q,S,S[3],O?Dt(q,S[3],J,null):Tt(S[3]),null),(!O||J&4)&&s!==(s=S[2]("confirm")+"")&&K(u,s),(!O||J&4)&&h!==(h=S[2]("cancel")+"")&&K(L,h)},i(S){O||(w(R,S),O=!0)},o(S){T(R,S),O=!1},d(S){S&&_(e),R&&R.d(S),r[7](null),U=!1,Se(A)}}}function el(r,e,n){let l;ee(r,Ne,h=>n(2,l=h));let{$$slots:t={},$$scope:o}=e,{showModal:i}=e,f;function s(h){Ut.call(this,r,h)}const u=()=>n(0,i=!1);function a(h){Ie[h?"unshift":"push"](()=>{f=h,n(1,f)})}const c=()=>n(0,i=!1);return r.$$set=h=>{"showModal"in h&&n(0,i=h.showModal),"$$scope"in h&&n(3,o=h.$$scope)},r.$$.update=()=>{r.$$.dirty&3&&(i?f==null||f.showModal():f==null||f.close())},[i,f,l,o,t,s,u,a,c]}class tl extends $e{constructor(e){super(),we(this,e,el,xt,ve,{showModal:0})}}function ll(r){let e,n="External Link",l,t,o,i,f="Are you sure you want to go to this link? External links can be dangerous.";return{c(){e=N("h1"),e.textContent=n,l=P(),t=N("hr"),o=P(),i=N("p"),i.textContent=f,this.h()},l(s){e=C(s,"H1",{class:!0,"data-svelte-h":!0}),Ue(e)!=="svelte-qkxu7n"&&(e.textContent=n),l=V(s),t=C(s,"HR",{}),o=V(s),i=C(s,"P",{"data-svelte-h":!0}),Ue(i)!=="svelte-os1rtp"&&(i.textContent=f),this.h()},h(){v(e,"class","text-3xl")},m(s,u){d(s,e,u),d(s,l,u),d(s,t,u),d(s,o,u),d(s,i,u)},p:m,d(s){s&&(_(e),_(l),_(t),_(o),_(i))}}}function nl(r){let e,n,l,t,o,i,f,s;function u(c){r[2](c)}let a={$$slots:{default:[ll]},$$scope:{ctx:r}};return r[1]!==void 0&&(a.showModal=r[1]),e=new tl({props:a}),Ie.push(()=>Ot(e,"showModal",u)),e.$on("submit",r[3]),{c(){oe(e.$$.fragment),l=P(),t=N("a"),o=I(r[0]),this.h()},l(c){se(e.$$.fragment,c),l=V(c),t=C(c,"A",{href:!0,target:!0,rel:!0});var h=B(t);o=M(h,r[0]),h.forEach(_),this.h()},h(){v(t,"href",r[0]),v(t,"target","_blank"),v(t,"rel","noreferrer")},m(c,h){fe(e,c,h),d(c,l,h),d(c,t,h),b(t,o),i=!0,f||(s=ae(t,"click",Bt(r[4])),f=!0)},p(c,[h]){const L={};h&32&&(L.$$scope={dirty:h,ctx:c}),!n&&h&2&&(n=!0,L.showModal=c[1],At(()=>n=!1)),e.$set(L),(!i||h&1)&&K(o,c[0]),(!i||h&1)&&v(t,"href",c[0])},i(c){i||(w(e.$$.fragment,c),i=!0)},o(c){T(e.$$.fragment,c),i=!1},d(c){c&&(_(l),_(t)),ce(e,c),f=!1,s()}}}function rl(r,e,n){let{href:l}=e,t=!1;function o(s){t=s,n(1,t)}const i=()=>window.open(l),f=()=>n(1,t=!0);return r.$$set=s=>{"href"in s&&n(0,l=s.href)},[l,t,o,i,f]}class Ce extends $e{constructor(e){super(),we(this,e,rl,nl,ve,{href:0})}}function il(r){let e,n,l,t;const o=[al,ul],i=[];function f(s,u){return s[2]["jolt:low-data-mode"]?0:1}return e=f(r),n=i[e]=o[e](r),{c(){n.c(),l=X()},l(s){n.l(s),l=X()},m(s,u){i[e].m(s,u),d(s,l,u),t=!0},p(s,u){let a=e;e=f(s),e===a?i[e].p(s,u):(le(),T(i[a],1,1,()=>{i[a]=null}),ne(),n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),w(n,1),n.m(l.parentNode,l))},i(s){t||(w(n),t=!0)},o(s){T(n),t=!1},d(s){s&&_(l),i[e].d(s)}}}function ol(r){let e,n,l=r[0].filename+"",t,o,i,f;return i=new Ce({props:{href:r[1]}}),{c(){e=N("span"),n=I("[File "),t=I(l),o=I(`]
			`),oe(i.$$.fragment),this.h()},l(s){e=C(s,"SPAN",{class:!0});var u=B(e);n=M(u,"[File "),t=M(u,l),o=M(u,`]
			`),se(i.$$.fragment,u),u.forEach(_),this.h()},h(){v(e,"class","text-gray-500")},m(s,u){d(s,e,u),b(e,n),b(e,t),b(e,o),fe(i,e,null),f=!0},p(s,u){(!f||u&1)&&l!==(l=s[0].filename+"")&&K(t,l);const a={};u&2&&(a.href=s[1]),i.$set(a)},i(s){f||(w(i.$$.fragment,s),f=!0)},o(s){T(i.$$.fragment,s),f=!1},d(s){s&&_(e),ce(i)}}}function sl(r){let e,n,l;return{c(){e=N("audio"),n=N("source"),this.h()},l(t){e=C(t,"AUDIO",{});var o=B(e);n=C(o,"SOURCE",{src:!0}),o.forEach(_),this.h()},h(){ue(n.src,l=r[1])||v(n,"src",l),e.controls=!0},m(t,o){d(t,e,o),b(e,n)},p(t,o){o&2&&!ue(n.src,l=t[1])&&v(n,"src",l)},i:m,o:m,d(t){t&&_(e)}}}function fl(r){let e,n,l;return{c(){e=N("video"),n=N("source"),this.h()},l(t){e=C(t,"VIDEO",{});var o=B(e);n=C(o,"SOURCE",{src:!0}),o.forEach(_),this.h()},h(){ue(n.src,l=r[1])||v(n,"src",l),e.controls=!0},m(t,o){d(t,e,o),b(e,n)},p(t,o){o&2&&!ue(n.src,l=t[1])&&v(n,"src",l)},i:m,o:m,d(t){t&&_(e)}}}function cl(r){let e,n,l,t;const o=[gl,kl],i=[];function f(s,u){return s[2]["jolt:low-data-mode"]?0:1}return e=f(r),n=i[e]=o[e](r),{c(){n.c(),l=X()},l(s){n.l(s),l=X()},m(s,u){i[e].m(s,u),d(s,l,u),t=!0},p(s,u){let a=e;e=f(s),e===a?i[e].p(s,u):(le(),T(i[a],1,1,()=>{i[a]=null}),ne(),n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),w(n,1),n.m(l.parentNode,l))},i(s){t||(w(n),t=!0)},o(s){T(n),t=!1},d(s){s&&_(l),i[e].d(s)}}}function ul(r){let e,n,l={ctx:r,current:null,token:null,hasCatch:!0,pending:bl,then:hl,catch:_l,value:5,error:7};return ie(n=fetch(r[1]),l),{c(){e=X(),l.block.c()},l(t){e=X(),l.block.l(t)},m(t,o){d(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(t,o){r=t,l.ctx=r,o&2&&n!==(n=fetch(r[1]))&&ie(n,l)||ge(l,r,o)},i:m,o:m,d(t){t&&_(e),l.block.d(t),l.token=null,l=null}}}function al(r){let e,n,l,t,o;return l=new Ce({props:{href:r[1]}}),{c(){e=N("span"),n=I("[Text "),oe(l.$$.fragment),t=I("]"),this.h()},l(i){e=C(i,"SPAN",{class:!0});var f=B(e);n=M(f,"[Text "),se(l.$$.fragment,f),t=M(f,"]"),f.forEach(_),this.h()},h(){v(e,"class","text-gray-500")},m(i,f){d(i,e,f),b(e,n),fe(l,e,null),b(e,t),o=!0},p(i,f){const s={};f&2&&(s.href=i[1]),l.$set(s)},i(i){o||(w(l.$$.fragment,i),o=!0)},o(i){T(l.$$.fragment,i),o=!1},d(i){i&&_(e),ce(l)}}}function _l(r){let e,n=r[3]("file.download.error")+"",l,t,o=r[0].filename+"",i,f,s=r[7]+"",u;return{c(){e=N("p"),l=I(n),t=P(),i=I(o),f=I(": "),u=I(s)},l(a){e=C(a,"P",{});var c=B(e);l=M(c,n),t=V(c),i=M(c,o),f=M(c,": "),u=M(c,s),c.forEach(_)},m(a,c){d(a,e,c),b(e,l),b(e,t),b(e,i),b(e,f),b(e,u)},p(a,c){c&8&&n!==(n=a[3]("file.download.error")+"")&&K(l,n),c&1&&o!==(o=a[0].filename+"")&&K(i,o),c&2&&s!==(s=a[7]+"")&&K(u,s)},d(a){a&&_(e)}}}function hl(r){let e,n,l={ctx:r,current:null,token:null,hasCatch:!1,pending:dl,then:pl,catch:ml,value:6};return ie(n=r[5].text(),l),{c(){e=X(),l.block.c()},l(t){e=X(),l.block.l(t)},m(t,o){d(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(t,o){r=t,l.ctx=r,o&2&&n!==(n=r[5].text())&&ie(n,l)||ge(l,r,o)},d(t){t&&_(e),l.block.d(t),l.token=null,l=null}}}function ml(r){return{c:m,l:m,m,p:m,d:m}}function pl(r){let e,n=r[6]+"",l;return{c(){e=N("p"),l=I(n)},l(t){e=C(t,"P",{});var o=B(e);l=M(o,n),o.forEach(_)},m(t,o){d(t,e,o),b(e,l)},p(t,o){o&2&&n!==(n=t[6]+"")&&K(l,n)},d(t){t&&_(e)}}}function dl(r){return{c:m,l:m,m,p:m,d:m}}function bl(r){return{c:m,l:m,m,p:m,d:m}}function kl(r){let e,n,l;return{c(){e=N("img"),this.h()},l(t){e=C(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){ue(e.src,n=r[1])||v(e,"src",n),v(e,"alt",l=r[0].filename),v(e,"class","max-w-xl max-h-xl")},m(t,o){d(t,e,o)},p(t,o){o&2&&!ue(e.src,n=t[1])&&v(e,"src",n),o&1&&l!==(l=t[0].filename)&&v(e,"alt",l)},i:m,o:m,d(t){t&&_(e)}}}function gl(r){let e,n,l,t,o;return l=new Ce({props:{href:r[1]}}),{c(){e=N("span"),n=I("[Image "),oe(l.$$.fragment),t=I("]"),this.h()},l(i){e=C(i,"SPAN",{class:!0});var f=B(e);n=M(f,"[Image "),se(l.$$.fragment,f),t=M(f,"]"),f.forEach(_),this.h()},h(){v(e,"class","text-gray-500")},m(i,f){d(i,e,f),b(e,n),fe(l,e,null),b(e,t),o=!0},p(i,f){const s={};f&2&&(s.href=i[1]),l.$set(s)},i(i){o||(w(l.$$.fragment,i),o=!0)},o(i){T(l.$$.fragment,i),o=!1},d(i){i&&_(e),ce(l)}}}function vl(r){let e,n,l,t;const o=[cl,fl,sl,ol,il],i=[];function f(s,u){return s[0].metadata.type=="Image"?0:s[0].metadata.type=="Video"?1:s[0].metadata.type=="Audio"?2:s[0].metadata.type=="File"?3:s[0].metadata.type=="Text"?4:-1}return~(n=f(r))&&(l=i[n]=o[n](r)),{c(){e=N("div"),l&&l.c()},l(s){e=C(s,"DIV",{});var u=B(e);l&&l.l(u),u.forEach(_)},m(s,u){d(s,e,u),~n&&i[n].m(e,null),t=!0},p(s,[u]){let a=n;n=f(s),n===a?~n&&i[n].p(s,u):(l&&(le(),T(i[a],1,1,()=>{i[a]=null}),ne()),~n?(l=i[n],l?l.p(s,u):(l=i[n]=o[n](s),l.c()),w(l,1),l.m(e,null)):l=null)},i(s){t||(w(l),t=!0)},o(s){T(l),t=!1},d(s){s&&_(e),~n&&i[n].d()}}}function $l(r,e,n){let l,t,o;ee(r,Ne,s=>n(3,o=s));const i=te(Me);ee(r,i,s=>n(2,t=s));let{attachment:f}=e;return r.$$set=s=>{"attachment"in s&&n(0,f=s.attachment)},r.$$.update=()=>{r.$$.dirty&1&&n(1,l=Ft(f))},[f,l,t,o,i]}class wl extends $e{constructor(e){super(),we(this,e,$l,vl,ve,{attachment:0})}}function yl(r){let e,n="oop website embed, can't handle that :(";return{c(){e=N("span"),e.textContent=n,this.h()},l(l){e=C(l,"SPAN",{class:!0,"data-svelte-h":!0}),Ue(e)!=="svelte-1exisih"&&(e.textContent=n),this.h()},h(){v(e,"class","text-gray-600")},m(l,t){d(l,e,t)},p:m,i:m,o:m,d(l){l&&_(e)}}}function El(r){let e,n,l,t=r[0].icon_url&&!r[1]["jolt:low-data-mode"]&&ze(r),o=r[0].title&&Xe(r),i=r[0].description&&We(r);return{c(){e=N("div"),t&&t.c(),n=P(),o&&o.c(),l=P(),i&&i.c(),this.h()},l(f){e=C(f,"DIV",{style:!0});var s=B(e);t&&t.l(s),n=V(s),o&&o.l(s),l=V(s),i&&i.l(s),s.forEach(_),this.h()},h(){Ae(e,"background-color",r[0].colour)},m(f,s){d(f,e,s),t&&t.m(e,null),b(e,n),o&&o.m(e,null),b(e,l),i&&i.m(e,null)},p(f,s){f[0].icon_url&&!f[1]["jolt:low-data-mode"]?t?t.p(f,s):(t=ze(f),t.c(),t.m(e,n)):t&&(t.d(1),t=null),f[0].title?o?o.p(f,s):(o=Xe(f),o.c(),o.m(e,l)):o&&(o.d(1),o=null),f[0].description?i?i.p(f,s):(i=We(f),i.c(),i.m(e,null)):i&&(i.d(1),i=null),s&1&&Ae(e,"background-color",f[0].colour)},i:m,o:m,d(f){f&&_(e),t&&t.d(),o&&o.d(),i&&i.d()}}}function Il(r){let e,n,l,t;const o=[Cl,Nl],i=[];function f(s,u){return s[1]["jolt:low-data-mode"]?0:1}return e=f(r),n=i[e]=o[e](r),{c(){n.c(),l=X()},l(s){n.l(s),l=X()},m(s,u){i[e].m(s,u),d(s,l,u),t=!0},p(s,u){let a=e;e=f(s),e===a?i[e].p(s,u):(le(),T(i[a],1,1,()=>{i[a]=null}),ne(),n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),w(n,1),n.m(l.parentNode,l))},i(s){t||(w(n),t=!0)},o(s){T(n),t=!1},d(s){s&&_(l),i[e].d(s)}}}function Ml(r){let e,n,l,t;const o=[Dl,Tl],i=[];function f(s,u){return s[1]["jolt:low-data-mode"]?0:1}return e=f(r),n=i[e]=o[e](r),{c(){n.c(),l=X()},l(s){n.l(s),l=X()},m(s,u){i[e].m(s,u),d(s,l,u),t=!0},p(s,u){let a=e;e=f(s),e===a?i[e].p(s,u):(le(),T(i[a],1,1,()=>{i[a]=null}),ne(),n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),w(n,1),n.m(l.parentNode,l))},i(s){t||(w(n),t=!0)},o(s){T(n),t=!1},d(s){s&&_(l),i[e].d(s)}}}function ze(r){let e,n,l;return{c(){e=N("img"),this.h()},l(t){e=C(t,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),this.h()},h(){ue(e.src,n=r[0].icon_url)||v(e,"src",n),v(e,"alt",l=r[0].title),v(e,"width","24"),v(e,"height","24"),v(e,"class","inline rounded-3xl")},m(t,o){d(t,e,o)},p(t,o){o&1&&!ue(e.src,n=t[0].icon_url)&&v(e,"src",n),o&1&&l!==(l=t[0].title)&&v(e,"alt",l)},d(t){t&&_(e)}}}function Xe(r){let e,n=r[0].title+"",l;return{c(){e=N("h1"),l=I(n),this.h()},l(t){e=C(t,"H1",{class:!0});var o=B(e);l=M(o,n),o.forEach(_),this.h()},h(){v(e,"class","text-gray-600")},m(t,o){d(t,e,o),b(e,l)},p(t,o){o&1&&n!==(n=t[0].title+"")&&K(l,n)},d(t){t&&_(e)}}}function We(r){let e,n=r[0].description+"",l;return{c(){e=N("p"),l=I(n)},l(t){e=C(t,"P",{});var o=B(e);l=M(o,n),o.forEach(_)},m(t,o){d(t,e,o),b(e,l)},p(t,o){o&1&&n!==(n=t[0].description+"")&&K(l,n)},d(t){t&&_(e)}}}function Nl(r){let e,n,l,t,o;return{c(){e=N("video"),n=N("source"),this.h()},l(i){e=C(i,"VIDEO",{});var f=B(e);n=C(f,"SOURCE",{src:!0,width:!0,height:!0}),f.forEach(_),this.h()},h(){ue(n.src,l=r[0].url)||v(n,"src",l),v(n,"width",t=r[0].width),v(n,"height",o=r[0].height),e.controls=!0},m(i,f){d(i,e,f),b(e,n)},p(i,f){f&1&&!ue(n.src,l=i[0].url)&&v(n,"src",l),f&1&&t!==(t=i[0].width)&&v(n,"width",t),f&1&&o!==(o=i[0].height)&&v(n,"height",o)},i:m,o:m,d(i){i&&_(e)}}}function Cl(r){let e,n;return e=new Ce({props:{href:r[0].url}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t&1&&(o.href=l[0].url),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function Tl(r){let e,n,l,t;return{c(){e=N("img"),this.h()},l(o){e=C(o,"IMG",{src:!0,width:!0,height:!0}),this.h()},h(){ue(e.src,n=r[0].url)||v(e,"src",n),v(e,"width",l=r[0].width),v(e,"height",t=r[0].height)},m(o,i){d(o,e,i)},p(o,i){i&1&&!ue(e.src,n=o[0].url)&&v(e,"src",n),i&1&&l!==(l=o[0].width)&&v(e,"width",l),i&1&&t!==(t=o[0].height)&&v(e,"height",t)},i:m,o:m,d(o){o&&_(e)}}}function Dl(r){let e,n;return e=new Ce({props:{href:r[0].url}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t&1&&(o.href=l[0].url),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function Ul(r){let e,n,l,t;const o=[Ml,Il,El,yl],i=[];function f(s,u){return s[0].type=="Image"?0:s[0].type=="Video"?1:s[0].type=="Text"?2:s[0].type=="Website"?3:-1}return~(e=f(r))&&(n=i[e]=o[e](r)),{c(){n&&n.c(),l=X()},l(s){n&&n.l(s),l=X()},m(s,u){~e&&i[e].m(s,u),d(s,l,u),t=!0},p(s,[u]){let a=e;e=f(s),e===a?~e&&i[e].p(s,u):(n&&(le(),T(i[a],1,1,()=>{i[a]=null}),ne()),~e?(n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),w(n,1),n.m(l.parentNode,l)):n=null)},i(s){t||(w(n),t=!0)},o(s){T(n),t=!1},d(s){s&&_(l),~e&&i[e].d(s)}}}function Al(r,e,n){let l,{embed:t}=e;const o=te(Me);return ee(r,o,i=>n(1,l=i)),r.$$set=i=>{"embed"in i&&n(0,t=i.embed)},[t,l,o]}class Sl extends $e{constructor(e){super(),we(this,e,Al,Ul,ve,{embed:0})}}function Ye(r){const e=pe(r[4]);r[5]=e}function Je(r){r[6]=r[8][0],r[7]=r[8][1]}function Qe(r){const e=pe(r[4]);r[5]=e}function jl(r){let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:Hl,then:Rl,catch:Bl,value:4,blocks:[,,,]};return ie(n=r[2].api.fetchUser(r[0].id),t),{c(){e=X(),t.block.c()},l(o){e=X(),t.block.l(o)},m(o,i){d(o,e,i),t.block.m(o,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(o,i){r=o,t.ctx=r,i&1&&n!==(n=r[2].api.fetchUser(r[0].id))&&ie(n,t)||ge(t,r,i)},i(o){l||(w(t.block),l=!0)},o(o){for(let i=0;i<3;i+=1){const f=t.blocks[i];T(f)}l=!1},d(o){o&&_(e),t.block.d(o),t.token=null,t=null}}}function Pl(r){let e,n,l={ctx:r,current:null,token:null,hasCatch:!1,pending:Xl,then:zl,catch:ql,value:8};return ie(n=Promise.all([r[0].from,r[0].to].map(r[3])),l),{c(){e=X(),l.block.c()},l(t){e=X(),l.block.l(t)},m(t,o){d(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(t,o){r=t,l.ctx=r,o&1&&n!==(n=Promise.all([r[0].from,r[0].to].map(r[3])))&&ie(n,l)||ge(l,r,o)},i:m,o:m,d(t){t&&_(e),l.block.d(t),l.token=null,l=null}}}function Vl(r){let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!1,pending:on,then:Yl,catch:Wl,value:4,blocks:[,,,]};return ie(n=r[2].api.fetchUser(r[0].by),t),{c(){e=X(),t.block.c()},l(o){e=X(),t.block.l(o)},m(o,i){d(o,e,i),t.block.m(o,t.anchor=i),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(o,i){r=o,t.ctx=r,i&1&&n!==(n=r[2].api.fetchUser(r[0].by))&&ie(n,t)||ge(t,r,i)},i(o){l||(w(t.block),l=!0)},o(o){for(let i=0;i<3;i+=1){const f=t.blocks[i];T(f)}l=!1},d(o){o&&_(e),t.block.d(o),t.token=null,t=null}}}function Ol(r){let e=r[0].content+"",n;return{c(){n=I(e)},l(l){n=M(l,e)},m(l,t){d(l,n,t)},p(l,t){t&1&&e!==(e=l[0].content+"")&&K(n,e)},i:m,o:m,d(l){l&&_(n)}}}function Bl(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Rl(r){Ye(r);let e,n,l=r[5]+"",t,o,i,f;e=new Ee({props:{src:be(r[4]),width:24,height:24,name:r[5]}});function s(c,h){if(c[0].type=="user_banned")return Kl;if(c[0].type=="user_joined")return Gl;if(c[0].type=="user_kicked")return Ll;if(c[0].type=="user_left")return Fl}let u=s(r),a=u&&u(r);return{c(){oe(e.$$.fragment),n=P(),t=I(l),o=P(),a&&a.c(),i=X()},l(c){se(e.$$.fragment,c),n=V(c),t=M(c,l),o=V(c),a&&a.l(c),i=X()},m(c,h){fe(e,c,h),d(c,n,h),d(c,t,h),d(c,o,h),a&&a.m(c,h),d(c,i,h),f=!0},p(c,h){Ye(c);const L={};h&1&&(L.src=be(c[4])),h&1&&(L.name=c[5]),e.$set(L),(!f||h&1)&&l!==(l=c[5]+"")&&K(t,l),u===(u=s(c))&&a?a.p(c,h):(a&&a.d(1),a=u&&u(c),a&&(a.c(),a.m(i.parentNode,i)))},i(c){f||(w(e.$$.fragment,c),f=!0)},o(c){T(e.$$.fragment,c),f=!1},d(c){c&&(_(n),_(t),_(o),_(i)),ce(e,c),a&&a.d(c)}}}function Fl(r){let e=r[1]("user.chat.left")+"",n,l;return{c(){n=I(e),l=I(".")},l(t){n=M(t,e),l=M(t,".")},m(t,o){d(t,n,o),d(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("user.chat.left")+"")&&K(n,e)},d(t){t&&(_(n),_(l))}}}function Ll(r){let e=r[1]("user.was-kicked")+"",n,l;return{c(){n=I(e),l=I(".")},l(t){n=M(t,e),l=M(t,".")},m(t,o){d(t,n,o),d(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("user.was-kicked")+"")&&K(n,e)},d(t){t&&(_(n),_(l))}}}function Gl(r){let e=r[1]("user.chat.joined")+"",n,l;return{c(){n=I(e),l=I(".")},l(t){n=M(t,e),l=M(t,".")},m(t,o){d(t,n,o),d(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("user.chat.joined")+"")&&K(n,e)},d(t){t&&(_(n),_(l))}}}function Kl(r){let e=r[1]("user.was-banned")+"",n,l;return{c(){n=I(e),l=I(".")},l(t){n=M(t,e),l=M(t,".")},m(t,o){d(t,n,o),d(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("user.was-banned")+"")&&K(n,e)},d(t){t&&(_(n),_(l))}}}function Hl(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function ql(r){return{c:m,l:m,m,p:m,d:m}}function zl(r){Je(r);let e=r[1]("channel.ownership.changed-from")+"",n,l,t=pe(r[6])+"",o,i,f=pe(r[7])+"",s,u;return{c(){n=I(e),l=P(),o=I(t),i=I(" to "),s=I(f),u=I(".")},l(a){n=M(a,e),l=V(a),o=M(a,t),i=M(a," to "),s=M(a,f),u=M(a,".")},m(a,c){d(a,n,c),d(a,l,c),d(a,o,c),d(a,i,c),d(a,s,c),d(a,u,c)},p(a,c){Je(a),c&2&&e!==(e=a[1]("channel.ownership.changed-from")+"")&&K(n,e),c&1&&t!==(t=pe(a[6])+"")&&K(o,t),c&1&&f!==(f=pe(a[7])+"")&&K(s,f)},d(a){a&&(_(n),_(l),_(o),_(i),_(s),_(u))}}}function Xl(r){return{c:m,l:m,m,p:m,d:m}}function Wl(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function Yl(r){Qe(r);let e,n,l=r[5]+"",t,o,i,f;e=new Ee({props:{src:be(r[4]),width:24,height:24,name:r[5]}});function s(c,h){if(c[0].type=="channel_description_changed")return xl;if(c[0].type=="channel_icon_changed")return Zl;if(c[0].type=="channel_renamed")return Ql;if(c[0].type=="user_added"||c[0].type=="user_remove")return Jl}let u=s(r),a=u&&u(r);return{c(){oe(e.$$.fragment),n=P(),t=I(l),o=P(),a&&a.c(),i=X()},l(c){se(e.$$.fragment,c),n=V(c),t=M(c,l),o=V(c),a&&a.l(c),i=X()},m(c,h){fe(e,c,h),d(c,n,h),d(c,t,h),d(c,o,h),a&&a.m(c,h),d(c,i,h),f=!0},p(c,h){Qe(c);const L={};h&1&&(L.src=be(c[4])),h&1&&(L.name=c[5]),e.$set(L),(!f||h&1)&&l!==(l=c[5]+"")&&K(t,l),u===(u=s(c))&&a?a.p(c,h):(a&&a.d(1),a=u&&u(c),a&&(a.c(),a.m(i.parentNode,i)))},i(c){f||(w(e.$$.fragment,c),f=!0)},o(c){T(e.$$.fragment,c),f=!1},d(c){c&&(_(n),_(t),_(o),_(i)),ce(e,c),a&&a.d(c)}}}function Jl(r){let e,n,l={ctx:r,current:null,token:null,hasCatch:!1,pending:rn,then:tn,catch:en,value:4};return ie(n=r[2].api.fetchUser(r[0].id),l),{c(){e=X(),l.block.c()},l(t){e=X(),l.block.l(t)},m(t,o){d(t,e,o),l.block.m(t,l.anchor=o),l.mount=()=>e.parentNode,l.anchor=e},p(t,o){r=t,l.ctx=r,o&1&&n!==(n=r[2].api.fetchUser(r[0].id))&&ie(n,l)||ge(l,r,o)},d(t){t&&_(e),l.block.d(t),l.token=null,l=null}}}function Ql(r){let e=r[1]("channel.rename-to")+"",n,l,t=r[0].name+"",o,i;return{c(){n=I(e),l=P(),o=I(t),i=I(".")},l(f){n=M(f,e),l=V(f),o=M(f,t),i=M(f,".")},m(f,s){d(f,n,s),d(f,l,s),d(f,o,s),d(f,i,s)},p(f,s){s&2&&e!==(e=f[1]("channel.rename-to")+"")&&K(n,e),s&1&&t!==(t=f[0].name+"")&&K(o,t)},d(f){f&&(_(n),_(l),_(o),_(i))}}}function Zl(r){let e=r[1]("channel.icon.change")+"",n,l;return{c(){n=I(e),l=I(".")},l(t){n=M(t,e),l=M(t,".")},m(t,o){d(t,n,o),d(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("channel.icon.change")+"")&&K(n,e)},d(t){t&&(_(n),_(l))}}}function xl(r){let e=r[1]("channel.description.change")+"",n,l;return{c(){n=I(e),l=I(".")},l(t){n=M(t,e),l=M(t,".")},m(t,o){d(t,n,o),d(t,l,o)},p(t,o){o&2&&e!==(e=t[1]("channel.description.change")+"")&&K(n,e)},d(t){t&&(_(n),_(l))}}}function en(r){return{c:m,l:m,m,p:m,d:m}}function tn(r){let e,n=pe(r[4])+"",l,t;function o(s,u){if(s[0].type=="user_added")return nn;if(s[0].type=="user_remove")return ln}let i=o(r),f=i&&i(r);return{c(){f&&f.c(),e=P(),l=I(n),t=I(".")},l(s){f&&f.l(s),e=V(s),l=M(s,n),t=M(s,".")},m(s,u){f&&f.m(s,u),d(s,e,u),d(s,l,u),d(s,t,u)},p(s,u){i===(i=o(s))&&f?f.p(s,u):(f&&f.d(1),f=i&&i(s),f&&(f.c(),f.m(e.parentNode,e))),u&1&&n!==(n=pe(s[4])+"")&&K(l,n)},d(s){s&&(_(e),_(l),_(t)),f&&f.d(s)}}}function ln(r){let e=r[1]("removed")+"",n;return{c(){n=I(e)},l(l){n=M(l,e)},m(l,t){d(l,n,t)},p(l,t){t&2&&e!==(e=l[1]("removed")+"")&&K(n,e)},d(l){l&&_(n)}}}function nn(r){let e=r[1]("added")+"",n;return{c(){n=I(e)},l(l){n=M(l,e)},m(l,t){d(l,n,t)},p(l,t){t&2&&e!==(e=l[1]("added")+"")&&K(n,e)},d(l){l&&_(n)}}}function rn(r){return{c:m,l:m,m,p:m,d:m}}function on(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function sn(r){let e,n,l,t;const o=[Ol,Vl,Pl,jl],i=[];function f(s,u){return s[0].type=="text"?0:s[0].type=="channel_description_changed"||s[0].type=="channel_icon_changed"||s[0].type=="channel_renamed"||s[0].type=="user_added"||s[0].type=="user_remove"?1:s[0].type=="channel_ownership_changed"?2:s[0].type=="user_banned"||s[0].type=="user_joined"||s[0].type=="user_kicked"||s[0].type=="user_left"?3:-1}return~(e=f(r))&&(n=i[e]=o[e](r)),{c(){n&&n.c(),l=X()},l(s){n&&n.l(s),l=X()},m(s,u){~e&&i[e].m(s,u),d(s,l,u),t=!0},p(s,[u]){let a=e;e=f(s),e===a?~e&&i[e].p(s,u):(n&&(le(),T(i[a],1,1,()=>{i[a]=null}),ne()),~e?(n=i[e],n?n.p(s,u):(n=i[e]=o[e](s),n.c()),w(n,1),n.m(l.parentNode,l)):n=null)},i(s){t||(w(n),t=!0)},o(s){T(n),t=!1},d(s){s&&_(l),~e&&i[e].d(s)}}}function fn(r,e,n){let l;ee(r,Ne,f=>n(1,l=f));const t=te(je);let{system:o}=e;const i=f=>t.api.fetchUser(f);return r.$$set=f=>{"system"in f&&n(0,o=f.system)},[o,l,t,i]}class cn extends $e{constructor(e){super(),we(this,e,fn,sn,ve,{system:0})}}function Ze(r,e,n){const l=r.slice();return l[30]=e[n],l}function xe(r,e,n){const l=r.slice();return l[33]=e[n],l}function et(r,e,n){const l=r.slice();return l[36]=e[n].src,l[37]=e[n].alt,l[38]=e[n].onclick,l[39]=e[n].showIf,l}function Pe(r){const e=r.slice(),n=new Date(e[0].edited);return e[8]=n,e}function tt(r,e,n){const l=r.slice();return l[42]=e[n],l}function lt(r){let e,n,l=he(r[0].replies),t=[];for(let i=0;i<l.length;i+=1)t[i]=nt(tt(r,l,i));const o=i=>T(t[i],1,1,()=>{t[i]=null});return{c(){e=N("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=C(i,"DIV",{class:!0});var f=B(e);for(let s=0;s<t.length;s+=1)t[s].l(f);f.forEach(_),this.h()},h(){v(e,"class","flex flex-col")},m(i,f){d(i,e,f);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null);n=!0},p(i,f){if(f[0]&1){l=he(i[0].replies);let s;for(s=0;s<l.length;s+=1){const u=tt(i,l,s);t[s]?(t[s].p(u,f),w(t[s],1)):(t[s]=nt(u),t[s].c(),w(t[s],1),t[s].m(e,null))}for(le(),s=l.length;s<t.length;s+=1)o(s);ne()}},i(i){if(!n){for(let f=0;f<l.length;f+=1)w(t[f]);n=!0}},o(i){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)T(t[f]);n=!1},d(i){i&&_(e),ye(t,i)}}}function nt(r){let e,n;return e=new Zt({props:{id:r[42]}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.id=l[42]),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function rt(r){let e,n;return e=new Ee({props:{name:r[4],src:r[3],width:40,height:40}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t[0]&16&&(o.name=l[4]),t[0]&8&&(o.src=l[3]),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function it(r){let e,n=r[5]("message.edited")+"",l,t,o=r[6](r[8])+"",i,f,s=r[7](r[8])+"",u,a;return{c(){e=I("["),l=I(n),t=P(),i=I(o),f=P(),u=I(s),a=I("]")},l(c){e=M(c,"["),l=M(c,n),t=V(c),i=M(c,o),f=V(c),u=M(c,s),a=M(c,"]")},m(c,h){d(c,e,h),d(c,l,h),d(c,t,h),d(c,i,h),d(c,f,h),d(c,u,h),d(c,a,h)},p(c,h){h[0]&32&&n!==(n=c[5]("message.edited")+"")&&K(l,n),h[0]&65&&o!==(o=c[6](c[8])+"")&&K(i,o),h[0]&129&&s!==(s=c[7](c[8])+"")&&K(u,s)},d(c){c&&(_(e),_(l),_(t),_(i),_(f),_(u),_(a))}}}function ot(r){let e,n,l,t,o,i;function f(){return r[20](r[38])}return{c(){e=N("button"),n=N("img"),t=P(),this.h()},l(s){e=C(s,"BUTTON",{class:!0,"aria-label":!0});var u=B(e);n=C(u,"IMG",{width:!0,height:!0,src:!0,alt:!0}),t=V(u),u.forEach(_),this.h()},h(){v(n,"width","16"),v(n,"height","16"),ue(n.src,l=r[36])||v(n,"src",l),v(n,"alt",r[37]),v(e,"class","ml-2"),v(e,"aria-label",r[37])},m(s,u){d(s,e,u),b(e,n),b(e,t),o||(i=ae(e,"click",f),o=!0)},p(s,u){r=s},d(s){s&&_(e),o=!1,i()}}}function st(r){var t;let e=((t=r[39])==null?void 0:t.call(r,r[0]))??!0,n,l=e&&ot(r);return{c(){l&&l.c(),n=X()},l(o){l&&l.l(o),n=X()},m(o,i){l&&l.m(o,i),d(o,n,i)},p(o,i){var f;i[0]&1&&(e=((f=o[39])==null?void 0:f.call(o,o[0]))??!0),e?l?l.p(o,i):(l=ot(o),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(o){o&&_(n),l&&l.d(o)}}}function un(r){let e,n=r[0].content+"",l;return{c(){e=N("span"),l=I(n),this.h()},l(t){e=C(t,"SPAN",{style:!0,class:!0});var o=B(e);l=M(o,n),o.forEach(_),this.h()},h(){Ae(e,"overflow-wrap","break-word"),v(e,"class","whitespace-pre-wrap")},m(t,o){d(t,e,o),b(e,l)},p(t,o){o[0]&1&&n!==(n=t[0].content+"")&&K(l,n)},d(t){t&&_(e)}}}function an(r){let e,n,l,t;return{c(){e=N("form"),n=N("textarea"),this.h()},l(o){e=C(o,"FORM",{id:!0,class:!0});var i=B(e);n=C(i,"TEXTAREA",{class:!0,placeholder:!0}),B(n).forEach(_),i.forEach(_),this.h()},h(){v(n,"class","outline-none resize-none bg-inherit w-full"),v(n,"placeholder","Edit this message"),v(e,"id","message-edit-form"),v(e,"class","bg-gray-500 rounded-xl px-2 pt-2")},m(o,i){d(o,e,i),b(e,n),Le(n,r[2]),l||(t=[ae(n,"keydown",r[21]),ae(n,"input",r[22]),ae(e,"submit",r[15])],l=!0)},p(o,i){i[0]&4&&Le(n,o[2])},d(o){o&&_(e),l=!1,Se(t)}}}function ft(r){let e,n;return e=new cn({props:{system:r[0].system}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.system=l[0].system),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function ct(r){let e,n,l=he(r[0].attachments),t=[];for(let i=0;i<l.length;i+=1)t[i]=ut(xe(r,l,i));const o=i=>T(t[i],1,1,()=>{t[i]=null});return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=X()},l(i){for(let f=0;f<t.length;f+=1)t[f].l(i);e=X()},m(i,f){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(i,f);d(i,e,f),n=!0},p(i,f){if(f[0]&1){l=he(i[0].attachments);let s;for(s=0;s<l.length;s+=1){const u=xe(i,l,s);t[s]?(t[s].p(u,f),w(t[s],1)):(t[s]=ut(u),t[s].c(),w(t[s],1),t[s].m(e.parentNode,e))}for(le(),s=l.length;s<t.length;s+=1)o(s);ne()}},i(i){if(!n){for(let f=0;f<l.length;f+=1)w(t[f]);n=!0}},o(i){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)T(t[f]);n=!1},d(i){i&&_(e),ye(t,i)}}}function ut(r){let e,n;return e=new wl({props:{attachment:r[33]}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.attachment=l[33]),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function at(r){let e,n,l=he(r[0].embeds),t=[];for(let i=0;i<l.length;i+=1)t[i]=_t(Ze(r,l,i));const o=i=>T(t[i],1,1,()=>{t[i]=null});return{c(){for(let i=0;i<t.length;i+=1)t[i].c();e=X()},l(i){for(let f=0;f<t.length;f+=1)t[f].l(i);e=X()},m(i,f){for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(i,f);d(i,e,f),n=!0},p(i,f){if(f[0]&1){l=he(i[0].embeds);let s;for(s=0;s<l.length;s+=1){const u=Ze(i,l,s);t[s]?(t[s].p(u,f),w(t[s],1)):(t[s]=_t(u),t[s].c(),w(t[s],1),t[s].m(e.parentNode,e))}for(le(),s=l.length;s<t.length;s+=1)o(s);ne()}},i(i){if(!n){for(let f=0;f<l.length;f+=1)w(t[f]);n=!0}},o(i){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)T(t[f]);n=!1},d(i){i&&_(e),ye(t,i)}}}function _t(r){let e,n;return e=new Sl({props:{embed:r[30]}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t[0]&1&&(o.embed=l[30]),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function _n(r){let e,n,l,t,o,i,f,s,u=r[6](r[8])+"",a,c,h=r[7](r[8])+"",L,O,U,A,q,R,S,J,x,Q,G,Z,F=r[0].replies!=null&&r[0].replies.length!=0&&lt(r),z=!r[1]["jolt:compact-mode"]&&rt(r),j=r[0].edited!=null&&it(Pe(r)),_e=he(r[14]),W=[];for(let g=0;g<_e.length;g+=1)W[g]=st(et(r,_e,g));function Y(g,E){if(g[2]!=null)return an;if(g[0].content!=null)return un}let D=Y(r),p=D&&D(r),y=r[0].system!=null&&ft(r),$=r[0].attachments!=null&&ct(r),k=r[0].embeds!=null&&at(r);return{c(){e=N("div"),F&&F.c(),n=P(),l=N("div"),z&&z.c(),t=P(),o=I(r[4]),i=P(),f=N("p"),s=I("["),a=I(u),c=P(),L=I(h),O=I(`]

			`),j&&j.c(),U=P(),A=N("div"),q=P(),R=N("div");for(let g=0;g<W.length;g+=1)W[g].c();S=P(),p&&p.c(),J=P(),y&&y.c(),x=P(),$&&$.c(),Q=P(),k&&k.c(),this.h()},l(g){e=C(g,"DIV",{id:!0,class:!0});var E=B(e);F&&F.l(E),n=V(E),l=C(E,"DIV",{class:!0});var H=B(l);z&&z.l(H),t=V(H),o=M(H,r[4]),i=V(H),f=C(H,"P",{class:!0});var re=B(f);s=M(re,"["),a=M(re,u),c=V(re),L=M(re,h),O=M(re,`]

			`),j&&j.l(re),re.forEach(_),U=V(H),A=C(H,"DIV",{class:!0}),B(A).forEach(_),q=V(H),R=C(H,"DIV",{class:!0});var de=B(R);for(let ke=0;ke<W.length;ke+=1)W[ke].l(de);de.forEach(_),H.forEach(_),S=V(E),p&&p.l(E),J=V(E),y&&y.l(E),x=V(E),$&&$.l(E),Q=V(E),k&&k.l(E),E.forEach(_),this.h()},h(){v(f,"class","text-gray-500"),v(A,"class","flex-1"),v(R,"class","hidden group-hover:flex"),v(l,"class","flex"),v(e,"id",G=r[0]._id),v(e,"class","flex flex-col hover:bg-gray-800 group p-4")},m(g,E){d(g,e,E),F&&F.m(e,null),b(e,n),b(e,l),z&&z.m(l,null),b(l,t),b(l,o),b(l,i),b(l,f),b(f,s),b(f,a),b(f,c),b(f,L),b(f,O),j&&j.m(f,null),b(l,U),b(l,A),b(l,q),b(l,R);for(let H=0;H<W.length;H+=1)W[H]&&W[H].m(R,null);b(e,S),p&&p.m(e,null),b(e,J),y&&y.m(e,null),b(e,x),$&&$.m(e,null),b(e,Q),k&&k.m(e,null),Z=!0},p(g,E){if(g[0].replies!=null&&g[0].replies.length!=0?F?(F.p(g,E),E[0]&1&&w(F,1)):(F=lt(g),F.c(),w(F,1),F.m(e,n)):F&&(le(),T(F,1,1,()=>{F=null}),ne()),g[1]["jolt:compact-mode"]?z&&(le(),T(z,1,1,()=>{z=null}),ne()):z?(z.p(g,E),E[0]&2&&w(z,1)):(z=rt(g),z.c(),w(z,1),z.m(l,t)),(!Z||E[0]&16)&&K(o,g[4]),(!Z||E[0]&320)&&u!==(u=g[6](g[8])+"")&&K(a,u),(!Z||E[0]&384)&&h!==(h=g[7](g[8])+"")&&K(L,h),g[0].edited!=null?j?j.p(Pe(g),E):(j=it(Pe(g)),j.c(),j.m(f,null)):j&&(j.d(1),j=null),E[0]&16385){_e=he(g[14]);let H;for(H=0;H<_e.length;H+=1){const re=et(g,_e,H);W[H]?W[H].p(re,E):(W[H]=st(re),W[H].c(),W[H].m(R,null))}for(;H<W.length;H+=1)W[H].d(1);W.length=_e.length}D===(D=Y(g))&&p?p.p(g,E):(p&&p.d(1),p=D&&D(g),p&&(p.c(),p.m(e,J))),g[0].system!=null?y?(y.p(g,E),E[0]&1&&w(y,1)):(y=ft(g),y.c(),w(y,1),y.m(e,x)):y&&(le(),T(y,1,1,()=>{y=null}),ne()),g[0].attachments!=null?$?($.p(g,E),E[0]&1&&w($,1)):($=ct(g),$.c(),w($,1),$.m(e,Q)):$&&(le(),T($,1,1,()=>{$=null}),ne()),g[0].embeds!=null?k?(k.p(g,E),E[0]&1&&w(k,1)):(k=at(g),k.c(),w(k,1),k.m(e,null)):k&&(le(),T(k,1,1,()=>{k=null}),ne()),(!Z||E[0]&1&&G!==(G=g[0]._id))&&v(e,"id",G)},i(g){Z||(w(F),w(z),w(y),w($),w(k),Z=!0)},o(g){T(F),T(z),T(y),T($),T(k),Z=!1},d(g){g&&_(e),F&&F.d(),z&&z.d(),j&&j.d(),ye(W,g),p&&p.d(),y&&y.d(),$&&$.d(),k&&k.d()}}}function hn(r,e,n){let l,t,o,i,f,s,u,a,c,h,L;ee(r,Ne,D=>n(5,a=D)),ee(r,Lt,D=>n(6,h=D)),ee(r,Gt,D=>n(7,L=D));let{message:O}=e,U,A,q;te(Rt);const R=te(Me);ee(r,R,D=>n(1,i=D));const S=te(je),J=te(yt);ee(r,J,D=>n(18,f=D)),te(Et);const x=te(Oe),Q=te(Be);ee(r,Q,D=>n(19,s=D));const G=te(It);ee(r,G,D=>n(23,u=D));const Z=te(Mt);ee(r,Z,D=>n(24,c=D));const F=[{src:`${me}/reply.svg`,alt:a("message.reply"),onclick(){c!=null&&c.some(D=>D.message._id==O._id)||Z==null||Z.update(D=>(D.push({message:O,mention:!0}),D))}},{src:`${me}/note.svg`,alt:a("message.edit"),showIf:D=>{var p;return D.author==((p=S.user)==null?void 0:p._id)},onclick:D=>n(2,U=U==null?D.content??"":void 0)},{src:`${me}/trash.svg`,alt:a("message.delete"),showIf:D=>{var p;return D.author==((p=S.user)==null?void 0:p._id)},onclick:D=>S.api.deleteMessage(D.channel,D._id)}];async function z(D,p){n(17,q=u==null?void 0:u.find(y=>y._id.server==D&&y._id.user==p))}async function j(){const D=await S.api.editMessage(O.channel,O._id,{content:U});x==null||x.update(p=>(p[p.findIndex(y=>y._id==O._id)]=D,p))}const _e=D=>D(O),W=D=>{if(!D.defaultPrevented){if(D.key=="Escape"){D.preventDefault(),n(2,U=void 0);return}D.shiftKey||D.key!="Enter"||(D.preventDefault(),j(),n(2,U=void 0))}};function Y(){U=this.value,n(2,U)}return r.$$set=D=>{"message"in D&&n(0,O=D.message)},r.$$.update=()=>{r.$$.dirty[0]&524289&&Ve(S.api,s??S.api.cache.users,O.author).then(D=>n(16,A=D)),r.$$.dirty[0]&262145&&(f==null||z(f,O.author)),r.$$.dirty[0]&196609&&n(4,l=pe(A,q,O)),r.$$.dirty[0]&196611&&n(3,t=i["jolt:low-data-mode"]?`${me}/user.svg`:be(A,q,O)),r.$$.dirty[0]&1&&n(8,o=Kt(O._id))},[O,i,U,t,l,a,h,L,o,R,J,Q,G,Z,F,j,A,q,f,s,_e,W,Y]}class mn extends $e{constructor(e){super(),we(this,e,hn,_n,ve,{message:0},null,[-1,-1])}}function ht(r,e,n){const l=r.slice();l[30]=e[n],l[32]=e,l[33]=n;const t=l[12].api.fetchUser(l[30].message.author);return l[31]=t,l}function mt(r){const e=`<${r[8]("user.unknown")}>`;r[34]=e}function pt(r){const e=pe(r[31]);r[34]=e}function dt(r,e,n){const l=r.slice();l[31]=e[n];const t=pe(l[31]);return l[34]=t,l}function bt(r,e,n){const l=r.slice();return l[37]=e[n],l}function kt(r){let e,n;return e=new mn({props:{message:r[37]}}),{c(){oe(e.$$.fragment)},l(l){se(e.$$.fragment,l)},m(l,t){fe(e,l,t),n=!0},p(l,t){const o={};t[0]&1024&&(o.message=l[37]),e.$set(o)},i(l){n||(w(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){ce(e,l)}}}function gt(r){let e,n,l,t=Array.from(r[6]).map(wt).join(", ")+"",o,i,f,s,u,a,c,h,L;return{c(){e=N("div"),n=N("p"),l=I(`Uploading
				`),o=I(t),i=P(),f=N("div"),s=P(),u=N("button"),a=N("img"),this.h()},l(O){e=C(O,"DIV",{class:!0});var U=B(e);n=C(U,"P",{});var A=B(n);l=M(A,`Uploading
				`),o=M(A,t),A.forEach(_),i=V(U),f=C(U,"DIV",{class:!0}),B(f).forEach(_),s=V(U),u=C(U,"BUTTON",{class:!0});var q=B(u);a=C(q,"IMG",{src:!0,alt:!0}),q.forEach(_),U.forEach(_),this.h()},h(){v(f,"class","flex-1"),ue(a.src,c=me+"/circle-x.svg")||v(a,"src",c),v(a,"alt","Cancel Upload"),v(u,"class","pr-2"),v(e,"class","flex")},m(O,U){d(O,e,U),b(e,n),b(n,l),b(n,o),b(e,i),b(e,f),b(e,s),b(e,u),b(u,a),h||(L=ae(u,"click",r[19]),h=!0)},p(O,U){U[0]&64&&t!==(t=Array.from(O[6]).map(wt).join(", ")+"")&&K(o,t)},d(O){O&&_(e),h=!1,L()}}}function vt(r){let e,n,l,t=r[34]+"",o,i,f=r[8]("user.is-typing")+"",s,u,a;return n=new Ee({props:{src:r[1]["jolt:low-data-mode"]?`${me}/user.svg`:be(r[31]),width:16,height:16,name:r[34]}}),{c(){e=N("div"),oe(n.$$.fragment),l=P(),o=I(t),i=P(),s=I(f),u=I("...")},l(c){e=C(c,"DIV",{});var h=B(e);se(n.$$.fragment,h),l=V(h),o=M(h,t),i=V(h),s=M(h,f),u=M(h,"..."),h.forEach(_)},m(c,h){d(c,e,h),fe(n,e,null),b(e,l),b(e,o),b(e,i),b(e,s),b(e,u),a=!0},p(c,h){const L={};h[0]&18&&(L.src=c[1]["jolt:low-data-mode"]?`${me}/user.svg`:be(c[31])),h[0]&16&&(L.name=c[34]),n.$set(L),(!a||h[0]&16)&&t!==(t=c[34]+"")&&K(o,t),(!a||h[0]&256)&&f!==(f=c[8]("user.is-typing")+"")&&K(s,f)},i(c){a||(w(n.$$.fragment,c),a=!0)},o(c){T(n.$$.fragment,c),a=!1},d(c){c&&_(e),ce(n)}}}function pn(r){mt(r);let e,n,l=r[34]+"",t,o;return e=new Ee({props:{src:me+"/user.svg",name:r[34]}}),{c(){oe(e.$$.fragment),n=P(),t=I(l)},l(i){se(e.$$.fragment,i),n=V(i),t=M(i,l)},m(i,f){fe(e,i,f),d(i,n,f),d(i,t,f),o=!0},p(i,f){mt(i);const s={};f[0]&256&&(s.name=i[34]),e.$set(s),(!o||f[0]&256)&&l!==(l=i[34]+"")&&K(t,l)},i(i){o||(w(e.$$.fragment,i),o=!0)},o(i){T(e.$$.fragment,i),o=!1},d(i){i&&(_(n),_(t)),ce(e,i)}}}function dn(r){pt(r);let e,n,l=r[34]+"",t,o;return e=new Ee({props:{src:be(r[31]),name:r[34]}}),{c(){oe(e.$$.fragment),n=P(),t=I(l)},l(i){se(e.$$.fragment,i),n=V(i),t=M(i,l)},m(i,f){fe(e,i,f),d(i,n,f),d(i,t,f),o=!0},p(i,f){pt(i);const s={};f[0]&512&&(s.src=be(i[31])),f[0]&512&&(s.name=i[34]),e.$set(s),(!o||f[0]&512)&&l!==(l=i[34]+"")&&K(t,l)},i(i){o||(w(e.$$.fragment,i),o=!0)},o(i){T(e.$$.fragment,i),o=!1},d(i){i&&(_(n),_(t)),ce(e,i)}}}function bn(r){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function $t(r){let e,n,l=r[8]("message.replying-to")+"",t,o,i,f,s,u,a=r[30].message.content+"",c,h,L,O,U,A,q,R,S,J,x,Q=r[30].mention?"ON":"OFF",G,Z,F,z,j,_e,W,Y,D,p={ctx:r,current:null,token:null,hasCatch:!0,pending:bn,then:dn,catch:pn,value:31,blocks:[,,,]};ie(f=r[31],p);function y(){r[20].call(A,r[32],r[33])}function $(){return r[21](r[30])}return{c(){e=N("div"),n=N("p"),t=I(l),o=P(),i=N("strong"),p.block.c(),s=P(),u=N("p"),c=I(a),h=P(),L=N("div"),O=P(),U=N("div"),A=N("input"),q=P(),R=N("label"),S=N("img"),x=P(),G=I(Q),Z=P(),F=N("div"),z=N("button"),j=N("img"),this.h()},l(k){e=C(k,"DIV",{class:!0});var g=B(e);n=C(g,"P",{});var E=B(n);t=M(E,l),o=V(E),i=C(E,"STRONG",{});var H=B(i);p.block.l(H),H.forEach(_),E.forEach(_),s=V(g),u=C(g,"P",{class:!0});var re=B(u);c=M(re,a),re.forEach(_),h=V(g),L=C(g,"DIV",{class:!0}),B(L).forEach(_),O=V(g),U=C(g,"DIV",{class:!0});var de=B(U);A=C(de,"INPUT",{id:!0,style:!0,type:!0}),q=V(de),R=C(de,"LABEL",{class:!0,for:!0});var ke=B(R);S=C(ke,"IMG",{src:!0,class:!0,alt:!0}),x=V(ke),G=M(ke,Q),ke.forEach(_),de.forEach(_),Z=V(g),F=C(g,"DIV",{class:!0});var Re=B(F);z=C(Re,"BUTTON",{});var Fe=B(z);j=C(Fe,"IMG",{src:!0,alt:!0}),Fe.forEach(_),Re.forEach(_),g.forEach(_),this.h()},h(){v(u,"class","pl-1 text-gray-600 overflow-ellipsis"),v(L,"class","flex-1"),v(A,"id","mention"),Ae(A,"display","none"),v(A,"type","checkbox"),ue(S.src,J=me+"/at.svg")||v(S,"src",J),v(S,"class","inline"),v(S,"alt","mention"),v(R,"class","cursor-pointer"),v(R,"for","mention"),v(U,"class","pr-2"),ue(j.src,_e=me+"/circle-x.svg")||v(j,"src",_e),v(j,"alt","Cancel mention"),v(F,"class","pr-2"),v(e,"class","flex")},m(k,g){d(k,e,g),b(e,n),b(n,t),b(n,o),b(n,i),p.block.m(i,p.anchor=null),p.mount=()=>i,p.anchor=null,b(e,s),b(e,u),b(u,c),b(e,h),b(e,L),b(e,O),b(e,U),b(U,A),A.checked=r[30].mention,b(U,q),b(U,R),b(R,S),b(R,x),b(R,G),b(e,Z),b(e,F),b(F,z),b(z,j),W=!0,Y||(D=[ae(A,"change",y),ae(z,"click",$)],Y=!0)},p(k,g){r=k,(!W||g[0]&256)&&l!==(l=r[8]("message.replying-to")+"")&&K(t,l),p.ctx=r,g[0]&512&&f!==(f=r[31])&&ie(f,p)||ge(p,r,g),(!W||g[0]&512)&&a!==(a=r[30].message.content+"")&&K(c,a),g[0]&512&&(A.checked=r[30].mention),(!W||g[0]&512)&&Q!==(Q=r[30].mention?"ON":"OFF")&&K(G,Q)},i(k){W||(w(p.block),W=!0)},o(k){for(let g=0;g<3;g+=1){const E=p.blocks[g];T(E)}W=!1},d(k){k&&_(e),p.block.d(),p.token=null,p=null,Y=!1,Se(D)}}}function kn(r){let e,n,l,t="so um hi this is the start, i should make this text box much further down i think",o,i,f,s,u,a,c,h,L,O,U,A,q,R,S,J,x,Q=he(r[10]),G=[];for(let p=0;p<Q.length;p+=1)G[p]=kt(bt(r,Q,p));const Z=p=>T(G[p],1,1,()=>{G[p]=null});let F=r[6]!=null&&r[6].length!=0&&gt(r),z=he(r[4]),j=[];for(let p=0;p<z.length;p+=1)j[p]=vt(dt(r,z,p));const _e=p=>T(j[p],1,1,()=>{j[p]=null});let W=he(r[9]),Y=[];for(let p=0;p<W.length;p+=1)Y[p]=$t(ht(r,W,p));const D=p=>T(Y[p],1,1,()=>{Y[p]=null});return{c(){e=N("main"),n=N("div"),l=N("p"),l.textContent=t,o=P();for(let p=0;p<G.length;p+=1)G[p].c();i=P(),F&&F.c(),f=P();for(let p=0;p<j.length;p+=1)j[p].c();s=P();for(let p=0;p<Y.length;p+=1)Y[p].c();u=P(),a=N("form"),c=N("label"),h=N("img"),O=P(),U=N("input"),A=P(),q=N("textarea"),this.h()},l(p){e=C(p,"MAIN",{class:!0});var y=B(e);n=C(y,"DIV",{id:!0,class:!0});var $=B(n);l=C($,"P",{"data-svelte-h":!0}),Ue(l)!=="svelte-1kz18j0"&&(l.textContent=t),o=V($);for(let E=0;E<G.length;E+=1)G[E].l($);$.forEach(_),i=V(y),F&&F.l(y),f=V(y);for(let E=0;E<j.length;E+=1)j[E].l(y);s=V(y);for(let E=0;E<Y.length;E+=1)Y[E].l(y);u=V(y),a=C(y,"FORM",{id:!0,class:!0});var k=B(a);c=C(k,"LABEL",{for:!0,class:!0});var g=B(c);h=C(g,"IMG",{src:!0,alt:!0}),g.forEach(_),O=V(k),U=C(k,"INPUT",{id:!0,class:!0,type:!0,max:!0}),A=V(k),q=C(k,"TEXTAREA",{maxlength:!0,class:!0,placeholder:!0}),B(q).forEach(_),k.forEach(_),y.forEach(_),this.h()},h(){v(n,"id","messages-list"),v(n,"class","flex flex-col h-full overflow-x-hidden overflow-y-scroll"),ue(h.src,L=me+"/plus.svg")||v(h,"src",L),v(h,"alt","Upload File"),v(c,"for","file-upload"),v(c,"class","cursor-pointer"),v(U,"id","file-upload"),v(U,"class","opacity-0 w-0 p-1"),v(U,"type","file"),U.multiple=!0,v(U,"max",5),v(q,"maxlength","2000"),v(q,"class","outline-none resize-none bg-inherit w-full h-12"),v(q,"placeholder",R=r[8]("send-message-in")+" "+r[7]),v(a,"id","message-send-form"),v(a,"class","flex bg-gray-500 rounded-xl px-2 pt-2 m-4"),v(e,"class","main-content-container flex flex-col")},m(p,y){d(p,e,y),b(e,n),b(n,l),b(n,o);for(let $=0;$<G.length;$+=1)G[$]&&G[$].m(n,null);r[18](n),b(e,i),F&&F.m(e,null),b(e,f);for(let $=0;$<j.length;$+=1)j[$]&&j[$].m(e,null);b(e,s);for(let $=0;$<Y.length;$+=1)Y[$]&&Y[$].m(e,null);b(e,u),b(e,a),b(a,c),b(c,h),b(a,O),b(a,U),r[22](U),b(a,A),b(a,q),r[25](q),S=!0,J||(x=[ae(U,"change",r[23]),ae(q,"blur",r[15]),ae(q,"input",r[16]),ae(q,"keydown",r[24]),ae(a,"submit",r[14])],J=!0)},p(p,y){if(y[0]&1024){Q=he(p[10]);let $;for($=0;$<Q.length;$+=1){const k=bt(p,Q,$);G[$]?(G[$].p(k,y),w(G[$],1)):(G[$]=kt(k),G[$].c(),w(G[$],1),G[$].m(n,null))}for(le(),$=Q.length;$<G.length;$+=1)Z($);ne()}if(p[6]!=null&&p[6].length!=0?F?F.p(p,y):(F=gt(p),F.c(),F.m(e,f)):F&&(F.d(1),F=null),y[0]&274){z=he(p[4]);let $;for($=0;$<z.length;$+=1){const k=dt(p,z,$);j[$]?(j[$].p(k,y),w(j[$],1)):(j[$]=vt(k),j[$].c(),w(j[$],1),j[$].m(e,s))}for(le(),$=z.length;$<j.length;$+=1)_e($);ne()}if(y[0]&4865){W=he(p[9]);let $;for($=0;$<W.length;$+=1){const k=ht(p,W,$);Y[$]?(Y[$].p(k,y),w(Y[$],1)):(Y[$]=$t(k),Y[$].c(),w(Y[$],1),Y[$].m(e,u))}for(le(),$=W.length;$<Y.length;$+=1)D($);ne()}(!S||y[0]&384&&R!==(R=p[8]("send-message-in")+" "+p[7]))&&v(q,"placeholder",R)},i(p){if(!S){for(let y=0;y<Q.length;y+=1)w(G[y]);for(let y=0;y<z.length;y+=1)w(j[y]);for(let y=0;y<W.length;y+=1)w(Y[y]);S=!0}},o(p){G=G.filter(Boolean);for(let y=0;y<G.length;y+=1)T(G[y]);j=j.filter(Boolean);for(let y=0;y<j.length;y+=1)T(j[y]);Y=Y.filter(Boolean);for(let y=0;y<Y.length;y+=1)T(Y[y]);S=!1},d(p){p&&_(e),ye(G,p),r[18](null),F&&F.d(),ye(j,p),ye(Y,p),r[22](null),r[25](null),J=!1,Se(x)}}}const wt=r=>r.name;function gn(r,e,n){let l,t,o,i=m,f=()=>(i(),i=Pt(U,k=>n(9,o=k)),U),s;ee(r,Ne,k=>n(8,t=k)),r.$$.on_destroy.push(()=>i());let{channel:u}=e;const a=te(Me);ee(r,a,k=>n(1,l=k));const c=te(je);let h=De([]);ee(r,h,k=>n(10,s=k));let L=De([]),O=De([]);const U=De([]);f(),Te(Oe,h),Te(It,L),Te(Be,O),Te(Mt,U);let A,q,R=[],S,J;St(()=>{q&&q.offsetHeight+q.scrollTop>q.scrollHeight-20&&Vt().then(()=>{q.scrollTo(0,q.scrollHeight)})});async function x(k){if(!k){c.removeAllListeners("ChannelStartTyping"),c.removeAllListeners("ChannelStopTyping");return}c.on("ChannelStartTyping",async({id:g,user:E})=>{var H;if(!(E==((H=c.user)==null?void 0:H._id)||g!=u._id)){for(const{_id:re}of R)if(E==re)return;n(4,R[R.length]=await c.api.fetchUser(E),R)}}),c.on("ChannelStopTyping",({id:g,user:E})=>{g==u._id&&n(4,R=R.filter(H=>H._id!=E))})}jt(()=>{c.on("Message",k=>{k.channel==u._id&&(c.api.ackMessage(u._id,k._id),h.update(g=>(g.push(k),g)))}),c.on("MessageDelete",({id:k,channel:g})=>{g==u._id&&h.update(E=>E.filter(H=>H._id!=k))}),c.on("MessageUpdate",({id:k,channel:g,data:E})=>{g==u._id&&h.update(H=>{const re=H.findIndex(ke=>ke._id==k),de=H[re];return E.content!=null&&(de.content=E.content),E.embeds!=null&&(de.embeds=E.embeds),de.edited=E.edited,H[re]=de,H})})});async function Q(){let k=[];(S==null?void 0:S.files)!=null&&(k=await Promise.all(Array.from(S.files).map(g=>c.autumn.uploadFile(g))),n(5,S.value="",S),n(6,J=null)),await c.api.sendMessage(u._id,{content:A.value.trim(),replies:o.map(({message:{_id:g},mention:E})=>({id:g,mention:E})),attachments:k}),U.set([]),n(2,A.value="",A)}let G;async function Z(k){var g;if(k.channel_type=="TextChannel"||k.channel_type=="VoiceChannel"||k.channel_type=="Group"){n(7,G=`#${k.name}`);return}if(k.channel_type=="SavedMessages"){n(7,G=t("channel.notes"));return}n(7,G=`@${pe(await c.api.fetchUser(k.recipients[0]==((g=c.user)==null?void 0:g._id)?k.recipients[1]:k.recipients[0]))}`)}function F(){l["jolt:send-typing-indicators"]&&c.websocket.send({type:"EndTyping",channel:u._id})}function z(){if(l["jolt:send-typing-indicators"]){if(A.value==""){c.websocket.send({type:"EndTyping",channel:u._id});return}c.websocket.send({type:"BeginTyping",channel:u._id})}}function j(k){Ie[k?"unshift":"push"](()=>{q=k,n(3,q)})}const _e=()=>{S!=null&&(n(5,S.value="",S),n(6,J=null))};function W(k,g){k[g].mention=this.checked,U.set(o)}const Y=k=>U.update(g=>(g=g.filter(E=>E.message._id!=k.message._id),g));function D(k){Ie[k?"unshift":"push"](()=>{S=k,n(5,S)})}function p(){J=this.files,n(6,J)}const y=k=>{k.shiftKey||k.key!="Enter"||(k.preventDefault(),Q())};function $(k){Ie[k?"unshift":"push"](()=>{A=k,n(2,A)})}return r.$$set=k=>{"channel"in k&&n(17,u=k.channel)},r.$$.update=()=>{r.$$.dirty[0]&131072&&(c.api.queryMessages(u._id,{sort:"Latest",include_users:!0}).then(k=>{Array.isArray(k)?h.set(k.reverse()):(h.set(k.messages.reverse()),O.set(k.users),L.set(k.members??[]))}),U.set([]),n(4,R=[])),r.$$.dirty[0]&2&&x(l["jolt:receive-typing-indicators"]),r.$$.dirty[0]&131072&&Z(u)},[U,l,A,q,R,S,J,G,t,o,s,a,c,h,Q,F,z,u,j,_e,W,Y,D,p,y,$]}class An extends $e{constructor(e){super(),we(this,e,gn,kn,ve,{channel:17},null,[-1,-1])}}export{An as C};
