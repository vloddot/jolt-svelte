function a(r){var e=new Error(r);return e.source="ulid",e}var i="0123456789ABCDEFGHJKMNPQRSTVWXYZ",u=i.length,f=Math.pow(2,48)-1,c=10,s=16;function m(r){var e=Math.floor(r()*u);return e===u&&(e=u-1),i.charAt(e)}function l(r,e){if(isNaN(r))throw new Error(r+" must be a number");if(r>f)throw a("cannot encode time greater than "+f);if(r<0)throw a("time must be positive");if(Number.isInteger(r)===!1)throw a("time must be an integer");for(var t=void 0,n="";e>0;e--)t=r%u,n=i.charAt(t)+n,r=(r-t)/u;return n}function h(r,e){for(var t="";r>0;r--)t=m(e)+t;return t}function N(r){if(r.length!==c+s)throw a("malformed ulid");var e=r.substr(0,c).split("").reverse().reduce(function(t,n,o){var d=i.indexOf(n);if(d===-1)throw a("invalid character found: "+n);return t+=d*Math.pow(u,o)},0);if(e>f)throw a("malformed ulid, timestamp too large");return e}function v(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=arguments[1];e||(e=typeof window<"u"?window:null);var t=e&&(e.crypto||e.msCrypto);if(t)return function(){var o=new Uint8Array(1);return t.getRandomValues(o),o[0]/255};try{var n=require("crypto");return function(){return n.randomBytes(1).readUInt8()/255}}catch{}if(r){try{console.error("secure crypto unusable, falling back to insecure Math.random()!")}catch{}return function(){return Math.random()}}throw a("secure crypto unusable, insecure Math.random not allowed")}function w(r){return r||(r=v()),function(t){return isNaN(t)&&(t=Date.now()),l(t,c)+h(s,r)}}w();export{N as d};
