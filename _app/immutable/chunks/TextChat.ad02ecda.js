import{s as _e,c as ce,n as d,h as J,d as Ct,u as Ut,g as Nt,e as Tt,r as De,k as St,b as Ae,l as Dt,m as Me,p as At,o as jt,t as Bt}from"./scheduler.88206625.js";import{S as he,i as de,g as M,h as C,j,f as _,k as u,a as b,d as w,p as Z,t as I,b as x,e as O,s as B,c as P,m as T,n as S,x as v,o as H,r as le,u as se,v as ne,w as re,y as we,z as $e,B as Ce,C as ae,E as Pt,F as Vt,l as Te,A as ye,G as Se,q as Fe}from"./index.3c623ae9.js";import{e as ue}from"./each.e59479a4.js";import{g as Q,c as Ee,a as Ie}from"./context.3d02589b.js";import{g as ge,b as pe,a as Ot}from"./util.9d7ab3cc.js";import{w as Ne}from"./index.2f769d4c.js";import{h as fe,u as ve}from"./await_block.9bbfa40c.js";import{b as Ge}from"./paths.ae39869d.js";import{a as yt,s as Lt}from"./context.fa34f1f8.js";import{U as Ue}from"./UserIcon.d6c5525a.js";import{e as Rt,Y as qt}from"./runtime.esm.d4fec816.js";import{d as Ft}from"./index.esm.4b6e8736.js";import{P as Gt}from"./PencilSquareIcon.60653a0e.js";import{P as Kt}from"./PlusIcon.d1aea949.js";async function Ve(r,e,n){if(n=="0".repeat(26))return;let t;return Array.isArray(e)?t=e.find(l=>l._id==n):t=e.get(n),t??await r.fetchUser(n)}const Et=Symbol(),Oe=Symbol(),It=Symbol(),Le=Symbol(),je=Symbol();function zt(r){const e=r.slice(),n=pe(e[14]);return e[15]=n,e}function Ke(r){var s;let e,n,t,l={ctx:r,current:null,token:null,hasCatch:!1,pending:xt,then:Xt,catch:Ht,value:13,blocks:[,,,]};return fe(n=((s=r[3])==null?void 0:s.find(r[12]))??r[6].api.fetchMessage(r[2],r[0]),l),{c(){e=O(),l.block.c()},l(i){e=O(),l.block.l(i)},m(i,c){b(i,e,c),l.block.m(i,l.anchor=c),l.mount=()=>e.parentNode,l.anchor=e,t=!0},p(i,c){var o;r=i,l.ctx=r,c&13&&n!==(n=((o=r[3])==null?void 0:o.find(r[12]))??r[6].api.fetchMessage(r[2],r[0]))&&fe(n,l)||ve(l,r,c)},i(i){t||(w(l.block),t=!0)},o(i){for(let c=0;c<3;c+=1){const o=l.blocks[c];I(o)}t=!1},d(i){i&&_(e),l.block.d(i),l.token=null,l=null}}}function Ht(r){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function Xt(r){let e,n,t,l=!r[4]["jolt:low-data-mode"]&&ze(r),s=r[13].content!=null&&He(r);return{c(){l&&l.c(),e=B(),s&&s.c(),n=O()},l(i){l&&l.l(i),e=P(i),s&&s.l(i),n=O()},m(i,c){l&&l.m(i,c),b(i,e,c),s&&s.m(i,c),b(i,n,c),t=!0},p(i,c){i[4]["jolt:low-data-mode"]?l&&(Z(),I(l,1,1,()=>{l=null}),x()):l?(l.p(i,c),c&16&&w(l,1)):(l=ze(i),l.c(),w(l,1),l.m(e.parentNode,e)),i[13].content!=null?s?s.p(i,c):(s=He(i),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},i(i){t||(w(l),t=!0)},o(i){I(l),t=!1},d(i){i&&(_(e),_(n)),l&&l.d(i),s&&s.d(i)}}}function ze(r){let e,n,t,l={ctx:r,current:null,token:null,hasCatch:!1,pending:Zt,then:Yt,catch:Wt,value:14,blocks:[,,,]};return fe(e=Ve(r[6].api,r[5]??r[6].api.cache.users,r[13].author),l),{c(){l.block.c(),n=T(":")},l(s){l.block.l(s),n=S(s,":")},m(s,i){l.block.m(s,l.anchor=i),l.mount=()=>n.parentNode,l.anchor=n,b(s,n,i),t=!0},p(s,i){r=s,l.ctx=r,i&45&&e!==(e=Ve(r[6].api,r[5]??r[6].api.cache.users,r[13].author))&&fe(e,l)||ve(l,r,i)},i(s){t||(w(l.block),t=!0)},o(s){for(let i=0;i<3;i+=1){const c=l.blocks[i];I(c)}t=!1},d(s){s&&_(n),l.block.d(s),l.token=null,l=null}}}function Wt(r){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function Yt(r){let e,n,t,l;const s=[Qt,Jt],i=[];function c(f,h){return f[14]!=null?0:1}function o(f,h){return h===0?zt(f):f}return e=c(r),n=i[e]=s[e](o(r,e)),{c(){n.c(),t=B()},l(f){n.l(f),t=P(f)},m(f,h){i[e].m(f,h),b(f,t,h),l=!0},p(f,h){let m=e;e=c(f),e===m?i[e].p(o(f,e),h):(Z(),I(i[m],1,1,()=>{i[m]=null}),x(),n=i[e],n?n.p(o(f,e),h):(n=i[e]=s[e](o(f,e)),n.c()),w(n,1),n.m(t.parentNode,t))},i(f){l||(w(n),l=!0)},o(f){I(n),l=!1},d(f){f&&_(t),i[e].d(f)}}}function Jt(r){let e,n,t;return e=new Ue({}),{c(){le(e.$$.fragment),n=T(`

						Unknown User`)},l(l){se(e.$$.fragment,l),n=S(l,`

						Unknown User`)},m(l,s){ne(e,l,s),b(l,n,s),t=!0},p:d,i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){l&&_(n),re(e,l)}}}function Qt(r){let e,n,t,l,s=r[15]+"",i;return{c(){e=M("img"),l=B(),i=T(s),this.h()},l(c){e=C(c,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),l=P(c),i=S(c,s),this.h()},h(){u(e,"class","cover"),J(e.src,n=ge(r[14]))||u(e,"src",n),u(e,"alt",t=r[15]),u(e,"width","24px"),u(e,"height","24px")},m(c,o){b(c,e,o),b(c,l,o),b(c,i,o)},p(c,o){o&45&&!J(e.src,n=ge(c[14]))&&u(e,"src",n),o&45&&t!==(t=c[15])&&u(e,"alt",t),o&45&&s!==(s=c[15]+"")&&H(i,s)},i:d,o:d,d(c){c&&(_(e),_(l),_(i))}}}function Zt(r){let e;return{c(){e=T(`<Unknown User>
				`)},l(n){e=S(n,`<Unknown User>
				`)},m(n,t){b(n,e,t)},p:d,i:d,o:d,d(n){n&&_(e)}}}function He(r){let e,n=r[13].content+"",t;return{c(){e=M("span"),t=T(n),this.h()},l(l){e=C(l,"SPAN",{class:!0});var s=j(e);t=S(s,n),s.forEach(_),this.h()},h(){u(e,"class","text-gray-600")},m(l,s){b(l,e,s),v(e,t)},p(l,s){s&13&&n!==(n=l[13].content+"")&&H(t,n)},d(l){l&&_(e)}}}function xt(r){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function el(r){let e,n,t,l=r[2]!=null&&Ke(r);return{c(){e=M("a"),l&&l.c(),this.h()},l(s){e=C(s,"A",{href:!0});var i=j(e);l&&l.l(i),i.forEach(_),this.h()},h(){u(e,"href",n=Ge+"/"+(r[1]==null?`channels/${r[2]}#${r[0]}`:`servers/${r[1]}/channels/${r[2]}#${r[0]}`))},m(s,i){b(s,e,i),l&&l.m(e,null),t=!0},p(s,[i]){s[2]!=null?l?(l.p(s,i),i&4&&w(l,1)):(l=Ke(s),l.c(),w(l,1),l.m(e,null)):l&&(Z(),I(l,1,1,()=>{l=null}),x()),(!t||i&7&&n!==(n=Ge+"/"+(s[1]==null?`channels/${s[2]}#${s[0]}`:`servers/${s[1]}/channels/${s[2]}#${s[0]}`)))&&u(e,"href",n)},i(s){t||(w(l),t=!0)},o(s){I(l),t=!1},d(s){s&&_(e),l&&l.d()}}}function tl(r,e,n){let t,l,s,i,c;const o=Q(Ee),f=Q(Ie);ce(r,f,N=>n(4,i=N));const h=Q(yt);ce(r,h,N=>n(1,t=N));const m=Q(Lt);ce(r,m,N=>n(2,l=N));const a=Q(Oe);ce(r,a,N=>n(3,s=N));const p=Q(Le);ce(r,p,N=>n(5,c=N));let{id:E}=e;const q=({_id:N})=>E==N;return r.$$set=N=>{"id"in N&&n(0,E=N.id)},[E,t,l,s,i,c,o,f,h,m,a,p,q]}class ll extends he{constructor(e){super(),de(this,e,tl,el,_e,{id:0})}}function nl(r){let e,n;return{c(){e=we("svg"),n=we("path"),this.h()},l(t){e=$e(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var l=j(e);n=$e(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),j(n).forEach(_),l.forEach(_),this.h()},h(){u(n,"stroke-linecap","round"),u(n,"stroke-linejoin","round"),u(n,"d","M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"width","24px"),u(e,"height","24px")},m(t,l){b(t,e,l),v(e,n)},p:d,i:d,o:d,d(t){t&&_(e)}}}class rl extends he{constructor(e){super(),de(this,e,null,nl,_e,{})}}function il(r){let e,n;return{c(){e=we("svg"),n=we("path"),this.h()},l(t){e=$e(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var l=j(e);n=$e(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),j(n).forEach(_),l.forEach(_),this.h()},h(){u(n,"stroke-linecap","round"),u(n,"stroke-linejoin","round"),u(n,"d","M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"width","24px"),u(e,"height","24px")},m(t,l){b(t,e,l),v(e,n)},p:d,i:d,o:d,d(t){t&&_(e)}}}class sl extends he{constructor(e){super(),de(this,e,null,il,_e,{})}}function Xe(r){const e=pe(r[3]);r[4]=e}function We(r){r[5]=r[7][0],r[6]=r[7][1]}function Ye(r){const e=pe(r[3]);r[4]=e}function ol(r){let e,n,t={ctx:r,current:null,token:null,hasCatch:!1,pending:gl,then:_l,catch:ul,value:3};return fe(n=r[1].api.fetchUser(r[0].id),t),{c(){e=O(),t.block.c()},l(l){e=O(),t.block.l(l)},m(l,s){b(l,e,s),t.block.m(l,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e},p(l,s){r=l,t.ctx=r,s&1&&n!==(n=r[1].api.fetchUser(r[0].id))&&fe(n,t)||ve(t,r,s)},d(l){l&&_(e),t.block.d(l),t.token=null,t=null}}}function cl(r){let e,n,t={ctx:r,current:null,token:null,hasCatch:!1,pending:vl,then:kl,catch:bl,value:7};return fe(n=Promise.all([r[0].from,r[0].to].map(r[2])),t),{c(){e=O(),t.block.c()},l(l){e=O(),t.block.l(l)},m(l,s){b(l,e,s),t.block.m(l,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e},p(l,s){r=l,t.ctx=r,s&1&&n!==(n=Promise.all([r[0].from,r[0].to].map(r[2])))&&fe(n,t)||ve(t,r,s)},d(l){l&&_(e),t.block.d(l),t.token=null,t=null}}}function fl(r){let e,n,t={ctx:r,current:null,token:null,hasCatch:!1,pending:Dl,then:$l,catch:wl,value:3};return fe(n=r[1].api.fetchUser(r[0].by),t),{c(){e=O(),t.block.c()},l(l){e=O(),t.block.l(l)},m(l,s){b(l,e,s),t.block.m(l,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e},p(l,s){r=l,t.ctx=r,s&1&&n!==(n=r[1].api.fetchUser(r[0].by))&&fe(n,t)||ve(t,r,s)},d(l){l&&_(e),t.block.d(l),t.token=null,t=null}}}function al(r){let e=r[0].content+"",n;return{c(){n=T(e)},l(t){n=S(t,e)},m(t,l){b(t,n,l)},p(t,l){l&1&&e!==(e=t[0].content+"")&&H(n,e)},d(t){t&&_(n)}}}function ul(r){return{c:d,l:d,m:d,p:d,d}}function _l(r){Xe(r);let e,n,t,l,s=r[4]+"",i,c,o;function f(a,p){if(a[0].type=="user_banned")return pl;if(a[0].type=="user_joined")return ml;if(a[0].type=="user_kicked")return dl;if(a[0].type=="user_left")return hl}let h=f(r),m=h&&h(r);return{c(){e=M("img"),l=B(),i=T(s),c=B(),m&&m.c(),o=O(),this.h()},l(a){e=C(a,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),l=P(a),i=S(a,s),c=P(a),m&&m.l(a),o=O(),this.h()},h(){u(e,"class","cover"),J(e.src,n=ge(r[3]))||u(e,"src",n),u(e,"width","24px"),u(e,"height","24px"),u(e,"alt",t=r[4])},m(a,p){b(a,e,p),b(a,l,p),b(a,i,p),b(a,c,p),m&&m.m(a,p),b(a,o,p)},p(a,p){Xe(a),p&1&&!J(e.src,n=ge(a[3]))&&u(e,"src",n),p&1&&t!==(t=a[4])&&u(e,"alt",t),p&1&&s!==(s=a[4]+"")&&H(i,s),h!==(h=f(a))&&(m&&m.d(1),m=h&&h(a),m&&(m.c(),m.m(o.parentNode,o)))},d(a){a&&(_(e),_(l),_(i),_(c),_(o)),m&&m.d(a)}}}function hl(r){let e;return{c(){e=T("left the chat.")},l(n){e=S(n,"left the chat.")},m(n,t){b(n,e,t)},d(n){n&&_(e)}}}function dl(r){let e;return{c(){e=T("was kicked.")},l(n){e=S(n,"was kicked.")},m(n,t){b(n,e,t)},d(n){n&&_(e)}}}function ml(r){let e;return{c(){e=T("has joined the chat.")},l(n){e=S(n,"has joined the chat.")},m(n,t){b(n,e,t)},d(n){n&&_(e)}}}function pl(r){let e;return{c(){e=T("was banned.")},l(n){e=S(n,"was banned.")},m(n,t){b(n,e,t)},d(n){n&&_(e)}}}function gl(r){return{c:d,l:d,m:d,p:d,d}}function bl(r){return{c:d,l:d,m:d,p:d,d}}function kl(r){We(r);let e,n=pe(r[5])+"",t,l,s=pe(r[6])+"",i,c;return{c(){e=T("Channel ownership changed from "),t=T(n),l=T(" to "),i=T(s),c=T(".")},l(o){e=S(o,"Channel ownership changed from "),t=S(o,n),l=S(o," to "),i=S(o,s),c=S(o,".")},m(o,f){b(o,e,f),b(o,t,f),b(o,l,f),b(o,i,f),b(o,c,f)},p(o,f){We(o),f&1&&n!==(n=pe(o[5])+"")&&H(t,n),f&1&&s!==(s=pe(o[6])+"")&&H(i,s)},d(o){o&&(_(e),_(t),_(l),_(i),_(c))}}}function vl(r){return{c:d,l:d,m:d,p:d,d}}function wl(r){return{c:d,l:d,m:d,p:d,d}}function $l(r){Ye(r);let e,n,t,l,s=r[4]+"",i,c,o;function f(a,p){if(a[0].type=="channel_description_changed")return Ml;if(a[0].type=="channel_icon_changed")return Il;if(a[0].type=="channel_renamed")return El;if(a[0].type=="user_added"||a[0].type=="user_remove")return yl}let h=f(r),m=h&&h(r);return{c(){e=M("img"),l=B(),i=T(s),c=B(),m&&m.c(),o=O(),this.h()},l(a){e=C(a,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),l=P(a),i=S(a,s),c=P(a),m&&m.l(a),o=O(),this.h()},h(){u(e,"class","cover"),J(e.src,n=ge(r[3]))||u(e,"src",n),u(e,"width","24px"),u(e,"height","24px"),u(e,"alt",t=r[4])},m(a,p){b(a,e,p),b(a,l,p),b(a,i,p),b(a,c,p),m&&m.m(a,p),b(a,o,p)},p(a,p){Ye(a),p&1&&!J(e.src,n=ge(a[3]))&&u(e,"src",n),p&1&&t!==(t=a[4])&&u(e,"alt",t),p&1&&s!==(s=a[4]+"")&&H(i,s),h===(h=f(a))&&m?m.p(a,p):(m&&m.d(1),m=h&&h(a),m&&(m.c(),m.m(o.parentNode,o)))},d(a){a&&(_(e),_(l),_(i),_(c),_(o)),m&&m.d(a)}}}function yl(r){let e,n,t={ctx:r,current:null,token:null,hasCatch:!1,pending:Sl,then:Ul,catch:Cl,value:3};return fe(n=r[1].api.fetchUser(r[0].id),t),{c(){e=O(),t.block.c()},l(l){e=O(),t.block.l(l)},m(l,s){b(l,e,s),t.block.m(l,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e},p(l,s){r=l,t.ctx=r,s&1&&n!==(n=r[1].api.fetchUser(r[0].id))&&fe(n,t)||ve(t,r,s)},d(l){l&&_(e),t.block.d(l),t.token=null,t=null}}}function El(r){let e,n=r[0].name+"",t,l;return{c(){e=T("renamed this channel to "),t=T(n),l=T(".")},l(s){e=S(s,"renamed this channel to "),t=S(s,n),l=S(s,".")},m(s,i){b(s,e,i),b(s,t,i),b(s,l,i)},p(s,i){i&1&&n!==(n=s[0].name+"")&&H(t,n)},d(s){s&&(_(e),_(t),_(l))}}}function Il(r){let e;return{c(){e=T("changes this channel icon.")},l(n){e=S(n,"changes this channel icon.")},m(n,t){b(n,e,t)},p:d,d(n){n&&_(e)}}}function Ml(r){let e;return{c(){e=T("changed this channel's description.")},l(n){e=S(n,"changed this channel's description.")},m(n,t){b(n,e,t)},p:d,d(n){n&&_(e)}}}function Cl(r){return{c:d,l:d,m:d,p:d,d}}function Ul(r){let e,n=pe(r[3])+"",t,l;function s(o,f){if(o[0].type=="user_added")return Tl;if(o[0].type=="user_remove")return Nl}let i=s(r),c=i&&i(r);return{c(){c&&c.c(),e=B(),t=T(n),l=T(".")},l(o){c&&c.l(o),e=P(o),t=S(o,n),l=S(o,".")},m(o,f){c&&c.m(o,f),b(o,e,f),b(o,t,f),b(o,l,f)},p(o,f){i!==(i=s(o))&&(c&&c.d(1),c=i&&i(o),c&&(c.c(),c.m(e.parentNode,e))),f&1&&n!==(n=pe(o[3])+"")&&H(t,n)},d(o){o&&(_(e),_(t),_(l)),c&&c.d(o)}}}function Nl(r){let e;return{c(){e=T("removed")},l(n){e=S(n,"removed")},m(n,t){b(n,e,t)},d(n){n&&_(e)}}}function Tl(r){let e;return{c(){e=T("added")},l(n){e=S(n,"added")},m(n,t){b(n,e,t)},d(n){n&&_(e)}}}function Sl(r){return{c:d,l:d,m:d,p:d,d}}function Dl(r){return{c:d,l:d,m:d,p:d,d}}function Al(r){let e;function n(s,i){if(s[0].type=="text")return al;if(s[0].type=="channel_description_changed"||s[0].type=="channel_icon_changed"||s[0].type=="channel_renamed"||s[0].type=="user_added"||s[0].type=="user_remove")return fl;if(s[0].type=="channel_ownership_changed")return cl;if(s[0].type=="user_banned"||s[0].type=="user_joined"||s[0].type=="user_kicked"||s[0].type=="user_left")return ol}let t=n(r),l=t&&t(r);return{c(){l&&l.c(),e=O()},l(s){l&&l.l(s),e=O()},m(s,i){l&&l.m(s,i),b(s,e,i)},p(s,[i]){t===(t=n(s))&&l?l.p(s,i):(l&&l.d(1),l=t&&t(s),l&&(l.c(),l.m(e.parentNode,e)))},i:d,o:d,d(s){s&&_(e),l&&l.d(s)}}}function jl(r,e,n){const t=Q(Ee);let{system:l}=e;const s=i=>t.api.fetchUser(i);return r.$$set=i=>{"system"in i&&n(0,l=i.system)},[l,t,s]}class Bl extends he{constructor(e){super(),de(this,e,jl,Al,_e,{system:0})}}function Pl(r){let e,n,t,l,s,i,c,o="Ok",f,h,m="Cancel",a,p,E;const q=r[3].default,N=Ct(q,r,r[2],null);return{c(){e=M("dialog"),n=M("div"),N&&N.c(),t=B(),l=M("hr"),s=B(),i=M("form"),c=M("button"),c.textContent=o,f=B(),h=M("button"),h.textContent=m,this.h()},l(U){e=C(U,"DIALOG",{});var G=j(e);n=C(G,"DIV",{});var $=j(n);N&&N.l($),t=P($),l=C($,"HR",{}),s=P($),i=C($,"FORM",{id:!0,method:!0});var k=j(i);c=C(k,"BUTTON",{type:!0,"data-svelte-h":!0}),Ce(c)!=="svelte-fdbbw9"&&(c.textContent=o),f=P(k),h=C(k,"BUTTON",{type:!0,"data-svelte-h":!0}),Ce(h)!=="svelte-1gqjcfl"&&(h.textContent=m),k.forEach(_),$.forEach(_),G.forEach(_),this.h()},h(){u(c,"type","submit"),u(h,"type","reset"),u(i,"id","modal-form"),u(i,"method","dialog")},m(U,G){b(U,e,G),v(e,n),N&&N.m(n,null),v(n,t),v(n,l),v(n,s),v(n,i),v(i,c),v(i,f),v(i,h),r[6](e),a=!0,p||(E=[ae(h,"click",r[5]),ae(i,"submit",r[4]),ae(e,"close",r[7])],p=!0)},p(U,[G]){N&&N.p&&(!a||G&4)&&Ut(N,q,U,U[2],a?Tt(q,U[2],G,null):Nt(U[2]),null)},i(U){a||(w(N,U),a=!0)},o(U){I(N,U),a=!1},d(U){U&&_(e),N&&N.d(U),r[6](null),p=!1,De(E)}}}function Vl(r,e,n){let{$$slots:t={},$$scope:l}=e,{showModal:s}=e,i;function c(m){St.call(this,r,m)}const o=()=>n(0,s=!1);function f(m){Ae[m?"unshift":"push"](()=>{i=m,n(1,i)})}const h=()=>n(0,s=!1);return r.$$set=m=>{"showModal"in m&&n(0,s=m.showModal),"$$scope"in m&&n(2,l=m.$$scope)},r.$$.update=()=>{r.$$.dirty&3&&(s?i==null||i.showModal():i==null||i.close())},[s,i,l,t,c,o,f,h]}class Ol extends he{constructor(e){super(),de(this,e,Vl,Pl,_e,{showModal:0})}}function Ll(r){let e,n="External Link",t,l,s,i,c="Are you sure you want to go to this link? External links can be dangerous.";return{c(){e=M("h1"),e.textContent=n,t=B(),l=M("hr"),s=B(),i=M("p"),i.textContent=c,this.h()},l(o){e=C(o,"H1",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-qkxu7n"&&(e.textContent=n),t=P(o),l=C(o,"HR",{}),s=P(o),i=C(o,"P",{"data-svelte-h":!0}),Ce(i)!=="svelte-os1rtp"&&(i.textContent=c),this.h()},h(){u(e,"class","text-3xl")},m(o,f){b(o,e,f),b(o,t,f),b(o,l,f),b(o,s,f),b(o,i,f)},p:d,d(o){o&&(_(e),_(t),_(l),_(s),_(i))}}}function Rl(r){let e,n,t,l,s,i,c,o;function f(m){r[2](m)}let h={$$slots:{default:[Ll]},$$scope:{ctx:r}};return r[1]!==void 0&&(h.showModal=r[1]),e=new Ol({props:h}),Ae.push(()=>Pt(e,"showModal",f)),e.$on("submit",r[3]),{c(){le(e.$$.fragment),t=B(),l=M("a"),s=T(r[0]),this.h()},l(m){se(e.$$.fragment,m),t=P(m),l=C(m,"A",{href:!0,target:!0,rel:!0});var a=j(l);s=S(a,r[0]),a.forEach(_),this.h()},h(){u(l,"href",r[0]),u(l,"target","_blank"),u(l,"rel","noreferrer")},m(m,a){ne(e,m,a),b(m,t,a),b(m,l,a),v(l,s),i=!0,c||(o=ae(l,"click",Vt(r[4])),c=!0)},p(m,[a]){const p={};a&32&&(p.$$scope={dirty:a,ctx:m}),!n&&a&2&&(n=!0,p.showModal=m[1],Dt(()=>n=!1)),e.$set(p),(!i||a&1)&&H(s,m[0]),(!i||a&1)&&u(l,"href",m[0])},i(m){i||(w(e.$$.fragment,m),i=!0)},o(m){I(e.$$.fragment,m),i=!1},d(m){m&&(_(t),_(l)),re(e,m),c=!1,o()}}}function ql(r,e,n){let{href:t}=e,l=!1;function s(o){l=o,n(1,l)}const i=()=>window.open(t),c=()=>n(1,l=!0);return r.$$set=o=>{"href"in o&&n(0,t=o.href)},[t,l,s,i,c]}class Re extends he{constructor(e){super(),de(this,e,ql,Rl,_e,{href:0})}}function Fl(r){let e,n,t,l;const s=[Wl,Xl],i=[];function c(o,f){return o[2]["jolt:low-data-mode"]?0:1}return e=c(r),n=i[e]=s[e](r),{c(){n.c(),t=O()},l(o){n.l(o),t=O()},m(o,f){i[e].m(o,f),b(o,t,f),l=!0},p(o,f){let h=e;e=c(o),e===h?i[e].p(o,f):(Z(),I(i[h],1,1,()=>{i[h]=null}),x(),n=i[e],n?n.p(o,f):(n=i[e]=s[e](o),n.c()),w(n,1),n.m(t.parentNode,t))},i(o){l||(w(n),l=!0)},o(o){I(n),l=!1},d(o){o&&_(t),i[e].d(o)}}}function Gl(r){let e,n,t=r[0].filename+"",l,s,i,c;return i=new Re({props:{href:r[1]}}),{c(){e=M("span"),n=T("[File "),l=T(t),s=T(`]
			`),le(i.$$.fragment),this.h()},l(o){e=C(o,"SPAN",{class:!0});var f=j(e);n=S(f,"[File "),l=S(f,t),s=S(f,`]
			`),se(i.$$.fragment,f),f.forEach(_),this.h()},h(){u(e,"class","text-gray-500")},m(o,f){b(o,e,f),v(e,n),v(e,l),v(e,s),ne(i,e,null),c=!0},p(o,f){(!c||f&1)&&t!==(t=o[0].filename+"")&&H(l,t);const h={};f&2&&(h.href=o[1]),i.$set(h)},i(o){c||(w(i.$$.fragment,o),c=!0)},o(o){I(i.$$.fragment,o),c=!1},d(o){o&&_(e),re(i)}}}function Kl(r){let e,n,t;return{c(){e=M("audio"),n=M("source"),this.h()},l(l){e=C(l,"AUDIO",{});var s=j(e);n=C(s,"SOURCE",{src:!0}),s.forEach(_),this.h()},h(){J(n.src,t=r[1])||u(n,"src",t),e.controls=!0},m(l,s){b(l,e,s),v(e,n)},p(l,s){s&2&&!J(n.src,t=l[1])&&u(n,"src",t)},i:d,o:d,d(l){l&&_(e)}}}function zl(r){let e,n,t;return{c(){e=M("video"),n=M("source"),this.h()},l(l){e=C(l,"VIDEO",{});var s=j(e);n=C(s,"SOURCE",{src:!0}),s.forEach(_),this.h()},h(){J(n.src,t=r[1])||u(n,"src",t),e.controls=!0},m(l,s){b(l,e,s),v(e,n)},p(l,s){s&2&&!J(n.src,t=l[1])&&u(n,"src",t)},i:d,o:d,d(l){l&&_(e)}}}function Hl(r){let e,n,t,l;const s=[ln,tn],i=[];function c(o,f){return o[2]["jolt:low-data-mode"]?0:1}return e=c(r),n=i[e]=s[e](r),{c(){n.c(),t=O()},l(o){n.l(o),t=O()},m(o,f){i[e].m(o,f),b(o,t,f),l=!0},p(o,f){let h=e;e=c(o),e===h?i[e].p(o,f):(Z(),I(i[h],1,1,()=>{i[h]=null}),x(),n=i[e],n?n.p(o,f):(n=i[e]=s[e](o),n.c()),w(n,1),n.m(t.parentNode,t))},i(o){l||(w(n),l=!0)},o(o){I(n),l=!1},d(o){o&&_(t),i[e].d(o)}}}function Xl(r){let e,n,t={ctx:r,current:null,token:null,hasCatch:!0,pending:en,then:Jl,catch:Yl,value:4,error:6};return fe(n=fetch(r[1]),t),{c(){e=O(),t.block.c()},l(l){e=O(),t.block.l(l)},m(l,s){b(l,e,s),t.block.m(l,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e},p(l,s){r=l,t.ctx=r,s&2&&n!==(n=fetch(r[1]))&&fe(n,t)||ve(t,r,s)},i:d,o:d,d(l){l&&_(e),t.block.d(l),t.token=null,t=null}}}function Wl(r){let e,n,t,l,s;return t=new Re({props:{href:r[1]}}),{c(){e=M("span"),n=T("[Text "),le(t.$$.fragment),l=T("]"),this.h()},l(i){e=C(i,"SPAN",{class:!0});var c=j(e);n=S(c,"[Text "),se(t.$$.fragment,c),l=S(c,"]"),c.forEach(_),this.h()},h(){u(e,"class","text-gray-500")},m(i,c){b(i,e,c),v(e,n),ne(t,e,null),v(e,l),s=!0},p(i,c){const o={};c&2&&(o.href=i[1]),t.$set(o)},i(i){s||(w(t.$$.fragment,i),s=!0)},o(i){I(t.$$.fragment,i),s=!1},d(i){i&&_(e),re(t)}}}function Yl(r){let e,n,t=r[0].filename+"",l,s,i=r[6]+"",c;return{c(){e=M("p"),n=T("Unable to download "),l=T(t),s=T(": "),c=T(i)},l(o){e=C(o,"P",{});var f=j(e);n=S(f,"Unable to download "),l=S(f,t),s=S(f,": "),c=S(f,i),f.forEach(_)},m(o,f){b(o,e,f),v(e,n),v(e,l),v(e,s),v(e,c)},p(o,f){f&1&&t!==(t=o[0].filename+"")&&H(l,t),f&2&&i!==(i=o[6]+"")&&H(c,i)},d(o){o&&_(e)}}}function Jl(r){let e,n,t={ctx:r,current:null,token:null,hasCatch:!1,pending:xl,then:Zl,catch:Ql,value:5};return fe(n=r[4].text(),t),{c(){e=O(),t.block.c()},l(l){e=O(),t.block.l(l)},m(l,s){b(l,e,s),t.block.m(l,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e},p(l,s){r=l,t.ctx=r,s&2&&n!==(n=r[4].text())&&fe(n,t)||ve(t,r,s)},d(l){l&&_(e),t.block.d(l),t.token=null,t=null}}}function Ql(r){return{c:d,l:d,m:d,p:d,d}}function Zl(r){let e,n=r[5]+"",t;return{c(){e=M("p"),t=T(n)},l(l){e=C(l,"P",{});var s=j(e);t=S(s,n),s.forEach(_)},m(l,s){b(l,e,s),v(e,t)},p(l,s){s&2&&n!==(n=l[5]+"")&&H(t,n)},d(l){l&&_(e)}}}function xl(r){return{c:d,l:d,m:d,p:d,d}}function en(r){return{c:d,l:d,m:d,p:d,d}}function tn(r){let e,n,t;return{c(){e=M("img"),this.h()},l(l){e=C(l,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){J(e.src,n=r[1])||u(e,"src",n),u(e,"alt",t=r[0].filename),u(e,"class","max-w-xl max-h-xl")},m(l,s){b(l,e,s)},p(l,s){s&2&&!J(e.src,n=l[1])&&u(e,"src",n),s&1&&t!==(t=l[0].filename)&&u(e,"alt",t)},i:d,o:d,d(l){l&&_(e)}}}function ln(r){let e,n,t,l,s;return t=new Re({props:{href:r[1]}}),{c(){e=M("span"),n=T("[Image "),le(t.$$.fragment),l=T("]"),this.h()},l(i){e=C(i,"SPAN",{class:!0});var c=j(e);n=S(c,"[Image "),se(t.$$.fragment,c),l=S(c,"]"),c.forEach(_),this.h()},h(){u(e,"class","text-gray-500")},m(i,c){b(i,e,c),v(e,n),ne(t,e,null),v(e,l),s=!0},p(i,c){const o={};c&2&&(o.href=i[1]),t.$set(o)},i(i){s||(w(t.$$.fragment,i),s=!0)},o(i){I(t.$$.fragment,i),s=!1},d(i){i&&_(e),re(t)}}}function nn(r){let e,n,t,l;const s=[Hl,zl,Kl,Gl,Fl],i=[];function c(o,f){return o[0].metadata.type=="Image"?0:o[0].metadata.type=="Video"?1:o[0].metadata.type=="Audio"?2:o[0].metadata.type=="File"?3:o[0].metadata.type=="Text"?4:-1}return~(n=c(r))&&(t=i[n]=s[n](r)),{c(){e=M("div"),t&&t.c()},l(o){e=C(o,"DIV",{});var f=j(e);t&&t.l(f),f.forEach(_)},m(o,f){b(o,e,f),~n&&i[n].m(e,null),l=!0},p(o,[f]){let h=n;n=c(o),n===h?~n&&i[n].p(o,f):(t&&(Z(),I(i[h],1,1,()=>{i[h]=null}),x()),~n?(t=i[n],t?t.p(o,f):(t=i[n]=s[n](o),t.c()),w(t,1),t.m(e,null)):t=null)},i(o){l||(w(t),l=!0)},o(o){I(t),l=!1},d(o){o&&_(e),~n&&i[n].d()}}}function rn(r,e,n){let t,l;const s=Q(Ie);ce(r,s,c=>n(2,l=c));let{attachment:i}=e;return r.$$set=c=>{"attachment"in c&&n(0,i=c.attachment)},r.$$.update=()=>{r.$$.dirty&1&&n(1,t=Ot(i))},[i,t,l,s]}class sn extends he{constructor(e){super(),de(this,e,rn,nn,_e,{attachment:0})}}function on(r){let e,n="oop website embed, can't handle that :(";return{c(){e=M("span"),e.textContent=n,this.h()},l(t){e=C(t,"SPAN",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-1exisih"&&(e.textContent=n),this.h()},h(){u(e,"class","text-gray-600")},m(t,l){b(t,e,l)},p:d,d(t){t&&_(e)}}}function cn(r){let e,n,t,l=r[0].icon_url&&!r[1]["jolt:low-data-mode"]&&Je(r),s=r[0].title&&Qe(r),i=r[0].description&&Ze(r);return{c(){e=M("div"),l&&l.c(),n=B(),s&&s.c(),t=B(),i&&i.c(),this.h()},l(c){e=C(c,"DIV",{style:!0});var o=j(e);l&&l.l(o),n=P(o),s&&s.l(o),t=P(o),i&&i.l(o),o.forEach(_),this.h()},h(){Te(e,"background-color",r[0].colour)},m(c,o){b(c,e,o),l&&l.m(e,null),v(e,n),s&&s.m(e,null),v(e,t),i&&i.m(e,null)},p(c,o){c[0].icon_url&&!c[1]["jolt:low-data-mode"]?l?l.p(c,o):(l=Je(c),l.c(),l.m(e,n)):l&&(l.d(1),l=null),c[0].title?s?s.p(c,o):(s=Qe(c),s.c(),s.m(e,t)):s&&(s.d(1),s=null),c[0].description?i?i.p(c,o):(i=Ze(c),i.c(),i.m(e,null)):i&&(i.d(1),i=null),o&1&&Te(e,"background-color",c[0].colour)},d(c){c&&_(e),l&&l.d(),s&&s.d(),i&&i.d()}}}function fn(r){let e,n,t,l,s;return{c(){e=M("video"),n=M("source"),this.h()},l(i){e=C(i,"VIDEO",{});var c=j(e);n=C(c,"SOURCE",{src:!0,width:!0,height:!0}),c.forEach(_),this.h()},h(){J(n.src,t=r[0].url)||u(n,"src",t),u(n,"width",l=r[0].width),u(n,"height",s=r[0].height),e.controls=!0},m(i,c){b(i,e,c),v(e,n)},p(i,c){c&1&&!J(n.src,t=i[0].url)&&u(n,"src",t),c&1&&l!==(l=i[0].width)&&u(n,"width",l),c&1&&s!==(s=i[0].height)&&u(n,"height",s)},d(i){i&&_(e)}}}function an(r){let e,n,t,l;return{c(){e=M("img"),this.h()},l(s){e=C(s,"IMG",{src:!0,width:!0,height:!0}),this.h()},h(){J(e.src,n=r[0].url)||u(e,"src",n),u(e,"width",t=r[0].width),u(e,"height",l=r[0].height)},m(s,i){b(s,e,i)},p(s,i){i&1&&!J(e.src,n=s[0].url)&&u(e,"src",n),i&1&&t!==(t=s[0].width)&&u(e,"width",t),i&1&&l!==(l=s[0].height)&&u(e,"height",l)},d(s){s&&_(e)}}}function Je(r){let e,n,t;return{c(){e=M("img"),this.h()},l(l){e=C(l,"IMG",{src:!0,alt:!0,width:!0,height:!0,class:!0}),this.h()},h(){J(e.src,n=r[0].icon_url)||u(e,"src",n),u(e,"alt",t=r[0].title),u(e,"width","24"),u(e,"height","24"),u(e,"class","inline rounded-3xl")},m(l,s){b(l,e,s)},p(l,s){s&1&&!J(e.src,n=l[0].icon_url)&&u(e,"src",n),s&1&&t!==(t=l[0].title)&&u(e,"alt",t)},d(l){l&&_(e)}}}function Qe(r){let e,n=r[0].title+"",t;return{c(){e=M("h1"),t=T(n),this.h()},l(l){e=C(l,"H1",{class:!0});var s=j(e);t=S(s,n),s.forEach(_),this.h()},h(){u(e,"class","text-gray-600")},m(l,s){b(l,e,s),v(e,t)},p(l,s){s&1&&n!==(n=l[0].title+"")&&H(t,n)},d(l){l&&_(e)}}}function Ze(r){let e,n=r[0].description+"",t;return{c(){e=M("p"),t=T(n)},l(l){e=C(l,"P",{});var s=j(e);t=S(s,n),s.forEach(_)},m(l,s){b(l,e,s),v(e,t)},p(l,s){s&1&&n!==(n=l[0].description+"")&&H(t,n)},d(l){l&&_(e)}}}function un(r){let e;function n(s,i){if(s[0].type=="Image"&&!s[1]["jolt:low-data-mode"])return an;if(s[0].type=="Video"&&!s[1]["jolt:low-data-mode"])return fn;if(s[0].type=="Text")return cn;if(s[0].type=="Website")return on}let t=n(r),l=t&&t(r);return{c(){l&&l.c(),e=O()},l(s){l&&l.l(s),e=O()},m(s,i){l&&l.m(s,i),b(s,e,i)},p(s,[i]){t===(t=n(s))&&l?l.p(s,i):(l&&l.d(1),l=t&&t(s),l&&(l.c(),l.m(e.parentNode,e)))},i:d,o:d,d(s){s&&_(e),l&&l.d(s)}}}function _n(r,e,n){let t,{embed:l}=e;const s=Q(Ie);return ce(r,s,i=>n(1,t=i)),r.$$set=i=>{"embed"in i&&n(0,l=i.embed)},[l,t,s]}class hn extends he{constructor(e){super(),de(this,e,_n,un,_e,{embed:0})}}function xe(r,e,n){const t=r.slice();return t[26]=e[n],t}function et(r,e,n){const t=r.slice();return t[29]=e[n],t}function tt(r,e,n){const t=r.slice();return t[32]=e[n].src,t[33]=e[n].alt,t[34]=e[n].onclick,t[35]=e[n].showIf,t}function Pe(r){const e=r.slice(),n=new Date(e[0].edited);return e[8]=n,e}function dn(r){const e=r.slice(),n=ge(e[1],e[2],e[0]);return e[38]=n,e}function lt(r,e,n){const t=r.slice();return t[39]=e[n],t}function nt(r){let e,n,t=ue(r[0].replies),l=[];for(let i=0;i<t.length;i+=1)l[i]=rt(lt(r,t,i));const s=i=>I(l[i],1,1,()=>{l[i]=null});return{c(){e=M("div");for(let i=0;i<l.length;i+=1)l[i].c();this.h()},l(i){e=C(i,"DIV",{class:!0});var c=j(e);for(let o=0;o<l.length;o+=1)l[o].l(c);c.forEach(_),this.h()},h(){u(e,"class","reply-base svelte-1svzs78")},m(i,c){b(i,e,c);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null);n=!0},p(i,c){if(c[0]&1){t=ue(i[0].replies);let o;for(o=0;o<t.length;o+=1){const f=lt(i,t,o);l[o]?(l[o].p(f,c),w(l[o],1)):(l[o]=rt(f),l[o].c(),w(l[o],1),l[o].m(e,null))}for(Z(),o=t.length;o<l.length;o+=1)s(o);x()}},i(i){if(!n){for(let c=0;c<t.length;c+=1)w(l[c]);n=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)I(l[c]);n=!1},d(i){i&&_(e),ye(l,i)}}}function rt(r){let e,n;return e=new ll({props:{id:r[39]}}),{c(){le(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,l){ne(e,t,l),n=!0},p(t,l){const s={};l[0]&1&&(s.id=t[39]),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){re(e,t)}}}function it(r){let e,n,t,l;const s=[pn,mn],i=[];function c(f,h){return f[5]["jolt:low-data-mode"]||f[1]==null?0:1}function o(f,h){return h===1?dn(f):f}return e=c(r),n=i[e]=s[e](o(r,e)),{c(){n.c(),t=O()},l(f){n.l(f),t=O()},m(f,h){i[e].m(f,h),b(f,t,h),l=!0},p(f,h){let m=e;e=c(f),e===m?i[e].p(o(f,e),h):(Z(),I(i[m],1,1,()=>{i[m]=null}),x(),n=i[e],n?n.p(o(f,e),h):(n=i[e]=s[e](o(f,e)),n.c()),w(n,1),n.m(t.parentNode,t))},i(f){l||(w(n),l=!0)},o(f){I(n),l=!1},d(f){f&&_(t),i[e].d(f)}}}function mn(r){let e,n,t,l;const s=[bn,gn],i=[];function c(o,f){return o[38]==null?0:1}return e=c(r),n=i[e]=s[e](r),{c(){n.c(),t=O()},l(o){n.l(o),t=O()},m(o,f){i[e].m(o,f),b(o,t,f),l=!0},p(o,f){let h=e;e=c(o),e===h?i[e].p(o,f):(Z(),I(i[h],1,1,()=>{i[h]=null}),x(),n=i[e],n?n.p(o,f):(n=i[e]=s[e](o),n.c()),w(n,1),n.m(t.parentNode,t))},i(o){l||(w(n),l=!0)},o(o){I(n),l=!1},d(o){o&&_(t),i[e].d(o)}}}function pn(r){let e,n;return e=new Ue({}),{c(){le(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,l){ne(e,t,l),n=!0},p:d,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){re(e,t)}}}function gn(r){let e,n;return{c(){e=M("img"),this.h()},l(t){e=C(t,"IMG",{class:!0,alt:!0,src:!0,width:!0,height:!0}),this.h()},h(){u(e,"class","cover"),u(e,"alt",r[4]),J(e.src,n=r[38])||u(e,"src",n),u(e,"width","40px"),u(e,"height","40px")},m(t,l){b(t,e,l)},p(t,l){l[0]&16&&u(e,"alt",t[4]),l[0]&7&&!J(e.src,n=t[38])&&u(e,"src",n)},i:d,o:d,d(t){t&&_(e)}}}function bn(r){let e,n;return e=new Ue({}),{c(){le(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,l){ne(e,t,l),n=!0},p:d,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){re(e,t)}}}function st(r){let e,n=r[6](r[8])+"",t,l,s=r[7](r[8])+"",i,c;return{c(){e=T(`[edited
				`),t=T(n),l=B(),i=T(s),c=T("]")},l(o){e=S(o,`[edited
				`),t=S(o,n),l=P(o),i=S(o,s),c=S(o,"]")},m(o,f){b(o,e,f),b(o,t,f),b(o,l,f),b(o,i,f),b(o,c,f)},p(o,f){f[0]&65&&n!==(n=o[6](o[8])+"")&&H(t,n),f[0]&129&&s!==(s=o[7](o[8])+"")&&H(i,s)},d(o){o&&(_(e),_(t),_(l),_(i),_(c))}}}function ot(r){let e,n,t,l,s,i,c;const o=[vn,kn],f=[];function h(a,p){return typeof a[32]=="string"?0:1}n=h(r),t=f[n]=o[n](r);function m(){return r[18](r[34])}return{c(){e=M("button"),t.c(),l=B(),this.h()},l(a){e=C(a,"BUTTON",{class:!0,"aria-label":!0});var p=j(e);t.l(p),l=P(p),p.forEach(_),this.h()},h(){u(e,"class","ml-2"),u(e,"aria-label",r[33])},m(a,p){b(a,e,p),f[n].m(e,null),v(e,l),s=!0,i||(c=ae(e,"click",m),i=!0)},p(a,p){r=a,t.p(r,p)},i(a){s||(w(t),s=!0)},o(a){I(t),s=!1},d(a){a&&_(e),f[n].d(),i=!1,c()}}}function kn(r){let e,n,t;var l=r[32];function s(i){return{}}return l&&(e=Fe(l,s())),{c(){e&&le(e.$$.fragment),n=O()},l(i){e&&se(e.$$.fragment,i),n=O()},m(i,c){e&&ne(e,i,c),b(i,n,c),t=!0},p(i,c){if(l!==(l=i[32])){if(e){Z();const o=e;I(o.$$.fragment,1,0,()=>{re(o,1)}),x()}l?(e=Fe(l,s()),le(e.$$.fragment),w(e.$$.fragment,1),ne(e,n.parentNode,n)):e=null}},i(i){t||(e&&w(e.$$.fragment,i),t=!0)},o(i){e&&I(e.$$.fragment,i),t=!1},d(i){i&&_(n),e&&re(e,i)}}}function vn(r){let e,n;return{c(){e=M("img"),this.h()},l(t){e=C(t,"IMG",{width:!0,height:!0,src:!0,alt:!0}),this.h()},h(){u(e,"width","16px"),u(e,"height","16px"),J(e.src,n=r[32])||u(e,"src",n),u(e,"alt",r[33])},m(t,l){b(t,e,l)},p:d,i:d,o:d,d(t){t&&_(e)}}}function ct(r){var s;let e=((s=r[35])==null?void 0:s.call(r,r[0]))??!0,n,t,l=e&&ot(r);return{c(){l&&l.c(),n=O()},l(i){l&&l.l(i),n=O()},m(i,c){l&&l.m(i,c),b(i,n,c),t=!0},p(i,c){var o;c[0]&1&&(e=((o=i[35])==null?void 0:o.call(i,i[0]))??!0),e?l?(l.p(i,c),c[0]&1&&w(l,1)):(l=ot(i),l.c(),w(l,1),l.m(n.parentNode,n)):l&&(Z(),I(l,1,1,()=>{l=null}),x())},i(i){t||(w(l),t=!0)},o(i){I(l),t=!1},d(i){i&&_(n),l&&l.d(i)}}}function wn(r){let e,n=r[0].content+"",t;return{c(){e=M("span"),t=T(n),this.h()},l(l){e=C(l,"SPAN",{style:!0,class:!0});var s=j(e);t=S(s,n),s.forEach(_),this.h()},h(){Te(e,"overflow-wrap","break-word"),u(e,"class","whitespace-pre-wrap")},m(l,s){b(l,e,s),v(e,t)},p(l,s){s[0]&1&&n!==(n=l[0].content+"")&&H(t,n)},d(l){l&&_(e)}}}function $n(r){let e,n,t,l;return{c(){e=M("form"),n=M("textarea"),this.h()},l(s){e=C(s,"FORM",{id:!0,class:!0});var i=j(e);n=C(i,"TEXTAREA",{class:!0,placeholder:!0}),j(n).forEach(_),i.forEach(_),this.h()},h(){u(n,"class","outline-none resize-none bg-inherit w-full"),u(n,"placeholder","Edit this message"),u(e,"id","message-edit-form"),u(e,"class","bg-gray-500 rounded-xl px-2 pt-2")},m(s,i){b(s,e,i),v(e,n),Se(n,r[3]),t||(l=[ae(n,"keydown",r[19]),ae(n,"input",r[20]),ae(e,"submit",r[15])],t=!0)},p(s,i){i[0]&8&&Se(n,s[3])},d(s){s&&_(e),t=!1,De(l)}}}function ft(r){let e,n;return e=new Bl({props:{system:r[0].system}}),{c(){le(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,l){ne(e,t,l),n=!0},p(t,l){const s={};l[0]&1&&(s.system=t[0].system),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){re(e,t)}}}function at(r){let e,n,t=ue(r[0].attachments),l=[];for(let i=0;i<t.length;i+=1)l[i]=ut(et(r,t,i));const s=i=>I(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=O()},l(i){for(let c=0;c<l.length;c+=1)l[c].l(i);e=O()},m(i,c){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(i,c);b(i,e,c),n=!0},p(i,c){if(c[0]&1){t=ue(i[0].attachments);let o;for(o=0;o<t.length;o+=1){const f=et(i,t,o);l[o]?(l[o].p(f,c),w(l[o],1)):(l[o]=ut(f),l[o].c(),w(l[o],1),l[o].m(e.parentNode,e))}for(Z(),o=t.length;o<l.length;o+=1)s(o);x()}},i(i){if(!n){for(let c=0;c<t.length;c+=1)w(l[c]);n=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)I(l[c]);n=!1},d(i){i&&_(e),ye(l,i)}}}function ut(r){let e,n;return e=new sn({props:{attachment:r[29]}}),{c(){le(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,l){ne(e,t,l),n=!0},p(t,l){const s={};l[0]&1&&(s.attachment=t[29]),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){re(e,t)}}}function _t(r){let e,n,t=ue(r[0].embeds),l=[];for(let i=0;i<t.length;i+=1)l[i]=ht(xe(r,t,i));const s=i=>I(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=O()},l(i){for(let c=0;c<l.length;c+=1)l[c].l(i);e=O()},m(i,c){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(i,c);b(i,e,c),n=!0},p(i,c){if(c[0]&1){t=ue(i[0].embeds);let o;for(o=0;o<t.length;o+=1){const f=xe(i,t,o);l[o]?(l[o].p(f,c),w(l[o],1)):(l[o]=ht(f),l[o].c(),w(l[o],1),l[o].m(e.parentNode,e))}for(Z(),o=t.length;o<l.length;o+=1)s(o);x()}},i(i){if(!n){for(let c=0;c<t.length;c+=1)w(l[c]);n=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)I(l[c]);n=!1},d(i){i&&_(e),ye(l,i)}}}function ht(r){let e,n;return e=new hn({props:{embed:r[26]}}),{c(){le(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,l){ne(e,t,l),n=!0},p(t,l){const s={};l[0]&1&&(s.embed=t[26]),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){re(e,t)}}}function yn(r){let e,n,t,l,s,i,c,o,f=r[6](r[8])+"",h,m,a=r[7](r[8])+"",p,E,q,N,U,G,$,k,g,D,K,ee,R=r[0].replies!=null&&r[0].replies.length!=0&&nt(r),z=!r[5]["jolt:compact-mode"]&&it(r),ie=r[0].edited!=null&&st(Pe(r)),X=ue(r[14]),y=[];for(let A=0;A<X.length;A+=1)y[A]=ct(tt(r,X,A));const L=A=>I(y[A],1,1,()=>{y[A]=null});function me(A,V){if(A[3]!=null)return $n;if(A[0].content!=null)return wn}let ke=me(r),oe=ke&&ke(r),W=r[0].system!=null&&ft(r),Y=r[0].attachments!=null&&at(r),te=r[0].embeds!=null&&_t(r);return{c(){e=M("div"),R&&R.c(),n=B(),t=M("div"),z&&z.c(),l=B(),s=T(r[4]),i=B(),c=M("p"),o=T("["),h=T(f),m=B(),p=T(a),E=T(`]

			`),ie&&ie.c(),q=B(),N=M("div"),U=B(),G=M("div");for(let A=0;A<y.length;A+=1)y[A].c();$=B(),oe&&oe.c(),k=B(),W&&W.c(),g=B(),Y&&Y.c(),D=B(),te&&te.c(),this.h()},l(A){e=C(A,"DIV",{id:!0,class:!0});var V=j(e);R&&R.l(V),n=P(V),t=C(V,"DIV",{class:!0});var F=j(t);z&&z.l(F),l=P(F),s=S(F,r[4]),i=P(F),c=C(F,"P",{class:!0});var be=j(c);o=S(be,"["),h=S(be,f),m=P(be),p=S(be,a),E=S(be,`]

			`),ie&&ie.l(be),be.forEach(_),q=P(F),N=C(F,"DIV",{class:!0}),j(N).forEach(_),U=P(F),G=C(F,"DIV",{class:!0});var qe=j(G);for(let Be=0;Be<y.length;Be+=1)y[Be].l(qe);qe.forEach(_),F.forEach(_),$=P(V),oe&&oe.l(V),k=P(V),W&&W.l(V),g=P(V),Y&&Y.l(V),D=P(V),te&&te.l(V),V.forEach(_),this.h()},h(){u(c,"class","timestamp svelte-1svzs78"),u(N,"class","flex-divider svelte-1svzs78"),u(G,"class","message-controls svelte-1svzs78"),u(t,"class","user-detail svelte-1svzs78"),u(e,"id",K=r[0]._id),u(e,"class","container svelte-1svzs78")},m(A,V){b(A,e,V),R&&R.m(e,null),v(e,n),v(e,t),z&&z.m(t,null),v(t,l),v(t,s),v(t,i),v(t,c),v(c,o),v(c,h),v(c,m),v(c,p),v(c,E),ie&&ie.m(c,null),v(t,q),v(t,N),v(t,U),v(t,G);for(let F=0;F<y.length;F+=1)y[F]&&y[F].m(G,null);v(e,$),oe&&oe.m(e,null),v(e,k),W&&W.m(e,null),v(e,g),Y&&Y.m(e,null),v(e,D),te&&te.m(e,null),ee=!0},p(A,V){if(A[0].replies!=null&&A[0].replies.length!=0?R?(R.p(A,V),V[0]&1&&w(R,1)):(R=nt(A),R.c(),w(R,1),R.m(e,n)):R&&(Z(),I(R,1,1,()=>{R=null}),x()),A[5]["jolt:compact-mode"]?z&&(Z(),I(z,1,1,()=>{z=null}),x()):z?(z.p(A,V),V[0]&32&&w(z,1)):(z=it(A),z.c(),w(z,1),z.m(t,l)),(!ee||V[0]&16)&&H(s,A[4]),(!ee||V[0]&320)&&f!==(f=A[6](A[8])+"")&&H(h,f),(!ee||V[0]&384)&&a!==(a=A[7](A[8])+"")&&H(p,a),A[0].edited!=null?ie?ie.p(Pe(A),V):(ie=st(Pe(A)),ie.c(),ie.m(c,null)):ie&&(ie.d(1),ie=null),V[0]&16385){X=ue(A[14]);let F;for(F=0;F<X.length;F+=1){const be=tt(A,X,F);y[F]?(y[F].p(be,V),w(y[F],1)):(y[F]=ct(be),y[F].c(),w(y[F],1),y[F].m(G,null))}for(Z(),F=X.length;F<y.length;F+=1)L(F);x()}ke===(ke=me(A))&&oe?oe.p(A,V):(oe&&oe.d(1),oe=ke&&ke(A),oe&&(oe.c(),oe.m(e,k))),A[0].system!=null?W?(W.p(A,V),V[0]&1&&w(W,1)):(W=ft(A),W.c(),w(W,1),W.m(e,g)):W&&(Z(),I(W,1,1,()=>{W=null}),x()),A[0].attachments!=null?Y?(Y.p(A,V),V[0]&1&&w(Y,1)):(Y=at(A),Y.c(),w(Y,1),Y.m(e,D)):Y&&(Z(),I(Y,1,1,()=>{Y=null}),x()),A[0].embeds!=null?te?(te.p(A,V),V[0]&1&&w(te,1)):(te=_t(A),te.c(),w(te,1),te.m(e,null)):te&&(Z(),I(te,1,1,()=>{te=null}),x()),(!ee||V[0]&1&&K!==(K=A[0]._id))&&u(e,"id",K)},i(A){if(!ee){w(R),w(z);for(let V=0;V<X.length;V+=1)w(y[V]);w(W),w(Y),w(te),ee=!0}},o(A){I(R),I(z),y=y.filter(Boolean);for(let V=0;V<y.length;V+=1)I(y[V]);I(W),I(Y),I(te),ee=!1},d(A){A&&_(e),R&&R.d(),z&&z.d(),ie&&ie.d(),ye(y,A),oe&&oe.d(),W&&W.d(),Y&&Y.d(),te&&te.d()}}}function En(r,e,n){let t,l,s,i,c,o,f,h,m;ce(r,Rt,y=>n(6,h=y)),ce(r,qt,y=>n(7,m=y));let{message:a}=e,p,E,q,N=Q(Ie);ce(r,N,y=>n(5,f=y));let U=Q(Ee),G=Q(yt);ce(r,G,y=>n(16,s=y));let $=Q(Oe),k=Q(Le);ce(r,k,y=>n(17,i=y));let g=Q(It);ce(r,g,y=>n(21,c=y));let D=Q(je);ce(r,D,y=>n(22,o=y));const K=[{src:sl,alt:"Reply",onclick(){o!=null&&o.some(y=>y.message._id==a._id)||D==null||D.update(y=>(y.push({message:a,mention:!0}),y))}},{src:Gt,alt:"Edit",showIf:y=>{var L;return y.author==((L=U.user)==null?void 0:L._id)},onclick:y=>n(3,p=p==null?y.content??"":void 0)},{src:rl,alt:"Delete",showIf:y=>{var L;return y.author==((L=U.user)==null?void 0:L._id)},onclick:y=>U.api.deleteMessage(y.channel,y._id)}];async function ee(y,L){n(2,q=c==null?void 0:c.find(me=>me._id.server==y&&me._id.user==L))}async function R(){const y=await U.api.editMessage(a.channel,a._id,{content:p});$==null||$.update(L=>(L[L.findIndex(me=>me._id==a._id)]=y,L))}const z=y=>y(a),ie=y=>{if(!y.defaultPrevented){if(y.key=="Escape"){y.preventDefault(),n(3,p=void 0);return}y.shiftKey||y.key!="Enter"||(y.preventDefault(),R(),n(3,p=void 0))}};function X(){p=this.value,n(3,p)}return r.$$set=y=>{"message"in y&&n(0,a=y.message)},r.$$.update=()=>{r.$$.dirty[0]&131073&&Ve(U.api,i??U.api.cache.users,a.author).then(y=>n(1,E=y)),r.$$.dirty[0]&65537&&(s==null||ee(s,a.author)),r.$$.dirty[0]&7&&n(4,t=pe(E,q,a)),r.$$.dirty[0]&1&&n(8,l=Ft(a._id))},[a,E,q,p,t,f,h,m,l,N,G,k,g,D,K,R,s,i,z,ie,X]}class In extends he{constructor(e){super(),de(this,e,En,yn,_e,{message:0},null,[-1,-1])}}function Mn(r){let e,n;return{c(){e=we("svg"),n=we("path"),this.h()},l(t){e=$e(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var l=j(e);n=$e(l,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),j(n).forEach(_),l.forEach(_),this.h()},h(){u(n,"stroke-linecap","round"),u(n,"stroke-linejoin","round"),u(n,"d","M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"width","24px"),u(e,"height","24px")},m(t,l){b(t,e,l),v(e,n)},p:d,i:d,o:d,d(t){t&&_(e)}}}class Mt extends he{constructor(e){super(),de(this,e,null,Mn,_e,{})}}function Cn(r){let e,n,t,l,s,i,c,o,f,h,m;return t=new Kt({}),{c(){e=M("form"),n=M("label"),le(t.$$.fragment),l=B(),s=M("input"),i=B(),c=M("textarea"),this.h()},l(a){e=C(a,"FORM",{id:!0,class:!0});var p=j(e);n=C(p,"LABEL",{for:!0,class:!0});var E=j(n);se(t.$$.fragment,E),E.forEach(_),l=P(p),s=C(p,"INPUT",{id:!0,type:!0,max:!0,class:!0}),i=P(p),c=C(p,"TEXTAREA",{maxlength:!0,placeholder:!0,class:!0}),j(c).forEach(_),p.forEach(_),this.h()},h(){u(n,"for","file-upload"),u(n,"class","cursor-pointer svelte-1x0e3jw"),u(s,"id","file-upload"),u(s,"type","file"),s.multiple=!0,u(s,"max",5),u(s,"class","svelte-1x0e3jw"),u(c,"maxlength","2000"),u(c,"placeholder",o="Send message in "+r[0]),u(c,"class","svelte-1x0e3jw"),u(e,"id","message-send-form"),u(e,"class","svelte-1x0e3jw")},m(a,p){b(a,e,p),v(e,n),ne(t,n,null),v(e,l),v(e,s),r[9](s),v(e,i),v(e,c),Se(c,r[1]),f=!0,h||(m=[ae(s,"change",r[10]),ae(c,"blur",r[6]),ae(c,"input",r[7]),ae(c,"keydown",r[11]),ae(c,"input",r[12]),ae(e,"submit",r[8])],h=!0)},p(a,[p]){(!f||p&1&&o!==(o="Send message in "+a[0]))&&u(c,"placeholder",o),p&2&&Se(c,a[1])},i(a){f||(w(t.$$.fragment,a),f=!0)},o(a){I(t.$$.fragment,a),f=!1},d(a){a&&_(e),re(t),r[9](null),h=!1,De(m)}}}function Un(r,e,n){let t,l;const s=Q(Ee),i=Q(Ie);ce(r,i,g=>n(14,l=g));const c=Q(Et),o=Q(je);ce(r,o,g=>n(13,t=g));let f,h,m,a;async function p(g){var D;if(g.channel_type=="TextChannel"||g.channel_type=="VoiceChannel"||g.channel_type=="Group"){n(0,f=`#${g.name}`);return}if(g.channel_type=="SavedMessages"){n(0,f="Saved Notes");return}try{n(0,f=`@${pe(await s.api.fetchUser(g.recipients[0]==((D=s.user)==null?void 0:D._id)?g.recipients[1]:g.recipients[0]))}`)}catch{n(0,f="Unknown Channel")}}function E(){l["jolt:send-typing-indicators"]&&s.websocket.send({type:"EndTyping",channel:c._id})}function q(){if(l["jolt:send-typing-indicators"]){if(h==""){s.websocket.send({type:"EndTyping",channel:c._id});return}s.websocket.send({type:"BeginTyping",channel:c._id})}}async function N(){let g=[];(m==null?void 0:m.files)!=null&&(g=await Promise.all(Array.from(m.files).map(D=>s.autumn.uploadFile(D))),n(2,m.value="",m),n(3,a=null)),await s.api.sendMessage(c._id,{content:h.trim(),replies:t.map(({message:{_id:D},mention:K})=>({id:D,mention:K})),attachments:g}),o.set([]),n(1,h="")}function U(g){Ae[g?"unshift":"push"](()=>{m=g,n(2,m)})}function G(){a=this.files,n(3,a)}const $=g=>{g.shiftKey||g.key!="Enter"||(g.preventDefault(),N())};function k(){h=this.value,n(1,h)}return p(c),[f,h,m,a,i,o,E,q,N,U,G,$,k]}class Nn extends he{constructor(e){super(),de(this,e,Un,Cn,_e,{})}}function Tn(r){let e,n;return{c(){e=we("svg"),n=we("path"),this.h()},l(t){e=$e(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var l=j(e);n=$e(l,"path",{"stroke-linecap":!0,d:!0}),j(n).forEach(_),l.forEach(_),this.h()},h(){u(n,"stroke-linecap","round"),u(n,"d","M16.5 12a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zm0 0c0 1.657 1.007 3 2.25 3S21 13.657 21 12a9 9 0 10-2.636 6.364M16.5 12V8.25"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width","1.5"),u(e,"stroke","currentColor"),u(e,"width","24px"),u(e,"height","24px")},m(t,l){b(t,e,l),v(e,n)},p:d,i:d,o:d,d(t){t&&_(e)}}}class Sn extends he{constructor(e){super(),de(this,e,null,Tn,_e,{})}}function dt(r){const e=pe(r[5]);r[6]=e}function Dn(r){let e,n,t;return e=new Ue({}),{c(){le(e.$$.fragment),n=T(`
				<UnknownUser>`)},l(l){se(e.$$.fragment,l),n=S(l,`
				<UnknownUser>`)},m(l,s){ne(e,l,s),b(l,n,s),t=!0},p:d,i(l){t||(w(e.$$.fragment,l),t=!0)},o(l){I(e.$$.fragment,l),t=!1},d(l){l&&_(n),re(e,l)}}}function An(r){dt(r);let e,n,t,l,s=r[6]+"",i;return{c(){e=M("img"),l=B(),i=T(s),this.h()},l(c){e=C(c,"IMG",{class:!0,src:!0,alt:!0}),l=P(c),i=S(c,s),this.h()},h(){u(e,"class","cover svelte-57qv3a"),J(e.src,n=ge(r[5]))||u(e,"src",n),u(e,"alt",t=r[6])},m(c,o){b(c,e,o),b(c,l,o),b(c,i,o)},p(c,o){dt(c),o&1&&!J(e.src,n=ge(c[5]))&&u(e,"src",n),o&1&&t!==(t=c[6])&&u(e,"alt",t),o&1&&s!==(s=c[6]+"")&&H(i,s)},i:d,o:d,d(c){c&&(_(e),_(l),_(i))}}}function jn(r){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function Bn(r){let e,n,t,l,s,i,c,o=r[0].message.content+"",f,h,m,a,p,E,q,N,U,G,$=r[0].mention?"ON":"OFF",k,g,D,K,ee,R,z,ie,X={ctx:r,current:null,token:null,hasCatch:!0,pending:jn,then:An,catch:Dn,value:5,blocks:[,,,]};return fe(s=r[2].api.fetchUser(r[0].message.author),X),U=new Sn({}),ee=new Mt({}),{c(){e=M("div"),n=M("p"),t=T(`replying to
		`),l=M("strong"),X.block.c(),i=B(),c=M("p"),f=T(o),h=B(),m=M("div"),a=B(),p=M("div"),E=M("input"),q=B(),N=M("label"),le(U.$$.fragment),G=B(),k=T($),g=B(),D=M("div"),K=M("button"),le(ee.$$.fragment),this.h()},l(y){e=C(y,"DIV",{class:!0});var L=j(e);n=C(L,"P",{});var me=j(n);t=S(me,`replying to
		`),l=C(me,"STRONG",{});var ke=j(l);X.block.l(ke),ke.forEach(_),me.forEach(_),i=P(L),c=C(L,"P",{class:!0});var oe=j(c);f=S(oe,o),oe.forEach(_),h=P(L),m=C(L,"DIV",{class:!0}),j(m).forEach(_),a=P(L),p=C(L,"DIV",{});var W=j(p);E=C(W,"INPUT",{id:!0,style:!0,type:!0}),q=P(W),N=C(W,"LABEL",{class:!0,for:!0});var Y=j(N);se(U.$$.fragment,Y),G=P(Y),k=S(Y,$),Y.forEach(_),W.forEach(_),g=P(L),D=C(L,"DIV",{});var te=j(D);K=C(te,"BUTTON",{});var A=j(K);se(ee.$$.fragment,A),A.forEach(_),te.forEach(_),L.forEach(_),this.h()},h(){u(c,"class","message-content svelte-57qv3a"),u(m,"class","flex-divider svelte-57qv3a"),u(E,"id","mention"),Te(E,"display","none"),u(E,"type","checkbox"),u(N,"class","mention-button svelte-57qv3a"),u(N,"for","mention"),u(e,"class","container svelte-57qv3a")},m(y,L){b(y,e,L),v(e,n),v(n,t),v(n,l),X.block.m(l,X.anchor=null),X.mount=()=>l,X.anchor=null,v(e,i),v(e,c),v(c,f),v(e,h),v(e,m),v(e,a),v(e,p),v(p,E),E.checked=r[0].mention,v(p,q),v(p,N),ne(U,N,null),v(N,G),v(N,k),v(e,g),v(e,D),v(D,K),ne(ee,K,null),R=!0,z||(ie=[ae(E,"change",r[3]),ae(K,"click",r[4])],z=!0)},p(y,[L]){r=y,X.ctx=r,L&1&&s!==(s=r[2].api.fetchUser(r[0].message.author))&&fe(s,X)||ve(X,r,L),(!R||L&1)&&o!==(o=r[0].message.content+"")&&H(f,o),L&1&&(E.checked=r[0].mention),(!R||L&1)&&$!==($=r[0].mention?"ON":"OFF")&&H(k,$)},i(y){R||(w(X.block),w(U.$$.fragment,y),w(ee.$$.fragment,y),R=!0)},o(y){for(let L=0;L<3;L+=1){const me=X.blocks[L];I(me)}I(U.$$.fragment,y),I(ee.$$.fragment,y),R=!1},d(y){y&&_(e),X.block.d(),X.token=null,X=null,re(U),re(ee),z=!1,De(ie)}}}function Pn(r,e,n){let{reply:t}=e;const l=Q(Ee),s=Q(je);function i(){t.mention=this.checked,n(0,t)}const c=()=>s.update(o=>(o=o.filter(f=>f.message._id!=t.message._id),o));return r.$$set=o=>{"reply"in o&&n(0,t=o.reply)},[t,s,l,i,c]}class Vn extends he{constructor(e){super(),de(this,e,Pn,Bn,_e,{reply:0})}}function mt(r,e,n){const t=r.slice();return t[17]=e[n],t}function pt(r,e,n){const t=r.slice();t[20]=e[n];const l=pe(t[20]);return t[21]=l,t}function gt(r,e,n){const t=r.slice();return t[24]=e[n],t}function bt(r){let e,n;return e=new In({props:{message:r[24]}}),{c(){le(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,l){ne(e,t,l),n=!0},p(t,l){const s={};l&32&&(s.message=t[24]),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){re(e,t)}}}function kt(r){let e,n,t,l=Array.from(r[4]).map($t).join(", ")+"",s,i,c,o,f,h,m,a,p;return h=new Mt({}),{c(){e=M("div"),n=M("p"),t=T(`Uploading
				`),s=T(l),i=B(),c=M("div"),o=B(),f=M("button"),le(h.$$.fragment),this.h()},l(E){e=C(E,"DIV",{class:!0});var q=j(e);n=C(q,"P",{});var N=j(n);t=S(N,`Uploading
				`),s=S(N,l),N.forEach(_),i=P(q),c=C(q,"DIV",{class:!0}),j(c).forEach(_),o=P(q),f=C(q,"BUTTON",{class:!0});var U=j(f);se(h.$$.fragment,U),U.forEach(_),q.forEach(_),this.h()},h(){u(c,"class","flex-1"),u(f,"class","pr-2"),u(e,"class","flex")},m(E,q){b(E,e,q),v(e,n),v(n,t),v(n,s),v(e,i),v(e,c),v(e,o),v(e,f),ne(h,f,null),m=!0,a||(p=ae(f,"click",r[12]),a=!0)},p(E,q){(!m||q&16)&&l!==(l=Array.from(E[4]).map($t).join(", ")+"")&&H(s,l)},i(E){m||(w(h.$$.fragment,E),m=!0)},o(E){I(h.$$.fragment,E),m=!1},d(E){E&&_(e),re(h),a=!1,p()}}}function On(r){let e,n,t;return{c(){e=M("img"),this.h()},l(l){e=C(l,"IMG",{class:!0,src:!0,width:!0,height:!0,alt:!0}),this.h()},h(){u(e,"class","cover"),J(e.src,n=ge(r[20]))||u(e,"src",n),u(e,"width","16px"),u(e,"height","16px"),u(e,"alt",t=r[21])},m(l,s){b(l,e,s)},p(l,s){s&4&&!J(e.src,n=ge(l[20]))&&u(e,"src",n),s&4&&t!==(t=l[21])&&u(e,"alt",t)},i:d,o:d,d(l){l&&_(e)}}}function Ln(r){let e,n;return e=new Ue({}),{c(){le(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,l){ne(e,t,l),n=!0},p:d,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){re(e,t)}}}function vt(r){let e,n,t,l,s=r[21]+"",i,c,o;const f=[Ln,On],h=[];function m(a,p){return a[0]["jolt:low-data-mode"]?0:1}return n=m(r),t=h[n]=f[n](r),{c(){e=M("div"),t.c(),l=B(),i=T(s),c=T(" is typing..."),this.h()},l(a){e=C(a,"DIV",{class:!0});var p=j(e);t.l(p),l=P(p),i=S(p,s),c=S(p," is typing..."),p.forEach(_),this.h()},h(){u(e,"class","typing-indicator svelte-1whb7qb")},m(a,p){b(a,e,p),h[n].m(e,null),v(e,l),v(e,i),v(e,c),o=!0},p(a,p){let E=n;n=m(a),n===E?h[n].p(a,p):(Z(),I(h[E],1,1,()=>{h[E]=null}),x(),t=h[n],t?t.p(a,p):(t=h[n]=f[n](a),t.c()),w(t,1),t.m(e,l)),(!o||p&4)&&s!==(s=a[21]+"")&&H(i,s)},i(a){o||(w(t),o=!0)},o(a){I(t),o=!1},d(a){a&&_(e),h[n].d()}}}function wt(r){let e,n;return e=new Vn({props:{reply:r[17]}}),{c(){le(e.$$.fragment)},l(t){se(e.$$.fragment,t)},m(t,l){ne(e,t,l),n=!0},p(t,l){const s={};l&64&&(s.reply=t[17]),e.$set(s)},i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){I(e.$$.fragment,t),n=!1},d(t){re(e,t)}}}function Rn(r){let e,n,t,l,s,i,c,o,f=ue(r[5]),h=[];for(let $=0;$<f.length;$+=1)h[$]=bt(gt(r,f,$));const m=$=>I(h[$],1,1,()=>{h[$]=null});let a=r[4]!=null&&r[4].length!=0&&kt(r),p=ue(r[2]),E=[];for(let $=0;$<p.length;$+=1)E[$]=vt(pt(r,p,$));const q=$=>I(E[$],1,1,()=>{E[$]=null});let N=ue(r[6]),U=[];for(let $=0;$<N.length;$+=1)U[$]=wt(mt(r,N,$));const G=$=>I(U[$],1,1,()=>{U[$]=null});return c=new Nn({}),{c(){e=M("main"),n=M("div");for(let $=0;$<h.length;$+=1)h[$].c();t=B(),a&&a.c(),l=B();for(let $=0;$<E.length;$+=1)E[$].c();s=B();for(let $=0;$<U.length;$+=1)U[$].c();i=B(),le(c.$$.fragment),this.h()},l($){e=C($,"MAIN",{class:!0});var k=j(e);n=C(k,"DIV",{class:!0});var g=j(n);for(let D=0;D<h.length;D+=1)h[D].l(g);g.forEach(_),t=P(k),a&&a.l(k),l=P(k);for(let D=0;D<E.length;D+=1)E[D].l(k);s=P(k);for(let D=0;D<U.length;D+=1)U[D].l(k);i=P(k),se(c.$$.fragment,k),k.forEach(_),this.h()},h(){u(n,"class","messages-list svelte-1whb7qb"),u(e,"class","main-content-container svelte-1whb7qb")},m($,k){b($,e,k),v(e,n);for(let g=0;g<h.length;g+=1)h[g]&&h[g].m(n,null);r[11](n),v(e,t),a&&a.m(e,null),v(e,l);for(let g=0;g<E.length;g+=1)E[g]&&E[g].m(e,null);v(e,s);for(let g=0;g<U.length;g+=1)U[g]&&U[g].m(e,null);v(e,i),ne(c,e,null),o=!0},p($,[k]){if(k&32){f=ue($[5]);let g;for(g=0;g<f.length;g+=1){const D=gt($,f,g);h[g]?(h[g].p(D,k),w(h[g],1)):(h[g]=bt(D),h[g].c(),w(h[g],1),h[g].m(n,null))}for(Z(),g=f.length;g<h.length;g+=1)m(g);x()}if($[4]!=null&&$[4].length!=0?a?(a.p($,k),k&16&&w(a,1)):(a=kt($),a.c(),w(a,1),a.m(e,l)):a&&(Z(),I(a,1,1,()=>{a=null}),x()),k&5){p=ue($[2]);let g;for(g=0;g<p.length;g+=1){const D=pt($,p,g);E[g]?(E[g].p(D,k),w(E[g],1)):(E[g]=vt(D),E[g].c(),w(E[g],1),E[g].m(e,s))}for(Z(),g=p.length;g<E.length;g+=1)q(g);x()}if(k&64){N=ue($[6]);let g;for(g=0;g<N.length;g+=1){const D=mt($,N,g);U[g]?(U[g].p(D,k),w(U[g],1)):(U[g]=wt(D),U[g].c(),w(U[g],1),U[g].m(e,i))}for(Z(),g=N.length;g<U.length;g+=1)G(g);x()}},i($){if(!o){for(let k=0;k<f.length;k+=1)w(h[k]);w(a);for(let k=0;k<p.length;k+=1)w(E[k]);for(let k=0;k<N.length;k+=1)w(U[k]);w(c.$$.fragment,$),o=!0}},o($){h=h.filter(Boolean);for(let k=0;k<h.length;k+=1)I(h[k]);I(a),E=E.filter(Boolean);for(let k=0;k<E.length;k+=1)I(E[k]);U=U.filter(Boolean);for(let k=0;k<U.length;k+=1)I(U[k]);I(c.$$.fragment,$),o=!1},d($){$&&_(e),ye(h,$),r[11](null),a&&a.d(),ye(E,$),ye(U,$),re(c)}}}const $t=r=>r.name;function qn(r,e,n){let t,l,s,{channel:i}=e;const c=Q(Ie);ce(r,c,k=>n(0,t=k));const o=Q(Ee),f=Ne([]);ce(r,f,k=>n(5,l=k));const h=Ne([]),m=Ne([]),a=Ne([]);ce(r,a,k=>n(6,s=k)),Me(Oe,f),Me(It,h),Me(Le,m),Me(je,a),Me(Et,i);let p,E=[],q,N;At(()=>{p&&p.offsetHeight+p.scrollTop>p.scrollHeight-20&&Bt().then(()=>{p.scrollTo(0,p.scrollHeight)})});async function U(k){if(!k){o.removeAllListeners("ChannelStartTyping"),o.removeAllListeners("ChannelStopTyping");return}o.on("ChannelStartTyping",async({id:g,user:D})=>{var K;if(!(D==((K=o.user)==null?void 0:K._id)||g!=i._id)){for(const{_id:ee}of E)if(D==ee)return;n(2,E[E.length]=await o.api.fetchUser(D),E)}}),o.on("ChannelStopTyping",({id:g,user:D})=>{g==i._id&&n(2,E=E.filter(K=>K._id!=D))})}jt(()=>{o.on("Message",k=>{k.channel==i._id&&(o.api.ackMessage(i._id,k._id),f.update(g=>(g.push(k),g)))}),o.on("MessageDelete",({id:k,channel:g})=>{g==i._id&&f.update(D=>D.filter(K=>K._id!=k))}),o.on("MessageUpdate",({id:k,channel:g,data:D})=>{g==i._id&&f.update(K=>{const ee=K.findIndex(z=>z._id==k),R=K[ee];return D.content!=null&&(R.content=D.content),D.embeds!=null&&(R.embeds=D.embeds),R.edited=D.edited,K[ee]=R,K})})});function G(k){Ae[k?"unshift":"push"](()=>{p=k,n(1,p)})}const $=()=>{};return r.$$set=k=>{"channel"in k&&n(10,i=k.channel)},r.$$.update=()=>{r.$$.dirty&1024&&(o.api.queryMessages(i._id,{sort:"Latest",include_users:!0}).then(k=>{Array.isArray(k)?f.set(k.reverse()):(f.set(k.messages.reverse()),m.set(k.users),h.set(k.members??[]))}),a.set([]),n(2,E=[])),r.$$.dirty&1&&U(t["jolt:receive-typing-indicators"])},[t,p,E,q,N,l,s,c,f,a,i,G,$]}class lr extends he{constructor(e){super(),de(this,e,qn,Rn,_e,{channel:10})}}export{lr as T};
