import{s as ce,n as _,d as re,u as ae,g as ie,e as se,c as M}from"../chunks/scheduler.236f7e20.js";import{S as fe,i as ue,g as U,m as _e,s as y,h as V,j as A,n as he,f as b,c as w,k as K,a as k,x as N,o as me,d as p,p as E,b as S,t as g,y as P,e as $,r as L,u as R,v as j,w as q}from"../chunks/index.bae008e4.js";import{h as D,u as J}from"../chunks/await_block.16e956eb.js";import{e as C}from"../chunks/each.e59479a4.js";import{p as ke}from"../chunks/stores.84f1534e.js";import{g as T,c as pe,s as $e}from"../chunks/context.0e1cc50f.js";import{g as z,b as ve}from"../chunks/util.7d991f80.js";import{a as de}from"../chunks/Channel.7da200c4.js";import{U as Ce}from"../chunks/UserProfilePicture.77f0b063.js";import{s as ye}from"../chunks/context.fa34f1f8.js";import{r as we}from"../chunks/index.5e2a9a64.js";import{g as De}from"../chunks/chunk-NMUKSDLG.3f77d6f4.js";import{w as F}from"../chunks/index.96f01ed2.js";import{c as Ie}from"../chunks/context.125d2488.js";import{s as Ne}from"../chunks/context.c622ed87.js";function G(o,n,r){const l=o.slice();return l[4]=n[r],l}const Ee=o=>({channel:o&1}),H=o=>({channel:o[7]});function Se(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function Ue(o){let n,r;const l=o[3].default,e=re(l,o,o[2],H);return{c(){e&&e.c(),n=y()},l(t){e&&e.l(t),n=w(t)},m(t,c){e&&e.m(t,c),k(t,n,c),r=!0},p(t,c){e&&e.p&&(!r||c&5)&&ae(e,l,t,t[2],r?se(l,t[2],c,Ee):ie(t[2]),H)},i(t){r||(p(e,t),r=!0)},o(t){g(e,t),r=!1},d(t){t&&b(n),e&&e.d(t)}}}function Ve(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function O(o){let n,r,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:Ve,then:Ue,catch:Se,value:7,blocks:[,,,]};return D(r=o[1].api.fetchChannel(o[4]),e),{c(){n=$(),e.block.c()},l(t){n=$(),e.block.l(t)},m(t,c){k(t,n,c),e.block.m(t,e.anchor=c),e.mount=()=>n.parentNode,e.anchor=n,l=!0},p(t,c){o=t,e.ctx=o,c&1&&r!==(r=o[1].api.fetchChannel(o[4]))&&D(r,e)||J(e,o,c)},i(t){l||(p(e.block),l=!0)},o(t){for(let c=0;c<3;c+=1){const f=e.blocks[c];g(f)}l=!1},d(t){t&&b(n),e.block.d(t),e.token=null,e=null}}}function Ae(o){let n,r,l=o[0].title+"",e,t,c,f,a=C(o[0].channels),i=[];for(let h=0;h<a.length;h+=1)i[h]=O(G(o,a,h));const u=h=>g(i[h],1,1,()=>{i[h]=null});return{c(){n=U("details"),r=U("summary"),e=_e(l),t=y(),c=U("div");for(let h=0;h<i.length;h+=1)i[h].c();this.h()},l(h){n=V(h,"DETAILS",{});var s=A(n);r=V(s,"SUMMARY",{class:!0,role:!0});var m=A(r);e=he(m,l),m.forEach(b),t=w(s),c=V(s,"DIV",{class:!0});var I=A(c);for(let B=0;B<i.length;B+=1)i[B].l(I);I.forEach(b),s.forEach(b),this.h()},h(){K(r,"class","category-summary"),K(r,"role","group"),K(c,"class","ml-2"),n.open=!0},m(h,s){k(h,n,s),N(n,r),N(r,e),N(n,t),N(n,c);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(c,null);f=!0},p(h,[s]){if((!f||s&1)&&l!==(l=h[0].title+"")&&me(e,l),s&7){a=C(h[0].channels);let m;for(m=0;m<a.length;m+=1){const I=G(h,a,m);i[m]?(i[m].p(I,s),p(i[m],1)):(i[m]=O(I),i[m].c(),p(i[m],1),i[m].m(c,null))}for(E(),m=a.length;m<i.length;m+=1)u(m);S()}},i(h){if(!f){for(let s=0;s<a.length;s+=1)p(i[s]);f=!0}},o(h){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)g(i[s]);f=!1},d(h){h&&b(n),P(i,h)}}}function Be(o,n,r){let{$$slots:l={},$$scope:e}=n;const t=T(pe);let{category:c}=n;return o.$$set=f=>{"category"in f&&r(0,c=f.category),"$$scope"in f&&r(2,e=f.$$scope)},[c,t,e,l]}class Ke extends fe{constructor(n){super(),ue(this,n,Be,Ae,ce,{category:0})}}function Q(o,n,r){const l=o.slice();l[15]=n[r];const e=l[14].users.find(function(...c){return o[11](l[15],...c)})??l[1].api.fetchUser(l[15]._id.user);return l[16]=e,l}function W(o){const n=ve(o[16],o[15]);o[19]=n}function X(o,n,r){const l=o.slice();return l[22]=n[r],l}function Z(o,n,r){const l=o.slice();return l[25]=n[r],l}function Y(o){const n=o.slice(),r=n[0].categories??[];n[20]=r;const l=n[0].channels.filter(function(...t){return o[10](n[20],...t)})??[];return n[21]=l,n}function x(o){let n,r,l,e=C(o[21]),t=[];for(let u=0;u<e.length;u+=1)t[u]=ee(Z(o,e,u));const c=u=>g(t[u],1,1,()=>{t[u]=null});let f=C(o[20]),a=[];for(let u=0;u<f.length;u+=1)a[u]=le(X(o,f,u));const i=u=>g(a[u],1,1,()=>{a[u]=null});return{c(){n=U("div");for(let u=0;u<t.length;u+=1)t[u].c();r=y();for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){n=V(u,"DIV",{class:!0});var h=A(n);for(let s=0;s<t.length;s+=1)t[s].l(h);r=w(h);for(let s=0;s<a.length;s+=1)a[s].l(h);h.forEach(b),this.h()},h(){K(n,"class","channel-bar-container")},m(u,h){k(u,n,h);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,null);N(n,r);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(n,null);l=!0},p(u,h){if(h&3){e=C(u[21]);let s;for(s=0;s<e.length;s+=1){const m=Z(u,e,s);t[s]?(t[s].p(m,h),p(t[s],1)):(t[s]=ee(m),t[s].c(),p(t[s],1),t[s].m(n,r))}for(E(),s=e.length;s<t.length;s+=1)c(s);S()}if(h&17){f=C(u[20]);let s;for(s=0;s<f.length;s+=1){const m=X(u,f,s);a[s]?(a[s].p(m,h),p(a[s],1)):(a[s]=le(m),a[s].c(),p(a[s],1),a[s].m(n,null))}for(E(),s=f.length;s<a.length;s+=1)i(s);S()}},i(u){if(!l){for(let h=0;h<e.length;h+=1)p(t[h]);for(let h=0;h<f.length;h+=1)p(a[h]);l=!0}},o(u){t=t.filter(Boolean);for(let h=0;h<t.length;h+=1)g(t[h]);a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)g(a[h]);l=!1},d(u){u&&b(n),P(t,u),P(a,u)}}}function Me(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function Te(o){let n,r;return n=new de({props:{channel:o[4]}}),{c(){L(n.$$.fragment)},l(l){R(n.$$.fragment,l)},m(l,e){j(n,l,e),r=!0},p(l,e){const t={};e&1&&(t.channel=l[4]),n.$set(t)},i(l){r||(p(n.$$.fragment,l),r=!0)},o(l){g(n.$$.fragment,l),r=!1},d(l){q(n,l)}}}function Pe(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function ee(o){let n,r,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:Pe,then:Te,catch:Me,value:4,blocks:[,,,]};return D(r=o[1].api.fetchChannel(o[25]),e),{c(){n=$(),e.block.c()},l(t){n=$(),e.block.l(t)},m(t,c){k(t,n,c),e.block.m(t,e.anchor=c),e.mount=()=>n.parentNode,e.anchor=n,l=!0},p(t,c){o=t,e.ctx=o,c&1&&r!==(r=o[1].api.fetchChannel(o[25]))&&D(r,e)||J(e,o,c)},i(t){l||(p(e.block),l=!0)},o(t){for(let c=0;c<3;c+=1){const f=e.blocks[c];g(f)}l=!1},d(t){t&&b(n),e.block.d(t),e.token=null,e=null}}}function te(o){let n,r;return n=new de({props:{channel:o[4]}}),{c(){L(n.$$.fragment)},l(l){R(n.$$.fragment,l)},m(l,e){j(n,l,e),r=!0},p(l,e){const t={};e&16&&(t.channel=l[4]),n.$set(t)},i(l){r||(p(n.$$.fragment,l),r=!0)},o(l){g(n.$$.fragment,l),r=!1},d(l){q(n,l)}}}function Le(o){let n,r,l=o[4]!=null&&te(o);return{c(){l&&l.c(),n=y()},l(e){l&&l.l(e),n=w(e)},m(e,t){l&&l.m(e,t),k(e,n,t),r=!0},p(e,t){e[4]!=null?l?(l.p(e,t),t&16&&p(l,1)):(l=te(e),l.c(),p(l,1),l.m(n.parentNode,n)):l&&(E(),g(l,1,1,()=>{l=null}),S())},i(e){r||(p(l),r=!0)},o(e){g(l),r=!1},d(e){e&&b(n),l&&l.d(e)}}}function le(o){let n,r;return n=new Ke({props:{category:o[22],$$slots:{default:[Le,({channel:l})=>({4:l}),({channel:l})=>l?16:0]},$$scope:{ctx:o}}}),{c(){L(n.$$.fragment)},l(l){R(n.$$.fragment,l)},m(l,e){j(n,l,e),r=!0},p(l,e){const t={};e&1&&(t.category=l[22]),e&4112&&(t.$$scope={dirty:e,ctx:l}),n.$set(t)},i(l){r||(p(n.$$.fragment,l),r=!0)},o(l){g(n.$$.fragment,l),r=!1},d(l){q(n,l)}}}function ne(o){let n,r,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:ze,then:je,catch:Re,value:14,blocks:[,,,]};return D(r=o[1].api.fetchMembers(o[0]._id),e),{c(){n=U("div"),e.block.c(),this.h()},l(t){n=V(t,"DIV",{class:!0});var c=A(n);e.block.l(c),c.forEach(b),this.h()},h(){K(n,"class","members-list-container")},m(t,c){k(t,n,c),e.block.m(n,e.anchor=null),e.mount=()=>n,e.anchor=null,l=!0},p(t,c){o=t,e.ctx=o,c&1&&r!==(r=o[1].api.fetchMembers(o[0]._id))&&D(r,e)||J(e,o,c)},i(t){l||(p(e.block),l=!0)},o(t){for(let c=0;c<3;c+=1){const f=e.blocks[c];g(f)}l=!1},d(t){t&&b(n),e.block.d(),e.token=null,e=null}}}function Re(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function je(o){let n,r,l=C(o[14].members),e=[];for(let c=0;c<l.length;c+=1)e[c]=oe(Q(o,l,c));const t=c=>g(e[c],1,1,()=>{e[c]=null});return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=$()},l(c){for(let f=0;f<e.length;f+=1)e[f].l(c);n=$()},m(c,f){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(c,f);k(c,n,f),r=!0},p(c,f){if(f&3){l=C(c[14].members);let a;for(a=0;a<l.length;a+=1){const i=Q(c,l,a);e[a]?(e[a].p(i,f),p(e[a],1)):(e[a]=oe(i),e[a].c(),p(e[a],1),e[a].m(n.parentNode,n))}for(E(),a=l.length;a<e.length;a+=1)t(a);S()}},i(c){if(!r){for(let f=0;f<l.length;f+=1)p(e[f]);r=!0}},o(c){e=e.filter(Boolean);for(let f=0;f<e.length;f+=1)g(e[f]);r=!1},d(c){c&&b(n),P(e,c)}}}function qe(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function Je(o){W(o);let n,r,l,e=o[19]+"",t,c,f;return r=new Ce({props:{src:z(o[16],o[15]),name:o[19]}}),{c(){n=U("div"),L(r.$$.fragment),l=y(),t=_e(e),c=y()},l(a){n=V(a,"DIV",{});var i=A(n);R(r.$$.fragment,i),l=w(i),t=he(i,e),i.forEach(b),c=w(a)},m(a,i){k(a,n,i),j(r,n,null),N(n,l),N(n,t),k(a,c,i),f=!0},p(a,i){W(a);const u={};i&1&&(u.src=z(a[16],a[15])),i&1&&(u.name=a[19]),r.$set(u),(!f||i&1)&&e!==(e=a[19]+"")&&me(t,e)},i(a){f||(p(r.$$.fragment,a),f=!0)},o(a){g(r.$$.fragment,a),f=!1},d(a){a&&(b(n),b(c)),q(r)}}}function Ye(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function oe(o){let n,r,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:Ye,then:Je,catch:qe,value:16,blocks:[,,,]};return D(r=o[16],e),{c(){n=$(),e.block.c()},l(t){n=$(),e.block.l(t)},m(t,c){k(t,n,c),e.block.m(t,e.anchor=c),e.mount=()=>n.parentNode,e.anchor=n,l=!0},p(t,c){o=t,e.ctx=o,c&1&&r!==(r=o[16])&&D(r,e)||J(e,o,c)},i(t){l||(p(e.block),l=!0)},o(t){for(let c=0;c<3;c+=1){const f=e.blocks[c];g(f)}l=!1},d(t){t&&b(n),e.block.d(t),e.token=null,e=null}}}function ze(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function Fe(o){let n,r,l,e,t=o[0]!=null&&x(Y(o));const c=o[9].default,f=re(c,o,o[12],null);let a=o[0]!=null&&ne(o);return{c(){t&&t.c(),n=y(),f&&f.c(),r=y(),a&&a.c(),l=$()},l(i){t&&t.l(i),n=w(i),f&&f.l(i),r=w(i),a&&a.l(i),l=$()},m(i,u){t&&t.m(i,u),k(i,n,u),f&&f.m(i,u),k(i,r,u),a&&a.m(i,u),k(i,l,u),e=!0},p(i,[u]){i[0]!=null?t?(t.p(Y(i),u),u&1&&p(t,1)):(t=x(Y(i)),t.c(),p(t,1),t.m(n.parentNode,n)):t&&(E(),g(t,1,1,()=>{t=null}),S()),f&&f.p&&(!e||u&4096)&&ae(f,c,i,i[12],e?se(c,i[12],u,null):ie(i[12]),null),i[0]!=null?a?(a.p(i,u),u&1&&p(a,1)):(a=ne(i),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(E(),g(a,1,1,()=>{a=null}),S())},i(i){e||(p(t),p(f,i),p(a),e=!0)},o(i){g(t),g(f,i),g(a),e=!1},d(i){i&&(b(n),b(r),b(l)),t&&t.d(i),f&&f.d(i),a&&a.d(i)}}}function Ge(o,n,r){let l,e,t,c,f;M(o,ke,d=>r(8,f=d));let{$$slots:a={},$$scope:i}=n;const u=T(pe),h=T(Ne);M(o,h,d=>r(0,t=d));const s=F();M(o,s,d=>r(6,e=d)),$e(Ie,s);const m=T(ye)??F(l.cid);M(o,m,d=>r(7,c=d));async function I(d){const v=await u.api.fetchChannel(d);if(v.channel_type!="TextChannel"&&v.channel_type!="VoiceChannel")throw we(302,`/channels/${d}`);s.set(v)}const B=(d,v)=>d.find(be=>v!=null&&be.channels.includes(v))==null,ge=(d,{_id:v})=>v==d._id.user;return o.$$set=d=>{"$$scope"in d&&r(12,i=d.$$scope)},o.$$.update=()=>{if(o.$$.dirty&256&&r(5,l=f.params),o.$$.dirty&32&&m.set(l.cid),o.$$.dirty&128&&c&&I(c),o.$$.dirty&65){let d="";t==null?d+="Server":d+=t.name,e!=null&&(d+=` | #${e.name}`),d+=" - Jolt","__TAURI__"in window?De.setTitle(d):document.title=d}},[t,u,h,m,s,l,e,c,f,a,B,ge,i]}class it extends fe{constructor(n){super(),ue(this,n,Ge,Fe,ce,{})}}export{it as component};
