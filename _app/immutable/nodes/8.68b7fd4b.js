import{s as x,n as g,c as j}from"../chunks/scheduler.9b2bc230.js";import{S as ee,i as te,g as N,r as J,s as V,m as D,h as M,j as A,u as L,c as K,n as E,f as m,k as I,a as y,v as z,x as h,o as R,d,t as k,w as B,e as w,l as ie,b as F,p as G}from"../chunks/index.6c81ac7e.js";import{p as se}from"../chunks/stores.456a6b0b.js";import{C as ae}from"../chunks/index.97e1e4b8.js";import{g as H,h as O,a as Q,u as le,b as ne}from"../chunks/util.591b1810.js";import{g as q,c as re,b as oe}from"../chunks/context.3f5e8c52.js";import{U as fe}from"../chunks/UserProfilePicture.4245f318.js";import{r as ce}from"../chunks/index.1d6e502d.js";import{$ as ue}from"../chunks/runtime.esm.a3f7b725.js";import{g as pe}from"../chunks/chunk-NMUKSDLG.3f77d6f4.js";function me(s){return{c:g,l:g,m:g,p:g,d:g}}function de(s){var t;let n,r=((t=s[2])==null?void 0:t.content)!=null&&W(s);return{c(){r&&r.c(),n=w()},l(e){r&&r.l(e),n=w()},m(e,i){r&&r.m(e,i),y(e,n,i)},p(e,i){var a;((a=e[2])==null?void 0:a.content)!=null?r?r.p(e,i):(r=W(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(e){e&&m(n),r&&r.d(e)}}}function W(s){let n,r=s[2].content+"",t;return{c(){n=N("p"),t=D(r),this.h()},l(e){n=M(e,"P",{style:!0,class:!0});var i=A(n);t=E(i,r),i.forEach(m),this.h()},h(){ie(n,"overflow-wrap","break-word"),I(n,"class","whitespace-pre-wrap")},m(e,i){y(e,n,i),h(n,t)},p(e,i){i&1&&r!==(r=e[2].content+"")&&R(t,r)},d(e){e&&m(n)}}}function _e(s){return{c:g,l:g,m:g,p:g,d:g}}function he(s){let n,r,t,e,i,a,l,_=s[0].username+"",u,$,P=s[0].discriminator+"",C,o,b,T,v;r=new fe({props:{width:64,height:64,src:H(s[0]),name:s[1]}});let p={ctx:s,current:null,token:null,hasCatch:!1,pending:_e,then:de,catch:me,value:2};return O(b=s[3].api.fetchUserProfile(s[0]._id),p),{c(){n=N("div"),J(r.$$.fragment),t=V(),e=N("p"),i=D(s[1]),a=V(),l=N("p"),u=D(_),$=D("#"),C=D(P),o=V(),p.block.c(),this.h()},l(c){n=M(c,"DIV",{style:!0});var f=A(n);L(r.$$.fragment,f),t=K(f),e=M(f,"P",{});var S=A(e);i=E(S,s[1]),S.forEach(m),a=K(f),l=M(f,"P",{class:!0});var U=A(l);u=E(U,_),$=E(U,"#"),C=E(U,P),U.forEach(m),o=K(f),p.block.l(f),f.forEach(m),this.h()},h(){var c;I(l,"class","text-sm text-gray-600"),I(n,"style",T=((c=s[2])==null?void 0:c.background)!=null?`background-image: url(${Q(s[2].background)})`:void 0)},m(c,f){y(c,n,f),z(r,n,null),h(n,t),h(n,e),h(e,i),h(n,a),h(n,l),h(l,u),h(l,$),h(l,C),h(n,o),p.block.m(n,p.anchor=null),p.mount=()=>n,p.anchor=null,v=!0},p(c,[f]){var U;s=c;const S={};f&1&&(S.src=H(s[0])),f&2&&(S.name=s[1]),r.$set(S),(!v||f&2)&&R(i,s[1]),(!v||f&1)&&_!==(_=s[0].username+"")&&R(u,_),(!v||f&1)&&P!==(P=s[0].discriminator+"")&&R(C,P),p.ctx=s,f&1&&b!==(b=s[3].api.fetchUserProfile(s[0]._id))&&O(b,p)||le(p,s,f),(!v||f&4&&T!==(T=((U=s[2])==null?void 0:U.background)!=null?`background-image: url(${Q(s[2].background)})`:void 0))&&I(n,"style",T)},i(c){v||(d(r.$$.fragment,c),v=!0)},o(c){k(r.$$.fragment,c),v=!1},d(c){c&&m(n),B(r),p.block.d(),p.token=null,p=null}}}function ge(s,n,r){let t,{user:e}=n;const i=q(re);let a;return s.$$set=l=>{"user"in l&&r(0,e=l.user)},s.$$.update=()=>{s.$$.dirty&1&&r(1,t=ne(e)),s.$$.dirty&1&&i.api.fetchUserProfile(e._id).then(l=>r(2,a=l))},[e,t,a,i]}class be extends ee{constructor(n){super(),te(this,n,ge,he,x,{user:0})}}function X(s){let n,r,t,e;n=new ae({props:{channel:s[0]}});let i=s[0].channel_type!="SavedMessages"&&Y(s);return{c(){J(n.$$.fragment),r=V(),i&&i.c(),t=w()},l(a){L(n.$$.fragment,a),r=K(a),i&&i.l(a),t=w()},m(a,l){z(n,a,l),y(a,r,l),i&&i.m(a,l),y(a,t,l),e=!0},p(a,l){const _={};l&1&&(_.channel=a[0]),n.$set(_),a[0].channel_type!="SavedMessages"?i?(i.p(a,l),l&1&&d(i,1)):(i=Y(a),i.c(),d(i,1),i.m(t.parentNode,t)):i&&(G(),k(i,1,1,()=>{i=null}),F())},i(a){e||(d(n.$$.fragment,a),d(i),e=!0)},o(a){k(n.$$.fragment,a),k(i),e=!1},d(a){a&&(m(r),m(t)),B(n,a),i&&i.d(a)}}}function Y(s){let n,r,t=s[1]!=null&&Z(s);return{c(){t&&t.c(),n=w()},l(e){t&&t.l(e),n=w()},m(e,i){t&&t.m(e,i),y(e,n,i),r=!0},p(e,i){e[1]!=null?t?(t.p(e,i),i&2&&d(t,1)):(t=Z(e),t.c(),d(t,1),t.m(n.parentNode,n)):t&&(G(),k(t,1,1,()=>{t=null}),F())},i(e){r||(d(t),r=!0)},o(e){k(t),r=!1},d(e){e&&m(n),t&&t.d(e)}}}function Z(s){let n,r,t;return r=new be({props:{user:s[1]}}),{c(){n=N("div"),J(r.$$.fragment),this.h()},l(e){n=M(e,"DIV",{class:!0});var i=A(n);L(r.$$.fragment,i),i.forEach(m),this.h()},h(){I(n,"class","members-list-container")},m(e,i){y(e,n,i),z(r,n,null),t=!0},p(e,i){const a={};i&2&&(a.user=e[1]),r.$set(a)},i(e){t||(d(r.$$.fragment,e),t=!0)},o(e){k(r.$$.fragment,e),t=!1},d(e){e&&m(n),B(r)}}}function ke(s){let n,r,t=s[0]!=null&&X(s);return{c(){t&&t.c(),n=w()},l(e){t&&t.l(e),n=w()},m(e,i){t&&t.m(e,i),y(e,n,i),r=!0},p(e,[i]){e[0]!=null?t?(t.p(e,i),i&1&&d(t,1)):(t=X(e),t.c(),d(t,1),t.m(n.parentNode,n)):t&&(G(),k(t,1,1,()=>{t=null}),F())},i(e){r||(d(t),r=!0)},o(e){k(t),r=!1},d(e){e&&m(n),t&&t.d(e)}}}function $e(s,n,r){let t,e,i,a;j(s,ue,o=>r(4,e=o)),j(s,se,o=>r(5,a=o));const l=q(re),_=q(oe);j(s,_,o=>r(6,i=o));let u,$;async function P(o){const b=await l.api.fetchChannel(o);if(b.channel_type=="TextChannel"||b.channel_type=="VoiceChannel")throw ce(302,`/servers/${b.server}/channels/${t.id}`);r(0,u=b)}async function C(o){r(1,$=await l.api.fetchUser(o.recipients[0]==i.user_id?o.recipients[1]:o.recipients[0]))}return s.$$.update=()=>{if(s.$$.dirty&32&&r(3,t=a.params),s.$$.dirty&8&&P(t.id),s.$$.dirty&1&&u!=null&&u.channel_type!="SavedMessages"&&C(u),s.$$.dirty&19){let o="";(u==null?void 0:u.channel_type)=="SavedMessages"?o+=e("channel.notes"):$==null?o+=e("channel.dm.title"):o+=`${e("channel.dm.with")} ${ne($)}`,o+=" - Jolt","__TAURI__"in window?pe.setTitle(o):document.title=o}},[u,$,_,t,e,a]}class Me extends ee{constructor(n){super(),te(this,n,$e,ke,x,{})}}export{Me as component};
