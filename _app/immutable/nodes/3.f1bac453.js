import{s as G,d as L,u as P,g as R,e as V,c as z,o as A}from"../chunks/scheduler.a21a5cad.js";import{S as F,i as H,g as J,s as I,h as O,j as Q,f as m,c as N,k,a as d,d as u,t as p,b as g,e as b,p as $,y as T,r as K,u as j,v as q,w as B}from"../chunks/index.4419476b.js";import{e as y}from"../chunks/each.e59479a4.js";/* empty css                      */import{p as U}from"../chunks/stores.341d359d.js";import{w as W}from"../chunks/index.d8292243.js";import{s as X}from"../chunks/context.fa34f1f8.js";import{g as M,c as Y}from"../chunks/context.898bb4a8.js";import{C as E}from"../chunks/Channel.555d96b7.js";function v(r,l,a){const t=r.slice();return t[9]=l[a],t}function C(r){let l,a,t,e=r[1]!=null&&D(r),i=y(r[0]),s=[];for(let n=0;n<i.length;n+=1)s[n]=w(v(r,i,n));const f=n=>p(s[n],1,1,()=>{s[n]=null});return{c(){e&&e.c(),l=I();for(let n=0;n<s.length;n+=1)s[n].c();a=b()},l(n){e&&e.l(n),l=N(n);for(let c=0;c<s.length;c+=1)s[c].l(n);a=b()},m(n,c){e&&e.m(n,c),d(n,l,c);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(n,c);d(n,a,c),t=!0},p(n,c){if(n[1]!=null?e?(e.p(n,c),c&2&&u(e,1)):(e=D(n),e.c(),u(e,1),e.m(l.parentNode,l)):e&&($(),p(e,1,1,()=>{e=null}),g()),c&1){i=y(n[0]);let o;for(o=0;o<i.length;o+=1){const h=v(n,i,o);s[o]?(s[o].p(h,c),u(s[o],1)):(s[o]=w(h),s[o].c(),u(s[o],1),s[o].m(a.parentNode,a))}for($(),o=i.length;o<s.length;o+=1)f(o);g()}},i(n){if(!t){u(e);for(let c=0;c<i.length;c+=1)u(s[c]);t=!0}},o(n){p(e),s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)p(s[c]);t=!1},d(n){n&&(m(l),m(a)),e&&e.d(n),T(s,n)}}}function D(r){let l,a;return l=new E({props:{channel:r[1]}}),{c(){K(l.$$.fragment)},l(t){j(l.$$.fragment,t)},m(t,e){q(l,t,e),a=!0},p(t,e){const i={};e&2&&(i.channel=t[1]),l.$set(i)},i(t){a||(u(l.$$.fragment,t),a=!0)},o(t){p(l.$$.fragment,t),a=!1},d(t){B(l,t)}}}function S(r){let l,a;return l=new E({props:{channel:r[9]}}),{c(){K(l.$$.fragment)},l(t){j(l.$$.fragment,t)},m(t,e){q(l,t,e),a=!0},p(t,e){const i={};e&1&&(i.channel=t[9]),l.$set(i)},i(t){a||(u(l.$$.fragment,t),a=!0)},o(t){p(l.$$.fragment,t),a=!1},d(t){B(l,t)}}}function w(r){let l,a,t=r[9].channel_type!="SavedMessages"&&S(r);return{c(){t&&t.c(),l=b()},l(e){t&&t.l(e),l=b()},m(e,i){t&&t.m(e,i),d(e,l,i),a=!0},p(e,i){e[9].channel_type!="SavedMessages"?t?(t.p(e,i),i&1&&u(t,1)):(t=S(e),t.c(),u(t,1),t.m(l.parentNode,l)):t&&($(),p(t,1,1,()=>{t=null}),g())},i(e){a||(u(t),a=!0)},o(e){p(t),a=!1},d(e){e&&m(l),t&&t.d(e)}}}function Z(r){let l,a,t,e=r[0]!=null&&C(r);const i=r[5].default,s=L(i,r,r[4],null);return{c(){l=J("div"),e&&e.c(),a=I(),s&&s.c(),this.h()},l(f){l=O(f,"DIV",{role:!0,class:!0});var n=Q(l);e&&e.l(n),n.forEach(m),a=N(f),s&&s.l(f),this.h()},h(){k(l,"role","list"),k(l,"class","channel-bar-container")},m(f,n){d(f,l,n),e&&e.m(l,null),d(f,a,n),s&&s.m(f,n),t=!0},p(f,[n]){f[0]!=null?e?(e.p(f,n),n&1&&u(e,1)):(e=C(f),e.c(),u(e,1),e.m(l,null)):e&&($(),p(e,1,1,()=>{e=null}),g()),s&&s.p&&(!t||n&16)&&P(s,i,f,f[4],t?V(i,f[4],n,null):R(f[4]),null)},i(f){t||(u(e),u(s,f),t=!0)},o(f){p(e),p(s,f),t=!1},d(f){f&&(m(l),m(a)),e&&e.d(),s&&s.d(f)}}}function x(r,l,a){let t,e,i;z(r,U,_=>a(3,i=_));let{$$slots:s={},$$scope:f}=l;const n=M(Y),c=M(X)??W();let o;function h(){a(0,o=n.api.cache.channels.filter(_=>["DirectMessage","Group","SavedMessages"].includes(_.channel_type))),((o==null?void 0:o.length)??0)==0&&n.ready&&n.api.fetchDirectMessages().then(_=>a(0,o=_))}return n.on("Ready",h),A(h),r.$$set=_=>{"$$scope"in _&&a(4,f=_.$$scope)},r.$$.update=()=>{r.$$.dirty&8&&a(2,t=i.params),r.$$.dirty&4&&c.set(t.id),r.$$.dirty&1&&a(1,e=o==null?void 0:o.find(_=>_.channel_type=="SavedMessages"))},[o,e,t,i,f,s]}class fe extends F{constructor(l){super(),H(this,l,x,Z,G,{})}}export{fe as component};
