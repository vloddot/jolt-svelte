import{s as ce,n as h,d as ae,u as ie,g as se,e as fe,c as V}from"../chunks/scheduler.1c041516.js";import{S as ue,i as _e,g as M,m as he,s as w,h as T,j as U,n as me,f as b,c as D,k as A,a as k,x as N,o as pe,d as p,p as E,b as K,t as g,y as j,e as $,r as L,u as O,v as R,w as q}from"../chunks/index.c08cc536.js";import{h as I,u as z}from"../chunks/await_block.23519391.js";import{e as C}from"../chunks/each.e59479a4.js";import{p as Ce}from"../chunks/stores.3c0fe84f.js";import{g as P,c as de,s as Y}from"../chunks/context.03d0c4ff.js";import{g as F,b as we}from"../chunks/util.8633d826.js";import{C as ge}from"../chunks/Channel.fb7385b5.js";import{U as De}from"../chunks/UserProfilePicture.34f065a7.js";import{a as Ie,s as Se}from"../chunks/context.fa34f1f8.js";import{r as Ne}from"../chunks/index.5e2a9a64.js";import{g as Ee}from"../chunks/chunk-NMUKSDLG.3f77d6f4.js";import{w as B}from"../chunks/index.cd290ac5.js";import{s as Ke,c as Me}from"../chunks/context.dd405c9c.js";const Te=!1,_t=Object.freeze(Object.defineProperty({__proto__:null,prerender:Te},Symbol.toStringTag,{value:"Module"}));function G(o,n,c){const l=o.slice();return l[4]=n[c],l}const Ue=o=>({channel:o&1}),H=o=>({channel:o[7]});function Ve(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Ae(o){let n,c;const l=o[3].default,e=ae(l,o,o[2],H);return{c(){e&&e.c(),n=w()},l(t){e&&e.l(t),n=D(t)},m(t,r){e&&e.m(t,r),k(t,n,r),c=!0},p(t,r){e&&e.p&&(!c||r&5)&&ie(e,l,t,t[2],c?fe(l,t[2],r,Ue):se(t[2]),H)},i(t){c||(p(e,t),c=!0)},o(t){g(e,t),c=!1},d(t){t&&b(n),e&&e.d(t)}}}function Be(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Q(o){let n,c,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:Be,then:Ae,catch:Ve,value:7,blocks:[,,,]};return I(c=o[1].api.fetchChannel(o[4]),e),{c(){n=$(),e.block.c()},l(t){n=$(),e.block.l(t)},m(t,r){k(t,n,r),e.block.m(t,e.anchor=r),e.mount=()=>n.parentNode,e.anchor=n,l=!0},p(t,r){o=t,e.ctx=o,r&1&&c!==(c=o[1].api.fetchChannel(o[4]))&&I(c,e)||z(e,o,r)},i(t){l||(p(e.block),l=!0)},o(t){for(let r=0;r<3;r+=1){const f=e.blocks[r];g(f)}l=!1},d(t){t&&b(n),e.block.d(t),e.token=null,e=null}}}function Pe(o){let n,c,l=o[0].title+"",e,t,r,f,a=C(o[0].channels),i=[];for(let _=0;_<a.length;_+=1)i[_]=Q(G(o,a,_));const u=_=>g(i[_],1,1,()=>{i[_]=null});return{c(){n=M("details"),c=M("summary"),e=he(l),t=w(),r=M("div");for(let _=0;_<i.length;_+=1)i[_].c();this.h()},l(_){n=T(_,"DETAILS",{});var s=U(n);c=T(s,"SUMMARY",{class:!0,role:!0});var m=U(c);e=me(m,l),m.forEach(b),t=D(s),r=T(s,"DIV",{class:!0});var v=U(r);for(let S=0;S<i.length;S+=1)i[S].l(v);v.forEach(b),s.forEach(b),this.h()},h(){A(c,"class","category-summary"),A(c,"role","group"),A(r,"class","ml-2"),n.open=!0},m(_,s){k(_,n,s),N(n,c),N(c,e),N(n,t),N(n,r);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(r,null);f=!0},p(_,[s]){if((!f||s&1)&&l!==(l=_[0].title+"")&&pe(e,l),s&7){a=C(_[0].channels);let m;for(m=0;m<a.length;m+=1){const v=G(_,a,m);i[m]?(i[m].p(v,s),p(i[m],1)):(i[m]=Q(v),i[m].c(),p(i[m],1),i[m].m(r,null))}for(E(),m=a.length;m<i.length;m+=1)u(m);K()}},i(_){if(!f){for(let s=0;s<a.length;s+=1)p(i[s]);f=!0}},o(_){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)g(i[s]);f=!1},d(_){_&&b(n),j(i,_)}}}function je(o,n,c){let{$$slots:l={},$$scope:e}=n;const t=P(de);let{category:r}=n;return o.$$set=f=>{"category"in f&&c(0,r=f.category),"$$scope"in f&&c(2,e=f.$$scope)},[r,t,e,l]}class Le extends ue{constructor(n){super(),_e(this,n,je,Pe,ce,{category:0})}}function W(o,n,c){const l=o.slice();l[18]=n[c];const e=l[17].users.find(function(...r){return o[13](l[18],...r)})??l[1].api.fetchUser(l[18]._id.user);return l[19]=e,l}function X(o){const n=we(o[19],o[18]);o[22]=n}function Z(o,n,c){const l=o.slice();return l[25]=n[c],l}function x(o,n,c){const l=o.slice();return l[28]=n[c],l}function J(o){const n=o.slice(),c=n[0].categories??[];n[23]=c;const l=n[0].channels.filter(function(...t){return o[12](n[23],...t)})??[];return n[24]=l,n}function ee(o){let n,c,l,e=C(o[24]),t=[];for(let u=0;u<e.length;u+=1)t[u]=te(x(o,e,u));const r=u=>g(t[u],1,1,()=>{t[u]=null});let f=C(o[23]),a=[];for(let u=0;u<f.length;u+=1)a[u]=ne(Z(o,f,u));const i=u=>g(a[u],1,1,()=>{a[u]=null});return{c(){n=M("div");for(let u=0;u<t.length;u+=1)t[u].c();c=w();for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){n=T(u,"DIV",{class:!0});var _=U(n);for(let s=0;s<t.length;s+=1)t[s].l(_);c=D(_);for(let s=0;s<a.length;s+=1)a[s].l(_);_.forEach(b),this.h()},h(){A(n,"class","channel-bar-container")},m(u,_){k(u,n,_);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,null);N(n,c);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(n,null);l=!0},p(u,_){if(_&3){e=C(u[24]);let s;for(s=0;s<e.length;s+=1){const m=x(u,e,s);t[s]?(t[s].p(m,_),p(t[s],1)):(t[s]=te(m),t[s].c(),p(t[s],1),t[s].m(n,c))}for(E(),s=e.length;s<t.length;s+=1)r(s);K()}if(_&33){f=C(u[23]);let s;for(s=0;s<f.length;s+=1){const m=Z(u,f,s);a[s]?(a[s].p(m,_),p(a[s],1)):(a[s]=ne(m),a[s].c(),p(a[s],1),a[s].m(n,null))}for(E(),s=f.length;s<a.length;s+=1)i(s);K()}},i(u){if(!l){for(let _=0;_<e.length;_+=1)p(t[_]);for(let _=0;_<f.length;_+=1)p(a[_]);l=!0}},o(u){t=t.filter(Boolean);for(let _=0;_<t.length;_+=1)g(t[_]);a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)g(a[_]);l=!1},d(u){u&&b(n),j(t,u),j(a,u)}}}function Oe(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Re(o){let n,c;return n=new ge({props:{channel:o[5]}}),{c(){L(n.$$.fragment)},l(l){O(n.$$.fragment,l)},m(l,e){R(n,l,e),c=!0},p(l,e){const t={};e&1&&(t.channel=l[5]),n.$set(t)},i(l){c||(p(n.$$.fragment,l),c=!0)},o(l){g(n.$$.fragment,l),c=!1},d(l){q(n,l)}}}function qe(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function te(o){let n,c,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:qe,then:Re,catch:Oe,value:5,blocks:[,,,]};return I(c=o[1].api.fetchChannel(o[28]),e),{c(){n=$(),e.block.c()},l(t){n=$(),e.block.l(t)},m(t,r){k(t,n,r),e.block.m(t,e.anchor=r),e.mount=()=>n.parentNode,e.anchor=n,l=!0},p(t,r){o=t,e.ctx=o,r&1&&c!==(c=o[1].api.fetchChannel(o[28]))&&I(c,e)||z(e,o,r)},i(t){l||(p(e.block),l=!0)},o(t){for(let r=0;r<3;r+=1){const f=e.blocks[r];g(f)}l=!1},d(t){t&&b(n),e.block.d(t),e.token=null,e=null}}}function le(o){let n,c;return n=new ge({props:{channel:o[5]}}),{c(){L(n.$$.fragment)},l(l){O(n.$$.fragment,l)},m(l,e){R(n,l,e),c=!0},p(l,e){const t={};e&32&&(t.channel=l[5]),n.$set(t)},i(l){c||(p(n.$$.fragment,l),c=!0)},o(l){g(n.$$.fragment,l),c=!1},d(l){q(n,l)}}}function ze(o){let n,c,l=o[5]!=null&&le(o);return{c(){l&&l.c(),n=w()},l(e){l&&l.l(e),n=D(e)},m(e,t){l&&l.m(e,t),k(e,n,t),c=!0},p(e,t){e[5]!=null?l?(l.p(e,t),t&32&&p(l,1)):(l=le(e),l.c(),p(l,1),l.m(n.parentNode,n)):l&&(E(),g(l,1,1,()=>{l=null}),K())},i(e){c||(p(l),c=!0)},o(e){g(l),c=!1},d(e){e&&b(n),l&&l.d(e)}}}function ne(o){let n,c;return n=new Le({props:{category:o[25],$$slots:{default:[ze,({channel:l})=>({5:l}),({channel:l})=>l?32:0]},$$scope:{ctx:o}}}),{c(){L(n.$$.fragment)},l(l){O(n.$$.fragment,l)},m(l,e){R(n,l,e),c=!0},p(l,e){const t={};e&1&&(t.category=l[25]),e&16416&&(t.$$scope={dirty:e,ctx:l}),n.$set(t)},i(l){c||(p(n.$$.fragment,l),c=!0)},o(l){g(n.$$.fragment,l),c=!1},d(l){q(n,l)}}}function oe(o){let n,c,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:Qe,then:Ye,catch:Je,value:17,blocks:[,,,]};return I(c=o[1].api.fetchMembers(o[0]._id),e),{c(){n=M("div"),e.block.c(),this.h()},l(t){n=T(t,"DIV",{class:!0});var r=U(n);e.block.l(r),r.forEach(b),this.h()},h(){A(n,"class","members-list-container")},m(t,r){k(t,n,r),e.block.m(n,e.anchor=null),e.mount=()=>n,e.anchor=null,l=!0},p(t,r){o=t,e.ctx=o,r&1&&c!==(c=o[1].api.fetchMembers(o[0]._id))&&I(c,e)||z(e,o,r)},i(t){l||(p(e.block),l=!0)},o(t){for(let r=0;r<3;r+=1){const f=e.blocks[r];g(f)}l=!1},d(t){t&&b(n),e.block.d(),e.token=null,e=null}}}function Je(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Ye(o){let n,c,l=C(o[17].members),e=[];for(let r=0;r<l.length;r+=1)e[r]=re(W(o,l,r));const t=r=>g(e[r],1,1,()=>{e[r]=null});return{c(){for(let r=0;r<e.length;r+=1)e[r].c();n=$()},l(r){for(let f=0;f<e.length;f+=1)e[f].l(r);n=$()},m(r,f){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(r,f);k(r,n,f),c=!0},p(r,f){if(f&3){l=C(r[17].members);let a;for(a=0;a<l.length;a+=1){const i=W(r,l,a);e[a]?(e[a].p(i,f),p(e[a],1)):(e[a]=re(i),e[a].c(),p(e[a],1),e[a].m(n.parentNode,n))}for(E(),a=l.length;a<e.length;a+=1)t(a);K()}},i(r){if(!c){for(let f=0;f<l.length;f+=1)p(e[f]);c=!0}},o(r){e=e.filter(Boolean);for(let f=0;f<e.length;f+=1)g(e[f]);c=!1},d(r){r&&b(n),j(e,r)}}}function Fe(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Ge(o){X(o);let n,c,l,e=o[22]+"",t,r,f;return c=new De({props:{src:F(o[19],o[18]),name:o[22]}}),{c(){n=M("div"),L(c.$$.fragment),l=w(),t=he(e),r=w()},l(a){n=T(a,"DIV",{});var i=U(n);O(c.$$.fragment,i),l=D(i),t=me(i,e),i.forEach(b),r=D(a)},m(a,i){k(a,n,i),R(c,n,null),N(n,l),N(n,t),k(a,r,i),f=!0},p(a,i){X(a);const u={};i&1&&(u.src=F(a[19],a[18])),i&1&&(u.name=a[22]),c.$set(u),(!f||i&1)&&e!==(e=a[22]+"")&&pe(t,e)},i(a){f||(p(c.$$.fragment,a),f=!0)},o(a){g(c.$$.fragment,a),f=!1},d(a){a&&(b(n),b(r)),q(c)}}}function He(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function re(o){let n,c,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:He,then:Ge,catch:Fe,value:19,blocks:[,,,]};return I(c=o[19],e),{c(){n=$(),e.block.c()},l(t){n=$(),e.block.l(t)},m(t,r){k(t,n,r),e.block.m(t,e.anchor=r),e.mount=()=>n.parentNode,e.anchor=n,l=!0},p(t,r){o=t,e.ctx=o,r&1&&c!==(c=o[19])&&I(c,e)||z(e,o,r)},i(t){l||(p(e.block),l=!0)},o(t){for(let r=0;r<3;r+=1){const f=e.blocks[r];g(f)}l=!1},d(t){t&&b(n),e.block.d(t),e.token=null,e=null}}}function Qe(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function We(o){let n,c,l,e,t=o[0]!=null&&ee(J(o));const r=o[11].default,f=ae(r,o,o[14],null);let a=o[0]!=null&&oe(o);return{c(){t&&t.c(),n=w(),f&&f.c(),c=w(),a&&a.c(),l=$()},l(i){t&&t.l(i),n=D(i),f&&f.l(i),c=D(i),a&&a.l(i),l=$()},m(i,u){t&&t.m(i,u),k(i,n,u),f&&f.m(i,u),k(i,c,u),a&&a.m(i,u),k(i,l,u),e=!0},p(i,[u]){i[0]!=null?t?(t.p(J(i),u),u&1&&p(t,1)):(t=ee(J(i)),t.c(),p(t,1),t.m(n.parentNode,n)):t&&(E(),g(t,1,1,()=>{t=null}),K()),f&&f.p&&(!e||u&16384)&&ie(f,r,i,i[14],e?fe(r,i[14],u,null):se(i[14]),null),i[0]!=null?a?(a.p(i,u),u&1&&p(a,1)):(a=oe(i),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(E(),g(a,1,1,()=>{a=null}),K())},i(i){e||(p(t),p(f,i),p(a),e=!0)},o(i){g(t),g(f,i),g(a),e=!1},d(i){i&&(b(n),b(c),b(l)),t&&t.d(i),f&&f.d(i),a&&a.d(i)}}}function Xe(o,n,c){let l,e,t,r,f,a;V(o,Ce,d=>c(10,a=d));let{$$slots:i={},$$scope:u}=n;const _=P(de),s=B();V(o,s,d=>c(0,t=d));const m=B();V(o,m,d=>c(7,e=d)),Y(Ke,s),Y(Me,m);const v=P(Ie)??B(l.sid);V(o,v,d=>c(9,f=d));const S=P(Se)??B(l.cid);V(o,S,d=>c(8,r=d));async function be(d){s.set(await _.api.fetchServer(d))}async function ke(d){const y=await _.api.fetchChannel(d);if(y.channel_type!="TextChannel"&&y.channel_type!="VoiceChannel")throw Ne(302,`/channels/${d}`);m.set(y)}const $e=(d,y)=>d.find(ye=>y!=null&&ye.channels.includes(y))==null,ve=(d,{_id:y})=>y==d._id.user;return o.$$set=d=>{"$$scope"in d&&c(14,u=d.$$scope)},o.$$.update=()=>{if(o.$$.dirty&1024&&c(6,l=a.params),o.$$.dirty&64&&v.set(l.sid),o.$$.dirty&64&&S.set(l.cid),o.$$.dirty&512&&f&&be(f),o.$$.dirty&256&&r&&ke(r),o.$$.dirty&129){let d="";t!=null?d+=t.name:d+="Server",e!=null&&(d+=` | #${e.name}`),d+=" - Jolt","__TAURI__"in window?Ee.setTitle(d):document.title=d}},[t,_,s,v,S,m,l,e,r,f,a,i,$e,ve,u]}class ht extends ue{constructor(n){super(),_e(this,n,Xe,We,ce,{})}}export{ht as component,_t as universal};
