import{s as re,n as _,d as ae,u as ie,g as se,e as fe,c as B}from"../chunks/scheduler.bc65eea2.js";import{S as ue,i as _e,g as U,m as he,s as y,h as V,j as A,n as me,f as b,c as D,k as R,a as k,x as E,o as pe,d as p,p as K,b as S,t as g,y as T,e as v,r as j,u as L,v as q,w as J}from"../chunks/index.cf715be0.js";import{h as I,u as P}from"../chunks/await_block.b32c7e6c.js";import{e as w}from"../chunks/each.e59479a4.js";import{p as Ce}from"../chunks/stores.7d859062.js";import{g as M,c as de,s as we,a as ye}from"../chunks/context.58a48396.js";import{U as z,g as F,b as De}from"../chunks/util.892acc65.js";import{a as ge}from"../chunks/Channel.c613089d.js";import{R as Ie}from"../chunks/RoundedImage.78a8751c.js";import{s as Ne}from"../chunks/context.fa34f1f8.js";import{r as Ee}from"../chunks/index.5e2a9a64.js";import{g as Ke}from"../chunks/chunk-NMUKSDLG.3f77d6f4.js";import{w as G}from"../chunks/index.27f04a12.js";import{c as Se}from"../chunks/context.125d2488.js";import{s as Ue}from"../chunks/context.c622ed87.js";function H(o,n,r){const l=o.slice();return l[4]=n[r],l}const Ve=o=>({channel:o&1}),O=o=>({channel:o[7]});function Ae(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function Be(o){let n,r;const l=o[3].default,e=ae(l,o,o[2],O);return{c(){e&&e.c(),n=y()},l(t){e&&e.l(t),n=D(t)},m(t,c){e&&e.m(t,c),k(t,n,c),r=!0},p(t,c){e&&e.p&&(!r||c&5)&&ie(e,l,t,t[2],r?fe(l,t[2],c,Ve):se(t[2]),O)},i(t){r||(p(e,t),r=!0)},o(t){g(e,t),r=!1},d(t){t&&b(n),e&&e.d(t)}}}function Me(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function Q(o){let n,r,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:Me,then:Be,catch:Ae,value:7,blocks:[,,,]};return I(r=o[1].api.fetchChannel(o[4]),e),{c(){n=v(),e.block.c()},l(t){n=v(),e.block.l(t)},m(t,c){k(t,n,c),e.block.m(t,e.anchor=c),e.mount=()=>n.parentNode,e.anchor=n,l=!0},p(t,c){o=t,e.ctx=o,c&1&&r!==(r=o[1].api.fetchChannel(o[4]))&&I(r,e)||P(e,o,c)},i(t){l||(p(e.block),l=!0)},o(t){for(let c=0;c<3;c+=1){const f=e.blocks[c];g(f)}l=!1},d(t){t&&b(n),e.block.d(t),e.token=null,e=null}}}function Re(o){let n,r,l=o[0].title+"",e,t,c,f,a=w(o[0].channels),i=[];for(let h=0;h<a.length;h+=1)i[h]=Q(H(o,a,h));const u=h=>g(i[h],1,1,()=>{i[h]=null});return{c(){n=U("details"),r=U("summary"),e=he(l),t=y(),c=U("div");for(let h=0;h<i.length;h+=1)i[h].c();this.h()},l(h){n=V(h,"DETAILS",{});var s=A(n);r=V(s,"SUMMARY",{class:!0,role:!0});var m=A(r);e=me(m,l),m.forEach(b),t=D(s),c=V(s,"DIV",{class:!0});var $=A(c);for(let N=0;N<i.length;N+=1)i[N].l($);$.forEach(b),s.forEach(b),this.h()},h(){R(r,"class","category-summary"),R(r,"role","group"),R(c,"class","ml-2"),n.open=!0},m(h,s){k(h,n,s),E(n,r),E(r,e),E(n,t),E(n,c);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(c,null);f=!0},p(h,[s]){if((!f||s&1)&&l!==(l=h[0].title+"")&&pe(e,l),s&7){a=w(h[0].channels);let m;for(m=0;m<a.length;m+=1){const $=H(h,a,m);i[m]?(i[m].p($,s),p(i[m],1)):(i[m]=Q($),i[m].c(),p(i[m],1),i[m].m(c,null))}for(K(),m=a.length;m<i.length;m+=1)u(m);S()}},i(h){if(!f){for(let s=0;s<a.length;s+=1)p(i[s]);f=!0}},o(h){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)g(i[s]);f=!1},d(h){h&&b(n),T(i,h)}}}function Te(o,n,r){let{$$slots:l={},$$scope:e}=n;const t=M(de);let{category:c}=n;return o.$$set=f=>{"category"in f&&r(0,c=f.category),"$$scope"in f&&r(2,e=f.$$scope)},[c,t,e,l]}class je extends ue{constructor(n){super(),_e(this,n,Te,Re,re,{category:0})}}function W(o,n,r){const l=o.slice();l[17]=n[r];const e=l[16].users.find(function(...c){return o[13](l[17],...c)})??l[2].api.fetchUser(l[17]._id.user);return l[18]=e,l}function X(o){const n=De(o[18],o[17]);o[21]=n}function Z(o,n,r){const l=o.slice();return l[24]=n[r],l}function x(o,n,r){const l=o.slice();return l[27]=n[r],l}function Y(o){const n=o.slice(),r=n[0].categories??[];n[22]=r;const l=n[0].channels.filter(function(...t){return o[12](n[22],...t)})??[];return n[23]=l,n}function ee(o){let n,r,l,e=w(o[23]),t=[];for(let u=0;u<e.length;u+=1)t[u]=te(x(o,e,u));const c=u=>g(t[u],1,1,()=>{t[u]=null});let f=w(o[22]),a=[];for(let u=0;u<f.length;u+=1)a[u]=ne(Z(o,f,u));const i=u=>g(a[u],1,1,()=>{a[u]=null});return{c(){n=U("div");for(let u=0;u<t.length;u+=1)t[u].c();r=y();for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){n=V(u,"DIV",{class:!0});var h=A(n);for(let s=0;s<t.length;s+=1)t[s].l(h);r=D(h);for(let s=0;s<a.length;s+=1)a[s].l(h);h.forEach(b),this.h()},h(){R(n,"class","channel-bar-container")},m(u,h){k(u,n,h);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,null);E(n,r);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(n,null);l=!0},p(u,h){if(h&5){e=w(u[23]);let s;for(s=0;s<e.length;s+=1){const m=x(u,e,s);t[s]?(t[s].p(m,h),p(t[s],1)):(t[s]=te(m),t[s].c(),p(t[s],1),t[s].m(n,r))}for(K(),s=e.length;s<t.length;s+=1)c(s);S()}if(h&65){f=w(u[22]);let s;for(s=0;s<f.length;s+=1){const m=Z(u,f,s);a[s]?(a[s].p(m,h),p(a[s],1)):(a[s]=ne(m),a[s].c(),p(a[s],1),a[s].m(n,null))}for(K(),s=f.length;s<a.length;s+=1)i(s);S()}},i(u){if(!l){for(let h=0;h<e.length;h+=1)p(t[h]);for(let h=0;h<f.length;h+=1)p(a[h]);l=!0}},o(u){t=t.filter(Boolean);for(let h=0;h<t.length;h+=1)g(t[h]);a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)g(a[h]);l=!1},d(u){u&&b(n),T(t,u),T(a,u)}}}function Le(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function qe(o){let n,r;return n=new ge({props:{channel:o[6]}}),{c(){j(n.$$.fragment)},l(l){L(n.$$.fragment,l)},m(l,e){q(n,l,e),r=!0},p(l,e){const t={};e&1&&(t.channel=l[6]),n.$set(t)},i(l){r||(p(n.$$.fragment,l),r=!0)},o(l){g(n.$$.fragment,l),r=!1},d(l){J(n,l)}}}function Je(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function te(o){let n,r,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:Je,then:qe,catch:Le,value:6,blocks:[,,,]};return I(r=o[2].api.fetchChannel(o[27]),e),{c(){n=v(),e.block.c()},l(t){n=v(),e.block.l(t)},m(t,c){k(t,n,c),e.block.m(t,e.anchor=c),e.mount=()=>n.parentNode,e.anchor=n,l=!0},p(t,c){o=t,e.ctx=o,c&1&&r!==(r=o[2].api.fetchChannel(o[27]))&&I(r,e)||P(e,o,c)},i(t){l||(p(e.block),l=!0)},o(t){for(let c=0;c<3;c+=1){const f=e.blocks[c];g(f)}l=!1},d(t){t&&b(n),e.block.d(t),e.token=null,e=null}}}function le(o){let n,r;return n=new ge({props:{channel:o[6]}}),{c(){j(n.$$.fragment)},l(l){L(n.$$.fragment,l)},m(l,e){q(n,l,e),r=!0},p(l,e){const t={};e&64&&(t.channel=l[6]),n.$set(t)},i(l){r||(p(n.$$.fragment,l),r=!0)},o(l){g(n.$$.fragment,l),r=!1},d(l){J(n,l)}}}function Pe(o){let n,r,l=o[6]!=null&&le(o);return{c(){l&&l.c(),n=y()},l(e){l&&l.l(e),n=D(e)},m(e,t){l&&l.m(e,t),k(e,n,t),r=!0},p(e,t){e[6]!=null?l?(l.p(e,t),t&64&&p(l,1)):(l=le(e),l.c(),p(l,1),l.m(n.parentNode,n)):l&&(K(),g(l,1,1,()=>{l=null}),S())},i(e){r||(p(l),r=!0)},o(e){g(l),r=!1},d(e){e&&b(n),l&&l.d(e)}}}function ne(o){let n,r;return n=new je({props:{category:o[24],$$slots:{default:[Pe,({channel:l})=>({6:l}),({channel:l})=>l?64:0]},$$scope:{ctx:o}}}),{c(){j(n.$$.fragment)},l(l){L(n.$$.fragment,l)},m(l,e){q(n,l,e),r=!0},p(l,e){const t={};e&1&&(t.category=l[24]),e&16448&&(t.$$scope={dirty:e,ctx:l}),n.$set(t)},i(l){r||(p(n.$$.fragment,l),r=!0)},o(l){g(n.$$.fragment,l),r=!1},d(l){J(n,l)}}}function oe(o){let n,r,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:Oe,then:ze,catch:Ye,value:16,blocks:[,,,]};return I(r=o[2].api.fetchMembers(o[0]._id),e),{c(){n=U("div"),e.block.c(),this.h()},l(t){n=V(t,"DIV",{class:!0});var c=A(n);e.block.l(c),c.forEach(b),this.h()},h(){R(n,"class","members-list-container")},m(t,c){k(t,n,c),e.block.m(n,e.anchor=null),e.mount=()=>n,e.anchor=null,l=!0},p(t,c){o=t,e.ctx=o,c&1&&r!==(r=o[2].api.fetchMembers(o[0]._id))&&I(r,e)||P(e,o,c)},i(t){l||(p(e.block),l=!0)},o(t){for(let c=0;c<3;c+=1){const f=e.blocks[c];g(f)}l=!1},d(t){t&&b(n),e.block.d(),e.token=null,e=null}}}function Ye(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function ze(o){let n,r,l=w(o[16].members),e=[];for(let c=0;c<l.length;c+=1)e[c]=ce(W(o,l,c));const t=c=>g(e[c],1,1,()=>{e[c]=null});return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=v()},l(c){for(let f=0;f<e.length;f+=1)e[f].l(c);n=v()},m(c,f){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(c,f);k(c,n,f),r=!0},p(c,f){if(f&7){l=w(c[16].members);let a;for(a=0;a<l.length;a+=1){const i=W(c,l,a);e[a]?(e[a].p(i,f),p(e[a],1)):(e[a]=ce(i),e[a].c(),p(e[a],1),e[a].m(n.parentNode,n))}for(K(),a=l.length;a<e.length;a+=1)t(a);S()}},i(c){if(!r){for(let f=0;f<l.length;f+=1)p(e[f]);r=!0}},o(c){e=e.filter(Boolean);for(let f=0;f<e.length;f+=1)g(e[f]);r=!1},d(c){c&&b(n),T(e,c)}}}function Fe(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function Ge(o){X(o);let n,r,l,e=o[21]+"",t,c,f;return r=new Ie({props:{src:o[1]["jolt:low-data-mode"]?z:F(o[18],o[17]),name:o[21]}}),{c(){n=U("div"),j(r.$$.fragment),l=y(),t=he(e),c=y()},l(a){n=V(a,"DIV",{});var i=A(n);L(r.$$.fragment,i),l=D(i),t=me(i,e),i.forEach(b),c=D(a)},m(a,i){k(a,n,i),q(r,n,null),E(n,l),E(n,t),k(a,c,i),f=!0},p(a,i){X(a);const u={};i&3&&(u.src=a[1]["jolt:low-data-mode"]?z:F(a[18],a[17])),i&1&&(u.name=a[21]),r.$set(u),(!f||i&1)&&e!==(e=a[21]+"")&&pe(t,e)},i(a){f||(p(r.$$.fragment,a),f=!0)},o(a){g(r.$$.fragment,a),f=!1},d(a){a&&(b(n),b(c)),J(r)}}}function He(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function ce(o){let n,r,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:He,then:Ge,catch:Fe,value:18,blocks:[,,,]};return I(r=o[18],e),{c(){n=v(),e.block.c()},l(t){n=v(),e.block.l(t)},m(t,c){k(t,n,c),e.block.m(t,e.anchor=c),e.mount=()=>n.parentNode,e.anchor=n,l=!0},p(t,c){o=t,e.ctx=o,c&1&&r!==(r=o[18])&&I(r,e)||P(e,o,c)},i(t){l||(p(e.block),l=!0)},o(t){for(let c=0;c<3;c+=1){const f=e.blocks[c];g(f)}l=!1},d(t){t&&b(n),e.block.d(t),e.token=null,e=null}}}function Oe(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function Qe(o){let n,r,l,e,t=o[0]!=null&&ee(Y(o));const c=o[11].default,f=ae(c,o,o[14],null);let a=o[0]!=null&&oe(o);return{c(){t&&t.c(),n=y(),f&&f.c(),r=y(),a&&a.c(),l=v()},l(i){t&&t.l(i),n=D(i),f&&f.l(i),r=D(i),a&&a.l(i),l=v()},m(i,u){t&&t.m(i,u),k(i,n,u),f&&f.m(i,u),k(i,r,u),a&&a.m(i,u),k(i,l,u),e=!0},p(i,[u]){i[0]!=null?t?(t.p(Y(i),u),u&1&&p(t,1)):(t=ee(Y(i)),t.c(),p(t,1),t.m(n.parentNode,n)):t&&(K(),g(t,1,1,()=>{t=null}),S()),f&&f.p&&(!e||u&16384)&&ie(f,c,i,i[14],e?fe(c,i[14],u,null):se(i[14]),null),i[0]!=null?a?(a.p(i,u),u&1&&p(a,1)):(a=oe(i),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(K(),g(a,1,1,()=>{a=null}),S())},i(i){e||(p(t),p(f,i),p(a),e=!0)},o(i){g(t),g(f,i),g(a),e=!1},d(i){i&&(b(n),b(r),b(l)),t&&t.d(i),f&&f.d(i),a&&a.d(i)}}}function We(o,n,r){let l,e,t,c,f,a;B(o,Ce,d=>r(10,f=d));let{$$slots:i={},$$scope:u}=n;const h=M(de),s=M(ye);B(o,s,d=>r(1,a=d));const m=M(Ue);B(o,m,d=>r(0,t=d));const $=G();B(o,$,d=>r(8,e=d)),we(Se,$);const N=M(Ne)??G(l.cid);B(o,N,d=>r(9,c=d));async function be(d){const C=await h.api.fetchChannel(d);if(C.channel_type!="TextChannel"&&C.channel_type!="VoiceChannel")throw Ee(302,`/channels/${d}`);$.set(C)}const ke=(d,C)=>d.find(ve=>C!=null&&ve.channels.includes(C))==null,$e=(d,{_id:C})=>C==d._id.user;return o.$$set=d=>{"$$scope"in d&&r(14,u=d.$$scope)},o.$$.update=()=>{if(o.$$.dirty&1024&&r(7,l=f.params),o.$$.dirty&128&&N.set(l.cid),o.$$.dirty&512&&c&&be(c),o.$$.dirty&257){let d="";t==null?d+="Server":d+=t.name,e!=null&&(d+=` | #${e.name}`),d+=" - Jolt","__TAURI__"in window?Ke.setTitle(d):document.title=d}},[t,a,h,s,m,N,$,l,e,c,f,i,ke,$e,u]}class _t extends ue{constructor(n){super(),_e(this,n,We,Qe,re,{})}}export{_t as component};
