import{s as re,n as g,f as J,d as ie,u as ae,g as ce,e as fe,c as B}from"../chunks/scheduler.9b2bc230.js";import{S as te,i as ne,g as C,m as se,s as K,h as E,j as V,n as oe,f as k,c as O,k as v,a as N,x as I,o as le,r as T,u as U,v as L,t as b,b as H,d,w as R,e as q,p as P,y as ue}from"../chunks/index.6c81ac7e.js";import{D as _e,h as M,u as he,g as z,a as Q}from"../chunks/util.591b1810.js";import{e as W}from"../chunks/each.e59479a4.js";/* empty css                      */import{g as F,s as X,a as pe,b as me,c as de}from"../chunks/context.3f5e8c52.js";import{s as ge,a as be}from"../chunks/context.fa34f1f8.js";import{g as ve}from"../chunks/navigation.40791037.js";import{w as Y}from"../chunks/index.cace4c42.js";function ke(o){let e,n;return{c(){e=C("img"),this.h()},l(r){e=E(r,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){v(e,"class","sidebar-icon group-hover:rounded-xl group-hover:bg-green-600 group-hover:text-white"),J(e.src,n=o[2])||v(e,"src",n),v(e,"alt",o[1])},m(r,t){N(r,e,t)},p(r,t){t&4&&!J(e.src,n=r[2])&&v(e,"src",n),t&2&&v(e,"alt",r[1])},d(r){r&&k(e)}}}function $e(o){let e,n;return{c(){e=C("span"),n=se(o[3]),this.h()},l(r){e=E(r,"SPAN",{class:!0});var t=V(e);n=oe(t,o[3]),t.forEach(k),this.h()},h(){v(e,"class","sidebar-icon group-hover:rounded-xl group-hover:bg-green-600 group-hover:text-white overflow-ellipsis")},m(r,t){N(r,e,t),I(e,n)},p(r,t){t&8&&le(n,r[3])},d(r){r&&k(e)}}}function Se(o){let e,n,r,t,s;function l(u,c){return u[2]==null?$e:ke}let a=l(o),i=a(o);return{c(){e=C("div"),n=C("span"),r=se(o[1]),t=K(),s=C("a"),i.c(),this.h()},l(u){e=E(u,"DIV",{class:!0});var c=V(e);n=E(c,"SPAN",{class:!0});var S=V(n);r=oe(S,o[1]),S.forEach(k),t=O(c),s=E(c,"A",{href:!0,"aria-label":!0});var A=V(s);i.l(A),A.forEach(k),c.forEach(k),this.h()},h(){v(n,"class","sidebar-tooltip group-hover:scale-100"),v(s,"href",o[0]),v(s,"aria-label",o[1]),v(e,"class","group m-0")},m(u,c){N(u,e,c),I(e,n),I(n,r),I(e,t),I(e,s),i.m(s,null)},p(u,[c]){c&2&&le(r,u[1]),a===(a=l(u))&&i?i.p(u,c):(i.d(1),i=a(u),i&&(i.c(),i.m(s,null))),c&1&&v(s,"href",u[0]),c&2&&v(s,"aria-label",u[1])},i:g,o:g,d(u){u&&k(e),i.d()}}}function we(o,e,n){let r,{href:t}=e,{tooltip:s}=e,{icon:l=void 0}=e;return o.$$set=a=>{"href"in a&&n(0,t=a.href),"tooltip"in a&&n(1,s=a.tooltip),"icon"in a&&n(2,l=a.icon)},o.$$.update=()=>{o.$$.dirty&2&&n(3,r=s.split(" ").map(a=>a[0]).join(""))},[t,s,l,r]}class G extends te{constructor(e){super(),ne(this,e,we,Se,re,{href:0,tooltip:1,icon:2})}}function Z(o,e,n){const r=o.slice();return r[11]=e[n],r}function ye(o){let e,n,r,t={ctx:o,current:null,token:null,hasCatch:!1,pending:Ee,then:Ce,catch:De,value:14,blocks:[,,,]};return M(n=o[0].api.fetchUser(o[3].user_id),t),{c(){e=q(),t.block.c()},l(s){e=q(),t.block.l(s)},m(s,l){N(s,e,l),t.block.m(s,t.anchor=l),t.mount=()=>e.parentNode,t.anchor=e,r=!0},p(s,l){o=s,t.ctx=o,l&9&&n!==(n=o[0].api.fetchUser(o[3].user_id))&&M(n,t)||he(t,o,l)},i(s){r||(d(t.block),r=!0)},o(s){for(let l=0;l<3;l+=1){const a=t.blocks[l];b(a)}r=!1},d(s){s&&k(e),t.block.d(s),t.token=null,t=null}}}function Ie(o){let e,n;return e=new G({props:{href:"/",tooltip:"Home",icon:"/home.svg"}}),{c(){T(e.$$.fragment)},l(r){U(e.$$.fragment,r)},m(r,t){L(e,r,t),n=!0},p:g,i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){R(e,r)}}}function De(o){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function Ce(o){let e,n,r,t;return e=new G({props:{href:"/",tooltip:o[14].username+"#"+o[14].discriminator,icon:z(o[14])}}),{c(){T(e.$$.fragment),n=K(),r=C("hr"),this.h()},l(s){U(e.$$.fragment,s),n=O(s),r=E(s,"HR",{class:!0}),this.h()},h(){v(r,"class","border-gray-600 mx-4")},m(s,l){L(e,s,l),N(s,n,l),N(s,r,l),t=!0},p(s,l){const a={};l&9&&(a.tooltip=s[14].username+"#"+s[14].discriminator),l&9&&(a.icon=z(s[14])),e.$set(a)},i(s){t||(d(e.$$.fragment,s),t=!0)},o(s){b(e.$$.fragment,s),t=!1},d(s){s&&(k(n),k(r)),R(e,s)}}}function Ee(o){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function x(o){let e,n,r=W(o[1]),t=[];for(let l=0;l<r.length;l+=1)t[l]=ee(Z(o,r,l));const s=l=>b(t[l],1,1,()=>{t[l]=null});return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=q()},l(l){for(let a=0;a<t.length;a+=1)t[a].l(l);e=q()},m(l,a){for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(l,a);N(l,e,a),n=!0},p(l,a){if(a&6){r=W(l[1]);let i;for(i=0;i<r.length;i+=1){const u=Z(l,r,i);t[i]?(t[i].p(u,a),d(t[i],1)):(t[i]=ee(u),t[i].c(),d(t[i],1),t[i].m(e.parentNode,e))}for(P(),i=r.length;i<t.length;i+=1)s(i);H()}},i(l){if(!n){for(let a=0;a<r.length;a+=1)d(t[a]);n=!0}},o(l){t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)b(t[a]);n=!1},d(l){l&&k(e),ue(t,l)}}}function Ne(o){let e,n;return e=new G({props:{href:"/servers/"+o[11]._id+"/channels/"+o[11].channels[0],tooltip:o[11].name,icon:o[11].icon==null?void 0:Q(o[11].icon)}}),{c(){T(e.$$.fragment)},l(r){U(e.$$.fragment,r)},m(r,t){L(e,r,t),n=!0},p(r,t){const s={};t&2&&(s.href="/servers/"+r[11]._id+"/channels/"+r[11].channels[0]),t&2&&(s.tooltip=r[11].name),t&2&&(s.icon=r[11].icon==null?void 0:Q(r[11].icon)),e.$set(s)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){R(e,r)}}}function Ae(o){let e,n;return e=new G({props:{href:"/servers/"+o[11]._id+"/channels/"+o[11].channels[0],tooltip:o[11].name}}),{c(){T(e.$$.fragment)},l(r){U(e.$$.fragment,r)},m(r,t){L(e,r,t),n=!0},p(r,t){const s={};t&2&&(s.href="/servers/"+r[11]._id+"/channels/"+r[11].channels[0]),t&2&&(s.tooltip=r[11].name),e.$set(s)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){b(e.$$.fragment,r),n=!1},d(r){R(e,r)}}}function ee(o){let e,n,r,t;const s=[Ae,Ne],l=[];function a(i,u){return i[2]["jolt:low-data-mode"]?0:1}return e=a(o),n=l[e]=s[e](o),{c(){n.c(),r=q()},l(i){n.l(i),r=q()},m(i,u){l[e].m(i,u),N(i,r,u),t=!0},p(i,u){let c=e;e=a(i),e===c?l[e].p(i,u):(P(),b(l[c],1,1,()=>{l[c]=null}),H(),n=l[e],n?n.p(i,u):(n=l[e]=s[e](i),n.c()),d(n,1),n.m(r.parentNode,r))},i(i){t||(d(n),t=!0)},o(i){b(n),t=!1},d(i){i&&k(r),l[e].d(i)}}}function je(o){let e,n,r,t,s,l,a,i,u,c,S,A,$;const h=[Ie,ye],p=[];function j(f,w){return f[2]["jolt:low-data-mode"]?0:1}r=j(o),t=p[r]=h[r](o);let _=o[1]!=null&&x(o);a=new G({props:{href:"/servers/create",icon:"/plus.svg",tooltip:"Create Server"}}),S=new G({props:{href:"/settings",icon:"/gears.svg",tooltip:"Settings"}});const D=o[8].default,m=ie(D,o,o[7],null);return{c(){e=C("div"),n=C("div"),t.c(),s=K(),_&&_.c(),l=K(),T(a.$$.fragment),i=K(),u=C("div"),c=K(),T(S.$$.fragment),A=K(),m&&m.c(),this.h()},l(f){e=E(f,"DIV",{class:!0});var w=V(e);n=E(w,"DIV",{class:!0});var y=V(n);t.l(y),s=O(y),_&&_.l(y),l=O(y),U(a.$$.fragment,y),i=O(y),u=E(y,"DIV",{class:!0}),V(u).forEach(k),c=O(y),U(S.$$.fragment,y),y.forEach(k),A=O(w),m&&m.l(w),w.forEach(k),this.h()},h(){v(u,"class","flex-1"),v(n,"class","server-sidebar-container"),v(e,"class","grid-container")},m(f,w){N(f,e,w),I(e,n),p[r].m(n,null),I(n,s),_&&_.m(n,null),I(n,l),L(a,n,null),I(n,i),I(n,u),I(n,c),L(S,n,null),I(e,A),m&&m.m(e,null),$=!0},p(f,[w]){let y=r;r=j(f),r===y?p[r].p(f,w):(P(),b(p[y],1,1,()=>{p[y]=null}),H(),t=p[r],t?t.p(f,w):(t=p[r]=h[r](f),t.c()),d(t,1),t.m(n,s)),f[1]!=null?_?(_.p(f,w),w&2&&d(_,1)):(_=x(f),_.c(),d(_,1),_.m(n,l)):_&&(P(),b(_,1,1,()=>{_=null}),H()),m&&m.p&&(!$||w&128)&&ae(m,D,f,f[7],$?fe(D,f[7],w,null):ce(f[7]),null)},i(f){$||(d(t),d(_),d(a.$$.fragment,f),d(S.$$.fragment,f),d(m,f),$=!0)},o(f){b(t),b(_),b(a.$$.fragment,f),b(S.$$.fragment,f),b(m,f),$=!1},d(f){f&&k(e),p[r].d(),_&&_.d(),R(a),R(S),m&&m.d(f)}}}function Ke(o,e,n){let r,t,s,{$$slots:l={},$$scope:a}=e;const i=F(pe);B(o,i,h=>n(2,t=h));const u=F(me);B(o,u,h=>n(3,s=h));const c=F(de),S=Y();B(o,S,h=>n(9,r=h));const A=Y();X(ge,A),X(be,S);let $=c.api.cache.servers;return i.subscribe(h=>{n(1,$=$==null?void 0:$.sort((p,j)=>{var m,f;const _=((m=h.ordering.servers)==null?void 0:m.indexOf(p._id))??-1,D=((f=h.ordering.servers)==null?void 0:f.indexOf(j._id))??-1;return D==-1?-1:_==-1?1:_-D}))}),c.on("ServerCreate",({server:h,channels:p})=>{n(0,c.api.cache.channels=c.api.cache.channels.concat(p),c),c.api.cache.servers.push(h),n(1,$=c.api.cache.servers)}),c.on("ServerDelete",async({id:h})=>{n(0,c.api.cache.channels=c.api.cache.channels.filter(p=>p.channel_type=="TextChannel"||p.channel_type=="VoiceChannel"?p.server!=h:!0),c),n(0,c.api.cache.servers=c.api.cache.servers.filter(p=>p._id!=h),c),n(1,$=c.api.cache.servers),r==h&&await ve("/")}),c.on("Ready",async h=>{n(1,$=h.servers);const p=await c.api.fetchSettings(Object.keys(_e));i.update(j=>{for(const[_,[D,m]]of Object.entries(p)){const f=`revision:${_}`;D<Number(localStorage.getItem(f))||(j[_]=JSON.parse(m),localStorage.setItem(f,D.toString()))}return j})}),o.$$set=h=>{"$$scope"in h&&n(7,a=h.$$scope)},[c,$,t,s,i,u,S,a,l]}class Pe extends te{constructor(e){super(),ne(this,e,Ke,je,re,{})}}export{Pe as component};
