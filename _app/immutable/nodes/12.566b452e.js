import{s as oe}from"../chunks/sections.e8097f97.js";import{e as ae}from"../chunks/index.5e2a9a64.js";import{s as V,n as q,c as ue,b as ce}from"../chunks/scheduler.a21a5cad.js";import{S as B,i as K,g as v,m as z,s as C,h as y,j as w,n as H,f as m,c as P,k as h,a as E,x as b,z as Y,o as F,r as M,u as N,A as fe,v as O,d as S,t as T,w as R,e as W,p as ne,b as se,y as pe}from"../chunks/index.4419476b.js";import{e as X}from"../chunks/each.e59479a4.js";import{g as L,a as ie,b as de,c as re}from"../chunks/context.898bb4a8.js";import{g as me}from"../chunks/navigation.31235eca.js";import{b as _e}from"../chunks/paths.07194b7e.js";import{g as ge}from"../chunks/chunk-NMUKSDLG.3f77d6f4.js";const he=async({params:i,parent:e})=>{const{sections:s}=await e(),t=s.find(n=>n.type=="normal"&&i.section==n.id);if(t==null||t.type!="normal")throw ae(404);return{section:t}},be=()=>oe.filter(i=>i.type=="normal").map(i=>{if(i.type!="normal")throw new Error(`unreachable, section ${i} is not of type "normal"`);return{section:i.id}}),He=Object.freeze(Object.defineProperty({__proto__:null,entries:be,load:he},Symbol.toStringTag,{value:"Module"}));async function J(i){switch(i.type){case"change-username":{const e=i.node.querySelector(`#${i.usernameId}`).value,s=i.node.querySelector(`#${i.passwordId}`).value;i.client.user=await i.client.api.changeUsername(e,s);break}case"logout":{await i.client.api.logout(),i.session.set(null),await me(`${_e}/login`);break}case"update-custom-setting":{i.settings.update(e=>(e[i.key]=i.value,e));break}}}function Z(i){let e,s=i[0].description+"",t;return{c(){e=v("p"),t=z(s),this.h()},l(n){e=y(n,"P",{class:!0});var r=w(e);t=H(r,s),r.forEach(m),this.h()},h(){h(e,"class","ml-4 whitespace-pre-wrap")},m(n,r){E(n,e,r),b(e,t)},p(n,r){r&1&&s!==(s=n[0].description+"")&&F(t,s)},d(n){n&&m(e)}}}function ve(i){let e,s,t,n=i[0].title+"",r,o,a,l,u,f,d,A,k,U,I,_=i[0].description&&Z(i);return{c(){e=v("div"),s=v("h2"),t=v("label"),r=z(n),a=C(),_&&_.c(),l=C(),u=v("div"),f=C(),d=v("input"),this.h()},l(p){e=y(p,"DIV",{});var c=w(e);s=y(c,"H2",{});var g=w(s);t=y(g,"LABEL",{for:!0});var $=w(t);r=H($,n),$.forEach(m),g.forEach(m),a=P(c),_&&_.l(c),c.forEach(m),l=P(p),u=y(p,"DIV",{class:!0}),w(u).forEach(m),f=P(p),d=y(p,"INPUT",{id:!0,type:!0}),this.h()},h(){h(t,"for",o=i[0].id),h(u,"class","flex-1"),h(d,"id",A=i[0].id),d.checked=k=i[1]!=null&&i[2][i[1]],h(d,"type","checkbox")},m(p,c){E(p,e,c),b(e,s),b(s,t),b(t,r),b(e,a),_&&_.m(e,null),E(p,l,c),E(p,u,c),E(p,f,c),E(p,d,c),U||(I=Y(d,"input",i[4]),U=!0)},p(p,[c]){c&1&&n!==(n=p[0].title+"")&&F(r,n),c&1&&o!==(o=p[0].id)&&h(t,"for",o),p[0].description?_?_.p(p,c):(_=Z(p),_.c(),_.m(e,null)):_&&(_.d(1),_=null),c&1&&A!==(A=p[0].id)&&h(d,"id",A),c&6&&k!==(k=p[1]!=null&&p[2][p[1]])&&(d.checked=k)},i:q,o:q,d(p){p&&(m(e),m(l),m(u),m(f),m(d)),_&&_.d(),U=!1,I()}}}function ye(i,e,s){let t,n;const r=L(ie);ue(i,r,l=>s(2,n=l));let{setting:o}=e;const a=l=>{const u=o.action;(u==null?void 0:u.type)=="update-custom-setting"&&J({...u,settings:r,value:l.currentTarget.checked})};return i.$$set=l=>{"setting"in l&&s(0,o=l.setting)},i.$$.update=()=>{i.$$.dirty&1&&s(1,t=o.action.type=="update-custom-setting"?o.action.key:void 0)},[o,t,n,r,a]}class $e extends B{constructor(e){super(),K(this,e,ye,ve,V,{setting:0})}}function x(i){let e,s=i[0].description+"",t;return{c(){e=v("p"),t=z(s),this.h()},l(n){e=y(n,"P",{class:!0});var r=w(e);t=H(r,s),r.forEach(m),this.h()},h(){h(e,"class","ml-4 whitespace-pre-wrap")},m(n,r){E(n,e,r),b(e,t)},p(n,r){r&1&&s!==(s=n[0].description+"")&&F(t,s)},d(n){n&&m(e)}}}function ke(i){let e,s,t,n,r=i[0].title+"",o,a,l,u,f,d,A,k,U="Submit",I,_,p,c=i[0].description&&x(i);return d=new le({props:{settings:i[0].form}}),{c(){e=v("details"),s=v("summary"),t=v("h2"),n=v("label"),o=z(r),l=C(),c&&c.c(),u=C(),f=v("form"),M(d.$$.fragment),A=C(),k=v("button"),k.textContent=U,this.h()},l(g){e=y(g,"DETAILS",{});var $=w(e);s=y($,"SUMMARY",{});var D=w(s);t=y(D,"H2",{});var G=w(t);n=y(G,"LABEL",{for:!0});var Q=w(n);o=H(Q,r),Q.forEach(m),G.forEach(m),l=P(D),c&&c.l(D),D.forEach(m),u=P($),f=y($,"FORM",{});var j=w(f);N(d.$$.fragment,j),A=P(j),k=y(j,"BUTTON",{type:!0,"data-svelte-h":!0}),fe(k)!=="svelte-1ou7dtz"&&(k.textContent=U),j.forEach(m),$.forEach(m),this.h()},h(){h(n,"for",a=i[0].id),h(k,"type","submit")},m(g,$){E(g,e,$),b(e,s),b(s,t),b(t,n),b(n,o),b(s,l),c&&c.m(s,null),b(e,u),b(e,f),O(d,f,null),b(f,A),b(f,k),i[5](f),I=!0,_||(p=Y(f,"submit",i[4]),_=!0)},p(g,[$]){(!I||$&1)&&r!==(r=g[0].title+"")&&F(o,r),(!I||$&1&&a!==(a=g[0].id))&&h(n,"for",a),g[0].description?c?c.p(g,$):(c=x(g),c.c(),c.m(s,null)):c&&(c.d(1),c=null);const D={};$&1&&(D.settings=g[0].form),d.$set(D)},i(g){I||(S(d.$$.fragment,g),I=!0)},o(g){T(d.$$.fragment,g),I=!1},d(g){g&&m(e),c&&c.d(),R(d),i[5](null),_=!1,p()}}}function we(i,e,s){let{setting:t}=e;const n=L(de),r=L(re);L(ie);let o;const a=()=>{const u=t.action;if(u!=null)switch(u.type){case"change-username":{J({...u,client:r,node:o});break}case"logout":{J({...u,client:r,session:n});break}}};function l(u){ce[u?"unshift":"push"](()=>{o=u,s(1,o)})}return i.$$set=u=>{"setting"in u&&s(0,t=u.setting)},[t,o,n,r,a,l]}class Ee extends B{constructor(e){super(),K(this,e,we,ke,V,{setting:0})}}function Se(i){let e,s,t,n,r,o;return{c(){e=v("input"),this.h()},l(a){e=y(a,"INPUT",{id:!0,class:!0,type:!0,placeholder:!0}),this.h()},h(){h(e,"id",s=i[1].id),h(e,"class","bg-gray-500 mb-3"),h(e,"type",t=i[1].type),h(e,"placeholder",n=i[1].title)},m(a,l){E(a,e,l),r||(o=Y(e,"input",i[2]),r=!0)},p(a,[l]){l&2&&s!==(s=a[1].id)&&h(e,"id",s),l&2&&t!==(t=a[1].type)&&h(e,"type",t),l&2&&n!==(n=a[1].title)&&h(e,"placeholder",n)},i:q,o:q,d(a){a&&m(e),r=!1,o()}}}function Ie(i,e,s){let{setting:t}=e,{value:n=""}=e;const r=L(re);function o(l){var u;(u=t.getDefaultValue)==null||u.call(t,l).then(f=>s(0,n=f))}r.on("Ready",()=>o(r));const a=l=>s(0,n=l.currentTarget.value);return i.$$set=l=>{"setting"in l&&s(1,t=l.setting),"value"in l&&s(0,n=l.value)},o(r),[n,t,a]}class Te extends B{constructor(e){super(),K(this,e,Ie,Se,V,{setting:1,value:0})}}function ee(i,e,s){const t=i.slice();return t[1]=e[s],t}function Ae(i){let e,s;return e=new Te({props:{setting:i[1]}}),{c(){M(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,n){O(e,t,n),s=!0},p(t,n){const r={};n&1&&(r.setting=t[1]),e.$set(r)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){T(e.$$.fragment,t),s=!1},d(t){R(e,t)}}}function De(i){let e,s;return e=new Ee({props:{setting:i[1]}}),{c(){M(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,n){O(e,t,n),s=!0},p(t,n){const r={};n&1&&(r.setting=t[1]),e.$set(r)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){T(e.$$.fragment,t),s=!1},d(t){R(e,t)}}}function Ce(i){let e,s;return e=new $e({props:{setting:i[1]}}),{c(){M(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,n){O(e,t,n),s=!0},p(t,n){const r={};n&1&&(r.setting=t[1]),e.$set(r)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){T(e.$$.fragment,t),s=!1},d(t){R(e,t)}}}function te(i){let e,s,t,n,r;const o=[Ce,De,Ae],a=[];function l(u,f){return u[1].type=="checkbox"?0:u[1].type=="dropdown"?1:u[1].type=="text"||u[1].type=="password"?2:-1}return~(s=l(i))&&(t=a[s]=o[s](i)),{c(){e=v("div"),t&&t.c(),n=C(),this.h()},l(u){e=y(u,"DIV",{class:!0});var f=w(e);t&&t.l(f),n=P(f),f.forEach(m),this.h()},h(){h(e,"class","flex ml-4")},m(u,f){E(u,e,f),~s&&a[s].m(e,null),b(e,n),r=!0},p(u,f){let d=s;s=l(u),s===d?~s&&a[s].p(u,f):(t&&(ne(),T(a[d],1,1,()=>{a[d]=null}),se()),~s?(t=a[s],t?t.p(u,f):(t=a[s]=o[s](u),t.c()),S(t,1),t.m(e,n)):t=null)},i(u){r||(S(t),r=!0)},o(u){T(t),r=!1},d(u){u&&m(e),~s&&a[s].d()}}}function Pe(i){let e,s,t=X(i[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=te(ee(i,t,o));const r=o=>T(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=W()},l(o){for(let a=0;a<n.length;a+=1)n[a].l(o);e=W()},m(o,a){for(let l=0;l<n.length;l+=1)n[l]&&n[l].m(o,a);E(o,e,a),s=!0},p(o,[a]){if(a&1){t=X(o[0]);let l;for(l=0;l<t.length;l+=1){const u=ee(o,t,l);n[l]?(n[l].p(u,a),S(n[l],1)):(n[l]=te(u),n[l].c(),S(n[l],1),n[l].m(e.parentNode,e))}for(ne(),l=t.length;l<n.length;l+=1)r(l);se()}},i(o){if(!s){for(let a=0;a<t.length;a+=1)S(n[a]);s=!0}},o(o){n=n.filter(Boolean);for(let a=0;a<n.length;a+=1)T(n[a]);s=!1},d(o){o&&m(e),pe(n,o)}}}function Ue(i,e,s){let{settings:t}=e;return i.$$set=n=>{"settings"in n&&s(0,t=n.settings)},[t]}class le extends B{constructor(e){super(),K(this,e,Ue,Pe,V,{settings:0})}}function Le(i){let e,s;return e=new le({props:{settings:i[0].section.settings}}),{c(){M(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,n){O(e,t,n),s=!0},p(t,[n]){const r={};n&1&&(r.settings=t[0].section.settings),e.$set(r)},i(t){s||(S(e.$$.fragment,t),s=!0)},o(t){T(e.$$.fragment,t),s=!1},d(t){R(e,t)}}}function Ve(i,e,s){let{data:t}=e;return i.$$set=n=>{"data"in n&&s(0,t=n.data)},i.$$.update=()=>{if(i.$$.dirty&1){const n=`${t.section.title} - Jolt`;"__TAURI__"in window?ge.setTitle(n):document.title=n}},[t]}class Fe extends B{constructor(e){super(),K(this,e,Ve,Le,V,{data:0})}}export{Fe as component,He as universal};
