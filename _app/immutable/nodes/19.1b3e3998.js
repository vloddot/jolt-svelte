import{s as se,f as g,a as V,l as U,g as C,h as D,c as y,m as B,d as p,H as j,j as I,S as J,i as x,z as _,I as ne,n as L,u as d,r as R,e as H,E as he}from"../chunks/scheduler.d49036d4.js";import{h as me,u as pe}from"../chunks/await_block.872c6e1e.js";import{e as Q}from"../chunks/each.e59479a4.js";import{S as oe,i as ie,a as v,t as E,c as z,b as ae,d as re,m as ce,e as fe,g as A}from"../chunks/index.90a2ee5d.js";import{g as K,c as ue,b as _e}from"../chunks/context.c1c8751f.js";import{Y as ve}from"../chunks/runtime.esm.9b6bd036.js";import{d as W}from"../chunks/index.esm.4b6e8736.js";function X(o){let t,s="This Device";return{c(){t=g("h1"),t.textContent=s,this.h()},l(e){t=C(e,"H1",{class:!0,"data-svelte-h":!0}),j(t)!=="svelte-1alfsq5"&&(t.textContent=s),this.h()},h(){I(t,"class","text-2xl uppercase")},m(e,l){x(e,t,l)},d(e){e&&p(t)}}}function be(o){let t,s,e,l,i=o[0].name.toUpperCase()+"",n,r,a,b,c,u=o[2](W(o[0]._id))+"",m,f,w,q,O,S,M="Revoke",P,Y,h=o[1]&&X();return{c(){t=g("div"),h&&h.c(),s=V(),e=g("div"),l=g("h2"),n=U(i),r=V(),a=g("p"),b=U("Created "),c=g("time"),m=U(u),f=U("."),w=V(),q=g("div"),O=V(),S=g("button"),S.textContent=M,this.h()},l(k){t=C(k,"DIV",{class:!0});var $=D(t);h&&h.l($),s=y($),e=C($,"DIV",{class:!0});var T=D(e);l=C(T,"H2",{class:!0});var F=D(l);n=B(F,i),F.forEach(p),r=y(T),a=C(T,"P",{class:!0});var N=D(a);b=B(N,"Created "),c=C(N,"TIME",{});var G=D(c);m=B(G,u),G.forEach(p),f=B(N,"."),N.forEach(p),w=y(T),q=C(T,"DIV",{class:!0}),D(q).forEach(p),O=y(T),S=C(T,"BUTTON",{"data-svelte-h":!0}),j(S)!=="svelte-1pqiq64"&&(S.textContent=M),T.forEach(p),$.forEach(p),this.h()},h(){I(l,"class","text-xl"),I(a,"class","pl-2"),I(q,"class","flex-1"),I(e,"class","flex"),I(t,"class","w-full mx-auto"),J(t,"bg-blue-500",o[1])},m(k,$){x(k,t,$),h&&h.m(t,null),_(t,s),_(t,e),_(e,l),_(l,n),_(e,r),_(e,a),_(a,b),_(a,c),_(c,m),_(a,f),_(e,w),_(e,q),_(e,O),_(e,S),P||(Y=ne(S,"click",o[6]),P=!0)},p(k,[$]){k[1]?h||(h=X(),h.c(),h.m(t,s)):h&&(h.d(1),h=null),$&1&&i!==(i=k[0].name.toUpperCase()+"")&&L(n,i),$&5&&u!==(u=k[2](W(k[0]._id))+"")&&L(m,u),$&2&&J(t,"bg-blue-500",k[1])},i:d,o:d,d(k){k&&p(t),h&&h.d(),P=!1,Y()}}}function ke(o,t,s){let e,l,i;R(o,ve,c=>s(2,i=c));let{session:n}=t;const r=K(ue),a=K(_e);R(o,a,c=>s(5,l=c));const b=()=>{if(e){r.destroy(),a.set(null);return}r.api.revokeSession(n._id)};return o.$$set=c=>{"session"in c&&s(0,n=c.session)},o.$$.update=()=>{o.$$.dirty&33&&s(1,e=n._id==(l==null?void 0:l._id))},[n,e,i,r,a,l,b]}class de extends oe{constructor(t){super(),ie(this,t,ke,be,se,{session:0})}}function Z(o,t,s){const e=o.slice();return e[5]=t[s],e}function ee(o){let t,s;return t=new de({props:{session:o[0]}}),{c(){ae(t.$$.fragment)},l(e){re(t.$$.fragment,e)},m(e,l){ce(t,e,l),s=!0},p(e,l){const i={};l&1&&(i.session=e[0]),t.$set(i)},i(e){s||(v(t.$$.fragment,e),s=!0)},o(e){E(t.$$.fragment,e),s=!1},d(e){fe(t,e)}}}function ge(o){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function Ce(o){let t,s,e=Q(o[4]),l=[];for(let n=0;n<e.length;n+=1)l[n]=le(Z(o,e,n));const i=n=>E(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();t=H()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);t=H()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);x(n,t,r),s=!0},p(n,r){if(r&3){e=Q(n[4]);let a;for(a=0;a<e.length;a+=1){const b=Z(n,e,a);l[a]?(l[a].p(b,r),v(l[a],1)):(l[a]=le(b),l[a].c(),v(l[a],1),l[a].m(t.parentNode,t))}for(A(),a=e.length;a<l.length;a+=1)i(a);z()}},i(n){if(!s){for(let r=0;r<e.length;r+=1)v(l[r]);s=!0}},o(n){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)E(l[r]);s=!1},d(n){n&&p(t),he(l,n)}}}function te(o){let t,s;return t=new de({props:{session:o[5]}}),{c(){ae(t.$$.fragment)},l(e){re(t.$$.fragment,e)},m(e,l){ce(t,e,l),s=!0},p:d,i(e){s||(v(t.$$.fragment,e),s=!0)},o(e){E(t.$$.fragment,e),s=!1},d(e){fe(t,e)}}}function le(o){var l;let t,s,e=o[5]._id!=((l=o[0])==null?void 0:l._id)&&te(o);return{c(){e&&e.c(),t=H()},l(i){e&&e.l(i),t=H()},m(i,n){e&&e.m(i,n),x(i,t,n),s=!0},p(i,n){var r;i[5]._id!=((r=i[0])==null?void 0:r._id)?e?(e.p(i,n),n&1&&v(e,1)):(e=te(i),e.c(),v(e,1),e.m(t.parentNode,t)):e&&(A(),E(e,1,1,()=>{e=null}),z())},i(i){s||(v(e),s=!0)},o(i){E(e),s=!1},d(i){i&&p(t),e&&e.d(i)}}}function $e(o){return{c:d,l:d,m:d,p:d,i:d,o:d,d}}function Ee(o){let t,s,e,l,i,n="Revoke all other sessions",r,a,b,c=o[0]!=null&&ee(o),u={ctx:o,current:null,token:null,hasCatch:!1,pending:$e,then:Ce,catch:ge,value:4,blocks:[,,,]};return me(o[1].api.fetchSessions(),u),{c(){t=g("div"),s=g("div"),c&&c.c(),e=V(),u.block.c(),l=V(),i=g("button"),i.textContent=n,this.h()},l(m){t=C(m,"DIV",{class:!0});var f=D(t);s=C(f,"DIV",{class:!0});var w=D(s);c&&c.l(w),w.forEach(p),e=y(f),u.block.l(f),l=y(f),i=C(f,"BUTTON",{"data-svelte-h":!0}),j(i)!=="svelte-dllb2x"&&(i.textContent=n),f.forEach(p),this.h()},h(){I(s,"class","my-4"),I(t,"class","mr-2")},m(m,f){x(m,t,f),_(t,s),c&&c.m(s,null),_(t,e),u.block.m(t,u.anchor=null),u.mount=()=>t,u.anchor=l,_(t,l),_(t,i),r=!0,a||(b=ne(i,"click",o[3]),a=!0)},p(m,[f]){o=m,o[0]!=null?c?(c.p(o,f),f&1&&v(c,1)):(c=ee(o),c.c(),v(c,1),c.m(s,null)):c&&(A(),E(c,1,1,()=>{c=null}),z()),pe(u,o,f)},i(m){r||(v(c),v(u.block),r=!0)},o(m){E(c);for(let f=0;f<3;f+=1){const w=u.blocks[f];E(w)}r=!1},d(m){m&&p(t),c&&c.d(),u.block.d(),u.token=null,u=null,a=!1,b()}}}function we(o,t,s){let e;const l=K(ue),i=K(_e);return R(o,i,r=>s(0,e=r)),[e,l,i,()=>l.api.revokeAllSessions(!1)]}class xe extends oe{constructor(t){super(),ie(this,t,we,Ee,se,{})}}export{xe as component};
