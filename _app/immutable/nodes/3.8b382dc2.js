import{s as G,d as L,u as P,g as R,e as V,c as z,o as H}from"../chunks/scheduler.88206625.js";import{S as J,i as O,g as Q,r as k,s as S,h as T,j as W,u as v,c as w,f as h,k as K,a as d,v as y,x as X,d as c,t as m,b as $,w as M,m as Y,n as Z,e as g,p as b,A as x}from"../chunks/index.3c623ae9.js";import{e as N}from"../chunks/each.e59479a4.js";import{p as ee}from"../chunks/stores.5a6829b8.js";import{g as C,c as te}from"../chunks/context.3d02589b.js";import{C as ne,a as E}from"../chunks/Channel.d0ff7e94.js";import{s as le,a as se}from"../chunks/context.fa34f1f8.js";import{w as A}from"../chunks/index.2f769d4c.js";import{b as D}from"../chunks/paths.ae39869d.js";import{U as ae}from"../chunks/UserIcon.d6c5525a.js";function F(i,n,r){const e=i.slice();return e[10]=n[r],e}function re(i){let n,r,e;return n=new ae({}),{c(){k(n.$$.fragment),r=Y(`
		Friends`)},l(t){v(n.$$.fragment,t),r=Z(t,`
		Friends`)},m(t,f){y(n,t,f),d(t,r,f),e=!0},i(t){e||(c(n.$$.fragment,t),e=!0)},o(t){m(n.$$.fragment,t),e=!1},d(t){t&&h(r),M(n,t)}}}function U(i){let n,r,e,t=i[2]!=null&&j(i),f=N(i[0]),a=[];for(let l=0;l<f.length;l+=1)a[l]=B(F(i,f,l));const _=l=>m(a[l],1,1,()=>{a[l]=null});return{c(){t&&t.c(),n=S();for(let l=0;l<a.length;l+=1)a[l].c();r=g()},l(l){t&&t.l(l),n=w(l);for(let s=0;s<a.length;s+=1)a[s].l(l);r=g()},m(l,s){t&&t.m(l,s),d(l,n,s);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(l,s);d(l,r,s),e=!0},p(l,s){if(l[2]!=null?t?(t.p(l,s),s&4&&c(t,1)):(t=j(l),t.c(),c(t,1),t.m(n.parentNode,n)):t&&(b(),m(t,1,1,()=>{t=null}),$()),s&1){f=N(l[0]);let o;for(o=0;o<f.length;o+=1){const u=F(l,f,o);a[o]?(a[o].p(u,s),c(a[o],1)):(a[o]=B(u),a[o].c(),c(a[o],1),a[o].m(r.parentNode,r))}for(b(),o=f.length;o<a.length;o+=1)_(o);$()}},i(l){if(!e){c(t);for(let s=0;s<f.length;s+=1)c(a[s]);e=!0}},o(l){m(t),a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)m(a[s]);e=!1},d(l){l&&(h(n),h(r)),t&&t.d(l),x(a,l)}}}function j(i){let n,r;return n=new E({props:{channel:i[2]}}),{c(){k(n.$$.fragment)},l(e){v(n.$$.fragment,e)},m(e,t){y(n,e,t),r=!0},p(e,t){const f={};t&4&&(f.channel=e[2]),n.$set(f)},i(e){r||(c(n.$$.fragment,e),r=!0)},o(e){m(n.$$.fragment,e),r=!1},d(e){M(n,e)}}}function q(i){let n,r;return n=new E({props:{channel:i[10]}}),{c(){k(n.$$.fragment)},l(e){v(n.$$.fragment,e)},m(e,t){y(n,e,t),r=!0},p(e,t){const f={};t&1&&(f.channel=e[10]),n.$set(f)},i(e){r||(c(n.$$.fragment,e),r=!0)},o(e){m(n.$$.fragment,e),r=!1},d(e){M(n,e)}}}function B(i){let n,r,e=i[10].channel_type!="SavedMessages"&&q(i);return{c(){e&&e.c(),n=g()},l(t){e&&e.l(t),n=g()},m(t,f){e&&e.m(t,f),d(t,n,f),r=!0},p(t,f){t[10].channel_type!="SavedMessages"?e?(e.p(t,f),f&1&&c(e,1)):(e=q(t),e.c(),c(e,1),e.m(n.parentNode,n)):e&&(b(),m(e,1,1,()=>{e=null}),$())},i(t){r||(c(e),r=!0)},o(t){m(e),r=!1},d(t){t&&h(n),e&&e.d(t)}}}function oe(i){let n,r,e,t,f;r=new ne({props:{href:D+"/friends",selected:i[1].url.pathname==`${D}/friends`,$$slots:{default:[re]},$$scope:{ctx:i}}});let a=i[0]!=null&&U(i);const _=i[4].default,l=L(_,i,i[5],null);return{c(){n=Q("div"),k(r.$$.fragment),e=S(),a&&a.c(),t=S(),l&&l.c(),this.h()},l(s){n=T(s,"DIV",{role:!0,class:!0});var o=W(n);v(r.$$.fragment,o),e=w(o),a&&a.l(o),o.forEach(h),t=w(s),l&&l.l(s),this.h()},h(){K(n,"role","list"),K(n,"class","channel-bar-container")},m(s,o){d(s,n,o),y(r,n,null),X(n,e),a&&a.m(n,null),d(s,t,o),l&&l.m(s,o),f=!0},p(s,[o]){const u={};o&2&&(u.selected=s[1].url.pathname==`${D}/friends`),o&32&&(u.$$scope={dirty:o,ctx:s}),r.$set(u),s[0]!=null?a?(a.p(s,o),o&1&&c(a,1)):(a=U(s),a.c(),c(a,1),a.m(n,null)):a&&(b(),m(a,1,1,()=>{a=null}),$()),l&&l.p&&(!f||o&32)&&P(l,_,s,s[5],f?V(_,s[5],o,null):R(s[5]),null)},i(s){f||(c(r.$$.fragment,s),c(a),c(l,s),f=!0)},o(s){m(r.$$.fragment,s),m(a),m(l,s),f=!1},d(s){s&&(h(n),h(t)),M(r),a&&a.d(),l&&l.d(s)}}}function fe(i,n,r){let e,t,f;z(i,ee,p=>r(1,f=p));let{$$slots:a={},$$scope:_}=n;const l=C(te),s=C(le)??A(),o=C(se)??A();let u;function I(){r(0,u=Array.from(l.api.cache.channels.values()).filter(p=>["DirectMessage","Group","SavedMessages"].includes(p.channel_type))),((u==null?void 0:u.length)??0)==0&&l.ready&&l.api.fetchDirectMessages().then(p=>r(0,u=p))}return l.on("Ready",I),H(I),i.$$set=p=>{"$$scope"in p&&r(5,_=p.$$scope)},i.$$.update=()=>{i.$$.dirty&2&&r(3,e=f.params),i.$$.dirty&8&&s.set(e.id),i.$$.dirty&1&&r(2,t=u==null?void 0:u.find(p=>p.channel_type=="SavedMessages"))},o.set(void 0),[u,f,t,e,a,_]}class be extends J{constructor(n){super(),O(this,n,fe,oe,G,{})}}export{be as component};
