import{s as le,n as h,c as P}from"../chunks/scheduler.bc65eea2.js";import{S as ne,i as oe,g,s as I,m as U,h as C,j as y,c as S,n as B,f as p,z as R,k as D,F as J,a as x,x as _,A as ie,o as L,d as v,t as w,b as j,r as ae,u as re,v as ce,w as fe,p as z,e as A,y as me}from"../chunks/index.cf715be0.js";import{h as de,u as pe}from"../chunks/await_block.b32c7e6c.js";import{e as Q}from"../chunks/each.e59479a4.js";import{g as H,c as ue,b as _e}from"../chunks/context.90bee080.js";import{Y as ve}from"../chunks/runtime.esm.d1697a53.js";import{d as W}from"../chunks/index.esm.4b6e8736.js";function X(o){let t,l="This Device";return{c(){t=g("h1"),t.textContent=l,this.h()},l(e){t=C(e,"H1",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1alfsq5"&&(t.textContent=l),this.h()},h(){D(t,"class","text-2xl uppercase")},m(e,s){x(e,t,s)},d(e){e&&p(t)}}}function ke(o){let t,l,e,s,i=o[0].name.toUpperCase()+"",n,r,a,k,c,u=o[2](W(o[0]._id))+"",d,f,E,q,K,V,F="Revoke",O,M,m=o[1]&&X();return{c(){t=g("div"),m&&m.c(),l=I(),e=g("div"),s=g("h2"),n=U(i),r=I(),a=g("p"),k=U("Created "),c=g("time"),d=U(u),f=U("."),E=I(),q=g("div"),K=I(),V=g("button"),V.textContent=F,this.h()},l(b){t=C(b,"DIV",{class:!0});var $=y(t);m&&m.l($),l=S($),e=C($,"DIV",{class:!0});var T=y(e);s=C(T,"H2",{class:!0});var Y=y(s);n=B(Y,i),Y.forEach(p),r=S(T),a=C(T,"P",{class:!0});var N=y(a);k=B(N,"Created "),c=C(N,"TIME",{});var G=y(c);d=B(G,u),G.forEach(p),f=B(N,"."),N.forEach(p),E=S(T),q=C(T,"DIV",{class:!0}),y(q).forEach(p),K=S(T),V=C(T,"BUTTON",{"data-svelte-h":!0}),R(V)!=="svelte-1pqiq64"&&(V.textContent=F),T.forEach(p),$.forEach(p),this.h()},h(){D(s,"class","text-xl"),D(a,"class","pl-2"),D(q,"class","flex-1"),D(e,"class","flex"),D(t,"class","w-full mx-auto"),J(t,"bg-blue-500",o[1])},m(b,$){x(b,t,$),m&&m.m(t,null),_(t,l),_(t,e),_(e,s),_(s,n),_(e,r),_(e,a),_(a,k),_(a,c),_(c,d),_(a,f),_(e,E),_(e,q),_(e,K),_(e,V),O||(M=ie(V,"click",o[6]),O=!0)},p(b,[$]){b[1]?m||(m=X(),m.c(),m.m(t,l)):m&&(m.d(1),m=null),$&1&&i!==(i=b[0].name.toUpperCase()+"")&&L(n,i),$&5&&u!==(u=b[2](W(b[0]._id))+"")&&L(d,u),$&2&&J(t,"bg-blue-500",b[1])},i:h,o:h,d(b){b&&p(t),m&&m.d(),O=!1,M()}}}function be(o,t,l){let e,s,i;P(o,ve,c=>l(2,i=c));let{session:n}=t;const r=H(ue),a=H(_e);P(o,a,c=>l(5,s=c));const k=()=>{if(e){r.destroy(),a.set(null);return}r.api.revokeSession(n._id)};return o.$$set=c=>{"session"in c&&l(0,n=c.session)},o.$$.update=()=>{o.$$.dirty&33&&l(1,e=n._id==(s==null?void 0:s._id))},[n,e,i,r,a,s,k]}class he extends ne{constructor(t){super(),oe(this,t,be,ke,le,{session:0})}}function Z(o,t,l){const e=o.slice();return e[5]=t[l],e}function ee(o){let t,l;return t=new he({props:{session:o[0]}}),{c(){ae(t.$$.fragment)},l(e){re(t.$$.fragment,e)},m(e,s){ce(t,e,s),l=!0},p(e,s){const i={};s&1&&(i.session=e[0]),t.$set(i)},i(e){l||(v(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){fe(t,e)}}}function ge(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Ce(o){let t,l,e=Q(o[4]),s=[];for(let n=0;n<e.length;n+=1)s[n]=se(Z(o,e,n));const i=n=>w(s[n],1,1,()=>{s[n]=null});return{c(){for(let n=0;n<s.length;n+=1)s[n].c();t=A()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);t=A()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);x(n,t,r),l=!0},p(n,r){if(r&3){e=Q(n[4]);let a;for(a=0;a<e.length;a+=1){const k=Z(n,e,a);s[a]?(s[a].p(k,r),v(s[a],1)):(s[a]=se(k),s[a].c(),v(s[a],1),s[a].m(t.parentNode,t))}for(z(),a=e.length;a<s.length;a+=1)i(a);j()}},i(n){if(!l){for(let r=0;r<e.length;r+=1)v(s[r]);l=!0}},o(n){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)w(s[r]);l=!1},d(n){n&&p(t),me(s,n)}}}function te(o){let t,l;return t=new he({props:{session:o[5]}}),{c(){ae(t.$$.fragment)},l(e){re(t.$$.fragment,e)},m(e,s){ce(t,e,s),l=!0},p:h,i(e){l||(v(t.$$.fragment,e),l=!0)},o(e){w(t.$$.fragment,e),l=!1},d(e){fe(t,e)}}}function se(o){var s;let t,l,e=o[5]._id!=((s=o[0])==null?void 0:s._id)&&te(o);return{c(){e&&e.c(),t=A()},l(i){e&&e.l(i),t=A()},m(i,n){e&&e.m(i,n),x(i,t,n),l=!0},p(i,n){var r;i[5]._id!=((r=i[0])==null?void 0:r._id)?e?(e.p(i,n),n&1&&v(e,1)):(e=te(i),e.c(),v(e,1),e.m(t.parentNode,t)):e&&(z(),w(e,1,1,()=>{e=null}),j())},i(i){l||(v(e),l=!0)},o(i){w(e),l=!1},d(i){i&&p(t),e&&e.d(i)}}}function $e(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function we(o){let t,l,e,s,i,n="Revoke all other sessions",r,a,k,c=o[0]!=null&&ee(o),u={ctx:o,current:null,token:null,hasCatch:!1,pending:$e,then:Ce,catch:ge,value:4,blocks:[,,,]};return de(o[1].api.fetchSessions(),u),{c(){t=g("div"),l=g("div"),c&&c.c(),e=I(),u.block.c(),s=I(),i=g("button"),i.textContent=n,this.h()},l(d){t=C(d,"DIV",{class:!0});var f=y(t);l=C(f,"DIV",{class:!0});var E=y(l);c&&c.l(E),E.forEach(p),e=S(f),u.block.l(f),s=S(f),i=C(f,"BUTTON",{"data-svelte-h":!0}),R(i)!=="svelte-1e0yr0a"&&(i.textContent=n),f.forEach(p),this.h()},h(){D(l,"class","my-4"),D(t,"class","mr-2")},m(d,f){x(d,t,f),_(t,l),c&&c.m(l,null),_(t,e),u.block.m(t,u.anchor=null),u.mount=()=>t,u.anchor=s,_(t,s),_(t,i),r=!0,a||(k=ie(i,"click",o[3]),a=!0)},p(d,[f]){o=d,o[0]!=null?c?(c.p(o,f),f&1&&v(c,1)):(c=ee(o),c.c(),v(c,1),c.m(l,null)):c&&(z(),w(c,1,1,()=>{c=null}),j()),pe(u,o,f)},i(d){r||(v(c),v(u.block),r=!0)},o(d){w(c);for(let f=0;f<3;f+=1){const E=u.blocks[f];w(E)}r=!1},d(d){d&&p(t),c&&c.d(),u.block.d(),u.token=null,u=null,a=!1,k()}}}function Ee(o,t,l){let e;const s=H(ue),i=H(_e);return P(o,i,r=>l(0,e=r)),[e,s,i,()=>s.api.revokeAllSessions()]}class xe extends ne{constructor(t){super(),oe(this,t,Ee,we,le,{})}}export{xe as component};
