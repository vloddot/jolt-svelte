import{s as Z,f as D,a as A,l as E,g as U,h as C,c as K,m as P,d as u,j as m,I as J,i as k,z as b,n as q,u as h,e as w,r as L,K as ae}from"../chunks/scheduler.7420d6ca.js";import{S as x,i as ee,a as v,t as $,c as R,b as te,d as se,m as ne,g as z,e as ie}from"../chunks/index.637134e4.js";import{p as oe}from"../chunks/stores.fafd9ada.js";import{T as ce}from"../chunks/TextChat.0ac85db8.js";import{h as B,u as fe}from"../chunks/await_block.08f6cb26.js";import{g as H}from"../chunks/context.92045884.js";import{g as F,a as O,b as re}from"../chunks/util.883c3f21.js";import{c as le}from"../chunks/context.645f4abc.js";import{r as ue}from"../chunks/index.5e2a9a64.js";import{g as me}from"../chunks/chunk-NMUKSDLG.3f77d6f4.js";import{s as pe}from"../chunks/context.9abfb385.js";function de(r){return{c:h,l:h,m:h,p:h,d:h}}function _e(r){var t;let n,s=((t=r[2])==null?void 0:t.content)!=null&&Q(r);return{c(){s&&s.c(),n=w()},l(e){s&&s.l(e),n=w()},m(e,i){s&&s.m(e,i),k(e,n,i)},p(e,i){var l;((l=e[2])==null?void 0:l.content)!=null?s?s.p(e,i):(s=Q(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(e){e&&u(n),s&&s.d(e)}}}function Q(r){let n,s=r[2].content+"",t;return{c(){n=D("p"),t=E(s),this.h()},l(e){n=U(e,"P",{class:!0});var i=C(n);t=P(i,s),i.forEach(u),this.h()},h(){m(n,"class","profile-content svelte-1osmnj4")},m(e,i){k(e,n,i),b(n,t)},p(e,i){i&1&&s!==(s=e[2].content+"")&&q(t,s)},d(e){e&&u(n)}}}function he(r){return{c:h,l:h,m:h,p:h,d:h}}function ve(r){let n,s,t,e,i,l,a,c,g=r[0].username+"",M,S,o=r[0].discriminator+"",_,I,N,y,T,d={ctx:r,current:null,token:null,hasCatch:!1,pending:he,then:_e,catch:de,value:2};return B(T=r[3].api.fetchUserProfile(r[0]._id),d),{c(){n=D("div"),s=D("img"),e=A(),i=D("h1"),l=E(r[1]),a=A(),c=D("h2"),M=E(g),S=E("#"),_=E(o),N=A(),y=D("div"),d.block.c(),this.h()},l(p){n=U(p,"DIV",{class:!0,style:!0});var f=C(n);s=U(f,"IMG",{class:!0,width:!0,height:!0,src:!0,alt:!0}),e=K(f),i=U(f,"H1",{class:!0});var j=C(i);l=P(j,r[1]),j.forEach(u),a=K(f),c=U(f,"H2",{class:!0});var V=C(c);M=P(V,g),S=P(V,"#"),_=P(V,o),V.forEach(u),f.forEach(u),N=K(p),y=U(p,"DIV",{class:!0});var G=C(y);d.block.l(G),G.forEach(u),this.h()},h(){var p;m(s,"class","cover"),m(s,"width","64px"),m(s,"height","64px"),J(s.src,t=F(r[0]))||m(s,"src",t),m(s,"alt",r[1]),m(i,"class","secondary-fg svelte-1osmnj4"),m(c,"class","secondary-fg svelte-1osmnj4"),m(n,"class","user-detail svelte-1osmnj4"),m(n,"style",I=((p=r[2])==null?void 0:p.background)!=null?`background-image: url(${O(r[2].background)})`:void 0),m(y,"class","profile svelte-1osmnj4")},m(p,f){k(p,n,f),b(n,s),b(n,e),b(n,i),b(i,l),b(n,a),b(n,c),b(c,M),b(c,S),b(c,_),k(p,N,f),k(p,y,f),d.block.m(y,d.anchor=null),d.mount=()=>y,d.anchor=null},p(p,[f]){var j;r=p,f&1&&!J(s.src,t=F(r[0]))&&m(s,"src",t),f&2&&m(s,"alt",r[1]),f&2&&q(l,r[1]),f&1&&g!==(g=r[0].username+"")&&q(M,g),f&1&&o!==(o=r[0].discriminator+"")&&q(_,o),f&4&&I!==(I=((j=r[2])==null?void 0:j.background)!=null?`background-image: url(${O(r[2].background)})`:void 0)&&m(n,"style",I),d.ctx=r,f&1&&T!==(T=r[3].api.fetchUserProfile(r[0]._id))&&B(T,d)||fe(d,r,f)},i:h,o:h,d(p){p&&(u(n),u(N),u(y)),d.block.d(),d.token=null,d=null}}}function ge(r,n,s){let t,{user:e}=n;const i=H(le);let l;return r.$$set=a=>{"user"in a&&s(0,e=a.user)},r.$$.update=()=>{r.$$.dirty&1&&s(1,t=re(e)),r.$$.dirty&1&&i.api.fetchUserProfile(e._id).then(a=>s(2,l=a))},[e,t,l,i]}class be extends x{constructor(n){super(),ee(this,n,ge,ve,Z,{user:0})}}function W(r){let n,s,t,e;n=new ce({props:{channel:r[0]}});let i=r[0].channel_type!="SavedMessages"&&X(r);return{c(){te(n.$$.fragment),s=A(),i&&i.c(),t=w()},l(l){se(n.$$.fragment,l),s=K(l),i&&i.l(l),t=w()},m(l,a){ne(n,l,a),k(l,s,a),i&&i.m(l,a),k(l,t,a),e=!0},p(l,a){const c={};a&1&&(c.channel=l[0]),n.$set(c),l[0].channel_type!="SavedMessages"?i?(i.p(l,a),a&1&&v(i,1)):(i=X(l),i.c(),v(i,1),i.m(t.parentNode,t)):i&&(z(),$(i,1,1,()=>{i=null}),R())},i(l){e||(v(n.$$.fragment,l),v(i),e=!0)},o(l){$(n.$$.fragment,l),$(i),e=!1},d(l){l&&(u(s),u(t)),ie(n,l),i&&i.d(l)}}}function X(r){let n,s,t=r[1]!=null&&Y(r);return{c(){t&&t.c(),n=w()},l(e){t&&t.l(e),n=w()},m(e,i){t&&t.m(e,i),k(e,n,i),s=!0},p(e,i){e[1]!=null?t?(t.p(e,i),i&2&&v(t,1)):(t=Y(e),t.c(),v(t,1),t.m(n.parentNode,n)):t&&(z(),$(t,1,1,()=>{t=null}),R())},i(e){s||(v(t),s=!0)},o(e){$(t),s=!1},d(e){e&&u(n),t&&t.d(e)}}}function Y(r){let n,s,t;return s=new be({props:{user:r[1]}}),{c(){n=D("div"),te(s.$$.fragment),this.h()},l(e){n=U(e,"DIV",{class:!0});var i=C(n);se(s.$$.fragment,i),i.forEach(u),this.h()},h(){m(n,"class","members-list-container")},m(e,i){k(e,n,i),ne(s,n,null),t=!0},p(e,i){const l={};i&2&&(l.user=e[1]),s.$set(l)},i(e){t||(v(s.$$.fragment,e),t=!0)},o(e){$(s.$$.fragment,e),t=!1},d(e){e&&u(n),ie(s)}}}function ke(r){let n,s,t=r[0]!=null&&W(r);return{c(){t&&t.c(),n=w()},l(e){t&&t.l(e),n=w()},m(e,i){t&&t.m(e,i),k(e,n,i),s=!0},p(e,[i]){e[0]!=null?t?(t.p(e,i),i&1&&v(t,1)):(t=W(e),t.c(),v(t,1),t.m(n.parentNode,n)):t&&(z(),$(t,1,1,()=>{t=null}),R())},i(e){s||(v(t),s=!0)},o(e){$(t),s=!1},d(e){e&&u(n),t&&t.d(e)}}}function ye(r,n,s){let t,e,i;L(r,oe,o=>s(5,i=o));const l=H(le),a=H(pe);L(r,a,o=>s(4,e=o));let c,g;async function M(o){const _=await l.api.fetchChannel(o);if(_.channel_type=="TextChannel"||_.channel_type=="VoiceChannel")throw ue(302,`/servers/${_.server}/channels/${t.id}`);s(0,c=_)}async function S(o){var _;s(1,g=await l.api.fetchUser(o.recipients[0]==((_=l.user)==null?void 0:_._id)?o.recipients[1]:o.recipients[0]))}return ae(()=>{a==null||a.set(void 0)}),r.$$.update=()=>{if(r.$$.dirty&32&&s(3,t=i.params),r.$$.dirty&8&&(a==null||a.set(t.id)),r.$$.dirty&16&&e&&M(e),r.$$.dirty&1&&c!=null&&c.channel_type!="SavedMessages"&&S(c),r.$$.dirty&3){let o="Jolt - ";(c==null?void 0:c.channel_type)=="SavedMessages"?o+="Saved Messages":g==null?o+="DM":o+=`DM with ${re(g)}`,"__TAURI__"in window?me.setTitle(o):document.title=o}},[c,g,a,t,e,i]}class Ne extends x{constructor(n){super(),ee(this,n,ye,ke,Z,{})}}export{Ne as component};
