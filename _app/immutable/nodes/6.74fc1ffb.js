import{s as X,f as z,l as fe,a as w,g as A,h as B,m as ue,d as g,c as D,j as L,i as b,z as S,n as _e,F as M,e as K,u as _,v as Z,w as x,x as ee,y as te,r as I,H as he}from"../chunks/scheduler.e5faf66b.js";import{h as N,u as ne}from"../chunks/await_block.61db03c9.js";import{e as y}from"../chunks/each.e59479a4.js";import{S as le,i as oe,a as m,g as C,c as v,t as d,b as R,d as U,m as V,e as j}from"../chunks/index.fd37aab3.js";import{p as me}from"../chunks/stores.2748c692.js";import{g as E,c as ce,s as pe}from"../chunks/context.634f79ee.js";import{C as re}from"../chunks/Channel.c3ed636c.js";import{s as de}from"../chunks/context.fa34f1f8.js";import{r as ge}from"../chunks/index.5e2a9a64.js";import{g as be}from"../chunks/chunk-NMUKSDLG.3f77d6f4.js";import{w as q}from"../chunks/index.586d49f4.js";import{c as ke}from"../chunks/context.125d2488.js";import{s as $e}from"../chunks/context.c622ed87.js";function F(o,n,r){const e=o.slice();return e[4]=n[r],e}const ye=o=>({channel:o&1}),H=o=>({channel:o[7]});function Ce(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function ve(o){let n,r;const e=o[3].default,l=Z(e,o,o[2],H);return{c(){l&&l.c(),n=w()},l(t){l&&l.l(t),n=D(t)},m(t,s){l&&l.m(t,s),b(t,n,s),r=!0},p(t,s){l&&l.p&&(!r||s&5)&&x(l,e,t,t[2],r?te(e,t[2],s,ye):ee(t[2]),H)},i(t){r||(m(l,t),r=!0)},o(t){d(l,t),r=!1},d(t){t&&g(n),l&&l.d(t)}}}function we(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function J(o){let n,r,e,l={ctx:o,current:null,token:null,hasCatch:!1,pending:we,then:ve,catch:Ce,value:7,blocks:[,,,]};return N(r=o[1].api.fetchChannel(o[4]),l),{c(){n=K(),l.block.c()},l(t){n=K(),l.block.l(t)},m(t,s){b(t,n,s),l.block.m(t,l.anchor=s),l.mount=()=>n.parentNode,l.anchor=n,e=!0},p(t,s){o=t,l.ctx=o,s&1&&r!==(r=o[1].api.fetchChannel(o[4]))&&N(r,l)||ne(l,o,s)},i(t){e||(m(l.block),e=!0)},o(t){for(let s=0;s<3;s+=1){const u=l.blocks[s];d(u)}e=!1},d(t){t&&g(n),l.block.d(t),l.token=null,l=null}}}function De(o){let n,r,e=o[0].title+"",l,t,s,u=y(o[0].channels),i=[];for(let a=0;a<u.length;a+=1)i[a]=J(F(o,u,a));const k=a=>d(i[a],1,1,()=>{i[a]=null});return{c(){n=z("details"),r=z("summary"),l=fe(e),t=w();for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){n=A(a,"DETAILS",{class:!0});var f=B(n);r=A(f,"SUMMARY",{class:!0});var c=B(r);l=ue(c,e),c.forEach(g),t=D(f);for(let p=0;p<i.length;p+=1)i[p].l(f);f.forEach(g),this.h()},h(){L(r,"class","svelte-szi6iy"),n.open=!0,L(n,"class","svelte-szi6iy")},m(a,f){b(a,n,f),S(n,r),S(r,l),S(n,t);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(n,null);s=!0},p(a,[f]){if((!s||f&1)&&e!==(e=a[0].title+"")&&_e(l,e),f&7){u=y(a[0].channels);let c;for(c=0;c<u.length;c+=1){const p=F(a,u,c);i[c]?(i[c].p(p,f),m(i[c],1)):(i[c]=J(p),i[c].c(),m(i[c],1),i[c].m(n,null))}for(C(),c=u.length;c<i.length;c+=1)k(c);v()}},i(a){if(!s){for(let f=0;f<u.length;f+=1)m(i[f]);s=!0}},o(a){i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)d(i[f]);s=!1},d(a){a&&g(n),M(i,a)}}}function Ie(o,n,r){let{$$slots:e={},$$scope:l}=n;const t=E(ce);let{category:s}=n;return o.$$set=u=>{"category"in u&&r(0,s=u.category),"$$scope"in u&&r(2,l=u.$$scope)},[s,t,l,e]}class Se extends le{constructor(n){super(),oe(this,n,Ie,De,X,{category:0})}}function P(o,n,r){const e=o.slice();return e[15]=n[r],e}function Y(o,n,r){const e=o.slice();return e[18]=n[r],e}function T(o){const n=o.slice(),r=n[0].categories??[];n[13]=r;const e=n[0].channels.filter(function(...t){return o[10](n[13],...t)})??[];return n[14]=e,n}function G(o){let n,r,e,l=y(o[14]),t=[];for(let a=0;a<l.length;a+=1)t[a]=O(Y(o,l,a));const s=a=>d(t[a],1,1,()=>{t[a]=null});let u=y(o[13]),i=[];for(let a=0;a<u.length;a+=1)i[a]=W(P(o,u,a));const k=a=>d(i[a],1,1,()=>{i[a]=null});return{c(){n=z("div");for(let a=0;a<t.length;a+=1)t[a].c();r=w();for(let a=0;a<i.length;a+=1)i[a].c();this.h()},l(a){n=A(a,"DIV",{class:!0});var f=B(n);for(let c=0;c<t.length;c+=1)t[c].l(f);r=D(f);for(let c=0;c<i.length;c+=1)i[c].l(f);f.forEach(g),this.h()},h(){L(n,"class","channel-bar-container")},m(a,f){b(a,n,f);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(n,null);S(n,r);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(n,null);e=!0},p(a,f){if(f&3){l=y(a[14]);let c;for(c=0;c<l.length;c+=1){const p=Y(a,l,c);t[c]?(t[c].p(p,f),m(t[c],1)):(t[c]=O(p),t[c].c(),m(t[c],1),t[c].m(n,r))}for(C(),c=l.length;c<t.length;c+=1)s(c);v()}if(f&17){u=y(a[13]);let c;for(c=0;c<u.length;c+=1){const p=P(a,u,c);i[c]?(i[c].p(p,f),m(i[c],1)):(i[c]=W(p),i[c].c(),m(i[c],1),i[c].m(n,null))}for(C(),c=u.length;c<i.length;c+=1)k(c);v()}},i(a){if(!e){for(let f=0;f<l.length;f+=1)m(t[f]);for(let f=0;f<u.length;f+=1)m(i[f]);e=!0}},o(a){t=t.filter(Boolean);for(let f=0;f<t.length;f+=1)d(t[f]);i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)d(i[f]);e=!1},d(a){a&&g(n),M(t,a),M(i,a)}}}function Ee(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function Ke(o){let n,r;return n=new re({props:{channel:o[4]}}),{c(){R(n.$$.fragment)},l(e){U(n.$$.fragment,e)},m(e,l){V(n,e,l),r=!0},p(e,l){const t={};l&1&&(t.channel=e[4]),n.$set(t)},i(e){r||(m(n.$$.fragment,e),r=!0)},o(e){d(n.$$.fragment,e),r=!1},d(e){j(n,e)}}}function Ne(o){return{c:_,l:_,m:_,p:_,i:_,o:_,d:_}}function O(o){let n,r,e,l={ctx:o,current:null,token:null,hasCatch:!1,pending:Ne,then:Ke,catch:Ee,value:4,blocks:[,,,]};return N(r=o[1].api.fetchChannel(o[18]),l),{c(){n=K(),l.block.c()},l(t){n=K(),l.block.l(t)},m(t,s){b(t,n,s),l.block.m(t,l.anchor=s),l.mount=()=>n.parentNode,l.anchor=n,e=!0},p(t,s){o=t,l.ctx=o,s&1&&r!==(r=o[1].api.fetchChannel(o[18]))&&N(r,l)||ne(l,o,s)},i(t){e||(m(l.block),e=!0)},o(t){for(let s=0;s<3;s+=1){const u=l.blocks[s];d(u)}e=!1},d(t){t&&g(n),l.block.d(t),l.token=null,l=null}}}function Q(o){let n,r;return n=new re({props:{channel:o[4]}}),{c(){R(n.$$.fragment)},l(e){U(n.$$.fragment,e)},m(e,l){V(n,e,l),r=!0},p(e,l){const t={};l&16&&(t.channel=e[4]),n.$set(t)},i(e){r||(m(n.$$.fragment,e),r=!0)},o(e){d(n.$$.fragment,e),r=!1},d(e){j(n,e)}}}function Te(o){let n,r,e=o[4]!=null&&Q(o);return{c(){e&&e.c(),n=w()},l(l){e&&e.l(l),n=D(l)},m(l,t){e&&e.m(l,t),b(l,n,t),r=!0},p(l,t){l[4]!=null?e?(e.p(l,t),t&16&&m(e,1)):(e=Q(l),e.c(),m(e,1),e.m(n.parentNode,n)):e&&(C(),d(e,1,1,()=>{e=null}),v())},i(l){r||(m(e),r=!0)},o(l){d(e),r=!1},d(l){l&&g(n),e&&e.d(l)}}}function W(o){let n,r;return n=new Se({props:{category:o[15],$$slots:{default:[Te,({channel:e})=>({4:e}),({channel:e})=>e?16:0]},$$scope:{ctx:o}}}),{c(){R(n.$$.fragment)},l(e){U(n.$$.fragment,e)},m(e,l){V(n,e,l),r=!0},p(e,l){const t={};l&1&&(t.category=e[15]),l&2064&&(t.$$scope={dirty:l,ctx:e}),n.$set(t)},i(e){r||(m(n.$$.fragment,e),r=!0)},o(e){d(n.$$.fragment,e),r=!1},d(e){j(n,e)}}}function ze(o){let n,r,e=o[0]!=null&&G(T(o));const l=o[9].default,t=Z(l,o,o[11],null);return{c(){e&&e.c(),n=w(),t&&t.c()},l(s){e&&e.l(s),n=D(s),t&&t.l(s)},m(s,u){e&&e.m(s,u),b(s,n,u),t&&t.m(s,u),r=!0},p(s,[u]){s[0]!=null?e?(e.p(T(s),u),u&1&&m(e,1)):(e=G(T(s)),e.c(),m(e,1),e.m(n.parentNode,n)):e&&(C(),d(e,1,1,()=>{e=null}),v()),t&&t.p&&(!r||u&2048)&&x(t,l,s,s[11],r?te(l,s[11],u,null):ee(s[11]),null)},i(s){r||(m(e),m(t,s),r=!0)},o(s){d(e),d(t,s),r=!1},d(s){s&&g(n),e&&e.d(s),t&&t.d(s)}}}function Ae(o,n,r){let e,l,t,s,u;I(o,me,h=>r(8,u=h));let{$$slots:i={},$$scope:k}=n;const a=E(ce),f=E($e);I(o,f,h=>r(0,t=h));const c=q();I(o,c,h=>r(6,l=h)),pe(ke,c);const p=E(de)??q(e.cid);I(o,p,h=>r(7,s=h));async function ae(h){const $=await a.api.fetchChannel(h);if($.channel_type!="TextChannel"&&$.channel_type!="VoiceChannel")throw ge(302,`/channels/${h}`);c.set($)}he(()=>{p.set(void 0)});const se=(h,$)=>h.find(ie=>$!=null&&ie.channels.includes($))==null;return o.$$set=h=>{"$$scope"in h&&r(11,k=h.$$scope)},o.$$.update=()=>{if(o.$$.dirty&256&&r(5,e=u.params),o.$$.dirty&32&&p.set(e.cid),o.$$.dirty&128&&s&&ae(s),o.$$.dirty&65){let h="";t==null?h+="Server":h+=t.name,l!=null&&(h+=` | #${l.name}`),h+=" - Jolt","__TAURI__"in window?be.setTitle(h):document.title=h}},[t,a,f,p,c,e,l,s,u,i,se,k]}class Ge extends le{constructor(n){super(),oe(this,n,Ae,ze,X,{})}}export{Ge as component};
