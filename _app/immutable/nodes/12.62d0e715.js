import{s as I,C as P,D as B,h as v,d as p,j as f,i as x,z as d,u as E,f as $,a as D,g as b,c as A,J,F as O,r as K,l as Q,m as W,G as L,n as X,e as y}from"../chunks/scheduler.e5faf66b.js";import{S as N,i as T,b as U,d as V,m as j,a as g,t as k,e as M,c as R,g as F}from"../chunks/index.fd37aab3.js";import{g as H,v as Y}from"../chunks/context.634f79ee.js";import{T as Z}from"../chunks/TextChat.9786b44f.js";import{e as S}from"../chunks/each.e59479a4.js";import{b as ee}from"../chunks/util.650f29ea.js";import{c as te}from"../chunks/context.125d2488.js";function ne(c){let t,n;return{c(){t=P("svg"),n=P("path"),this.h()},l(e){t=B(e,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var r=v(t);n=B(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(n).forEach(p),r.forEach(p),this.h()},h(){f(n,"stroke-linecap","round"),f(n,"stroke-linejoin","round"),f(n,"d","M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"),f(t,"xmlns","http://www.w3.org/2000/svg"),f(t,"fill","none"),f(t,"viewBox","0 0 24 24"),f(t,"stroke-width","1.5"),f(t,"stroke","currentColor"),f(t,"width","24px"),f(t,"height","24px")},m(e,r){x(e,t,r),d(t,n)},p:E,i:E,o:E,d(e){e&&p(t)}}}class re extends N{constructor(t){super(),T(this,t,null,ne,I,{})}}function q(c,t,n){const e=c.slice();e[6]=t[n].user;const r=ee(e[6]);return e[7]=r,e}function z(c){let t,n,e,r,l,u,m=c[7]+"",o,i;return{c(){t=$("div"),n=$("img"),l=D(),u=$("span"),o=Q(m),i=D(),this.h()},l(s){t=b(s,"DIV",{class:!0});var a=v(t);n=b(a,"IMG",{class:!0,alt:!0,src:!0,width:!0,height:!0}),l=A(a),u=b(a,"SPAN",{class:!0});var _=v(u);o=W(_,m),_.forEach(p),i=A(a),a.forEach(p),this.h()},h(){f(n,"class","cover"),f(n,"alt",e=c[7]),L(n.src,r=c[6].generateAvatarURL({max_side:256}))||f(n,"src",r),f(n,"width","100px"),f(n,"height","100px"),f(u,"class","align-center text-sm"),f(t,"class","flex flex-col m-2")},m(s,a){x(s,t,a),d(t,n),d(t,l),d(t,u),d(u,o),d(t,i)},p(s,a){a&1&&e!==(e=s[7])&&f(n,"alt",e),a&1&&!L(n.src,r=s[6].generateAvatarURL({max_side:256}))&&f(n,"src",r),a&1&&m!==(m=s[7]+"")&&X(o,m)},d(s){s&&p(t)}}}function ae(c){let t,n,e,r,l,u,m,o;e=new re({});let i=S(c[0].values()),s=[];for(let a=0;a<i.length;a+=1)s[a]=z(q(c,i,a));return{c(){t=$("div"),n=$("button"),U(e.$$.fragment),r=D(),l=$("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){t=b(a,"DIV",{class:!0});var _=v(t);n=b(_,"BUTTON",{class:!0});var h=v(n);V(e.$$.fragment,h),h.forEach(p),r=A(_),l=b(_,"DIV",{class:!0});var w=v(l);for(let C=0;C<s.length;C+=1)s[C].l(w);w.forEach(p),_.forEach(p),this.h()},h(){f(n,"class","m-2"),f(l,"class","flex justify-center"),f(t,"class","main-content-container")},m(a,_){x(a,t,_),d(t,n),j(e,n,null),d(t,r),d(t,l);for(let h=0;h<s.length;h+=1)s[h]&&s[h].m(l,null);u=!0,m||(o=J(n,"click",c[5]),m=!0)},p(a,[_]){if(_&1){i=S(a[0].values());let h;for(h=0;h<i.length;h+=1){const w=q(a,i,h);s[h]?s[h].p(w,_):(s[h]=z(w),s[h].c(),s[h].m(l,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=i.length}},i(a){u||(g(e.$$.fragment,a),u=!0)},o(a){k(e.$$.fragment,a),u=!1},d(a){a&&p(t),M(e),O(s,a),m=!1,o()}}}function se(c,t,n){let e,{channel:r}=t;const l=H(Y);K(c,l,i=>n(1,e=i));let u=new Map;e.participants.onUpdate(()=>n(0,u=e.participants));function m(){Promise.all([navigator.mediaDevices.getUserMedia({audio:!0}),e.connect(r._id)]).then(([i])=>{const s=i.getAudioTracks()[0];e.play("audio",s)})}const o=()=>e.connected?e.disconnect():m();return c.$$set=i=>{"channel"in i&&n(4,r=i.channel)},[u,e,l,m,r,o]}class le extends N{constructor(t){super(),T(this,t,se,ae,I,{channel:4})}}function G(c){let t,n,e,r;const l=[oe,ce],u=[];function m(o,i){return o[0].channel_type=="VoiceChannel"?0:1}return t=m(c),n=u[t]=l[t](c),{c(){n.c(),e=y()},l(o){n.l(o),e=y()},m(o,i){u[t].m(o,i),x(o,e,i),r=!0},p(o,i){let s=t;t=m(o),t===s?u[t].p(o,i):(F(),k(u[s],1,1,()=>{u[s]=null}),R(),n=u[t],n?n.p(o,i):(n=u[t]=l[t](o),n.c()),g(n,1),n.m(e.parentNode,e))},i(o){r||(g(n),r=!0)},o(o){k(n),r=!1},d(o){o&&p(e),u[t].d(o)}}}function ce(c){let t,n;return t=new Z({props:{channel:c[0]}}),{c(){U(t.$$.fragment)},l(e){V(t.$$.fragment,e)},m(e,r){j(t,e,r),n=!0},p(e,r){const l={};r&1&&(l.channel=e[0]),t.$set(l)},i(e){n||(g(t.$$.fragment,e),n=!0)},o(e){k(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function oe(c){let t,n;return t=new le({props:{channel:c[0]}}),{c(){U(t.$$.fragment)},l(e){V(t.$$.fragment,e)},m(e,r){j(t,e,r),n=!0},p(e,r){const l={};r&1&&(l.channel=e[0]),t.$set(l)},i(e){n||(g(t.$$.fragment,e),n=!0)},o(e){k(t.$$.fragment,e),n=!1},d(e){M(t,e)}}}function ie(c){let t,n,e=c[0]!=null&&G(c);return{c(){e&&e.c(),t=y()},l(r){e&&e.l(r),t=y()},m(r,l){e&&e.m(r,l),x(r,t,l),n=!0},p(r,[l]){r[0]!=null?e?(e.p(r,l),l&1&&g(e,1)):(e=G(r),e.c(),g(e,1),e.m(t.parentNode,t)):e&&(F(),k(e,1,1,()=>{e=null}),R())},i(r){n||(g(e),n=!0)},o(r){k(e),n=!1},d(r){r&&p(t),e&&e.d(r)}}}function ue(c,t,n){let e;const r=H(te);return K(c,r,l=>n(0,e=l)),[e,r]}class ve extends N{constructor(t){super(),T(this,t,ue,ie,I,{})}}export{ve as component};
