import{s as N,n as E,c as A,j as L}from"../chunks/scheduler.0beedca7.js";import{S as T,i as U,z as S,A as q,j as v,f as p,k as u,a as w,x as d,g as $,r as V,s as j,h as b,u as B,c as D,v as M,y as J,d as g,t as k,w as P,B as Q,m as W,n as X,o as Y,e as y,b as H,p as O}from"../chunks/index.433d2ede.js";import{g as I,v as Z}from"../chunks/context.62a025aa.js";import{T as ee}from"../chunks/TextChat.915587b2.js";import{e as z}from"../chunks/each.e59479a4.js";import{a as te}from"../chunks/util.68b48a6c.js";import{s as F}from"../chunks/context.4d0298a0.js";function ne(l){let t,n;return{c(){t=S("svg"),n=S("path"),this.h()},l(e){t=q(e,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var r=v(t);n=q(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(n).forEach(p),r.forEach(p),this.h()},h(){u(n,"stroke-linecap","round"),u(n,"stroke-linejoin","round"),u(n,"d","M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"),u(t,"xmlns","http://www.w3.org/2000/svg"),u(t,"fill","none"),u(t,"viewBox","0 0 24 24"),u(t,"stroke-width","1.5"),u(t,"stroke","currentColor"),u(t,"width","24px"),u(t,"height","24px")},m(e,r){w(e,t,r),d(t,n)},p:E,i:E,o:E,d(e){e&&p(t)}}}class re extends T{constructor(t){super(),U(this,t,null,ne,N,{})}}function K(l,t,n){const e=l.slice();e[7]=t[n].user;const r=te(e[7]);return e[8]=r,e}function R(l){let t,n,e,r,c,i,_=l[8]+"",o,m;return{c(){t=$("div"),n=$("img"),c=j(),i=$("span"),o=W(_),m=j(),this.h()},l(a){t=b(a,"DIV",{class:!0});var s=v(t);n=b(s,"IMG",{class:!0,alt:!0,src:!0,width:!0,height:!0}),c=D(s),i=b(s,"SPAN",{class:!0});var h=v(i);o=X(h,_),h.forEach(p),m=D(s),s.forEach(p),this.h()},h(){u(n,"class","cover"),u(n,"alt",e=l[8]),L(n.src,r=l[7].generateAvatarURL({max_side:256}))||u(n,"src",r),u(n,"width","100px"),u(n,"height","100px"),u(i,"class","align-center text-sm"),u(t,"class","flex flex-col m-2")},m(a,s){w(a,t,s),d(t,n),d(t,c),d(t,i),d(i,o),d(t,m)},p(a,s){s&1&&e!==(e=a[8])&&u(n,"alt",e),s&1&&!L(n.src,r=a[7].generateAvatarURL({max_side:256}))&&u(n,"src",r),s&1&&_!==(_=a[8]+"")&&Y(o,_)},d(a){a&&p(t)}}}function ae(l){let t,n,e,r,c,i,_,o;e=new re({});let m=z(l[0].values()),a=[];for(let s=0;s<m.length;s+=1)a[s]=R(K(l,m,s));return{c(){t=$("div"),n=$("button"),V(e.$$.fragment),r=j(),c=$("div");for(let s=0;s<a.length;s+=1)a[s].c();this.h()},l(s){t=b(s,"DIV",{class:!0});var h=v(t);n=b(h,"BUTTON",{class:!0});var f=v(n);B(e.$$.fragment,f),f.forEach(p),r=D(h),c=b(h,"DIV",{class:!0});var x=v(c);for(let C=0;C<a.length;C+=1)a[C].l(x);x.forEach(p),h.forEach(p),this.h()},h(){u(n,"class","m-2"),u(c,"class","flex justify-center"),u(t,"class","main-content-container")},m(s,h){w(s,t,h),d(t,n),M(e,n,null),d(t,r),d(t,c);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(c,null);i=!0,_||(o=J(n,"click",l[5]),_=!0)},p(s,[h]){if(h&1){m=z(s[0].values());let f;for(f=0;f<m.length;f+=1){const x=K(s,m,f);a[f]?a[f].p(x,h):(a[f]=R(x),a[f].c(),a[f].m(c,null))}for(;f<a.length;f+=1)a[f].d(1);a.length=m.length}},i(s){i||(g(e.$$.fragment,s),i=!0)},o(s){k(e.$$.fragment,s),i=!1},d(s){s&&p(t),P(e),Q(a,s),_=!1,o()}}}function se(l,t,n){let e,r;const c=I(F);A(l,c,a=>n(6,r=a));const i=I(Z);A(l,i,a=>n(1,e=a));let _=new Map;e.participants.onUpdate(()=>n(0,_=e.participants));function o(){r!=null&&Promise.all([navigator.mediaDevices.getUserMedia({audio:!0}),e.connect(r==null?void 0:r._id)]).then(([a])=>{const s=a.getAudioTracks()[0];e.play("audio",s)})}return[_,e,c,i,o,()=>e.connected?e.disconnect():o()]}class le extends T{constructor(t){super(),U(this,t,se,ae,N,{})}}function G(l){let t,n,e,r;const c=[oe,ce],i=[];function _(o,m){return o[0].channel_type=="VoiceChannel"?0:1}return t=_(l),n=i[t]=c[t](l),{c(){n.c(),e=y()},l(o){n.l(o),e=y()},m(o,m){i[t].m(o,m),w(o,e,m),r=!0},p(o,m){let a=t;t=_(o),t!==a&&(O(),k(i[a],1,1,()=>{i[a]=null}),H(),n=i[t],n||(n=i[t]=c[t](o),n.c()),g(n,1),n.m(e.parentNode,e))},i(o){r||(g(n),r=!0)},o(o){k(n),r=!1},d(o){o&&p(e),i[t].d(o)}}}function ce(l){let t,n;return t=new ee({}),{c(){V(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,r){M(t,e,r),n=!0},i(e){n||(g(t.$$.fragment,e),n=!0)},o(e){k(t.$$.fragment,e),n=!1},d(e){P(t,e)}}}function oe(l){let t,n;return t=new le({}),{c(){V(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,r){M(t,e,r),n=!0},i(e){n||(g(t.$$.fragment,e),n=!0)},o(e){k(t.$$.fragment,e),n=!1},d(e){P(t,e)}}}function ie(l){let t,n,e=l[0]!=null&&G(l);return{c(){e&&e.c(),t=y()},l(r){e&&e.l(r),t=y()},m(r,c){e&&e.m(r,c),w(r,t,c),n=!0},p(r,[c]){r[0]!=null?e?(e.p(r,c),c&1&&g(e,1)):(e=G(r),e.c(),g(e,1),e.m(t.parentNode,t)):e&&(O(),k(e,1,1,()=>{e=null}),H())},i(r){n||(g(e),n=!0)},o(r){k(e),n=!1},d(r){r&&p(t),e&&e.d(r)}}}function ue(l,t,n){let e;const r=I(F);return A(l,r,c=>n(0,e=c)),[e,r]}class ve extends T{constructor(t){super(),U(this,t,ue,ie,N,{})}}export{ve as component};
