import{s as se,n as h,c as P}from"../chunks/scheduler.88206625.js";import{S as ne,i as oe,g,s as S,m as N,h as C,j as D,c as x,n as U,f as p,B as R,k as V,H as J,a as q,x as _,C as ie,o as L,d as v,t as w,b as j,r as ae,u as re,v as ce,w as fe,p as M,e as H,A as de}from"../chunks/index.3c623ae9.js";import{h as me,u as pe}from"../chunks/await_block.9bbfa40c.js";import{e as Q}from"../chunks/each.e59479a4.js";import{g as A,c as ue,b as _e}from"../chunks/context.3d02589b.js";import{Y as ve}from"../chunks/runtime.esm.d4fec816.js";import{d as W}from"../chunks/index.esm.4b6e8736.js";function X(o){let t,s="This Device";return{c(){t=g("h1"),t.textContent=s,this.h()},l(e){t=C(e,"H1",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-1alfsq5"&&(t.textContent=s),this.h()},h(){V(t,"class","text-2xl uppercase")},m(e,l){q(e,t,l)},d(e){e&&p(t)}}}function be(o){let t,s,e,l,i=o[0].name.toUpperCase()+"",n,r,a,b,c,u=o[2](W(o[0]._id))+"",m,f,E,y,K,I,Y="Revoke",O,z,d=o[1]&&X();return{c(){t=g("div"),d&&d.c(),s=S(),e=g("div"),l=g("h2"),n=N(i),r=S(),a=g("p"),b=N("Created "),c=g("time"),m=N(u),f=N("."),E=S(),y=g("div"),K=S(),I=g("button"),I.textContent=Y,this.h()},l(k){t=C(k,"DIV",{class:!0});var $=D(t);d&&d.l($),s=x($),e=C($,"DIV",{class:!0});var T=D(e);l=C(T,"H2",{class:!0});var F=D(l);n=U(F,i),F.forEach(p),r=x(T),a=C(T,"P",{class:!0});var B=D(a);b=U(B,"Created "),c=C(B,"TIME",{});var G=D(c);m=U(G,u),G.forEach(p),f=U(B,"."),B.forEach(p),E=x(T),y=C(T,"DIV",{class:!0}),D(y).forEach(p),K=x(T),I=C(T,"BUTTON",{"data-svelte-h":!0}),R(I)!=="svelte-1pqiq64"&&(I.textContent=Y),T.forEach(p),$.forEach(p),this.h()},h(){V(l,"class","text-xl"),V(a,"class","pl-2"),V(y,"class","flex-1"),V(e,"class","flex"),V(t,"class","w-full mx-auto"),J(t,"bg-blue-500",o[1])},m(k,$){q(k,t,$),d&&d.m(t,null),_(t,s),_(t,e),_(e,l),_(l,n),_(e,r),_(e,a),_(a,b),_(a,c),_(c,m),_(a,f),_(e,E),_(e,y),_(e,K),_(e,I),O||(z=ie(I,"click",o[6]),O=!0)},p(k,[$]){k[1]?d||(d=X(),d.c(),d.m(t,s)):d&&(d.d(1),d=null),$&1&&i!==(i=k[0].name.toUpperCase()+"")&&L(n,i),$&5&&u!==(u=k[2](W(k[0]._id))+"")&&L(m,u),$&2&&J(t,"bg-blue-500",k[1])},i:h,o:h,d(k){k&&p(t),d&&d.d(),O=!1,z()}}}function ke(o,t,s){let e,l,i;P(o,ve,c=>s(2,i=c));let{session:n}=t;const r=A(ue),a=A(_e);P(o,a,c=>s(5,l=c));const b=()=>{if(e){r.destroy(),a.set(null);return}r.api.revokeSession(n._id)};return o.$$set=c=>{"session"in c&&s(0,n=c.session)},o.$$.update=()=>{o.$$.dirty&33&&s(1,e=n._id==(l==null?void 0:l._id))},[n,e,i,r,a,l,b]}class he extends ne{constructor(t){super(),oe(this,t,ke,be,se,{session:0})}}function Z(o,t,s){const e=o.slice();return e[5]=t[s],e}function ee(o){let t,s;return t=new he({props:{session:o[0]}}),{c(){ae(t.$$.fragment)},l(e){re(t.$$.fragment,e)},m(e,l){ce(t,e,l),s=!0},p(e,l){const i={};l&1&&(i.session=e[0]),t.$set(i)},i(e){s||(v(t.$$.fragment,e),s=!0)},o(e){w(t.$$.fragment,e),s=!1},d(e){fe(t,e)}}}function ge(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Ce(o){let t,s,e=Q(o[4]),l=[];for(let n=0;n<e.length;n+=1)l[n]=le(Z(o,e,n));const i=n=>w(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();t=H()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);t=H()},m(n,r){for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,r);q(n,t,r),s=!0},p(n,r){if(r&3){e=Q(n[4]);let a;for(a=0;a<e.length;a+=1){const b=Z(n,e,a);l[a]?(l[a].p(b,r),v(l[a],1)):(l[a]=le(b),l[a].c(),v(l[a],1),l[a].m(t.parentNode,t))}for(M(),a=e.length;a<l.length;a+=1)i(a);j()}},i(n){if(!s){for(let r=0;r<e.length;r+=1)v(l[r]);s=!0}},o(n){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)w(l[r]);s=!1},d(n){n&&p(t),de(l,n)}}}function te(o){let t,s;return t=new he({props:{session:o[5]}}),{c(){ae(t.$$.fragment)},l(e){re(t.$$.fragment,e)},m(e,l){ce(t,e,l),s=!0},p:h,i(e){s||(v(t.$$.fragment,e),s=!0)},o(e){w(t.$$.fragment,e),s=!1},d(e){fe(t,e)}}}function le(o){var l;let t,s,e=o[5]._id!=((l=o[0])==null?void 0:l._id)&&te(o);return{c(){e&&e.c(),t=H()},l(i){e&&e.l(i),t=H()},m(i,n){e&&e.m(i,n),q(i,t,n),s=!0},p(i,n){var r;i[5]._id!=((r=i[0])==null?void 0:r._id)?e?(e.p(i,n),n&1&&v(e,1)):(e=te(i),e.c(),v(e,1),e.m(t.parentNode,t)):e&&(M(),w(e,1,1,()=>{e=null}),j())},i(i){s||(v(e),s=!0)},o(i){w(e),s=!1},d(i){i&&p(t),e&&e.d(i)}}}function $e(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function we(o){let t,s,e,l,i,n="Revoke all other sessions",r,a,b,c=o[0]!=null&&ee(o),u={ctx:o,current:null,token:null,hasCatch:!1,pending:$e,then:Ce,catch:ge,value:4,blocks:[,,,]};return me(o[1].api.fetchSessions(),u),{c(){t=g("div"),s=g("div"),c&&c.c(),e=S(),u.block.c(),l=S(),i=g("button"),i.textContent=n,this.h()},l(m){t=C(m,"DIV",{class:!0});var f=D(t);s=C(f,"DIV",{class:!0});var E=D(s);c&&c.l(E),E.forEach(p),e=x(f),u.block.l(f),l=x(f),i=C(f,"BUTTON",{"data-svelte-h":!0}),R(i)!=="svelte-dllb2x"&&(i.textContent=n),f.forEach(p),this.h()},h(){V(s,"class","my-4"),V(t,"class","mr-2")},m(m,f){q(m,t,f),_(t,s),c&&c.m(s,null),_(t,e),u.block.m(t,u.anchor=null),u.mount=()=>t,u.anchor=l,_(t,l),_(t,i),r=!0,a||(b=ie(i,"click",o[3]),a=!0)},p(m,[f]){o=m,o[0]!=null?c?(c.p(o,f),f&1&&v(c,1)):(c=ee(o),c.c(),v(c,1),c.m(s,null)):c&&(M(),w(c,1,1,()=>{c=null}),j()),pe(u,o,f)},i(m){r||(v(c),v(u.block),r=!0)},o(m){w(c);for(let f=0;f<3;f+=1){const E=u.blocks[f];w(E)}r=!1},d(m){m&&p(t),c&&c.d(),u.block.d(),u.token=null,u=null,a=!1,b()}}}function Ee(o,t,s){let e;const l=A(ue),i=A(_e);return P(o,i,r=>s(0,e=r)),[e,l,i,()=>l.api.revokeAllSessions(!1)]}class qe extends ne{constructor(t){super(),oe(this,t,Ee,we,se,{})}}export{qe as component};
