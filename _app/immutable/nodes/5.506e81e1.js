import{s as re,n as h,d as ae,u as ie,g as se,e as fe,c as V}from"../chunks/scheduler.9b2bc230.js";import{S as ue,i as _e,g as M,m as he,s as w,h as T,j as U,n as me,f as b,c as D,k as A,a as k,x as N,o as pe,d as p,p as E,b as K,t as g,y as j,e as $,r as L,u as O,v as R,w as q}from"../chunks/index.6c81ac7e.js";import{h as I,u as z,g as Y,b as Ce}from"../chunks/util.591b1810.js";import{e as C}from"../chunks/each.e59479a4.js";import{p as we}from"../chunks/stores.456a6b0b.js";import{w as B}from"../chunks/index.cace4c42.js";import{g as P,c as de,s as F}from"../chunks/context.3f5e8c52.js";import{a as De,s as Ie}from"../chunks/context.fa34f1f8.js";import{C as ge}from"../chunks/Channel.e8c3602a.js";import{s as Se,c as Ne}from"../chunks/context.dd405c9c.js";import{U as Ee}from"../chunks/UserProfilePicture.4245f318.js";import{r as Ke}from"../chunks/index.1d6e502d.js";import{g as Me}from"../chunks/chunk-NMUKSDLG.3f77d6f4.js";const Te=!1,ut=Object.freeze(Object.defineProperty({__proto__:null,prerender:Te},Symbol.toStringTag,{value:"Module"}));function G(o,n,r){const l=o.slice();return l[4]=n[r],l}const Ue=o=>({channel:o&1}),H=o=>({channel:o[7]});function Ve(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Ae(o){let n,r;const l=o[3].default,e=ae(l,o,o[2],H);return{c(){e&&e.c(),n=w()},l(t){e&&e.l(t),n=D(t)},m(t,c){e&&e.m(t,c),k(t,n,c),r=!0},p(t,c){e&&e.p&&(!r||c&5)&&ie(e,l,t,t[2],r?fe(l,t[2],c,Ue):se(t[2]),H)},i(t){r||(p(e,t),r=!0)},o(t){g(e,t),r=!1},d(t){t&&b(n),e&&e.d(t)}}}function Be(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Q(o){let n,r,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:Be,then:Ae,catch:Ve,value:7,blocks:[,,,]};return I(r=o[1].api.fetchChannel(o[4]),e),{c(){n=$(),e.block.c()},l(t){n=$(),e.block.l(t)},m(t,c){k(t,n,c),e.block.m(t,e.anchor=c),e.mount=()=>n.parentNode,e.anchor=n,l=!0},p(t,c){o=t,e.ctx=o,c&1&&r!==(r=o[1].api.fetchChannel(o[4]))&&I(r,e)||z(e,o,c)},i(t){l||(p(e.block),l=!0)},o(t){for(let c=0;c<3;c+=1){const f=e.blocks[c];g(f)}l=!1},d(t){t&&b(n),e.block.d(t),e.token=null,e=null}}}function Pe(o){let n,r,l=o[0].title+"",e,t,c,f,a=C(o[0].channels),i=[];for(let _=0;_<a.length;_+=1)i[_]=Q(G(o,a,_));const u=_=>g(i[_],1,1,()=>{i[_]=null});return{c(){n=M("details"),r=M("summary"),e=he(l),t=w(),c=M("div");for(let _=0;_<i.length;_+=1)i[_].c();this.h()},l(_){n=T(_,"DETAILS",{});var s=U(n);r=T(s,"SUMMARY",{class:!0,role:!0});var m=U(r);e=me(m,l),m.forEach(b),t=D(s),c=T(s,"DIV",{class:!0});var v=U(c);for(let S=0;S<i.length;S+=1)i[S].l(v);v.forEach(b),s.forEach(b),this.h()},h(){A(r,"class","category-summary"),A(r,"role","group"),A(c,"class","ml-2"),n.open=!0},m(_,s){k(_,n,s),N(n,r),N(r,e),N(n,t),N(n,c);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(c,null);f=!0},p(_,[s]){if((!f||s&1)&&l!==(l=_[0].title+"")&&pe(e,l),s&7){a=C(_[0].channels);let m;for(m=0;m<a.length;m+=1){const v=G(_,a,m);i[m]?(i[m].p(v,s),p(i[m],1)):(i[m]=Q(v),i[m].c(),p(i[m],1),i[m].m(c,null))}for(E(),m=a.length;m<i.length;m+=1)u(m);K()}},i(_){if(!f){for(let s=0;s<a.length;s+=1)p(i[s]);f=!0}},o(_){i=i.filter(Boolean);for(let s=0;s<i.length;s+=1)g(i[s]);f=!1},d(_){_&&b(n),j(i,_)}}}function je(o,n,r){let{$$slots:l={},$$scope:e}=n;const t=P(de);let{category:c}=n;return o.$$set=f=>{"category"in f&&r(0,c=f.category),"$$scope"in f&&r(2,e=f.$$scope)},[c,t,e,l]}class Le extends ue{constructor(n){super(),_e(this,n,je,Pe,re,{category:0})}}function W(o,n,r){const l=o.slice();l[18]=n[r];const e=l[17].users.find(function(...c){return o[13](l[18],...c)})??l[1].api.fetchUser(l[18]._id.user);return l[19]=e,l}function X(o){const n=Ce(o[19],o[18]);o[22]=n}function Z(o,n,r){const l=o.slice();return l[25]=n[r],l}function x(o,n,r){const l=o.slice();return l[28]=n[r],l}function J(o){const n=o.slice(),r=n[0].categories??[];n[23]=r;const l=n[0].channels.filter(function(...t){return o[12](n[23],...t)})??[];return n[24]=l,n}function ee(o){let n,r,l,e=C(o[24]),t=[];for(let u=0;u<e.length;u+=1)t[u]=te(x(o,e,u));const c=u=>g(t[u],1,1,()=>{t[u]=null});let f=C(o[23]),a=[];for(let u=0;u<f.length;u+=1)a[u]=ne(Z(o,f,u));const i=u=>g(a[u],1,1,()=>{a[u]=null});return{c(){n=M("div");for(let u=0;u<t.length;u+=1)t[u].c();r=w();for(let u=0;u<a.length;u+=1)a[u].c();this.h()},l(u){n=T(u,"DIV",{class:!0});var _=U(n);for(let s=0;s<t.length;s+=1)t[s].l(_);r=D(_);for(let s=0;s<a.length;s+=1)a[s].l(_);_.forEach(b),this.h()},h(){A(n,"class","channel-bar-container")},m(u,_){k(u,n,_);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(n,null);N(n,r);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(n,null);l=!0},p(u,_){if(_&3){e=C(u[24]);let s;for(s=0;s<e.length;s+=1){const m=x(u,e,s);t[s]?(t[s].p(m,_),p(t[s],1)):(t[s]=te(m),t[s].c(),p(t[s],1),t[s].m(n,r))}for(E(),s=e.length;s<t.length;s+=1)c(s);K()}if(_&33){f=C(u[23]);let s;for(s=0;s<f.length;s+=1){const m=Z(u,f,s);a[s]?(a[s].p(m,_),p(a[s],1)):(a[s]=ne(m),a[s].c(),p(a[s],1),a[s].m(n,null))}for(E(),s=f.length;s<a.length;s+=1)i(s);K()}},i(u){if(!l){for(let _=0;_<e.length;_+=1)p(t[_]);for(let _=0;_<f.length;_+=1)p(a[_]);l=!0}},o(u){t=t.filter(Boolean);for(let _=0;_<t.length;_+=1)g(t[_]);a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)g(a[_]);l=!1},d(u){u&&b(n),j(t,u),j(a,u)}}}function Oe(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Re(o){let n,r;return n=new ge({props:{channel:o[5]}}),{c(){L(n.$$.fragment)},l(l){O(n.$$.fragment,l)},m(l,e){R(n,l,e),r=!0},p(l,e){const t={};e&1&&(t.channel=l[5]),n.$set(t)},i(l){r||(p(n.$$.fragment,l),r=!0)},o(l){g(n.$$.fragment,l),r=!1},d(l){q(n,l)}}}function qe(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function te(o){let n,r,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:qe,then:Re,catch:Oe,value:5,blocks:[,,,]};return I(r=o[1].api.fetchChannel(o[28]),e),{c(){n=$(),e.block.c()},l(t){n=$(),e.block.l(t)},m(t,c){k(t,n,c),e.block.m(t,e.anchor=c),e.mount=()=>n.parentNode,e.anchor=n,l=!0},p(t,c){o=t,e.ctx=o,c&1&&r!==(r=o[1].api.fetchChannel(o[28]))&&I(r,e)||z(e,o,c)},i(t){l||(p(e.block),l=!0)},o(t){for(let c=0;c<3;c+=1){const f=e.blocks[c];g(f)}l=!1},d(t){t&&b(n),e.block.d(t),e.token=null,e=null}}}function le(o){let n,r;return n=new ge({props:{channel:o[5]}}),{c(){L(n.$$.fragment)},l(l){O(n.$$.fragment,l)},m(l,e){R(n,l,e),r=!0},p(l,e){const t={};e&32&&(t.channel=l[5]),n.$set(t)},i(l){r||(p(n.$$.fragment,l),r=!0)},o(l){g(n.$$.fragment,l),r=!1},d(l){q(n,l)}}}function ze(o){let n,r,l=o[5]!=null&&le(o);return{c(){l&&l.c(),n=w()},l(e){l&&l.l(e),n=D(e)},m(e,t){l&&l.m(e,t),k(e,n,t),r=!0},p(e,t){e[5]!=null?l?(l.p(e,t),t&32&&p(l,1)):(l=le(e),l.c(),p(l,1),l.m(n.parentNode,n)):l&&(E(),g(l,1,1,()=>{l=null}),K())},i(e){r||(p(l),r=!0)},o(e){g(l),r=!1},d(e){e&&b(n),l&&l.d(e)}}}function ne(o){let n,r;return n=new Le({props:{category:o[25],$$slots:{default:[ze,({channel:l})=>({5:l}),({channel:l})=>l?32:0]},$$scope:{ctx:o}}}),{c(){L(n.$$.fragment)},l(l){O(n.$$.fragment,l)},m(l,e){R(n,l,e),r=!0},p(l,e){const t={};e&1&&(t.category=l[25]),e&16416&&(t.$$scope={dirty:e,ctx:l}),n.$set(t)},i(l){r||(p(n.$$.fragment,l),r=!0)},o(l){g(n.$$.fragment,l),r=!1},d(l){q(n,l)}}}function oe(o){let n,r,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:Qe,then:Ye,catch:Je,value:17,blocks:[,,,]};return I(r=o[1].api.fetchMembers(o[0]._id),e),{c(){n=M("div"),e.block.c(),this.h()},l(t){n=T(t,"DIV",{class:!0});var c=U(n);e.block.l(c),c.forEach(b),this.h()},h(){A(n,"class","members-list-container")},m(t,c){k(t,n,c),e.block.m(n,e.anchor=null),e.mount=()=>n,e.anchor=null,l=!0},p(t,c){o=t,e.ctx=o,c&1&&r!==(r=o[1].api.fetchMembers(o[0]._id))&&I(r,e)||z(e,o,c)},i(t){l||(p(e.block),l=!0)},o(t){for(let c=0;c<3;c+=1){const f=e.blocks[c];g(f)}l=!1},d(t){t&&b(n),e.block.d(),e.token=null,e=null}}}function Je(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Ye(o){let n,r,l=C(o[17].members),e=[];for(let c=0;c<l.length;c+=1)e[c]=ce(W(o,l,c));const t=c=>g(e[c],1,1,()=>{e[c]=null});return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=$()},l(c){for(let f=0;f<e.length;f+=1)e[f].l(c);n=$()},m(c,f){for(let a=0;a<e.length;a+=1)e[a]&&e[a].m(c,f);k(c,n,f),r=!0},p(c,f){if(f&3){l=C(c[17].members);let a;for(a=0;a<l.length;a+=1){const i=W(c,l,a);e[a]?(e[a].p(i,f),p(e[a],1)):(e[a]=ce(i),e[a].c(),p(e[a],1),e[a].m(n.parentNode,n))}for(E(),a=l.length;a<e.length;a+=1)t(a);K()}},i(c){if(!r){for(let f=0;f<l.length;f+=1)p(e[f]);r=!0}},o(c){e=e.filter(Boolean);for(let f=0;f<e.length;f+=1)g(e[f]);r=!1},d(c){c&&b(n),j(e,c)}}}function Fe(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Ge(o){X(o);let n,r,l,e=o[22]+"",t,c,f;return r=new Ee({props:{src:Y(o[19],o[18]),name:o[22]}}),{c(){n=M("div"),L(r.$$.fragment),l=w(),t=he(e),c=w()},l(a){n=T(a,"DIV",{});var i=U(n);O(r.$$.fragment,i),l=D(i),t=me(i,e),i.forEach(b),c=D(a)},m(a,i){k(a,n,i),R(r,n,null),N(n,l),N(n,t),k(a,c,i),f=!0},p(a,i){X(a);const u={};i&1&&(u.src=Y(a[19],a[18])),i&1&&(u.name=a[22]),r.$set(u),(!f||i&1)&&e!==(e=a[22]+"")&&pe(t,e)},i(a){f||(p(r.$$.fragment,a),f=!0)},o(a){g(r.$$.fragment,a),f=!1},d(a){a&&(b(n),b(c)),q(r)}}}function He(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function ce(o){let n,r,l,e={ctx:o,current:null,token:null,hasCatch:!1,pending:He,then:Ge,catch:Fe,value:19,blocks:[,,,]};return I(r=o[19],e),{c(){n=$(),e.block.c()},l(t){n=$(),e.block.l(t)},m(t,c){k(t,n,c),e.block.m(t,e.anchor=c),e.mount=()=>n.parentNode,e.anchor=n,l=!0},p(t,c){o=t,e.ctx=o,c&1&&r!==(r=o[19])&&I(r,e)||z(e,o,c)},i(t){l||(p(e.block),l=!0)},o(t){for(let c=0;c<3;c+=1){const f=e.blocks[c];g(f)}l=!1},d(t){t&&b(n),e.block.d(t),e.token=null,e=null}}}function Qe(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function We(o){let n,r,l,e,t=o[0]!=null&&ee(J(o));const c=o[11].default,f=ae(c,o,o[14],null);let a=o[0]!=null&&oe(o);return{c(){t&&t.c(),n=w(),f&&f.c(),r=w(),a&&a.c(),l=$()},l(i){t&&t.l(i),n=D(i),f&&f.l(i),r=D(i),a&&a.l(i),l=$()},m(i,u){t&&t.m(i,u),k(i,n,u),f&&f.m(i,u),k(i,r,u),a&&a.m(i,u),k(i,l,u),e=!0},p(i,[u]){i[0]!=null?t?(t.p(J(i),u),u&1&&p(t,1)):(t=ee(J(i)),t.c(),p(t,1),t.m(n.parentNode,n)):t&&(E(),g(t,1,1,()=>{t=null}),K()),f&&f.p&&(!e||u&16384)&&ie(f,c,i,i[14],e?fe(c,i[14],u,null):se(i[14]),null),i[0]!=null?a?(a.p(i,u),u&1&&p(a,1)):(a=oe(i),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(E(),g(a,1,1,()=>{a=null}),K())},i(i){e||(p(t),p(f,i),p(a),e=!0)},o(i){g(t),g(f,i),g(a),e=!1},d(i){i&&(b(n),b(r),b(l)),t&&t.d(i),f&&f.d(i),a&&a.d(i)}}}function Xe(o,n,r){let l,e,t,c,f,a;V(o,we,d=>r(10,a=d));let{$$slots:i={},$$scope:u}=n;const _=P(de),s=B();V(o,s,d=>r(0,t=d));const m=B();V(o,m,d=>r(7,e=d)),F(Se,s),F(Ne,m);const v=P(De)??B(l.sid);V(o,v,d=>r(9,f=d));const S=P(Ie)??B(l.cid);V(o,S,d=>r(8,c=d));async function be(d){s.set(await _.api.fetchServer(d))}async function ke(d){const y=await _.api.fetchChannel(d);if(y.channel_type!="TextChannel"&&y.channel_type!="VoiceChannel")throw Ke(302,`/channels/${d}`);m.set(y)}const $e=(d,y)=>d.find(ye=>y!=null&&ye.channels.includes(y))==null,ve=(d,{_id:y})=>y==d._id.user;return o.$$set=d=>{"$$scope"in d&&r(14,u=d.$$scope)},o.$$.update=()=>{if(o.$$.dirty&1024&&r(6,l=a.params),o.$$.dirty&64&&v.set(l.sid),o.$$.dirty&64&&S.set(l.cid),o.$$.dirty&512&&f&&be(f),o.$$.dirty&256&&c&&ke(c),o.$$.dirty&129){let d="";t!=null?d+=t.name:d+="Server",e!=null&&(d+=` | #${e.name}`),d+=" - Jolt","__TAURI__"in window?Me.setTitle(d):document.title=d}},[t,_,s,v,S,m,l,e,c,f,a,i,$e,ve,u]}class _t extends ue{constructor(n){super(),_e(this,n,Xe,We,re,{})}}export{_t as component,ut as universal};
