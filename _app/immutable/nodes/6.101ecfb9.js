import{s as re,f as U,l as ie,a as I,g as A,h as V,m as se,d as g,c as N,j as y,i as $,z as S,n as ae,E as z,e as v,u,v as fe,w as ue,x as _e,y as he,r as B,G as ye,F as J}from"../chunks/scheduler.d49036d4.js";import{h as E,u as j}from"../chunks/await_block.872c6e1e.js";import{e as D}from"../chunks/each.e59479a4.js";import{S as me,i as pe,a as p,g as K,c as M,t as b,b as q,d as G,m as L,e as R}from"../chunks/index.90a2ee5d.js";import{p as Ce}from"../chunks/stores.9e947814.js";import{g as T,c as de,s as we,a as De}from"../chunks/context.c1c8751f.js";import{b as Ie,g as Ne}from"../chunks/util.9d7ab3cc.js";import{C as be}from"../chunks/Channel.6903e6ef.js";import{s as Ee}from"../chunks/context.fa34f1f8.js";import{r as Ke}from"../chunks/index.5e2a9a64.js";import{g as Me}from"../chunks/chunk-NMUKSDLG.3f77d6f4.js";import{w as P}from"../chunks/index.87961ef1.js";import{c as Se}from"../chunks/context.125d2488.js";import{s as Ue}from"../chunks/context.c622ed87.js";import{U as Ae}from"../chunks/UserIcon.3bf05d57.js";function Y(c,l,o){const t=c.slice();return t[4]=l[o],t}const Be=c=>({channel:c&1}),H=c=>({channel:c[7]});function Te(c){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function Ve(c){let l,o;const t=c[3].default,e=fe(t,c,c[2],H);return{c(){e&&e.c(),l=I()},l(n){e&&e.l(n),l=N(n)},m(n,i){e&&e.m(n,i),$(n,l,i),o=!0},p(n,i){e&&e.p&&(!o||i&5)&&ue(e,t,n,n[2],o?he(t,n[2],i,Be):_e(n[2]),H)},i(n){o||(p(e,n),o=!0)},o(n){b(e,n),o=!1},d(n){n&&g(l),e&&e.d(n)}}}function ze(c){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function O(c){let l,o,t,e={ctx:c,current:null,token:null,hasCatch:!1,pending:ze,then:Ve,catch:Te,value:7,blocks:[,,,]};return E(o=c[1].api.fetchChannel(c[4]),e),{c(){l=v(),e.block.c()},l(n){l=v(),e.block.l(n)},m(n,i){$(n,l,i),e.block.m(n,e.anchor=i),e.mount=()=>l.parentNode,e.anchor=l,t=!0},p(n,i){c=n,e.ctx=c,i&1&&o!==(o=c[1].api.fetchChannel(c[4]))&&E(o,e)||j(e,c,i)},i(n){t||(p(e.block),t=!0)},o(n){for(let i=0;i<3;i+=1){const f=e.blocks[i];b(f)}t=!1},d(n){n&&g(l),e.block.d(n),e.token=null,e=null}}}function je(c){let l,o,t=c[0].title+"",e,n,i,f=D(c[0].channels),r=[];for(let s=0;s<f.length;s+=1)r[s]=O(Y(c,f,s));const h=s=>b(r[s],1,1,()=>{r[s]=null});return{c(){l=U("details"),o=U("summary"),e=ie(t),n=I();for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){l=A(s,"DETAILS",{class:!0});var _=V(l);o=A(_,"SUMMARY",{class:!0});var a=V(o);e=se(a,t),a.forEach(g),n=N(_);for(let m=0;m<r.length;m+=1)r[m].l(_);_.forEach(g),this.h()},h(){y(o,"class","svelte-szi6iy"),l.open=!0,y(l,"class","svelte-szi6iy")},m(s,_){$(s,l,_),S(l,o),S(o,e),S(l,n);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(l,null);i=!0},p(s,[_]){if((!i||_&1)&&t!==(t=s[0].title+"")&&ae(e,t),_&7){f=D(s[0].channels);let a;for(a=0;a<f.length;a+=1){const m=Y(s,f,a);r[a]?(r[a].p(m,_),p(r[a],1)):(r[a]=O(m),r[a].c(),p(r[a],1),r[a].m(l,null))}for(K(),a=f.length;a<r.length;a+=1)h(a);M()}},i(s){if(!i){for(let _=0;_<f.length;_+=1)p(r[_]);i=!0}},o(s){r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)b(r[_]);i=!1},d(s){s&&g(l),z(r,s)}}}function qe(c,l,o){let{$$slots:t={},$$scope:e}=l;const n=T(de);let{category:i}=l;return c.$$set=f=>{"category"in f&&o(0,i=f.category),"$$scope"in f&&o(2,e=f.$$scope)},[i,n,e,t]}class Ge extends me{constructor(l){super(),pe(this,l,qe,je,re,{category:0})}}function Q(c,l,o){const t=c.slice();t[17]=l[o];const e=t[16].users.find(function(...i){return c[13](t[17],...i)})??t[2].api.fetchUser(t[17]._id.user);return t[18]=e,t}function W(c){const l=Ie(c[18],c[17]);c[21]=l}function Le(c){const l=c.slice(),o=Ne(l[18],l[17]);return l[22]=o,l}function X(c,l,o){const t=c.slice();return t[25]=l[o],t}function Z(c,l,o){const t=c.slice();return t[28]=l[o],t}function F(c){const l=c.slice(),o=l[0].categories??[];l[23]=o;const t=l[0].channels.filter(function(...n){return c[12](l[23],...n)})??[];return l[24]=t,l}function x(c){let l,o,t,e=D(c[24]),n=[];for(let s=0;s<e.length;s+=1)n[s]=ee(Z(c,e,s));const i=s=>b(n[s],1,1,()=>{n[s]=null});let f=D(c[23]),r=[];for(let s=0;s<f.length;s+=1)r[s]=le(X(c,f,s));const h=s=>b(r[s],1,1,()=>{r[s]=null});return{c(){l=U("div");for(let s=0;s<n.length;s+=1)n[s].c();o=I();for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){l=A(s,"DIV",{class:!0});var _=V(l);for(let a=0;a<n.length;a+=1)n[a].l(_);o=N(_);for(let a=0;a<r.length;a+=1)r[a].l(_);_.forEach(g),this.h()},h(){y(l,"class","channel-bar-container")},m(s,_){$(s,l,_);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(l,null);S(l,o);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(l,null);t=!0},p(s,_){if(_&5){e=D(s[24]);let a;for(a=0;a<e.length;a+=1){const m=Z(s,e,a);n[a]?(n[a].p(m,_),p(n[a],1)):(n[a]=ee(m),n[a].c(),p(n[a],1),n[a].m(l,o))}for(K(),a=e.length;a<n.length;a+=1)i(a);M()}if(_&65){f=D(s[23]);let a;for(a=0;a<f.length;a+=1){const m=X(s,f,a);r[a]?(r[a].p(m,_),p(r[a],1)):(r[a]=le(m),r[a].c(),p(r[a],1),r[a].m(l,null))}for(K(),a=f.length;a<r.length;a+=1)h(a);M()}},i(s){if(!t){for(let _=0;_<e.length;_+=1)p(n[_]);for(let _=0;_<f.length;_+=1)p(r[_]);t=!0}},o(s){n=n.filter(Boolean);for(let _=0;_<n.length;_+=1)b(n[_]);r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)b(r[_]);t=!1},d(s){s&&g(l),z(n,s),z(r,s)}}}function Re(c){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function Fe(c){let l,o;return l=new be({props:{channel:c[6]}}),{c(){q(l.$$.fragment)},l(t){G(l.$$.fragment,t)},m(t,e){L(l,t,e),o=!0},p(t,e){const n={};e&1&&(n.channel=t[6]),l.$set(n)},i(t){o||(p(l.$$.fragment,t),o=!0)},o(t){b(l.$$.fragment,t),o=!1},d(t){R(l,t)}}}function Je(c){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function ee(c){let l,o,t,e={ctx:c,current:null,token:null,hasCatch:!1,pending:Je,then:Fe,catch:Re,value:6,blocks:[,,,]};return E(o=c[2].api.fetchChannel(c[28]),e),{c(){l=v(),e.block.c()},l(n){l=v(),e.block.l(n)},m(n,i){$(n,l,i),e.block.m(n,e.anchor=i),e.mount=()=>l.parentNode,e.anchor=l,t=!0},p(n,i){c=n,e.ctx=c,i&1&&o!==(o=c[2].api.fetchChannel(c[28]))&&E(o,e)||j(e,c,i)},i(n){t||(p(e.block),t=!0)},o(n){for(let i=0;i<3;i+=1){const f=e.blocks[i];b(f)}t=!1},d(n){n&&g(l),e.block.d(n),e.token=null,e=null}}}function te(c){let l,o;return l=new be({props:{channel:c[6]}}),{c(){q(l.$$.fragment)},l(t){G(l.$$.fragment,t)},m(t,e){L(l,t,e),o=!0},p(t,e){const n={};e&64&&(n.channel=t[6]),l.$set(n)},i(t){o||(p(l.$$.fragment,t),o=!0)},o(t){b(l.$$.fragment,t),o=!1},d(t){R(l,t)}}}function Pe(c){let l,o,t=c[6]!=null&&te(c);return{c(){t&&t.c(),l=I()},l(e){t&&t.l(e),l=N(e)},m(e,n){t&&t.m(e,n),$(e,l,n),o=!0},p(e,n){e[6]!=null?t?(t.p(e,n),n&64&&p(t,1)):(t=te(e),t.c(),p(t,1),t.m(l.parentNode,l)):t&&(K(),b(t,1,1,()=>{t=null}),M())},i(e){o||(p(t),o=!0)},o(e){b(t),o=!1},d(e){e&&g(l),t&&t.d(e)}}}function le(c){let l,o;return l=new Ge({props:{category:c[25],$$slots:{default:[Pe,({channel:t})=>({6:t}),({channel:t})=>t?64:0]},$$scope:{ctx:c}}}),{c(){q(l.$$.fragment)},l(t){G(l.$$.fragment,t)},m(t,e){L(l,t,e),o=!0},p(t,e){const n={};e&1&&(n.category=t[25]),e&16448&&(n.$$scope={dirty:e,ctx:t}),l.$set(n)},i(t){o||(p(l.$$.fragment,t),o=!0)},o(t){b(l.$$.fragment,t),o=!1},d(t){R(l,t)}}}function ne(c){let l,o,t,e={ctx:c,current:null,token:null,hasCatch:!1,pending:xe,then:He,catch:Ye,value:16,blocks:[,,,]};return E(o=c[2].api.fetchMembers(c[0]._id),e),{c(){l=U("div"),e.block.c(),this.h()},l(n){l=A(n,"DIV",{class:!0});var i=V(l);e.block.l(i),i.forEach(g),this.h()},h(){y(l,"class","members-list-container")},m(n,i){$(n,l,i),e.block.m(l,e.anchor=null),e.mount=()=>l,e.anchor=null,t=!0},p(n,i){c=n,e.ctx=c,i&1&&o!==(o=c[2].api.fetchMembers(c[0]._id))&&E(o,e)||j(e,c,i)},i(n){t||(p(e.block),t=!0)},o(n){for(let i=0;i<3;i+=1){const f=e.blocks[i];b(f)}t=!1},d(n){n&&g(l),e.block.d(),e.token=null,e=null}}}function Ye(c){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function He(c){let l,o,t=D(c[16].members),e=[];for(let i=0;i<t.length;i+=1)e[i]=ce(Q(c,t,i));const n=i=>b(e[i],1,1,()=>{e[i]=null});return{c(){for(let i=0;i<e.length;i+=1)e[i].c();l=v()},l(i){for(let f=0;f<e.length;f+=1)e[f].l(i);l=v()},m(i,f){for(let r=0;r<e.length;r+=1)e[r]&&e[r].m(i,f);$(i,l,f),o=!0},p(i,f){if(f&7){t=D(i[16].members);let r;for(r=0;r<t.length;r+=1){const h=Q(i,t,r);e[r]?(e[r].p(h,f),p(e[r],1)):(e[r]=ce(h),e[r].c(),p(e[r],1),e[r].m(l.parentNode,l))}for(K(),r=t.length;r<e.length;r+=1)n(r);M()}},i(i){if(!o){for(let f=0;f<t.length;f+=1)p(e[f]);o=!0}},o(i){e=e.filter(Boolean);for(let f=0;f<e.length;f+=1)b(e[f]);o=!1},d(i){i&&g(l),z(e,i)}}}function Oe(c){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function Qe(c){W(c);let l,o,t,e,n=c[21]+"",i,f,r;const h=[Xe,We],s=[];function _(m,k){return m[1]["jolt:low-data-mode"]?0:1}function a(m,k){return k===1?Le(m):m}return o=_(c),t=s[o]=h[o](a(c,o)),{c(){l=U("div"),t.c(),e=I(),i=ie(n),f=I()},l(m){l=A(m,"DIV",{});var k=V(l);t.l(k),e=N(k),i=se(k,n),k.forEach(g),f=N(m)},m(m,k){$(m,l,k),s[o].m(l,null),S(l,e),S(l,i),$(m,f,k),r=!0},p(m,k){W(m);let C=o;o=_(m),o===C?s[o].p(a(m,o),k):(K(),b(s[C],1,1,()=>{s[C]=null}),M(),t=s[o],t?t.p(a(m,o),k):(t=s[o]=h[o](a(m,o)),t.c()),p(t,1),t.m(l,e)),(!r||k&1)&&n!==(n=m[21]+"")&&ae(i,n)},i(m){r||(p(t),r=!0)},o(m){b(t),r=!1},d(m){m&&(g(l),g(f)),s[o].d()}}}function We(c){let l,o=typeof c[22]=="string"&&oe(c);return{c(){o&&o.c(),l=v()},l(t){o&&o.l(t),l=v()},m(t,e){o&&o.m(t,e),$(t,l,e)},p(t,e){typeof t[22]=="string"?o?o.p(t,e):(o=oe(t),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},i:u,o:u,d(t){t&&g(l),o&&o.d(t)}}}function Xe(c){let l,o;return l=new Ae({}),{c(){q(l.$$.fragment)},l(t){G(l.$$.fragment,t)},m(t,e){L(l,t,e),o=!0},p:u,i(t){o||(p(l.$$.fragment,t),o=!0)},o(t){b(l.$$.fragment,t),o=!1},d(t){R(l,t)}}}function oe(c){let l,o,t;return{c(){l=U("img"),this.h()},l(e){l=A(e,"IMG",{class:!0,src:!0,alt:!0}),this.h()},h(){y(l,"class","cover svelte-1ts4xr4"),J(l.src,o=c[22])||y(l,"src",o),y(l,"alt",t=c[21])},m(e,n){$(e,l,n)},p(e,n){n&1&&!J(l.src,o=e[22])&&y(l,"src",o),n&1&&t!==(t=e[21])&&y(l,"alt",t)},d(e){e&&g(l)}}}function Ze(c){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function ce(c){let l,o,t,e={ctx:c,current:null,token:null,hasCatch:!1,pending:Ze,then:Qe,catch:Oe,value:18,blocks:[,,,]};return E(o=c[18],e),{c(){l=v(),e.block.c()},l(n){l=v(),e.block.l(n)},m(n,i){$(n,l,i),e.block.m(n,e.anchor=i),e.mount=()=>l.parentNode,e.anchor=l,t=!0},p(n,i){c=n,e.ctx=c,i&1&&o!==(o=c[18])&&E(o,e)||j(e,c,i)},i(n){t||(p(e.block),t=!0)},o(n){for(let i=0;i<3;i+=1){const f=e.blocks[i];b(f)}t=!1},d(n){n&&g(l),e.block.d(n),e.token=null,e=null}}}function xe(c){return{c:u,l:u,m:u,p:u,i:u,o:u,d:u}}function et(c){let l,o,t,e,n=c[0]!=null&&x(F(c));const i=c[11].default,f=fe(i,c,c[14],null);let r=c[0]!=null&&ne(c);return{c(){n&&n.c(),l=I(),f&&f.c(),o=I(),r&&r.c(),t=v()},l(h){n&&n.l(h),l=N(h),f&&f.l(h),o=N(h),r&&r.l(h),t=v()},m(h,s){n&&n.m(h,s),$(h,l,s),f&&f.m(h,s),$(h,o,s),r&&r.m(h,s),$(h,t,s),e=!0},p(h,[s]){h[0]!=null?n?(n.p(F(h),s),s&1&&p(n,1)):(n=x(F(h)),n.c(),p(n,1),n.m(l.parentNode,l)):n&&(K(),b(n,1,1,()=>{n=null}),M()),f&&f.p&&(!e||s&16384)&&ue(f,i,h,h[14],e?he(i,h[14],s,null):_e(h[14]),null),h[0]!=null?r?(r.p(h,s),s&1&&p(r,1)):(r=ne(h),r.c(),p(r,1),r.m(t.parentNode,t)):r&&(K(),b(r,1,1,()=>{r=null}),M())},i(h){e||(p(n),p(f,h),p(r),e=!0)},o(h){b(n),b(f,h),b(r),e=!1},d(h){h&&(g(l),g(o),g(t)),n&&n.d(h),f&&f.d(h),r&&r.d(h)}}}function tt(c,l,o){let t,e,n,i,f,r;B(c,Ce,d=>o(10,f=d));let{$$slots:h={},$$scope:s}=l;const _=T(de),a=T(De);B(c,a,d=>o(1,r=d));const m=T(Ue);B(c,m,d=>o(0,n=d));const k=P();B(c,k,d=>o(8,e=d)),we(Se,k);const C=T(Ee)??P(t.cid);B(c,C,d=>o(9,i=d));async function ge(d){const w=await _.api.fetchChannel(d);if(w.channel_type!="TextChannel"&&w.channel_type!="VoiceChannel")throw Ke(302,`/channels/${d}`);k.set(w)}ye(()=>{C.set(void 0)});const ke=(d,w)=>d.find(ve=>w!=null&&ve.channels.includes(w))==null,$e=(d,{_id:w})=>w==d._id.user;return c.$$set=d=>{"$$scope"in d&&o(14,s=d.$$scope)},c.$$.update=()=>{if(c.$$.dirty&1024&&o(7,t=f.params),c.$$.dirty&128&&C.set(t.cid),c.$$.dirty&512&&i&&ge(i),c.$$.dirty&257){let d="";n==null?d+="Server":d+=n.name,e!=null&&(d+=` | #${e.name}`),d+=" - Jolt","__TAURI__"in window?Me.setTitle(d):document.title=d}},[n,r,_,a,m,C,k,t,e,i,f,h,ke,$e,s]}class bt extends me{constructor(l){super(),pe(this,l,tt,et,re,{})}}export{bt as component};
