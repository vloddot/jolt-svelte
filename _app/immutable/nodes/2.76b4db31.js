import{s as G,v as ue,f as M,g as N,h as L,d as _,j as i,i as I,z as C,A as de,w as fe,x as he,y as me,B as _e,C as R,D as U,u as g,a as A,c as H,r as X,o as pe,e as q,E as ge,F as Y,l as ve,m as be,n as $e}from"../chunks/scheduler.d49036d4.js";import{h as ke,u as we}from"../chunks/await_block.872c6e1e.js";import{e as te}from"../chunks/each.e59479a4.js";import{S as P,i as F,a as $,t as k,b as O,d as B,m as V,c as Z,e as W,g as x}from"../chunks/index.90a2ee5d.js";import{g as Se}from"../chunks/navigation.34aee895.js";import{b as z}from"../chunks/paths.71582e83.js";import{g as re,s as se,a as Ie,c as ye}from"../chunks/context.c1c8751f.js";import{g as je,a as le}from"../chunks/util.9d7ab3cc.js";import{t as De,P as Ce}from"../chunks/PlusIcon.cda21593.js";import{s as Ee,a as Le}from"../chunks/context.fa34f1f8.js";import{w as ne}from"../chunks/index.87961ef1.js";import{p as Me}from"../chunks/stores.4e510839.js";function Ne(n){let e,s,t,r,a,l,o;const c=n[5].default,f=ue(c,n,n[4],null);return{c(){e=M("div"),s=M("a"),f&&f.c(),this.h()},l(u){e=N(u,"DIV",{class:!0,"data-selected":!0,"aria-selected":!0});var p=L(e);s=N(p,"A",{href:!0,tabindex:!0,"aria-label":!0,class:!0});var y=L(s);f&&f.l(y),y.forEach(_),p.forEach(_),this.h()},h(){i(s,"href",n[0]),i(s,"tabindex","0"),i(s,"aria-label",t=typeof n[1]=="string"&&n[2]!=null?n[1]:n[2]),i(s,"class","server-sidebar-icon svelte-z9k92b"),i(e,"class","server-sidebar-icon-base svelte-z9k92b"),i(e,"data-selected",n[3]),i(e,"aria-selected",n[3])},m(u,p){I(u,e,p),C(e,s),f&&f.m(s,null),a=!0,l||(o=de(r=De.call(null,s,{placement:"right",content:n[1],theme:"server-sidebar-icon",animation:"scale-subtle",duration:100,onShow:n[6]})),l=!0)},p(u,[p]){f&&f.p&&(!a||p&16)&&fe(f,c,u,u[4],a?me(c,u[4],p,null):he(u[4]),null),(!a||p&1)&&i(s,"href",u[0]),(!a||p&6&&t!==(t=typeof u[1]=="string"&&u[2]!=null?u[1]:u[2]))&&i(s,"aria-label",t),r&&_e(r.update)&&p&2&&r.update.call(null,{placement:"right",content:u[1],theme:"server-sidebar-icon",animation:"scale-subtle",duration:100,onShow:u[6]}),(!a||p&8)&&i(e,"data-selected",u[3]),(!a||p&8)&&i(e,"aria-selected",u[3])},i(u){a||($(f,u),a=!0)},o(u){k(f,u),a=!1},d(u){u&&_(e),f&&f.d(u),l=!1,o()}}}function Ae(n,e,s){let{$$slots:t={},$$scope:r}=e,{href:a}=e,{tooltip:l}=e,{ariaLabel:o=void 0}=e,{selected:c}=e;const f=function(){if(!l)return!1};return n.$$set=u=>{"href"in u&&s(0,a=u.href),"tooltip"in u&&s(1,l=u.tooltip),"ariaLabel"in u&&s(2,o=u.ariaLabel),"selected"in u&&s(3,c=u.selected),"$$scope"in u&&s(4,r=u.$$scope)},[a,l,o,c,r,t,f]}class J extends P{constructor(e){super(),F(this,e,Ae,Ne,G,{href:0,tooltip:1,ariaLabel:2,selected:3})}}function He(n){let e,s;return{c(){e=R("svg"),s=R("path"),this.h()},l(t){e=U(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var r=L(e);s=U(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),L(s).forEach(_),r.forEach(_),this.h()},h(){i(s,"stroke-linecap","round"),i(s,"stroke-linejoin","round"),i(s,"d","M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"width","24px"),i(e,"height","24px")},m(t,r){I(t,e,r),C(e,s)},p:g,i:g,o:g,d(t){t&&_(e)}}}class Oe extends P{constructor(e){super(),F(this,e,null,He,G,{})}}function Be(n){let e,s,t;return{c(){e=R("svg"),s=R("path"),t=R("path"),this.h()},l(r){e=U(r,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,width:!0,height:!0});var a=L(e);s=U(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),L(s).forEach(_),t=U(a,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),L(t).forEach(_),a.forEach(_),this.h()},h(){i(s,"stroke-linecap","round"),i(s,"stroke-linejoin","round"),i(s,"d","M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"),i(t,"stroke-linecap","round"),i(t,"stroke-linejoin","round"),i(t,"d","M15 12a3 3 0 11-6 0 3 3 0 016 0z"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width","1.5"),i(e,"stroke","currentColor"),i(e,"width","24px"),i(e,"height","24px")},m(r,a){I(r,e,a),C(e,s),C(e,t)},p:g,i:g,o:g,d(r){r&&_(e)}}}class Ve extends P{constructor(e){super(),F(this,e,null,Be,G,{})}}function ae(n,e,s){const t=n.slice();return t[10]=e[s],t}function We(n){let e,s,t={ctx:n,current:null,token:null,hasCatch:!1,pending:Je,then:Re,catch:Ke,value:13,blocks:[,,,]};return ke(n[5].user??n[5].api.fetchUser("@me"),t),{c(){e=q(),t.block.c()},l(r){e=q(),t.block.l(r)},m(r,a){I(r,e,a),t.block.m(r,t.anchor=a),t.mount=()=>e.parentNode,t.anchor=e,s=!0},p(r,a){n=r,we(t,n,a)},i(r){s||($(t.block),s=!0)},o(r){for(let a=0;a<3;a+=1){const l=t.blocks[a];k(l)}s=!1},d(r){r&&_(e),t.block.d(r),t.token=null,t=null}}}function ze(n){var a;let e,s,t,r;return e=new J({props:{selected:((a=n[3].route.id)==null?void 0:a.startsWith("/(app)/(home)"))??!1,href:z+"/",tooltip:"Home",$$slots:{default:[qe]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),s=A(),t=M("hr"),this.h()},l(l){B(e.$$.fragment,l),s=H(l),t=N(l,"HR",{class:!0}),this.h()},h(){i(t,"class","border-gray-600 mx-4")},m(l,o){V(e,l,o),I(l,s,o),I(l,t,o),r=!0},p(l,o){var f;const c={};o&8&&(c.selected=((f=l[3].route.id)==null?void 0:f.startsWith("/(app)/(home)"))??!1),o&256&&(c.$$scope={dirty:o,ctx:l}),e.$set(c)},i(l){r||($(e.$$.fragment,l),r=!0)},o(l){k(e.$$.fragment,l),r=!1},d(l){l&&(_(s),_(t)),W(e,l)}}}function Ke(n){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function Re(n){var a;let e,s,t,r;return e=new J({props:{href:z+"/",selected:((a=n[3].route.id)==null?void 0:a.startsWith("/(app)/(home)"))??!1,ariaLabel:"Home",tooltip:n[13].username+"#"+n[13].discriminator,$$slots:{default:[Ue]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),s=A(),t=M("hr"),this.h()},l(l){B(e.$$.fragment,l),s=H(l),t=N(l,"HR",{class:!0}),this.h()},h(){i(t,"class","border-gray-600 mx-4")},m(l,o){V(e,l,o),I(l,s,o),I(l,t,o),r=!0},p(l,o){var f;const c={};o&8&&(c.selected=((f=l[3].route.id)==null?void 0:f.startsWith("/(app)/(home)"))??!1),o&256&&(c.$$scope={dirty:o,ctx:l}),e.$set(c)},i(l){r||($(e.$$.fragment,l),r=!0)},o(l){k(e.$$.fragment,l),r=!1},d(l){l&&(_(s),_(t)),W(e,l)}}}function Ue(n){let e,s;return{c(){e=M("img"),this.h()},l(t){e=N(t,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){i(e,"class","cover"),Y(e.src,s=je(n[13]))||i(e,"src",s),i(e,"alt","Home"),i(e,"width","48px"),i(e,"height","48px")},m(t,r){I(t,e,r)},p:g,d(t){t&&_(e)}}}function Je(n){return{c:g,l:g,m:g,p:g,i:g,o:g,d:g}}function qe(n){let e,s;return e=new Oe({}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){V(e,t,r),s=!0},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function oe(n){let e,s,t=te(n[0]),r=[];for(let l=0;l<t.length;l+=1)r[l]=ie(ae(n,t,l));const a=l=>k(r[l],1,1,()=>{r[l]=null});return{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=q()},l(l){for(let o=0;o<r.length;o+=1)r[o].l(l);e=q()},m(l,o){for(let c=0;c<r.length;c+=1)r[c]&&r[c].m(l,o);I(l,e,o),s=!0},p(l,o){if(o&7){t=te(l[0]);let c;for(c=0;c<t.length;c+=1){const f=ae(l,t,c);r[c]?(r[c].p(f,o),$(r[c],1)):(r[c]=ie(f),r[c].c(),$(r[c],1),r[c].m(e.parentNode,e))}for(x(),c=t.length;c<r.length;c+=1)a(c);Z()}},i(l){if(!s){for(let o=0;o<t.length;o+=1)$(r[o]);s=!0}},o(l){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)k(r[o]);s=!1},d(l){l&&_(e),ge(r,l)}}}function Ge(n){let e,s,t;return{c(){e=M("img"),this.h()},l(r){e=N(r,"IMG",{class:!0,src:!0,alt:!0,width:!0,height:!0}),this.h()},h(){i(e,"class","cover"),Y(e.src,s=le(n[10].icon,{max_side:"256"}))||i(e,"src",s),i(e,"alt",t=n[10].name),i(e,"width","48px"),i(e,"height","48px")},m(r,a){I(r,e,a)},p(r,a){a&1&&!Y(e.src,s=le(r[10].icon,{max_side:"256"}))&&i(e,"src",s),a&1&&t!==(t=r[10].name)&&i(e,"alt",t)},d(r){r&&_(e)}}}function Pe(n){let e=n[10].name.split(" ").map(ce).join("")+"",s;return{c(){s=ve(e)},l(t){s=be(t,e)},m(t,r){I(t,s,r)},p(t,r){r&1&&e!==(e=t[10].name.split(" ").map(ce).join("")+"")&&$e(s,e)},d(t){t&&_(s)}}}function Fe(n){let e;function s(a,l){return a[10].icon==null||a[2]["jolt:low-data-mode"]?Pe:Ge}let t=s(n),r=t(n);return{c(){r.c(),e=A()},l(a){r.l(a),e=H(a)},m(a,l){r.m(a,l),I(a,e,l)},p(a,l){t===(t=s(a))&&r?r.p(a,l):(r.d(1),r=t(a),r&&(r.c(),r.m(e.parentNode,e)))},d(a){a&&_(e),r.d(a)}}}function ie(n){let e,s;return e=new J({props:{href:z+"/servers/"+n[10]._id+"/channels/"+n[10].channels[0],tooltip:n[10].name,selected:n[1]==n[10]._id,$$slots:{default:[Fe]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){V(e,t,r),s=!0},p(t,r){const a={};r&1&&(a.href=z+"/servers/"+t[10]._id+"/channels/"+t[10].channels[0]),r&1&&(a.tooltip=t[10].name),r&3&&(a.selected=t[1]==t[10]._id),r&261&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function Te(n){let e,s;return e=new Ce({}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){V(e,t,r),s=!0},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function Qe(n){let e,s;return e=new Ve({}),{c(){O(e.$$.fragment)},l(t){B(e.$$.fragment,t)},m(t,r){V(e,t,r),s=!0},i(t){s||($(e.$$.fragment,t),s=!0)},o(t){k(e.$$.fragment,t),s=!1},d(t){W(e,t)}}}function Xe(n){var K;let e,s,t,r,a,l,o,c,f,u,p,y,d;const j=[ze,We],w=[];function E(h,b){return h[2]["jolt:low-data-mode"]?0:1}t=E(n),r=w[t]=j[t](n);let m=n[0]!=null&&oe(n);o=new J({props:{selected:n[3].route.id=="/(app)/servers/create",href:z+"/servers/create",tooltip:"Create Server",$$slots:{default:[Te]},$$scope:{ctx:n}}}),p=new J({props:{selected:((K=n[3].route.id)==null?void 0:K.startsWith("/(app)/settings"))??!1,href:z+"/settings",tooltip:"Settings",$$slots:{default:[Qe]},$$scope:{ctx:n}}});const D=n[7].default,v=ue(D,n,n[8],null);return{c(){e=M("div"),s=M("div"),r.c(),a=A(),m&&m.c(),l=A(),O(o.$$.fragment),c=A(),f=M("div"),u=A(),O(p.$$.fragment),y=A(),v&&v.c(),this.h()},l(h){e=N(h,"DIV",{class:!0});var b=L(e);s=N(b,"DIV",{class:!0});var S=L(s);r.l(S),a=H(S),m&&m.l(S),l=H(S),B(o.$$.fragment,S),c=H(S),f=N(S,"DIV",{class:!0}),L(f).forEach(_),u=H(S),B(p.$$.fragment,S),S.forEach(_),y=H(b),v&&v.l(b),b.forEach(_),this.h()},h(){i(f,"class","flex-1"),i(s,"class","server-sidebar-container svelte-10y9f05"),i(e,"class","app-container svelte-10y9f05")},m(h,b){I(h,e,b),C(e,s),w[t].m(s,null),C(s,a),m&&m.m(s,null),C(s,l),V(o,s,null),C(s,c),C(s,f),C(s,u),V(p,s,null),C(e,y),v&&v.m(e,null),d=!0},p(h,[b]){var ee;let S=t;t=E(h),t===S?w[t].p(h,b):(x(),k(w[S],1,1,()=>{w[S]=null}),Z(),r=w[t],r?r.p(h,b):(r=w[t]=j[t](h),r.c()),$(r,1),r.m(s,a)),h[0]!=null?m?(m.p(h,b),b&1&&$(m,1)):(m=oe(h),m.c(),$(m,1),m.m(s,l)):m&&(x(),k(m,1,1,()=>{m=null}),Z());const T={};b&8&&(T.selected=h[3].route.id=="/(app)/servers/create"),b&256&&(T.$$scope={dirty:b,ctx:h}),o.$set(T);const Q={};b&8&&(Q.selected=((ee=h[3].route.id)==null?void 0:ee.startsWith("/(app)/settings"))??!1),b&256&&(Q.$$scope={dirty:b,ctx:h}),p.$set(Q),v&&v.p&&(!d||b&256)&&fe(v,D,h,h[8],d?me(D,h[8],b,null):he(h[8]),null)},i(h){d||($(r),$(m),$(o.$$.fragment,h),$(p.$$.fragment,h),$(v,h),d=!0)},o(h){k(r),k(m),k(o.$$.fragment,h),k(p.$$.fragment,h),k(v,h),d=!1},d(h){h&&_(e),w[t].d(),m&&m.d(),W(o),W(p),v&&v.d(h)}}}const ce=n=>n[0];function Ye(n,e,s){let t,r,a;X(n,Me,d=>s(3,a=d));let{$$slots:l={},$$scope:o}=e;const c=re(Ie);X(n,c,d=>s(2,r=d));const f=re(ye),u=ne();X(n,u,d=>s(1,t=d));const p=ne();se(Ee,p),se(Le,u);let y=Array.from(f.api.cache.servers.values());return c.subscribe(d=>{s(0,y=y.sort((j,w)=>{var D,v;const E=((D=d.ordering.servers)==null?void 0:D.indexOf(j._id))??-1,m=((v=d.ordering.servers)==null?void 0:v.indexOf(w._id))??-1;return m==-1?-1:E==-1?1:E-m}))}),f.on("ServerCreate",()=>{s(0,y=Array.from(f.api.cache.servers.values()))}),f.on("ServerDelete",async({id:d})=>{s(0,y=Array.from(f.api.cache.servers.values())),t==d&&await Se(`${z}/`)}),f.on("Ready",async d=>{s(0,y=d.servers);const j=await f.api.fetchSettings(["ordering"]);if(j.ordering==null)return;const[w,E]=j.ordering;w>Number(localStorage.getItem("revision:ordering"))&&(localStorage.setItem("revision:ordering",w.toString()),c.update(m=>m.ordering=JSON.parse(E).servers))}),f.on("UserSettingsUpdate",({id:d,update:j})=>{var E;if(d!=((E=f.user)==null?void 0:E._id))return;let w={};for(const[m,[D,v]]of Object.entries(j)){const K=`revision:${m}`;D>Number(localStorage.getItem(K))&&(localStorage.setItem(K,D.toString()),w[m]=v)}c.update(m=>{for(const[D,v]of Object.entries(w))m[D]=v;return m})}),pe(()=>{const d=localStorage.getItem("settings");d!=null&&c.set(JSON.parse(d)),c.subscribe(j=>{localStorage.setItem("settings",JSON.stringify(j))})}),n.$$set=d=>{"$$scope"in d&&s(8,o=d.$$scope)},[y,t,r,a,c,f,u,l,o]}class ut extends P{constructor(e){super(),F(this,e,Ye,Xe,G,{})}}export{ut as component};
