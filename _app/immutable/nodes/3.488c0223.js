import{s as F,v as J,f as z,a as g,g as B,h as L,c as $,d as h,j as R,i as d,z as U,w as V,x as H,y as O,r as Q,o as T,J as W,u as X,e as b,G as Y}from"../chunks/scheduler.fede8105.js";import{S as Z,i as x,b as C,d as k,m as M,a as c,t as m,c as v,e as S,g as y}from"../chunks/index.257844fa.js";import{e as G}from"../chunks/each.e59479a4.js";import{p as ee}from"../chunks/stores.22d56d45.js";import{g as D,c as te}from"../chunks/context.682cab63.js";import{C as E}from"../chunks/Channel.5de24245.js";import{s as ne,a as le}from"../chunks/context.fa34f1f8.js";import{w as N}from"../chunks/index.3ac45322.js";import{C as se}from"../chunks/ChannelItem.41a79828.js";import{e as w}from"../chunks/singletons.2de72073.js";import{G as ae}from"../chunks/GenericUserIcon.9c0f7754.js";function K(i,n,r){const e=i.slice();return e[10]=n[r],e}function re(i){let n,r,e,l="Friends",f;return n=new ae({}),{c(){C(n.$$.fragment),r=g(),e=z("span"),e.textContent=l},l(t){k(n.$$.fragment,t),r=$(t),e=B(t,"SPAN",{"data-svelte-h":!0}),W(e)!=="svelte-98g2g1"&&(e.textContent=l)},m(t,p){M(n,t,p),d(t,r,p),d(t,e,p),f=!0},p:X,i(t){f||(c(n.$$.fragment,t),f=!0)},o(t){m(n.$$.fragment,t),f=!1},d(t){t&&(h(r),h(e)),S(n,t)}}}function A(i){let n,r,e,l=i[2]!=null&&P(i),f=G(i[0]),t=[];for(let s=0;s<f.length;s+=1)t[s]=q(K(i,f,s));const p=s=>m(t[s],1,1,()=>{t[s]=null});return{c(){l&&l.c(),n=g();for(let s=0;s<t.length;s+=1)t[s].c();r=b()},l(s){l&&l.l(s),n=$(s);for(let a=0;a<t.length;a+=1)t[a].l(s);r=b()},m(s,a){l&&l.m(s,a),d(s,n,a);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(s,a);d(s,r,a),e=!0},p(s,a){if(s[2]!=null?l?(l.p(s,a),a&4&&c(l,1)):(l=P(s),l.c(),c(l,1),l.m(n.parentNode,n)):l&&(y(),m(l,1,1,()=>{l=null}),v()),a&1){f=G(s[0]);let o;for(o=0;o<f.length;o+=1){const u=K(s,f,o);t[o]?(t[o].p(u,a),c(t[o],1)):(t[o]=q(u),t[o].c(),c(t[o],1),t[o].m(r.parentNode,r))}for(y(),o=f.length;o<t.length;o+=1)p(o);v()}},i(s){if(!e){c(l);for(let a=0;a<f.length;a+=1)c(t[a]);e=!0}},o(s){m(l),t=t.filter(Boolean);for(let a=0;a<t.length;a+=1)m(t[a]);e=!1},d(s){s&&(h(n),h(r)),l&&l.d(s),Y(t,s)}}}function P(i){let n,r;return n=new E({props:{channel:i[2]}}),{c(){C(n.$$.fragment)},l(e){k(n.$$.fragment,e)},m(e,l){M(n,e,l),r=!0},p(e,l){const f={};l&4&&(f.channel=e[2]),n.$set(f)},i(e){r||(c(n.$$.fragment,e),r=!0)},o(e){m(n.$$.fragment,e),r=!1},d(e){S(n,e)}}}function j(i){let n,r;return n=new E({props:{channel:i[10]}}),{c(){C(n.$$.fragment)},l(e){k(n.$$.fragment,e)},m(e,l){M(n,e,l),r=!0},p(e,l){const f={};l&1&&(f.channel=e[10]),n.$set(f)},i(e){r||(c(n.$$.fragment,e),r=!0)},o(e){m(n.$$.fragment,e),r=!1},d(e){S(n,e)}}}function q(i){let n,r,e=i[10].channel_type!="SavedMessages"&&j(i);return{c(){e&&e.c(),n=b()},l(l){e&&e.l(l),n=b()},m(l,f){e&&e.m(l,f),d(l,n,f),r=!0},p(l,f){l[10].channel_type!="SavedMessages"?e?(e.p(l,f),f&1&&c(e,1)):(e=j(l),e.c(),c(e,1),e.m(n.parentNode,n)):e&&(y(),m(e,1,1,()=>{e=null}),v())},i(l){r||(c(e),r=!0)},o(l){m(e),r=!1},d(l){l&&h(n),e&&e.d(l)}}}function oe(i){let n,r,e,l,f;r=new se({props:{href:w+"/friends",selected:i[1].url.pathname==`${w}/friends`,$$slots:{default:[re]},$$scope:{ctx:i}}});let t=i[0]!=null&&A(i);const p=i[4].default,s=J(p,i,i[5],null);return{c(){n=z("div"),C(r.$$.fragment),e=g(),t&&t.c(),l=g(),s&&s.c(),this.h()},l(a){n=B(a,"DIV",{class:!0});var o=L(n);k(r.$$.fragment,o),e=$(o),t&&t.l(o),o.forEach(h),l=$(a),s&&s.l(a),this.h()},h(){R(n,"class","channel-bar-container")},m(a,o){d(a,n,o),M(r,n,null),U(n,e),t&&t.m(n,null),d(a,l,o),s&&s.m(a,o),f=!0},p(a,[o]){const u={};o&2&&(u.selected=a[1].url.pathname==`${w}/friends`),o&32&&(u.$$scope={dirty:o,ctx:a}),r.$set(u),a[0]!=null?t?(t.p(a,o),o&1&&c(t,1)):(t=A(a),t.c(),c(t,1),t.m(n,null)):t&&(y(),m(t,1,1,()=>{t=null}),v()),s&&s.p&&(!f||o&32)&&V(s,p,a,a[5],f?O(p,a[5],o,null):H(a[5]),null)},i(a){f||(c(r.$$.fragment,a),c(t),c(s,a),f=!0)},o(a){m(r.$$.fragment,a),m(t),m(s,a),f=!1},d(a){a&&(h(n),h(l)),S(r),t&&t.d(),s&&s.d(a)}}}function fe(i,n,r){let e,l,f;Q(i,ee,_=>r(1,f=_));let{$$slots:t={},$$scope:p}=n;const s=D(te),a=D(ne)??N(),o=D(le)??N();let u=[];function I(){r(0,u=Array.from(s.api.cache.channels.values()).filter(_=>["DirectMessage","Group","SavedMessages"].includes(_.channel_type))),(u.length??0)==0&&s.ready&&s.api.fetchDirectMessages().then(_=>r(0,u=_))}return s.on("Ready",I),T(I),i.$$set=_=>{"$$scope"in _&&r(5,p=_.$$scope)},i.$$.update=()=>{i.$$.dirty&2&&r(3,e=f.params),i.$$.dirty&8&&a.set(e.id),i.$$.dirty&1&&r(2,l=u==null?void 0:u.find(_=>_.channel_type=="SavedMessages"))},o.set(void 0),[u,f,l,e,t,p]}class ve extends Z{constructor(n){super(),x(this,n,fe,oe,F,{})}}export{ve as component};
