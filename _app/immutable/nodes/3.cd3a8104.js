import{s as B,v as E,f as G,a as S,g as L,h as P,c as w,d as h,j as R,i as d,z as V,w as H,x as J,y as O,r as Q,o as T,l as W,m as X,e as $,F as Y}from"../chunks/scheduler.e5faf66b.js";import{S as Z,i as x,b as v,d as y,m as k,a as c,t as m,c as g,e as C,g as b}from"../chunks/index.fd37aab3.js";import{e as F}from"../chunks/each.e59479a4.js";import{p as ee}from"../chunks/stores.2748c692.js";import{g as M,c as te}from"../chunks/context.634f79ee.js";import{C as A}from"../chunks/Channel.c3ed636c.js";import{s as ne,a as le}from"../chunks/context.fa34f1f8.js";import{w as K}from"../chunks/index.586d49f4.js";import{C as ae}from"../chunks/ChannelItem.e177d5e4.js";import{b as D}from"../chunks/paths.16ac5fdf.js";import{U as se}from"../chunks/UserIcon.b7da56f9.js";function N(i,n,r){const e=i.slice();return e[10]=n[r],e}function re(i){let n,r,e;return n=new se({}),{c(){v(n.$$.fragment),r=W(`
		Friends`)},l(t){y(n.$$.fragment,t),r=X(t,`
		Friends`)},m(t,f){k(n,t,f),d(t,r,f),e=!0},i(t){e||(c(n.$$.fragment,t),e=!0)},o(t){m(n.$$.fragment,t),e=!1},d(t){t&&h(r),C(n,t)}}}function U(i){let n,r,e,t=i[2]!=null&&j(i),f=F(i[0]),s=[];for(let l=0;l<f.length;l+=1)s[l]=z(N(i,f,l));const _=l=>m(s[l],1,1,()=>{s[l]=null});return{c(){t&&t.c(),n=S();for(let l=0;l<s.length;l+=1)s[l].c();r=$()},l(l){t&&t.l(l),n=w(l);for(let a=0;a<s.length;a+=1)s[a].l(l);r=$()},m(l,a){t&&t.m(l,a),d(l,n,a);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(l,a);d(l,r,a),e=!0},p(l,a){if(l[2]!=null?t?(t.p(l,a),a&4&&c(t,1)):(t=j(l),t.c(),c(t,1),t.m(n.parentNode,n)):t&&(b(),m(t,1,1,()=>{t=null}),g()),a&1){f=F(l[0]);let o;for(o=0;o<f.length;o+=1){const u=N(l,f,o);s[o]?(s[o].p(u,a),c(s[o],1)):(s[o]=z(u),s[o].c(),c(s[o],1),s[o].m(r.parentNode,r))}for(b(),o=f.length;o<s.length;o+=1)_(o);g()}},i(l){if(!e){c(t);for(let a=0;a<f.length;a+=1)c(s[a]);e=!0}},o(l){m(t),s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)m(s[a]);e=!1},d(l){l&&(h(n),h(r)),t&&t.d(l),Y(s,l)}}}function j(i){let n,r;return n=new A({props:{channel:i[2]}}),{c(){v(n.$$.fragment)},l(e){y(n.$$.fragment,e)},m(e,t){k(n,e,t),r=!0},p(e,t){const f={};t&4&&(f.channel=e[2]),n.$set(f)},i(e){r||(c(n.$$.fragment,e),r=!0)},o(e){m(n.$$.fragment,e),r=!1},d(e){C(n,e)}}}function q(i){let n,r;return n=new A({props:{channel:i[10]}}),{c(){v(n.$$.fragment)},l(e){y(n.$$.fragment,e)},m(e,t){k(n,e,t),r=!0},p(e,t){const f={};t&1&&(f.channel=e[10]),n.$set(f)},i(e){r||(c(n.$$.fragment,e),r=!0)},o(e){m(n.$$.fragment,e),r=!1},d(e){C(n,e)}}}function z(i){let n,r,e=i[10].channel_type!="SavedMessages"&&q(i);return{c(){e&&e.c(),n=$()},l(t){e&&e.l(t),n=$()},m(t,f){e&&e.m(t,f),d(t,n,f),r=!0},p(t,f){t[10].channel_type!="SavedMessages"?e?(e.p(t,f),f&1&&c(e,1)):(e=q(t),e.c(),c(e,1),e.m(n.parentNode,n)):e&&(b(),m(e,1,1,()=>{e=null}),g())},i(t){r||(c(e),r=!0)},o(t){m(e),r=!1},d(t){t&&h(n),e&&e.d(t)}}}function oe(i){let n,r,e,t,f;r=new ae({props:{href:D+"/friends",selected:i[1].url.pathname==`${D}/friends`,$$slots:{default:[re]},$$scope:{ctx:i}}});let s=i[0]!=null&&U(i);const _=i[4].default,l=E(_,i,i[5],null);return{c(){n=G("div"),v(r.$$.fragment),e=S(),s&&s.c(),t=S(),l&&l.c(),this.h()},l(a){n=L(a,"DIV",{class:!0});var o=P(n);y(r.$$.fragment,o),e=w(o),s&&s.l(o),o.forEach(h),t=w(a),l&&l.l(a),this.h()},h(){R(n,"class","channel-bar-container")},m(a,o){d(a,n,o),k(r,n,null),V(n,e),s&&s.m(n,null),d(a,t,o),l&&l.m(a,o),f=!0},p(a,[o]){const u={};o&2&&(u.selected=a[1].url.pathname==`${D}/friends`),o&32&&(u.$$scope={dirty:o,ctx:a}),r.$set(u),a[0]!=null?s?(s.p(a,o),o&1&&c(s,1)):(s=U(a),s.c(),c(s,1),s.m(n,null)):s&&(b(),m(s,1,1,()=>{s=null}),g()),l&&l.p&&(!f||o&32)&&H(l,_,a,a[5],f?O(_,a[5],o,null):J(a[5]),null)},i(a){f||(c(r.$$.fragment,a),c(s),c(l,a),f=!0)},o(a){m(r.$$.fragment,a),m(s),m(l,a),f=!1},d(a){a&&(h(n),h(t)),C(r),s&&s.d(),l&&l.d(a)}}}function fe(i,n,r){let e,t,f;Q(i,ee,p=>r(1,f=p));let{$$slots:s={},$$scope:_}=n;const l=M(te),a=M(ne)??K(),o=M(le)??K();let u;function I(){r(0,u=Array.from(l.api.cache.channels.values()).filter(p=>["DirectMessage","Group","SavedMessages"].includes(p.channel_type))),((u==null?void 0:u.length)??0)==0&&l.ready&&l.api.fetchDirectMessages().then(p=>r(0,u=p))}return l.on("Ready",I),T(I),i.$$set=p=>{"$$scope"in p&&r(5,_=p.$$scope)},i.$$.update=()=>{i.$$.dirty&2&&r(3,e=f.params),i.$$.dirty&8&&a.set(e.id),i.$$.dirty&1&&r(2,t=u==null?void 0:u.find(p=>p.channel_type=="SavedMessages"))},o.set(void 0),[u,f,t,e,s,_]}class ve extends Z{constructor(n){super(),x(this,n,fe,oe,B,{})}}export{ve as component};
