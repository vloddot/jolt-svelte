import{s as E,d as F,u as G,g as P,e as V,c as z,o as H}from"../chunks/scheduler.bc65eea2.js";import{S as J,i as O,g as Q,r as w,s as k,h as T,j as W,u as C,c as M,f as h,k as K,a as d,v as D,x as X,d as c,t as m,b as g,w as S,e as $,p as b,y as Y}from"../chunks/index.cf715be0.js";import{e as N}from"../chunks/each.e59479a4.js";import{p as Z}from"../chunks/stores.c5888aff.js";import{g as y,c as x}from"../chunks/context.90bee080.js";/* empty css                      */import{C as ee,a as B}from"../chunks/Channel.07c630b1.js";import{s as ne,a as te}from"../chunks/context.fa34f1f8.js";import{w as L}from"../chunks/index.27f04a12.js";import{b as v}from"../chunks/paths.e5c957f4.js";const se=""+new URL("../assets/users.2b557c20.svg",import.meta.url).href;function R(f,s,r){const e=f.slice();return e[10]=s[r],e}function U(f){let s,r,e,t=f[2]!=null&&j(f),i=N(f[0]),a=[];for(let n=0;n<i.length;n+=1)a[n]=A(R(f,i,n));const _=n=>m(a[n],1,1,()=>{a[n]=null});return{c(){t&&t.c(),s=k();for(let n=0;n<a.length;n+=1)a[n].c();r=$()},l(n){t&&t.l(n),s=M(n);for(let l=0;l<a.length;l+=1)a[l].l(n);r=$()},m(n,l){t&&t.m(n,l),d(n,s,l);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(n,l);d(n,r,l),e=!0},p(n,l){if(n[2]!=null?t?(t.p(n,l),l&4&&c(t,1)):(t=j(n),t.c(),c(t,1),t.m(s.parentNode,s)):t&&(b(),m(t,1,1,()=>{t=null}),g()),l&1){i=N(n[0]);let o;for(o=0;o<i.length;o+=1){const u=R(n,i,o);a[o]?(a[o].p(u,l),c(a[o],1)):(a[o]=A(u),a[o].c(),c(a[o],1),a[o].m(r.parentNode,r))}for(b(),o=i.length;o<a.length;o+=1)_(o);g()}},i(n){if(!e){c(t);for(let l=0;l<i.length;l+=1)c(a[l]);e=!0}},o(n){m(t),a=a.filter(Boolean);for(let l=0;l<a.length;l+=1)m(a[l]);e=!1},d(n){n&&(h(s),h(r)),t&&t.d(n),Y(a,n)}}}function j(f){let s,r;return s=new B({props:{channel:f[2]}}),{c(){w(s.$$.fragment)},l(e){C(s.$$.fragment,e)},m(e,t){D(s,e,t),r=!0},p(e,t){const i={};t&4&&(i.channel=e[2]),s.$set(i)},i(e){r||(c(s.$$.fragment,e),r=!0)},o(e){m(s.$$.fragment,e),r=!1},d(e){S(s,e)}}}function q(f){let s,r;return s=new B({props:{channel:f[10]}}),{c(){w(s.$$.fragment)},l(e){C(s.$$.fragment,e)},m(e,t){D(s,e,t),r=!0},p(e,t){const i={};t&1&&(i.channel=e[10]),s.$set(i)},i(e){r||(c(s.$$.fragment,e),r=!0)},o(e){m(s.$$.fragment,e),r=!1},d(e){S(s,e)}}}function A(f){let s,r,e=f[10].channel_type!="SavedMessages"&&q(f);return{c(){e&&e.c(),s=$()},l(t){e&&e.l(t),s=$()},m(t,i){e&&e.m(t,i),d(t,s,i),r=!0},p(t,i){t[10].channel_type!="SavedMessages"?e?(e.p(t,i),i&1&&c(e,1)):(e=q(t),e.c(),c(e,1),e.m(s.parentNode,s)):e&&(b(),m(e,1,1,()=>{e=null}),g())},i(t){r||(c(e),r=!0)},o(t){m(e),r=!1},d(t){t&&h(s),e&&e.d(t)}}}function le(f){let s,r,e,t,i;r=new ee({props:{name:"Friends",src:se,width:24,height:24,href:v+"/friends",selected:f[1].url.pathname==`${v}/friends`}});let a=f[0]!=null&&U(f);const _=f[5].default,n=F(_,f,f[4],null);return{c(){s=Q("div"),w(r.$$.fragment),e=k(),a&&a.c(),t=k(),n&&n.c(),this.h()},l(l){s=T(l,"DIV",{role:!0,class:!0});var o=W(s);C(r.$$.fragment,o),e=M(o),a&&a.l(o),o.forEach(h),t=M(l),n&&n.l(l),this.h()},h(){K(s,"role","list"),K(s,"class","channel-bar-container")},m(l,o){d(l,s,o),D(r,s,null),X(s,e),a&&a.m(s,null),d(l,t,o),n&&n.m(l,o),i=!0},p(l,[o]){const u={};o&2&&(u.selected=l[1].url.pathname==`${v}/friends`),r.$set(u),l[0]!=null?a?(a.p(l,o),o&1&&c(a,1)):(a=U(l),a.c(),c(a,1),a.m(s,null)):a&&(b(),m(a,1,1,()=>{a=null}),g()),n&&n.p&&(!i||o&16)&&G(n,_,l,l[4],i?V(_,l[4],o,null):P(l[4]),null)},i(l){i||(c(r.$$.fragment,l),c(a),c(n,l),i=!0)},o(l){m(r.$$.fragment,l),m(a),m(n,l),i=!1},d(l){l&&(h(s),h(t)),S(r),a&&a.d(),n&&n.d(l)}}}function ae(f,s,r){let e,t,i;z(f,Z,p=>r(1,i=p));let{$$slots:a={},$$scope:_}=s;const n=y(x),l=y(ne)??L(),o=y(te)??L();let u;function I(){r(0,u=Array.from(n.api.cache.channels.values()).filter(p=>["DirectMessage","Group","SavedMessages"].includes(p.channel_type))),((u==null?void 0:u.length)??0)==0&&n.ready&&n.api.fetchDirectMessages().then(p=>r(0,u=p))}return n.on("Ready",I),H(I),f.$$set=p=>{"$$scope"in p&&r(4,_=p.$$scope)},f.$$.update=()=>{f.$$.dirty&2&&r(3,e=i.params),f.$$.dirty&8&&l.set(e.id),f.$$.dirty&1&&r(2,t=u==null?void 0:u.find(p=>p.channel_type=="SavedMessages"))},o.set(void 0),[u,i,t,e,_,a]}class de extends J{constructor(s){super(),O(this,s,ae,le,E,{})}}export{de as component};
