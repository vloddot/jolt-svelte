import{s as A,v as B,f as E,a as S,g as L,h as P,c as w,d as h,j as R,i as d,z as V,w as H,x as J,y as O,r as Q,o as T,l as W,m as X,e as $,G as Y}from"../chunks/scheduler.693b9c9b.js";import{S as Z,i as x,b as y,d as k,m as v,a as c,t as u,c as g,e as C,g as b}from"../chunks/index.bb1ba657.js";import{e as K}from"../chunks/each.e59479a4.js";import{p as ee}from"../chunks/stores.07428380.js";import{g as M,c as te}from"../chunks/context.ca3e4b8d.js";import{C as z}from"../chunks/Channel.bdde91a1.js";import{s as ne,a as le}from"../chunks/context.fa34f1f8.js";import{w as N}from"../chunks/index.f1869c04.js";import{C as se}from"../chunks/ChannelItem.f8d05f84.js";import{b as D}from"../chunks/paths.a0b5f327.js";import{U as ae}from"../chunks/UserIcon.bf988ebc.js";function F(i,n,r){const e=i.slice();return e[10]=n[r],e}function re(i){let n,r,e;return n=new ae({}),{c(){y(n.$$.fragment),r=W(`
		Friends`)},l(t){k(n.$$.fragment,t),r=X(t,`
		Friends`)},m(t,f){v(n,t,f),d(t,r,f),e=!0},i(t){e||(c(n.$$.fragment,t),e=!0)},o(t){u(n.$$.fragment,t),e=!1},d(t){t&&h(r),C(n,t)}}}function G(i){let n,r,e,t=i[2]!=null&&U(i),f=K(i[0]),a=[];for(let l=0;l<f.length;l+=1)a[l]=q(F(i,f,l));const _=l=>u(a[l],1,1,()=>{a[l]=null});return{c(){t&&t.c(),n=S();for(let l=0;l<a.length;l+=1)a[l].c();r=$()},l(l){t&&t.l(l),n=w(l);for(let s=0;s<a.length;s+=1)a[s].l(l);r=$()},m(l,s){t&&t.m(l,s),d(l,n,s);for(let o=0;o<a.length;o+=1)a[o]&&a[o].m(l,s);d(l,r,s),e=!0},p(l,s){if(l[2]!=null?t?(t.p(l,s),s&4&&c(t,1)):(t=U(l),t.c(),c(t,1),t.m(n.parentNode,n)):t&&(b(),u(t,1,1,()=>{t=null}),g()),s&1){f=K(l[0]);let o;for(o=0;o<f.length;o+=1){const m=F(l,f,o);a[o]?(a[o].p(m,s),c(a[o],1)):(a[o]=q(m),a[o].c(),c(a[o],1),a[o].m(r.parentNode,r))}for(b(),o=f.length;o<a.length;o+=1)_(o);g()}},i(l){if(!e){c(t);for(let s=0;s<f.length;s+=1)c(a[s]);e=!0}},o(l){u(t),a=a.filter(Boolean);for(let s=0;s<a.length;s+=1)u(a[s]);e=!1},d(l){l&&(h(n),h(r)),t&&t.d(l),Y(a,l)}}}function U(i){let n,r;return n=new z({props:{channel:i[2]}}),{c(){y(n.$$.fragment)},l(e){k(n.$$.fragment,e)},m(e,t){v(n,e,t),r=!0},p(e,t){const f={};t&4&&(f.channel=e[2]),n.$set(f)},i(e){r||(c(n.$$.fragment,e),r=!0)},o(e){u(n.$$.fragment,e),r=!1},d(e){C(n,e)}}}function j(i){let n,r;return n=new z({props:{channel:i[10]}}),{c(){y(n.$$.fragment)},l(e){k(n.$$.fragment,e)},m(e,t){v(n,e,t),r=!0},p(e,t){const f={};t&1&&(f.channel=e[10]),n.$set(f)},i(e){r||(c(n.$$.fragment,e),r=!0)},o(e){u(n.$$.fragment,e),r=!1},d(e){C(n,e)}}}function q(i){let n,r,e=i[10].channel_type!="SavedMessages"&&j(i);return{c(){e&&e.c(),n=$()},l(t){e&&e.l(t),n=$()},m(t,f){e&&e.m(t,f),d(t,n,f),r=!0},p(t,f){t[10].channel_type!="SavedMessages"?e?(e.p(t,f),f&1&&c(e,1)):(e=j(t),e.c(),c(e,1),e.m(n.parentNode,n)):e&&(b(),u(e,1,1,()=>{e=null}),g())},i(t){r||(c(e),r=!0)},o(t){u(e),r=!1},d(t){t&&h(n),e&&e.d(t)}}}function oe(i){let n,r,e,t,f;r=new se({props:{href:D+"/friends",selected:i[1].url.pathname==`${D}/friends`,$$slots:{default:[re]},$$scope:{ctx:i}}});let a=i[0]!=null&&G(i);const _=i[4].default,l=B(_,i,i[5],null);return{c(){n=E("div"),y(r.$$.fragment),e=S(),a&&a.c(),t=S(),l&&l.c(),this.h()},l(s){n=L(s,"DIV",{class:!0});var o=P(n);k(r.$$.fragment,o),e=w(o),a&&a.l(o),o.forEach(h),t=w(s),l&&l.l(s),this.h()},h(){R(n,"class","channel-bar-container")},m(s,o){d(s,n,o),v(r,n,null),V(n,e),a&&a.m(n,null),d(s,t,o),l&&l.m(s,o),f=!0},p(s,[o]){const m={};o&2&&(m.selected=s[1].url.pathname==`${D}/friends`),o&32&&(m.$$scope={dirty:o,ctx:s}),r.$set(m),s[0]!=null?a?(a.p(s,o),o&1&&c(a,1)):(a=G(s),a.c(),c(a,1),a.m(n,null)):a&&(b(),u(a,1,1,()=>{a=null}),g()),l&&l.p&&(!f||o&32)&&H(l,_,s,s[5],f?O(_,s[5],o,null):J(s[5]),null)},i(s){f||(c(r.$$.fragment,s),c(a),c(l,s),f=!0)},o(s){u(r.$$.fragment,s),u(a),u(l,s),f=!1},d(s){s&&(h(n),h(t)),C(r),a&&a.d(),l&&l.d(s)}}}function fe(i,n,r){let e,t,f;Q(i,ee,p=>r(1,f=p));let{$$slots:a={},$$scope:_}=n;const l=M(te),s=M(ne)??N(),o=M(le)??N();let m=[];function I(){r(0,m=Array.from(l.api.cache.channels.values()).filter(p=>["DirectMessage","Group","SavedMessages"].includes(p.channel_type))),(m.length??0)==0&&l.ready&&l.api.fetchDirectMessages().then(p=>r(0,m=p))}return l.on("Ready",I),T(I),i.$$set=p=>{"$$scope"in p&&r(5,_=p.$$scope)},i.$$.update=()=>{i.$$.dirty&2&&r(3,e=f.params),i.$$.dirty&8&&s.set(e.id),i.$$.dirty&1&&r(2,t=m==null?void 0:m.find(p=>p.channel_type=="SavedMessages"))},o.set(void 0),[m,f,t,e,a,_]}class ye extends Z{constructor(n){super(),x(this,n,fe,oe,A,{})}}export{ye as component};
