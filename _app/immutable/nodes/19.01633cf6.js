import{s as re,f as b,a as G,l as z,g as T,h as V,c as K,m as F,d as k,J as H,j as E,i as O,z as m,A as ae,n as J,u as w,M as pe,r as ge,e as U,G as ke}from"../chunks/scheduler.7420d6ca.js";import{h as Z,u as be}from"../chunks/await_block.08f6cb26.js";import{e as ee}from"../chunks/each.e59479a4.js";import{S as ce,i as fe,a as C,t as N,c as Q,b as ue,d as de,m as me,e as he,g as W}from"../chunks/index.637134e4.js";import{g as te}from"../chunks/context.92045884.js";import{c as Te,a as we}from"../chunks/context.645f4abc.js";import{d as Ce}from"../chunks/index.esm.4b6e8736.js";import{d as L,c as ye}from"../chunks/calendar.5942d46b.js";import{c as De,g as Ee}from"../chunks/_commonjsHelpers.725317a4.js";var _e={exports:{}};(function(l,e){(function(o,t){l.exports=t()})(De,function(){return function(o,t,s){o=o||{};var i=t.prototype,n={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function r(c,_,f,u){return i.fromToBase(c,_,f,u)}s.en.relativeTime=n,i.fromToBase=function(c,_,f,u,h){for(var d,p,S,I=f.$locale().relativeTime||n,B=o.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],P=B.length,M=0;M<P;M+=1){var v=B[M];v.d&&(d=u?s(c).diff(f,v.d,!0):f.diff(c,v.d,!0));var $=(o.rounding||Math.round)(Math.abs(d));if(S=d>0,$<=v.r||!v.r){$<=1&&M>0&&(v=B[M-1]);var j=I[v.l];h&&($=h(""+$)),p=typeof j=="string"?j.replace("%d",$):j($,_,v.l,S);break}}if(_)return p;var x=S?I.future:I.past;return typeof x=="function"?x(p):x.replace("%s",p)},i.to=function(c,_){return r(c,_,this,!0)},i.from=function(c,_){return r(c,_,this)};var a=function(c){return c.$u?s.utc():s()};i.toNow=function(c){return this.to(a(this),c)},i.fromNow=function(c){return this.from(a(this),c)}}})})(_e);var Me=_e.exports;const $e=Ee(Me);function se(l){let e,o="This Device";return{c(){e=b("p"),e.textContent=o},l(t){e=T(t,"P",{"data-svelte-h":!0}),H(e)!=="svelte-8e6226"&&(e.textContent=o)},m(t,s){O(t,e,s)},d(t){t&&k(e)}}}function Ve(l){let e,o,t,s,i,n=l[0].name+"",r,a,c,_,f,u=l[2].calendar()+"",h,d,p=l[2].fromNow()+"",S,I,B,P,M,v,$="Revoke",j,x,g=l[1]&&se();return{c(){e=b("div"),g&&g.c(),o=G(),t=b("div"),s=b("div"),i=b("h3"),r=z(n),a=G(),c=b("p"),_=z("Created "),f=b("time"),h=z(u),d=z(" ("),S=z(p),I=z(")."),B=G(),P=b("div"),M=G(),v=b("button"),v.textContent=$,this.h()},l(y){e=T(y,"DIV",{class:!0,"data-this-device":!0});var D=V(e);g&&g.l(D),o=K(D),t=T(D,"DIV",{class:!0});var A=V(t);s=T(A,"DIV",{class:!0});var R=V(s);i=T(R,"H3",{class:!0});var X=V(i);r=F(X,n),X.forEach(k),a=K(R),c=T(R,"P",{class:!0});var q=V(c);_=F(q,"Created "),f=T(q,"TIME",{});var Y=V(f);h=F(Y,u),Y.forEach(k),d=F(q," ("),S=F(q,p),I=F(q,")."),q.forEach(k),R.forEach(k),B=K(A),P=T(A,"DIV",{class:!0}),V(P).forEach(k),M=K(A),v=T(A,"BUTTON",{"data-svelte-h":!0}),H(v)!=="svelte-a5hzw9"&&(v.textContent=$),A.forEach(k),D.forEach(k),this.h()},h(){E(i,"class","header svelte-tg9o64"),E(c,"class","indented svelte-tg9o64"),E(s,"class","session-info svelte-tg9o64"),E(P,"class","flex-divider"),E(t,"class","flex-container"),E(e,"class","container svelte-tg9o64"),E(e,"data-this-device",l[1])},m(y,D){O(y,e,D),g&&g.m(e,null),m(e,o),m(e,t),m(t,s),m(s,i),m(i,r),m(s,a),m(s,c),m(c,_),m(c,f),m(f,h),m(c,d),m(c,S),m(c,I),m(t,B),m(t,P),m(t,M),m(t,v),j||(x=ae(v,"click",l[3]),j=!0)},p(y,[D]){y[1]?g||(g=se(),g.c(),g.m(e,o)):g&&(g.d(1),g=null),D&1&&n!==(n=y[0].name+"")&&J(r,n),D&4&&u!==(u=y[2].calendar()+"")&&J(h,u),D&4&&p!==(p=y[2].fromNow()+"")&&J(S,p),D&2&&E(e,"data-this-device",y[1])},i:w,o:w,d(y){y&&k(e),g&&g.d(),j=!1,x()}}}function Ne(l,e,o){let t;L.extend(ye),L.extend($e);let{session:s}=e,{isThisDevice:i=!1}=e;function n(r){pe.call(this,l,r)}return l.$$set=r=>{"session"in r&&o(0,s=r.session),"isThisDevice"in r&&o(1,i=r.isThisDevice)},l.$$.update=()=>{l.$$.dirty&1&&o(2,t=L(Ce(s._id)))},[s,i,t,n]}class ve extends ce{constructor(e){super(),fe(this,e,Ne,Ve,re,{session:0,isThisDevice:1})}}function ne(l,e,o){const t=l.slice();return t[9]=e[o],t}function oe(l){let e,o;return e=new ve({props:{session:l[2],isThisDevice:!0}}),e.$on("click",l[5]),{c(){ue(e.$$.fragment)},l(t){de(e.$$.fragment,t)},m(t,s){me(e,t,s),o=!0},p(t,s){const i={};s&4&&(i.session=t[2]),e.$set(i)},i(t){o||(C(e.$$.fragment,t),o=!0)},o(t){N(e.$$.fragment,t),o=!1},d(t){he(e,t)}}}function Se(l){return{c:w,l:w,m:w,p:w,i:w,o:w,d:w}}function Ie(l){let e,o,t=ee(l[1]),s=[];for(let n=0;n<t.length;n+=1)s[n]=ie(ne(l,t,n));const i=n=>N(s[n],1,1,()=>{s[n]=null});return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=U()},l(n){for(let r=0;r<s.length;r+=1)s[r].l(n);e=U()},m(n,r){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,r);O(n,e,r),o=!0},p(n,r){if(r&14){t=ee(n[1]);let a;for(a=0;a<t.length;a+=1){const c=ne(n,t,a);s[a]?(s[a].p(c,r),C(s[a],1)):(s[a]=ie(c),s[a].c(),C(s[a],1),s[a].m(e.parentNode,e))}for(W(),a=t.length;a<s.length;a+=1)i(a);Q()}},i(n){if(!o){for(let r=0;r<t.length;r+=1)C(s[r]);o=!0}},o(n){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)N(s[r]);o=!1},d(n){n&&k(e),ke(s,n)}}}function le(l){let e,o;function t(){return l[6](l[9])}return e=new ve({props:{session:l[9]}}),e.$on("click",t),{c(){ue(e.$$.fragment)},l(s){de(e.$$.fragment,s)},m(s,i){me(e,s,i),o=!0},p(s,i){l=s;const n={};i&2&&(n.session=l[9]),e.$set(n)},i(s){o||(C(e.$$.fragment,s),o=!0)},o(s){N(e.$$.fragment,s),o=!1},d(s){he(e,s)}}}function ie(l){var s;let e,o,t=l[9]._id!=((s=l[2])==null?void 0:s._id)&&le(l);return{c(){t&&t.c(),e=U()},l(i){t&&t.l(i),e=U()},m(i,n){t&&t.m(i,n),O(i,e,n),o=!0},p(i,n){var r;i[9]._id!=((r=i[2])==null?void 0:r._id)?t?(t.p(i,n),n&6&&C(t,1)):(t=le(i),t.c(),C(t,1),t.m(e.parentNode,e)):t&&(W(),N(t,1,1,()=>{t=null}),Q())},i(i){o||(C(t),o=!0)},o(i){N(t),o=!1},d(i){i&&k(e),t&&t.d(i)}}}function Be(l){let e,o="Loading...";return{c(){e=b("p"),e.textContent=o},l(t){e=T(t,"P",{"data-svelte-h":!0}),H(e)!=="svelte-qdsr2u"&&(e.textContent=o)},m(t,s){O(t,e,s)},p:w,i:w,o:w,d(t){t&&k(e)}}}function Pe(l){let e,o,t,s,i,n,r="Revoke all other sessions",a,c,_,f=l[2]!=null&&oe(l),u={ctx:l,current:null,token:null,hasCatch:!1,pending:Be,then:Ie,catch:Se,blocks:[,,,]};return Z(s=l[0],u),{c(){e=b("div"),o=b("div"),f&&f.c(),t=G(),u.block.c(),i=G(),n=b("button"),n.textContent=r,this.h()},l(h){e=T(h,"DIV",{class:!0});var d=V(e);o=T(d,"DIV",{class:!0});var p=V(o);f&&f.l(p),p.forEach(k),t=K(d),u.block.l(d),i=K(d),n=T(d,"BUTTON",{"data-svelte-h":!0}),H(n)!=="svelte-dllb2x"&&(n.textContent=r),d.forEach(k),this.h()},h(){E(o,"class","my-4"),E(e,"class","mr-2")},m(h,d){O(h,e,d),m(e,o),f&&f.m(o,null),m(e,t),u.block.m(e,u.anchor=null),u.mount=()=>e,u.anchor=i,m(e,i),m(e,n),a=!0,c||(_=ae(n,"click",l[7]),c=!0)},p(h,[d]){l=h,l[2]!=null?f?(f.p(l,d),d&4&&C(f,1)):(f=oe(l),f.c(),C(f,1),f.m(o,null)):f&&(W(),N(f,1,1,()=>{f=null}),Q()),u.ctx=l,d&1&&s!==(s=l[0])&&Z(s,u)||be(u,l,d)},i(h){a||(C(f),C(u.block),a=!0)},o(h){N(f);for(let d=0;d<3;d+=1){const p=u.blocks[d];N(p)}a=!1},d(h){h&&k(e),f&&f.d(),u.block.d(),u.token=null,u=null,c=!1,_()}}}function je(l,e,o){let t,s;const i=te(Te),n=te(we);ge(l,n,u=>o(2,s=u));let r=new Array;async function a(u){o(1,r=await u)}const c=()=>{i.destroy(),n.set(null)},_=u=>{i.api.revokeSession(u._id),o(1,r=r.filter(h=>h._id!=u._id))},f=()=>i.api.revokeAllSessions(!1);return l.$$.update=()=>{l.$$.dirty&1&&a(t)},o(0,t=i.api.fetchSessions()),[t,r,s,i,n,c,_,f]}class Ue extends ce{constructor(e){super(),fe(this,e,je,Pe,re,{})}}export{Ue as component};
