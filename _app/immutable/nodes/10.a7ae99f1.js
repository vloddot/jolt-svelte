import{s as Y,n as g,c as re}from"../chunks/scheduler.bc65eea2.js";import{S as Z,i as x,g as D,r as q,s as R,m as P,h as M,j as S,u as J,c as A,n as U,f as m,k as E,a as $,v as K,x as h,o as V,d,t as b,w as L,e as v,l as ie,b as z,p as B}from"../chunks/index.cf715be0.js";import{p as ae}from"../chunks/stores.7d859062.js";import{T as se}from"../chunks/TextChat.67a245a9.js";import{h as F,u as le}from"../chunks/await_block.b32c7e6c.js";import{g as ee,c as te}from"../chunks/context.58a48396.js";import{g as G,a as H,b as ne}from"../chunks/util.892acc65.js";import{R as oe}from"../chunks/RoundedImage.78a8751c.js";import{r as fe}from"../chunks/index.5e2a9a64.js";import{g as ce}from"../chunks/chunk-NMUKSDLG.3f77d6f4.js";function ue(a){return{c:g,l:g,m:g,p:g,d:g}}function pe(a){var t;let n,r=((t=a[2])==null?void 0:t.content)!=null&&O(a);return{c(){r&&r.c(),n=v()},l(e){r&&r.l(e),n=v()},m(e,i){r&&r.m(e,i),$(e,n,i)},p(e,i){var s;((s=e[2])==null?void 0:s.content)!=null?r?r.p(e,i):(r=O(e),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(e){e&&m(n),r&&r.d(e)}}}function O(a){let n,r=a[2].content+"",t;return{c(){n=D("p"),t=P(r),this.h()},l(e){n=M(e,"P",{style:!0,class:!0});var i=S(n);t=U(i,r),i.forEach(m),this.h()},h(){ie(n,"overflow-wrap","break-word"),E(n,"class","whitespace-pre-wrap")},m(e,i){$(e,n,i),h(n,t)},p(e,i){i&1&&r!==(r=e[2].content+"")&&V(t,r)},d(e){e&&m(n)}}}function me(a){return{c:g,l:g,m:g,p:g,d:g}}function de(a){let n,r,t,e,i,s,l,_=a[0].username+"",y,f,u=a[0].discriminator+"",N,j,T,I,k;r=new oe({props:{width:64,height:64,src:G(a[0]),name:a[1]}});let p={ctx:a,current:null,token:null,hasCatch:!1,pending:me,then:pe,catch:ue,value:2};return F(T=a[3].api.fetchUserProfile(a[0]._id),p),{c(){n=D("div"),q(r.$$.fragment),t=R(),e=D("p"),i=P(a[1]),s=R(),l=D("p"),y=P(_),f=P("#"),N=P(u),j=R(),p.block.c(),this.h()},l(c){n=M(c,"DIV",{style:!0});var o=S(n);J(r.$$.fragment,o),t=A(o),e=M(o,"P",{});var C=S(e);i=U(C,a[1]),C.forEach(m),s=A(o),l=M(o,"P",{class:!0});var w=S(l);y=U(w,_),f=U(w,"#"),N=U(w,u),w.forEach(m),j=A(o),p.block.l(o),o.forEach(m),this.h()},h(){var c;E(l,"class","text-sm text-gray-600"),E(n,"style",I=((c=a[2])==null?void 0:c.background)!=null?`background-image: url(${H(a[2].background)})`:void 0)},m(c,o){$(c,n,o),K(r,n,null),h(n,t),h(n,e),h(e,i),h(n,s),h(n,l),h(l,y),h(l,f),h(l,N),h(n,j),p.block.m(n,p.anchor=null),p.mount=()=>n,p.anchor=null,k=!0},p(c,[o]){var w;a=c;const C={};o&1&&(C.src=G(a[0])),o&2&&(C.name=a[1]),r.$set(C),(!k||o&2)&&V(i,a[1]),(!k||o&1)&&_!==(_=a[0].username+"")&&V(y,_),(!k||o&1)&&u!==(u=a[0].discriminator+"")&&V(N,u),p.ctx=a,o&1&&T!==(T=a[3].api.fetchUserProfile(a[0]._id))&&F(T,p)||le(p,a,o),(!k||o&4&&I!==(I=((w=a[2])==null?void 0:w.background)!=null?`background-image: url(${H(a[2].background)})`:void 0))&&E(n,"style",I)},i(c){k||(d(r.$$.fragment,c),k=!0)},o(c){b(r.$$.fragment,c),k=!1},d(c){c&&m(n),L(r),p.block.d(),p.token=null,p=null}}}function _e(a,n,r){let t,{user:e}=n;const i=ee(te);let s;return a.$$set=l=>{"user"in l&&r(0,e=l.user)},a.$$.update=()=>{a.$$.dirty&1&&r(1,t=ne(e)),a.$$.dirty&1&&i.api.fetchUserProfile(e._id).then(l=>r(2,s=l))},[e,t,s,i]}class he extends Z{constructor(n){super(),x(this,n,_e,de,Y,{user:0})}}function Q(a){let n,r,t,e;n=new se({props:{channel:a[0]}});let i=a[0].channel_type!="SavedMessages"&&W(a);return{c(){q(n.$$.fragment),r=R(),i&&i.c(),t=v()},l(s){J(n.$$.fragment,s),r=A(s),i&&i.l(s),t=v()},m(s,l){K(n,s,l),$(s,r,l),i&&i.m(s,l),$(s,t,l),e=!0},p(s,l){const _={};l&1&&(_.channel=s[0]),n.$set(_),s[0].channel_type!="SavedMessages"?i?(i.p(s,l),l&1&&d(i,1)):(i=W(s),i.c(),d(i,1),i.m(t.parentNode,t)):i&&(B(),b(i,1,1,()=>{i=null}),z())},i(s){e||(d(n.$$.fragment,s),d(i),e=!0)},o(s){b(n.$$.fragment,s),b(i),e=!1},d(s){s&&(m(r),m(t)),L(n,s),i&&i.d(s)}}}function W(a){let n,r,t=a[1]!=null&&X(a);return{c(){t&&t.c(),n=v()},l(e){t&&t.l(e),n=v()},m(e,i){t&&t.m(e,i),$(e,n,i),r=!0},p(e,i){e[1]!=null?t?(t.p(e,i),i&2&&d(t,1)):(t=X(e),t.c(),d(t,1),t.m(n.parentNode,n)):t&&(B(),b(t,1,1,()=>{t=null}),z())},i(e){r||(d(t),r=!0)},o(e){b(t),r=!1},d(e){e&&m(n),t&&t.d(e)}}}function X(a){let n,r,t;return r=new he({props:{user:a[1]}}),{c(){n=D("div"),q(r.$$.fragment),this.h()},l(e){n=M(e,"DIV",{class:!0});var i=S(n);J(r.$$.fragment,i),i.forEach(m),this.h()},h(){E(n,"class","members-list-container")},m(e,i){$(e,n,i),K(r,n,null),t=!0},p(e,i){const s={};i&2&&(s.user=e[1]),r.$set(s)},i(e){t||(d(r.$$.fragment,e),t=!0)},o(e){b(r.$$.fragment,e),t=!1},d(e){e&&m(n),L(r)}}}function ge(a){let n,r,t=a[0]!=null&&Q(a);return{c(){t&&t.c(),n=v()},l(e){t&&t.l(e),n=v()},m(e,i){t&&t.m(e,i),$(e,n,i),r=!0},p(e,[i]){e[0]!=null?t?(t.p(e,i),i&1&&d(t,1)):(t=Q(e),t.c(),d(t,1),t.m(n.parentNode,n)):t&&(B(),b(t,1,1,()=>{t=null}),z())},i(e){r||(d(t),r=!0)},o(e){b(t),r=!1},d(e){e&&m(n),t&&t.d(e)}}}function be(a,n,r){let t,e;re(a,ae,f=>r(3,e=f));const i=ee(te);let s,l;async function _(f){const u=await i.api.fetchChannel(f);if(u.channel_type=="TextChannel"||u.channel_type=="VoiceChannel")throw fe(302,`/servers/${u.server}/channels/${t.id}`);r(0,s=u)}async function y(f){var u;r(1,l=await i.api.fetchUser(f.recipients[0]==((u=i.user)==null?void 0:u._id)?f.recipients[1]:f.recipients[0]))}return a.$$.update=()=>{if(a.$$.dirty&8&&r(2,t=e.params),a.$$.dirty&4&&_(t.id),a.$$.dirty&1&&s!=null&&s.channel_type!="SavedMessages"&&y(s),a.$$.dirty&3){let f="";(s==null?void 0:s.channel_type)=="SavedMessages"?f+="Saved Messages":l==null?f+="DM":f+=`DM with ${ne(l)}`,f+=" - Jolt","__TAURI__"in window?ce.setTitle(f):document.title=f}},[s,l,t,e]}class Se extends Z{constructor(n){super(),x(this,n,be,ge,Y,{})}}export{Se as component};
