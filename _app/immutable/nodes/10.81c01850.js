import{s as Q,h as R,n as m,c as G,j as ie}from"../chunks/scheduler.88206625.js";import{S as W,i as X,g as P,s as E,m as C,h as S,j as V,c as A,n as D,f as d,k as p,a as y,x as b,o as I,e as w,l as re,d as h,t as v,b as q,r as Y,u as Z,v as x,p as K,w as ee}from"../chunks/index.3c623ae9.js";import{p as se}from"../chunks/stores.5a6829b8.js";import{T as ae}from"../chunks/TextChat.ad02ecda.js";import{h as J,u as le}from"../chunks/await_block.9bbfa40c.js";import{g as j,c as te}from"../chunks/context.3d02589b.js";import{g as L,a as z,b as ne}from"../chunks/util.9d7ab3cc.js";import{r as oe}from"../chunks/index.5e2a9a64.js";import{g as fe}from"../chunks/chunk-NMUKSDLG.3f77d6f4.js";import{s as ce}from"../chunks/context.fa34f1f8.js";function ue(s){return{c:m,l:m,m,p:m,d:m}}function pe(s){var t;let n,i=((t=s[2])==null?void 0:t.content)!=null&&B(s);return{c(){i&&i.c(),n=w()},l(e){i&&i.l(e),n=w()},m(e,r){i&&i.m(e,r),y(e,n,r)},p(e,r){var a;((a=e[2])==null?void 0:a.content)!=null?i?i.p(e,r):(i=B(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(e){e&&d(n),i&&i.d(e)}}}function B(s){let n,i=s[2].content+"",t;return{c(){n=P("p"),t=C(i),this.h()},l(e){n=S(e,"P",{style:!0,class:!0});var r=V(n);t=D(r,i),r.forEach(d),this.h()},h(){re(n,"overflow-wrap","break-word"),p(n,"class","whitespace-pre-wrap")},m(e,r){y(e,n,r),b(n,t)},p(e,r){r&1&&i!==(i=e[2].content+"")&&I(t,i)},d(e){e&&d(n)}}}function me(s){return{c:m,l:m,m,p:m,d:m}}function de(s){let n,i,t,e,r,a,l,c=s[0].username+"",k,U,$=s[0].discriminator+"",o,_,N,T,u={ctx:s,current:null,token:null,hasCatch:!1,pending:me,then:pe,catch:ue,value:2};return J(N=s[3].api.fetchUserProfile(s[0]._id),u),{c(){n=P("div"),i=P("img"),e=E(),r=C(s[1]),a=E(),l=P("p"),k=C(c),U=C("#"),o=C($),_=E(),u.block.c(),this.h()},l(g){n=S(g,"DIV",{style:!0});var f=V(n);i=S(f,"IMG",{class:!0,width:!0,height:!0,src:!0,alt:!0}),e=A(f),r=D(f,s[1]),a=A(f),l=S(f,"P",{class:!0});var M=V(l);k=D(M,c),U=D(M,"#"),o=D(M,$),M.forEach(d),_=A(f),u.block.l(f),f.forEach(d),this.h()},h(){var g;p(i,"class","cover"),p(i,"width","64px"),p(i,"height","64px"),R(i.src,t=L(s[0]))||p(i,"src",t),p(i,"alt",s[1]),p(l,"class","text-sm text-gray-600"),p(n,"style",T=((g=s[2])==null?void 0:g.background)!=null?`background-image: url(${z(s[2].background)})`:void 0)},m(g,f){y(g,n,f),b(n,i),b(n,e),b(n,r),b(n,a),b(n,l),b(l,k),b(l,U),b(l,o),b(n,_),u.block.m(n,u.anchor=null),u.mount=()=>n,u.anchor=null},p(g,[f]){var M;s=g,f&1&&!R(i.src,t=L(s[0]))&&p(i,"src",t),f&2&&p(i,"alt",s[1]),f&2&&I(r,s[1]),f&1&&c!==(c=s[0].username+"")&&I(k,c),f&1&&$!==($=s[0].discriminator+"")&&I(o,$),u.ctx=s,f&1&&N!==(N=s[3].api.fetchUserProfile(s[0]._id))&&J(N,u)||le(u,s,f),f&4&&T!==(T=((M=s[2])==null?void 0:M.background)!=null?`background-image: url(${z(s[2].background)})`:void 0)&&p(n,"style",T)},i:m,o:m,d(g){g&&d(n),u.block.d(),u.token=null,u=null}}}function _e(s,n,i){let t,{user:e}=n;const r=j(te);let a;return s.$$set=l=>{"user"in l&&i(0,e=l.user)},s.$$.update=()=>{s.$$.dirty&1&&i(1,t=ne(e)),s.$$.dirty&1&&r.api.fetchUserProfile(e._id).then(l=>i(2,a=l))},[e,t,a,r]}class he extends W{constructor(n){super(),X(this,n,_e,de,Q,{user:0})}}function F(s){let n,i,t,e;n=new ae({props:{channel:s[0]}});let r=s[0].channel_type!="SavedMessages"&&H(s);return{c(){Y(n.$$.fragment),i=E(),r&&r.c(),t=w()},l(a){Z(n.$$.fragment,a),i=A(a),r&&r.l(a),t=w()},m(a,l){x(n,a,l),y(a,i,l),r&&r.m(a,l),y(a,t,l),e=!0},p(a,l){const c={};l&1&&(c.channel=a[0]),n.$set(c),a[0].channel_type!="SavedMessages"?r?(r.p(a,l),l&1&&h(r,1)):(r=H(a),r.c(),h(r,1),r.m(t.parentNode,t)):r&&(K(),v(r,1,1,()=>{r=null}),q())},i(a){e||(h(n.$$.fragment,a),h(r),e=!0)},o(a){v(n.$$.fragment,a),v(r),e=!1},d(a){a&&(d(i),d(t)),ee(n,a),r&&r.d(a)}}}function H(s){let n,i,t=s[1]!=null&&O(s);return{c(){t&&t.c(),n=w()},l(e){t&&t.l(e),n=w()},m(e,r){t&&t.m(e,r),y(e,n,r),i=!0},p(e,r){e[1]!=null?t?(t.p(e,r),r&2&&h(t,1)):(t=O(e),t.c(),h(t,1),t.m(n.parentNode,n)):t&&(K(),v(t,1,1,()=>{t=null}),q())},i(e){i||(h(t),i=!0)},o(e){v(t),i=!1},d(e){e&&d(n),t&&t.d(e)}}}function O(s){let n,i,t;return i=new he({props:{user:s[1]}}),{c(){n=P("div"),Y(i.$$.fragment),this.h()},l(e){n=S(e,"DIV",{class:!0});var r=V(n);Z(i.$$.fragment,r),r.forEach(d),this.h()},h(){p(n,"class","members-list-container")},m(e,r){y(e,n,r),x(i,n,null),t=!0},p(e,r){const a={};r&2&&(a.user=e[1]),i.$set(a)},i(e){t||(h(i.$$.fragment,e),t=!0)},o(e){v(i.$$.fragment,e),t=!1},d(e){e&&d(n),ee(i)}}}function ge(s){let n,i,t=s[0]!=null&&F(s);return{c(){t&&t.c(),n=w()},l(e){t&&t.l(e),n=w()},m(e,r){t&&t.m(e,r),y(e,n,r),i=!0},p(e,[r]){e[0]!=null?t?(t.p(e,r),r&1&&h(t,1)):(t=F(e),t.c(),h(t,1),t.m(n.parentNode,n)):t&&(K(),v(t,1,1,()=>{t=null}),q())},i(e){i||(h(t),i=!0)},o(e){v(t),i=!1},d(e){e&&d(n),t&&t.d(e)}}}function be(s,n,i){let t,e,r;G(s,se,o=>i(5,r=o));const a=j(te),l=j(ce);G(s,l,o=>i(4,e=o));let c,k;async function U(o){const _=await a.api.fetchChannel(o);if(_.channel_type=="TextChannel"||_.channel_type=="VoiceChannel")throw oe(302,`/servers/${_.server}/channels/${t.id}`);i(0,c=_)}async function $(o){var _;i(1,k=await a.api.fetchUser(o.recipients[0]==((_=a.user)==null?void 0:_._id)?o.recipients[1]:o.recipients[0]))}return ie(()=>{l==null||l.set(void 0)}),s.$$.update=()=>{if(s.$$.dirty&32&&i(3,t=r.params),s.$$.dirty&8&&(l==null||l.set(t.id)),s.$$.dirty&16&&e&&U(e),s.$$.dirty&1&&c!=null&&c.channel_type!="SavedMessages"&&$(c),s.$$.dirty&3){let o="";(c==null?void 0:c.channel_type)=="SavedMessages"?o+="Saved Messages":k==null?o+="DM":o+=`DM with ${ne(k)}`,o+=" - Jolt","__TAURI__"in window?fe.setTitle(o):document.title=o}},[c,k,l,t,e,r]}class Se extends W{constructor(n){super(),X(this,n,be,ge,Q,{})}}export{Se as component};
