import{s as ne,f as k,a as I,l as P,g as b,h as w,c as S,m as j,d as v,K as G,j as E,i as q,z as _,A as ie,n as W,u as h,r as oe,e as x,G as pe}from"../chunks/scheduler.693b9c9b.js";import{h as ve,u as ke}from"../chunks/await_block.1641c5fa.js";import{e as X}from"../chunks/each.e59479a4.js";import{S as ae,i as re,a as g,t as T,c as H,b as ce,d as fe,m as ue,e as de,g as M}from"../chunks/index.bb1ba657.js";import{g as A,c as _e,b as he}from"../chunks/context.ca3e4b8d.js";import{d as Y}from"../chunks/index.esm.4b6e8736.js";import{d as z,c as be}from"../chunks/calendar.5942d46b.js";function Z(o){let t,n="This Device";return{c(){t=k("p"),t.textContent=n},l(e){t=b(e,"P",{"data-svelte-h":!0}),G(t)!=="svelte-8e6226"&&(t.textContent=n)},m(e,s){q(e,t,s)},d(e){e&&v(t)}}}function ge(o){let t,n,e,s,i,l=o[0].name+"",a,r,u,c,d,m=z(Y(o[0]._id)).calendar()+"",f,V,O,N,R,y,F="Revoke",U,J,p=o[1]&&Z();return{c(){t=k("div"),p&&p.c(),n=I(),e=k("div"),s=k("div"),i=k("h3"),a=P(l),r=I(),u=k("p"),c=P("Created "),d=k("time"),f=P(m),V=P("."),O=I(),N=k("div"),R=I(),y=k("button"),y.textContent=F,this.h()},l($){t=b($,"DIV",{class:!0,"data-this-device":!0});var C=w(t);p&&p.l(C),n=S(C),e=b(C,"DIV",{class:!0});var D=w(e);s=b(D,"DIV",{class:!0});var B=w(s);i=b(B,"H3",{class:!0});var L=w(i);a=j(L,l),L.forEach(v),r=S(B),u=b(B,"P",{class:!0});var K=w(u);c=j(K,"Created "),d=b(K,"TIME",{});var Q=w(d);f=j(Q,m),Q.forEach(v),V=j(K,"."),K.forEach(v),B.forEach(v),O=S(D),N=b(D,"DIV",{class:!0}),w(N).forEach(v),R=S(D),y=b(D,"BUTTON",{"data-svelte-h":!0}),G(y)!=="svelte-1pqiq64"&&(y.textContent=F),D.forEach(v),C.forEach(v),this.h()},h(){E(i,"class","header svelte-tg9o64"),E(u,"class","indented svelte-tg9o64"),E(s,"class","session-info svelte-tg9o64"),E(N,"class","flex-divider"),E(e,"class","flex-container"),E(t,"class","container svelte-tg9o64"),E(t,"data-this-device",o[1])},m($,C){q($,t,C),p&&p.m(t,null),_(t,n),_(t,e),_(e,s),_(s,i),_(i,a),_(s,r),_(s,u),_(u,c),_(u,d),_(d,f),_(u,V),_(e,O),_(e,N),_(e,R),_(e,y),U||(J=ie(y,"click",o[5]),U=!0)},p($,[C]){$[1]?p||(p=Z(),p.c(),p.m(t,n)):p&&(p.d(1),p=null),C&1&&l!==(l=$[0].name+"")&&W(a,l),C&1&&m!==(m=z(Y($[0]._id)).calendar()+"")&&W(f,m),C&2&&E(t,"data-this-device",$[1])},i:h,o:h,d($){$&&v(t),p&&p.d(),U=!1,J()}}}function $e(o,t,n){let e,s;z.extend(be);let{session:i}=t;const l=A(_e),a=A(he);oe(o,a,u=>n(4,s=u));const r=()=>{if(e){l.destroy(),a.set(null);return}l.api.revokeSession(i._id)};return o.$$set=u=>{"session"in u&&n(0,i=u.session)},o.$$.update=()=>{o.$$.dirty&17&&n(1,e=i._id==(s==null?void 0:s._id))},[i,e,l,a,s,r]}class me extends ae{constructor(t){super(),re(this,t,$e,ge,ne,{session:0})}}function ee(o,t,n){const e=o.slice();return e[5]=t[n],e}function te(o){let t,n;return t=new me({props:{session:o[0]}}),{c(){ce(t.$$.fragment)},l(e){fe(t.$$.fragment,e)},m(e,s){ue(t,e,s),n=!0},p(e,s){const i={};s&1&&(i.session=e[0]),t.$set(i)},i(e){n||(g(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){de(t,e)}}}function Ce(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Ee(o){let t,n,e=X(o[4]),s=[];for(let l=0;l<e.length;l+=1)s[l]=le(ee(o,e,l));const i=l=>T(s[l],1,1,()=>{s[l]=null});return{c(){for(let l=0;l<s.length;l+=1)s[l].c();t=x()},l(l){for(let a=0;a<s.length;a+=1)s[a].l(l);t=x()},m(l,a){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(l,a);q(l,t,a),n=!0},p(l,a){if(a&3){e=X(l[4]);let r;for(r=0;r<e.length;r+=1){const u=ee(l,e,r);s[r]?(s[r].p(u,a),g(s[r],1)):(s[r]=le(u),s[r].c(),g(s[r],1),s[r].m(t.parentNode,t))}for(M(),r=e.length;r<s.length;r+=1)i(r);H()}},i(l){if(!n){for(let a=0;a<e.length;a+=1)g(s[a]);n=!0}},o(l){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)T(s[a]);n=!1},d(l){l&&v(t),pe(s,l)}}}function se(o){let t,n;return t=new me({props:{session:o[5]}}),{c(){ce(t.$$.fragment)},l(e){fe(t.$$.fragment,e)},m(e,s){ue(t,e,s),n=!0},p:h,i(e){n||(g(t.$$.fragment,e),n=!0)},o(e){T(t.$$.fragment,e),n=!1},d(e){de(t,e)}}}function le(o){var s;let t,n,e=o[5]._id!=((s=o[0])==null?void 0:s._id)&&se(o);return{c(){e&&e.c(),t=x()},l(i){e&&e.l(i),t=x()},m(i,l){e&&e.m(i,l),q(i,t,l),n=!0},p(i,l){var a;i[5]._id!=((a=i[0])==null?void 0:a._id)?e?(e.p(i,l),l&1&&g(e,1)):(e=se(i),e.c(),g(e,1),e.m(t.parentNode,t)):e&&(M(),T(e,1,1,()=>{e=null}),H())},i(i){n||(g(e),n=!0)},o(i){T(e),n=!1},d(i){i&&v(t),e&&e.d(i)}}}function we(o){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Te(o){let t,n,e,s,i,l="Revoke all other sessions",a,r,u,c=o[0]!=null&&te(o),d={ctx:o,current:null,token:null,hasCatch:!1,pending:we,then:Ee,catch:Ce,value:4,blocks:[,,,]};return ve(o[1].api.fetchSessions(),d),{c(){t=k("div"),n=k("div"),c&&c.c(),e=I(),d.block.c(),s=I(),i=k("button"),i.textContent=l,this.h()},l(m){t=b(m,"DIV",{class:!0});var f=w(t);n=b(f,"DIV",{class:!0});var V=w(n);c&&c.l(V),V.forEach(v),e=S(f),d.block.l(f),s=S(f),i=b(f,"BUTTON",{"data-svelte-h":!0}),G(i)!=="svelte-dllb2x"&&(i.textContent=l),f.forEach(v),this.h()},h(){E(n,"class","my-4"),E(t,"class","mr-2")},m(m,f){q(m,t,f),_(t,n),c&&c.m(n,null),_(t,e),d.block.m(t,d.anchor=null),d.mount=()=>t,d.anchor=s,_(t,s),_(t,i),a=!0,r||(u=ie(i,"click",o[3]),r=!0)},p(m,[f]){o=m,o[0]!=null?c?(c.p(o,f),f&1&&g(c,1)):(c=te(o),c.c(),g(c,1),c.m(n,null)):c&&(M(),T(c,1,1,()=>{c=null}),H()),ke(d,o,f)},i(m){a||(g(c),g(d.block),a=!0)},o(m){T(c);for(let f=0;f<3;f+=1){const V=d.blocks[f];T(V)}a=!1},d(m){m&&v(t),c&&c.d(),d.block.d(),d.token=null,d=null,r=!1,u()}}}function Ve(o,t,n){let e;const s=A(_e),i=A(he);return oe(o,i,a=>n(0,e=a)),[e,s,i,()=>s.api.revokeAllSessions(!1)]}class Ke extends ae{constructor(t){super(),re(this,t,Ve,Te,ne,{})}}export{Ke as component};
