import{s as ee,j as z,n as f,c as ie}from"../chunks/scheduler.0beedca7.js";import{S as te,i as le,g as w,s as P,m as C,h as D,j as I,c as S,n as E,f as _,k as d,a as p,x as $,o as L,e as N,d as v,t as y,r as q,u as F,v as H,p as ne,b as re,w as K,B as se}from"../chunks/index.433d2ede.js";import{h as M,u as J}from"../chunks/await_block.05af08bd.js";import{e as Q}from"../chunks/each.e59479a4.js";import{T as ce}from"../chunks/TextChat.f9cb5994.js";import{g as R,c as oe}from"../chunks/context.62a025aa.js";import{b as W,g as X,a as ae}from"../chunks/util.68b48a6c.js";import{g as ue}from"../chunks/chunk-NMUKSDLG.3f77d6f4.js";import{s as fe}from"../chunks/context.4d0298a0.js";import{U as _e}from"../chunks/UserButton.7fb67515.js";function me(o){return{c:f,l:f,m:f,p:f,d:f}}function de(o){var r;let t,n=((r=o[2])==null?void 0:r.content)!=null&&Y(o);return{c(){n&&n.c(),t=N()},l(e){n&&n.l(e),t=N()},m(e,l){n&&n.m(e,l),p(e,t,l)},p(e,l){var s;((s=e[2])==null?void 0:s.content)!=null?n?n.p(e,l):(n=Y(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){e&&_(t),n&&n.d(e)}}}function Y(o){let t,n=o[2].content+"",r;return{c(){t=w("p"),r=C(n),this.h()},l(e){t=D(e,"P",{class:!0});var l=I(t);r=E(l,n),l.forEach(_),this.h()},h(){d(t,"class","profile-content svelte-1osmnj4")},m(e,l){p(e,t,l),$(t,r)},p(e,l){l&1&&n!==(n=e[2].content+"")&&L(r,n)},d(e){e&&_(t)}}}function pe(o){return{c:f,l:f,m:f,p:f,d:f}}function he(o){let t,n,r,e,l,s,i,c,a=o[0].username+"",u,b,h=o[0].discriminator+"",j,V,A,U,B,g={ctx:o,current:null,token:null,hasCatch:!1,pending:pe,then:de,catch:me,value:2};return M(B=o[3].fetchUserProfile(o[0]._id),g),{c(){t=w("div"),n=w("img"),e=P(),l=w("h1"),s=C(o[1]),i=P(),c=w("h2"),u=C(a),b=C("#"),j=C(h),A=P(),U=w("div"),g.block.c(),this.h()},l(k){t=D(k,"DIV",{class:!0,style:!0});var m=I(t);n=D(m,"IMG",{class:!0,width:!0,height:!0,src:!0,alt:!0}),e=S(m),l=D(m,"H1",{class:!0});var T=I(l);s=E(T,o[1]),T.forEach(_),i=S(m),c=D(m,"H2",{class:!0});var G=I(c);u=E(G,a),b=E(G,"#"),j=E(G,h),G.forEach(_),m.forEach(_),A=S(k),U=D(k,"DIV",{class:!0});var O=I(U);g.block.l(O),O.forEach(_),this.h()},h(){var k;d(n,"class","cover"),d(n,"width","64px"),d(n,"height","64px"),z(n.src,r=W(o[0]))||d(n,"src",r),d(n,"alt",o[1]),d(l,"class","secondary-fg svelte-1osmnj4"),d(c,"class","secondary-fg svelte-1osmnj4"),d(t,"class","user-detail svelte-1osmnj4"),d(t,"style",V=((k=o[2])==null?void 0:k.background)!=null?`background-image: url(${X(o[2].background)})`:void 0),d(U,"class","profile svelte-1osmnj4")},m(k,m){p(k,t,m),$(t,n),$(t,e),$(t,l),$(l,s),$(t,i),$(t,c),$(c,u),$(c,b),$(c,j),p(k,A,m),p(k,U,m),g.block.m(U,g.anchor=null),g.mount=()=>U,g.anchor=null},p(k,[m]){var T;o=k,m&1&&!z(n.src,r=W(o[0]))&&d(n,"src",r),m&2&&d(n,"alt",o[1]),m&2&&L(s,o[1]),m&1&&a!==(a=o[0].username+"")&&L(u,a),m&1&&h!==(h=o[0].discriminator+"")&&L(j,h),m&4&&V!==(V=((T=o[2])==null?void 0:T.background)!=null?`background-image: url(${X(o[2].background)})`:void 0)&&d(t,"style",V),g.ctx=o,m&1&&B!==(B=o[3].fetchUserProfile(o[0]._id))&&M(B,g)||J(g,o,m)},i:f,o:f,d(k){k&&(_(t),_(A),_(U)),g.block.d(),g.token=null,g=null}}}function be(o,t,n){let r,{user:e}=t;const l=R(oe);let s;return o.$$set=i=>{"user"in i&&n(0,e=i.user)},o.$$.update=()=>{o.$$.dirty&1&&n(1,r=ae(e)),o.$$.dirty&1&&l.fetchUserProfile(e._id).then(i=>n(2,s=i))},[e,r,s,l]}class ke extends te{constructor(t){super(),le(this,t,be,he,ee,{user:0})}}function Z(o,t,n){const r=o.slice();return r[4]=t[n],r}function ge(o){let t,n,r,e,l,s;t=new ce({});const i=[$e,ve],c=[];function a(u,b){var h,j;return((h=u[0])==null?void 0:h.channel_type)=="DirectMessage"?0:((j=u[0])==null?void 0:j.channel_type)=="Group"?1:-1}return~(r=a(o))&&(e=c[r]=i[r](o)),{c(){q(t.$$.fragment),n=P(),e&&e.c(),l=C("1")},l(u){F(t.$$.fragment,u),n=S(u),e&&e.l(u),l=E(u,"1")},m(u,b){H(t,u,b),p(u,n,b),~r&&c[r].m(u,b),p(u,l,b),s=!0},p(u,b){let h=r;r=a(u),r===h?~r&&c[r].p(u,b):(e&&(ne(),y(c[h],1,1,()=>{c[h]=null}),re()),~r?(e=c[r],e?e.p(u,b):(e=c[r]=i[r](u),e.c()),v(e,1),e.m(l.parentNode,l)):e=null)},i(u){s||(v(t.$$.fragment,u),v(e),s=!0)},o(u){y(t.$$.fragment,u),y(e),s=!1},d(u){u&&(_(n),_(l)),K(t,u),~r&&c[r].d(u)}}}function ve(o){let t,n,r,e=Q(o[0].recipients),l=[];for(let i=0;i<e.length;i+=1)l[i]=x(Z(o,e,i));const s=i=>y(l[i],1,1,()=>{l[i]=null});return{c(){t=w("div");for(let i=0;i<l.length;i+=1)l[i].c();n=P(),this.h()},l(i){t=D(i,"DIV",{class:!0});var c=I(t);for(let a=0;a<l.length;a+=1)l[a].l(c);c.forEach(_),n=S(i),this.h()},h(){d(t,"class","members-list-container")},m(i,c){p(i,t,c);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(t,null);p(i,n,c),r=!0},p(i,c){if(c&3){e=Q(i[0].recipients);let a;for(a=0;a<e.length;a+=1){const u=Z(i,e,a);l[a]?(l[a].p(u,c),v(l[a],1)):(l[a]=x(u),l[a].c(),v(l[a],1),l[a].m(t,null))}for(ne(),a=e.length;a<l.length;a+=1)s(a);re()}},i(i){if(!r){for(let c=0;c<e.length;c+=1)v(l[c]);r=!0}},o(i){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)y(l[c]);r=!1},d(i){i&&(_(t),_(n)),se(l,i)}}}function $e(o){let t,n,r,e={ctx:o,current:null,token:null,hasCatch:!0,pending:Ee,then:Ce,catch:De,value:4,blocks:[,,,]};return M(t=o[3](o[0]),e),{c(){e.block.c(),n=P()},l(l){e.block.l(l),n=S(l)},m(l,s){e.block.m(l,e.anchor=s),e.mount=()=>n.parentNode,e.anchor=n,p(l,n,s),r=!0},p(l,s){o=l,e.ctx=o,s&1&&t!==(t=o[3](o[0]))&&M(t,e)||J(e,o,s)},i(l){r||(v(e.block),r=!0)},o(l){for(let s=0;s<3;s+=1){const i=e.blocks[s];y(i)}r=!1},d(l){l&&_(n),e.block.d(l),e.token=null,e=null}}}function ye(o){return{c:f,l:f,m:f,p:f,i:f,o:f,d:f}}function Ue(o){let t,n,r;return t=new _e({props:{user:o[7]}}),{c(){q(t.$$.fragment),n=P()},l(e){F(t.$$.fragment,e),n=S(e)},m(e,l){H(t,e,l),p(e,n,l),r=!0},p(e,l){const s={};l&1&&(s.user=e[7]),t.$set(s)},i(e){r||(v(t.$$.fragment,e),r=!0)},o(e){y(t.$$.fragment,e),r=!1},d(e){e&&_(n),K(t,e)}}}function we(o){return{c:f,l:f,m:f,p:f,i:f,o:f,d:f}}function x(o){let t,n,r,e={ctx:o,current:null,token:null,hasCatch:!1,pending:we,then:Ue,catch:ye,value:7,blocks:[,,,]};return M(n=o[1].fetchUser(o[4]),e),{c(){t=N(),e.block.c()},l(l){t=N(),e.block.l(l)},m(l,s){p(l,t,s),e.block.m(l,e.anchor=s),e.mount=()=>t.parentNode,e.anchor=t,r=!0},p(l,s){o=l,e.ctx=o,s&1&&n!==(n=o[1].fetchUser(o[4]))&&M(n,e)||J(e,o,s)},i(l){r||(v(e.block),r=!0)},o(l){for(let s=0;s<3;s+=1){const i=e.blocks[s];y(i)}r=!1},d(l){l&&_(t),e.block.d(l),e.token=null,e=null}}}function De(o){let t;return{c(){t=C("Failed to load user detail. See console for more info.")},l(n){t=E(n,"Failed to load user detail. See console for more info.")},m(n,r){p(n,t,r)},p:f,i:f,o:f,d(n){n&&_(t)}}}function Ce(o){let t,n,r;return n=new ke({props:{user:o[4]}}),{c(){t=w("div"),q(n.$$.fragment),this.h()},l(e){t=D(e,"DIV",{class:!0});var l=I(t);F(n.$$.fragment,l),l.forEach(_),this.h()},h(){d(t,"class","members-list-container")},m(e,l){p(e,t,l),H(n,t,null),r=!0},p(e,l){const s={};l&1&&(s.user=e[4]),n.$set(s)},i(e){r||(v(n.$$.fragment,e),r=!0)},o(e){y(n.$$.fragment,e),r=!1},d(e){e&&_(t),K(n)}}}function Ee(o){let t;return{c(){t=C("Loading...")},l(n){t=E(n,"Loading...")},m(n,r){p(n,t,r)},p:f,i:f,o:f,d(n){n&&_(t)}}}function je(o){let t,n,r=o[2]!=null&&ge(o);return{c(){r&&r.c(),t=N()},l(e){r&&r.l(e),t=N()},m(e,l){r&&r.m(e,l),p(e,t,l),n=!0},p(e,[l]){e[2]!=null&&r.p(e,l)},i(e){n||(v(r),n=!0)},o(e){y(r),n=!1},d(e){e&&_(t),r&&r.d(e)}}}function Ie(o,t,n){let r;const e=R(oe),l=R(fe);ie(o,l,i=>n(0,r=i));function s(i){return new Promise((c,a)=>{const u=i.recipients.find(b=>{var h;return((h=e.user)==null?void 0:h._id)!=b});if(u==null){a();return}e.fetchUser(u).then(c).catch(a)})}return o.$$.update=()=>{if(o.$$.dirty&1){let i="Jolt - ";(r==null?void 0:r.channel_type)=="SavedMessages"?i+="Saved Messages":(r==null?void 0:r.channel_type)=="Group"&&(i+=r.name),"__TAURI__"in window?ue.setTitle(i):document.title=i}},[r,e,l,s]}class Re extends te{constructor(t){super(),le(this,t,Ie,je,ee,{})}}export{Re as component};
